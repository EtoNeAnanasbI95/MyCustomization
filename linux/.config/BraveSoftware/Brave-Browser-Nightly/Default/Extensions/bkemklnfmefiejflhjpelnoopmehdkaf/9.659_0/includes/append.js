(function(){"use strict";const gn=/vk\.com\/video$/;function ae(n,e,r,t){return new(r||(r=Promise))(function(i,o){function a(u){try{l(t.next(u))}catch(c){o(c)}}function s(u){try{l(t.throw(u))}catch(c){o(c)}}function l(u){var c;u.done?i(u.value):(c=u.value,c instanceof r?c:new r(function(d){d(c)})).then(a,s)}l((t=t.apply(n,e||[])).next())})}const Ve=()=>Array.from(window.document.getElementsByTagName("video")).sort((n,e)=>(n==null?void 0:n.getBoundingClientRect().width)>(e==null?void 0:e.getBoundingClientRect().width)?-1:1)[0],vn=/origin=[a-z1-9\/:.]*/gi;function Xe(n){if(!(n instanceof Element))throw Error("DomUtil: elem is not an element.");const e=getComputedStyle(n);return e.display==="none"||e.visibility!=="visible"}const ye=n=>{const e=n;let r={width:0,height:0,x:0,y:0};if(e!==void 0){const t=(e==null?void 0:e.parentElement)||e;r=(e==null?void 0:e.getBoundingClientRect().width)===0||(e==null?void 0:e.getBoundingClientRect().height)===0?t==null?void 0:t.getBoundingClientRect():e==null?void 0:e.getBoundingClientRect()}return{width:r==null?void 0:r.width,height:r==null?void 0:r.height,x:(r==null?void 0:r.x)+window.pageXOffset,y:(r==null?void 0:r.y)+window.pageYOffset}},Ze=n=>{const e=ye(n);return e.height<1||e.width<1},yn=(n,e)=>ae(void 0,void 0,void 0,function*(){const r=Ve(),t=!(r===void 0||Ze(r)||Xe(r)||r.muted||r.paused),i=[...document.querySelectorAll("iframe")].filter(o=>o.src.includes("youtu"))[0];t&&(yield e({insertTo:{video:r,isYoutubeWrapper:!1},playerInstansParams:n})),i&&(i.src=(o=>{var a,s;if(!o.src.includes("?"))return`${o.src}?origin=*&enablejsapi=1`;const l=!((a=o==null?void 0:o.src)===null||a===void 0)&&a.includes("origin")?(s=o==null?void 0:o.src)===null||s===void 0?void 0:s.replace(vn,"origin=*"):`${o.src}&origin=*`;return l.includes("enablejsapi")?l:`${l}&enablejsapi=1`})(i),yield e({insertTo:{embeded:i,isYoutubeWrapper:!1},playerInstansParams:n}))}),bn=(n,e)=>{let r="";new MutationObserver(()=>{var t;location.href!==r&&(r=location.href,n.previosPlayerDomTarget.src="",(t=n.previosPlayerDomTarget)===null||t===void 0||t.remove(),clearInterval(n.checkInterval),(()=>{const i=document.URL;return gn.test(i)})()||(n.checkInterval=setInterval(()=>yn(n,e),100)))}).observe(document,{subtree:!0,attributes:!1,childList:!0})},Je=()=>{const n=Ve();var e;return n!==void 0&&!document.querySelector('[logo-type="YOUTUBE_PREMIUM_LOGO"]')&&!Ze(n)&&!Xe(n)&&(e=410,ye(n).width>e)&&!(r=>{const t=ye(r);return 1.5*t.width<t.height})(n)&&(()=>{const r=document.URL;return r.includes("/watch")?"watch":/\/(\?:?(?:(.*)?))|\/?$/.test(r)?"main":""})()==="watch"},Me=n=>document.domain.includes(n),Ne=()=>Me("youtube"),et="ADS_SAVE_FROM_DISABLE",tt="LS_W_ON_PAGE";class kn extends Error{constructor(){super(),this.name="NoError"}toString(){return`[object ${this.name}]`}}class Be extends Error{constructor(){super(),this.name="TerminateNoError"}toString(){return`[object ${this.name}]`}}function x(){}function nt(n){return n()}function rt(){return Object.create(null)}function te(n){n.forEach(nt)}function it(n){return typeof n=="function"}function V(n,e){return n!=n?e==e:n!==e||n&&typeof n=="object"||typeof n=="function"}let Ce;function de(n,e){return Ce||(Ce=document.createElement("a")),Ce.href=e,n===Ce.href}function at(n,...e){if(n==null)return x;const r=n.subscribe(...e);return r.unsubscribe?()=>r.unsubscribe():r}function be(n){let e;return at(n,r=>e=r)(),e}function q(n,e,r){n.$$.on_destroy.push(at(e,r))}function ze(n,e,r){return n.set(r),e}let ke,wn=typeof window!="undefined"?n=>requestAnimationFrame(n):x;function k(n,e){n.appendChild(e)}function X(n,e,r){const t=function(i){if(!i)return document;const o=i.getRootNode?i.getRootNode():i.ownerDocument;return o&&o.host?o:i.ownerDocument}(n);if(!t.getElementById(e)){const i=T("style");i.id=e,i.textContent=r,function(o,a){k(o.head||o,a)}(t,i)}}function L(n,e,r){n.insertBefore(e,r||null)}function R(n){n.parentNode.removeChild(n)}function T(n){return document.createElement(n)}function G(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function H(n){return document.createTextNode(n)}function U(){return H(" ")}function Ie(){return H("")}function S(n,e,r,t){return n.addEventListener(e,r,t),()=>n.removeEventListener(e,r,t)}function v(n,e,r){r==null?n.removeAttribute(e):n.getAttribute(e)!==r&&n.setAttribute(e,r)}function J(n,e){e=""+e,n.wholeText!==e&&(n.data=e)}function ot(n,e){n.value=e==null?"":e}function Fe(n,e,r,t){r===null?n.style.removeProperty(e):n.style.setProperty(e,r,t?"important":"")}function we(n){ke=n}function st(){if(!ke)throw new Error("Function called outside component initialization");return ke}function _e(n){st().$$.on_mount.push(n)}function lt(n){st().$$.on_destroy.push(n)}const Ae=[],Te=[],Ue=[],ut=[],An=Promise.resolve();let We=!1;function je(n){Ue.push(n)}const qe=new Set;let Se=0;function ct(){const n=ke;do{for(;Se<Ae.length;){const e=Ae[Se];Se++,we(e),Tn(e.$$)}for(we(null),Ae.length=0,Se=0;Te.length;)Te.pop()();for(let e=0;e<Ue.length;e+=1){const r=Ue[e];qe.has(r)||(qe.add(r),r())}Ue.length=0}while(Ae.length);for(;ut.length;)ut.pop()();We=!1,qe.clear(),we(n)}function Tn(n){if(n.fragment!==null){n.update(),te(n.before_update);const e=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,e),n.after_update.forEach(je)}}const $e=new Set;let se;function xe(){se={r:0,c:[],p:se}}function Ee(){se.r||te(se.c),se=se.p}function N(n,e){n&&n.i&&($e.delete(n),n.i(e))}function C(n,e,r,t){if(n&&n.o){if($e.has(n))return;$e.add(n),se.c.push(()=>{$e.delete(n),t&&(r&&n.d(1),t())}),n.o(e)}}function F(n){n&&n.c()}function M(n,e,r,t){const{fragment:i,on_mount:o,on_destroy:a,after_update:s}=n.$$;i&&i.m(e,r),t||je(()=>{const l=o.map(nt).filter(it);a?a.push(...l):te(l),n.$$.on_mount=[]}),s.forEach(je)}function B(n,e){const r=n.$$;r.fragment!==null&&(te(r.on_destroy),r.fragment&&r.fragment.d(e),r.on_destroy=r.fragment=null,r.ctx=[])}function xn(n,e){n.$$.dirty[0]===-1&&(Ae.push(n),We||(We=!0,An.then(ct)),n.$$.dirty.fill(0)),n.$$.dirty[e/31|0]|=1<<e%31}function _(n,e,r,t,i,o,a,s=[-1]){const l=ke;we(n);const u=n.$$={fragment:null,ctx:null,props:o,update:x,not_equal:i,bound:rt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:rt(),dirty:s,skip_bound:!1,root:e.target||l.$$.root};a&&a(u.root);let c=!1;if(u.ctx=r?r(n,e.props||{},(d,h,...f)=>{const m=f.length?f[0]:h;return u.ctx&&i(u.ctx[d],u.ctx[d]=m)&&(!u.skip_bound&&u.bound[d]&&u.bound[d](m),c&&xn(n,d)),h}):[],u.update(),c=!0,te(u.before_update),u.fragment=!!t&&t(u.ctx),e.target){if(e.hydrate){const d=function(h){return Array.from(h.childNodes)}(e.target);u.fragment&&u.fragment.l(d),d.forEach(R)}else u.fragment&&u.fragment.c();e.intro&&N(n.$$.fragment),M(n,e.target,e.anchor,e.customElement),ct()}we(l)}class W{$destroy(){B(this,1),this.$destroy=x}$on(e,r){const t=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return t.push(r),()=>{const i=t.indexOf(r);i!==-1&&t.splice(i,1)}}$set(e){var r;this.$$set&&(r=e,Object.keys(r).length!==0)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const pe=[];function ee(n,e=x){let r;const t=new Set;function i(o){if(V(n,o)&&(n=o,r)){const a=!pe.length;for(const s of t)s[1](),pe.push(s,n);if(a){for(let s=0;s<pe.length;s+=2)pe[s][0](pe[s+1]);pe.length=0}}}return{set:i,update:function(o){i(o(n))},subscribe:function(o,a=x){const s=[o,a];return t.add(s),t.size===1&&(r=e(i)||x),o(n),()=>{t.delete(s),t.size===0&&(r(),r=null)}}}}var Z,j;(j=Z||(Z={}))["no active campaigns"]="901",j["No ADS in VAST"]="902",j["VAST retry limit"]="903",j["Impression timeout "]="905",j["Can't load VPAID"]="906",j["VPAID is invalid"]="907",j["VPAID timeout"]="908",j["VPAID AdError"]="909",j["Error on init player"]="910",j["VAST error common"]="911",j["No active campaign"]="912",j["User left page"]="913",j["Error restart player"]="914",j["Network error"]="915",j["User disable ads"]="916";class me extends Error{constructor(e){super(e),this.name="TerminateError"}toString(){return`[object ${this.name}]`}}const En=["screen and (min-width:340px)","screen and (min-width:1280px)","screen and (min-width:1920px)"],dt="w-init-t",Rn=/(?:watch\?v=)(.*)/,pt="df-w";class Re extends Error{constructor(e){super(e),this.name="ReinitError"}toString(){return`[object ${this.name}]`}}function mt(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);e&&(t=t.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),r.push.apply(r,t)}return r}function ft(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?mt(Object(r),!0).forEach(function(t){Ln(n,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):mt(Object(r)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(r,t))})}return n}function De(n){return De=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},De(n)}function fe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function ht(n,e){for(var r=0;r<e.length;r++){var t=e[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function he(n,e,r){return e&&ht(n.prototype,e),r&&ht(n,r),n}function Ln(n,e,r){return e in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function gt(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),e&&He(n,e)}function Oe(n){return Oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Oe(n)}function He(n,e){return He=Object.setPrototypeOf||function(r,t){return r.__proto__=t,r},He(n,e)}function Nn(n,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}(n)}function vt(n){var e=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var r,t=Oe(n);if(e){var i=Oe(this).constructor;r=Reflect.construct(t,arguments,i)}else r=t.apply(this,arguments);return Nn(this,r)}}function Ye(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return{id:n.id||null,adId:n.adId||null,sequence:n.sequence||null,apiFramework:n.apiFramework||null,universalAdId:{value:null,idRegistry:"unknown"},creativeExtensions:[]}}var Cn=["ADCATEGORIES","ADCOUNT","ADPLAYHEAD","ADSERVINGID","ADTYPE","APIFRAMEWORKS","APPBUNDLE","ASSETURI","BLOCKEDADCATEGORIES","BREAKMAXADLENGTH","BREAKMAXADS","BREAKMAXDURATION","BREAKMINADLENGTH","BREAKMINDURATION","BREAKPOSITION","CLICKPOS","CLICKTYPE","CLIENTUA","CONTENTID","CONTENTPLAYHEAD","CONTENTURI","DEVICEIP","DEVICEUA","DOMAIN","EXTENSIONS","GDPRCONSENT","IFA","IFATYPE","INVENTORYSTATE","LATLONG","LIMITADTRACKING","MEDIAMIME","MEDIAPLAYHEAD","OMIDPARTNER","PAGEURL","PLACEMENTTYPE","PLAYERCAPABILITIES","PLAYERSIZE","PLAYERSTATE","PODSEQUENCE","REGULATIONS","SERVERSIDE","SERVERUA","TRANSACTIONID","UNIVERSALADID","VASTVERSIONS","VERIFICATIONVENDORS"];function yt(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},t=[],i=wt(n);for(var o in!e.ERRORCODE||r.isCustomCode||/^[0-9]{3}$/.test(e.ERRORCODE)||(e.ERRORCODE=900),e.CACHEBUSTING=Et(Math.round(1e8*Math.random()).toString()),e.TIMESTAMP=new Date().toISOString(),e.RANDOM=e.random=e.CACHEBUSTING,e)e[o]=xt(e[o]);for(var a in i){var s=i[a];typeof s=="string"&&t.push(bt(s,e))}return t}function bt(n,e){var r=(n=kt(n,e)).match(/[^[\]]+(?=])/g);if(!r)return n;var t=r.filter(function(i){return Cn.indexOf(i)>-1});return t.length===0?n:kt(n,t=t.reduce(function(i,o){return i[o]=-1,i},{}))}function kt(n,e){var r=n;for(var t in e){var i=e[t];r=r.replace(new RegExp("(?:\\[|%{2}|%5B)(".concat(t,")(?:\\]|%{2}|%5D)"),"g"),i)}return r}function wt(n){return Array.isArray(n)?n.map(function(e){return e&&e.hasOwnProperty("url")?e.url:e}):n}function At(n,e){for(var r=0;r<e.length;r++)if(Tt(e[r],n))return!0;return!1}function Tt(n,e){if(n&&e){var r=Object.getOwnPropertyNames(n),t=Object.getOwnPropertyNames(e);return r.length===t.length&&n.id===e.id&&n.url===e.url}return!1}function xt(n){return encodeURIComponent(n).replace(/[!'()*]/g,function(e){return"%".concat(e.charCodeAt(0).toString(16))})}function Et(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:8,r=String(n);return r.length<e?Rt(0,e-r.length,!1).map(function(){return"0"}).join("")+r:r}function Rt(n,e,r){for(var t=[],i=n<e,o=r?i?e+1:e-1:e,a=n;i?a<o:a>o;i?a++:a--)t.push(a);return t}var Q={track:function(n,e,r){yt(n,e,r).forEach(function(t){typeof window!="undefined"&&window!==null&&(new Image().src=t)})},resolveURLTemplates:yt,extractURLsFromTemplates:wt,containsTemplateObject:At,isTemplateObjectEqual:Tt,encodeURIComponentRFC3986:xt,replaceUrlMacros:bt,leftpad:Et,range:Rt,isNumeric:function(n){return!isNaN(parseFloat(n))&&isFinite(n)},flatten:function n(e){return e.reduce(function(r,t){return r.concat(Array.isArray(t)?n(t):t)},[])},joinArrayOfUniqueTemplateObjs:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=Array.isArray(n)?n:[],t=Array.isArray(e)?e:[],i=r.concat(t);return i.reduce(function(o,a){return At(a,o)||o.push(a),o},[])}};function Lt(n){return["true","TRUE","True","1"].indexOf(n)!==-1}var p={childByName:function(n,e){var r=n.childNodes;for(var t in r){var i=r[t];if(i.nodeName===e)return i}},childrenByName:function(n,e){var r=[],t=n.childNodes;for(var i in t){var o=t[i];o.nodeName===e&&r.push(o)}return r},resolveVastAdTagURI:function(n,e){if(!e)return n;if(n.indexOf("//")===0){var r=location.protocol;return"".concat(r).concat(n)}if(n.indexOf("://")===-1){var t=e.slice(0,e.lastIndexOf("/"));return"".concat(t,"/").concat(n)}return n},parseBoolean:Lt,parseNodeText:function(n){return n&&(n.textContent||n.text||"").trim()},copyNodeAttribute:function(n,e,r){var t=e.getAttribute(n);t&&r.setAttribute(n,t)},parseAttributes:function(n){for(var e=n.attributes,r={},t=0;t<e.length;t++)r[e[t].nodeName]=e[t].nodeValue;return r},parseDuration:function(n){if(n==null)return-1;if(Q.isNumeric(n))return parseInt(n);var e=n.split(":");if(e.length!==3)return-1;var r=e[2].split("."),t=parseInt(r[0]);r.length===2&&(t+=parseFloat("0.".concat(r[1])));var i=parseInt(60*e[1]),o=parseInt(60*e[0]*60);return isNaN(o)||isNaN(i)||isNaN(t)||i>3600||t>60?-1:o+i+t},splitVAST:function(n){var e=[],r=null;return n.forEach(function(t,i){if(t.sequence&&(t.sequence=parseInt(t.sequence,10)),t.sequence>1){var o=n[i-1];if(o&&o.sequence===t.sequence-1)return void(r&&r.push(t));delete t.sequence}r=[t],e.push(r)}),e},assignAttributes:function(n,e){if(n)for(var r in n){var t=n[r];if(t.nodeName&&t.nodeValue&&e.hasOwnProperty(t.nodeName)){var i=t.nodeValue;typeof e[t.nodeName]=="boolean"&&(i=Lt(i)),e[t.nodeName]=i}}},mergeWrapperAdData:function(n,e){n.errorURLTemplates=e.errorURLTemplates.concat(n.errorURLTemplates),n.impressionURLTemplates=e.impressionURLTemplates.concat(n.impressionURLTemplates),n.extensions=e.extensions.concat(n.extensions),n.followAdditionalWrappers=e.followAdditionalWrappers,n.allowMultipleAds=e.allowMultipleAds,n.fallbackOnNoAd=e.fallbackOnNoAd;var r=(e.creatives||[]).filter(function(a){return a&&a.type==="companion"}),t=r.reduce(function(a,s){return(s.variations||[]).forEach(function(l){(l.companionClickTrackingURLTemplates||[]).forEach(function(u){Q.containsTemplateObject(u,a)||a.push(u)})}),a},[]);n.creatives=r.concat(n.creatives);var i=e.videoClickTrackingURLTemplates&&e.videoClickTrackingURLTemplates.length,o=e.videoCustomClickURLTemplates&&e.videoCustomClickURLTemplates.length;n.creatives.forEach(function(a){if(e.trackingEvents&&e.trackingEvents[a.type])for(var s in e.trackingEvents[a.type]){var l=e.trackingEvents[a.type][s];Array.isArray(a.trackingEvents[s])||(a.trackingEvents[s]=[]),a.trackingEvents[s]=a.trackingEvents[s].concat(l)}a.type==="linear"&&(i&&(a.videoClickTrackingURLTemplates=a.videoClickTrackingURLTemplates.concat(e.videoClickTrackingURLTemplates)),o&&(a.videoCustomClickURLTemplates=a.videoCustomClickURLTemplates.concat(e.videoCustomClickURLTemplates)),!e.videoClickThroughURLTemplate||a.videoClickThroughURLTemplate!==null&&a.videoClickThroughURLTemplate!==void 0||(a.videoClickThroughURLTemplate=e.videoClickThroughURLTemplate)),a.type==="companion"&&t.length&&(a.variations||[]).forEach(function(u){u.companionClickTrackingURLTemplates=Q.joinArrayOfUniqueTemplateObjs(u.companionClickTrackingURLTemplates,t)})}),e.adVerifications&&(n.adVerifications=n.adVerifications.concat(e.adVerifications)),e.blockedAdCategories&&(n.blockedAdCategories=n.blockedAdCategories.concat(e.blockedAdCategories))}};function In(n,e){var r=function(){var t=Ye(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}),i=t.id,o=t.adId,a=t.sequence,s=t.apiFramework;return{id:i,adId:o,sequence:a,apiFramework:s,type:"companion",required:null,variations:[]}}(e);return r.required=n.getAttribute("required")||null,r.variations=p.childrenByName(n,"Companion").map(function(t){var i=function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return{id:s.id||null,adType:"companionAd",width:s.width||0,height:s.height||0,assetWidth:s.assetWidth||null,assetHeight:s.assetHeight||null,expandedWidth:s.expandedWidth||null,expandedHeight:s.expandedHeight||null,apiFramework:s.apiFramework||null,adSlotID:s.adSlotID||null,pxratio:s.pxratio||"1",renderingMode:s.renderingMode||"default",staticResources:[],htmlResources:[],iframeResources:[],adParameters:null,xmlEncoded:null,altText:null,companionClickThroughURLTemplate:null,companionClickTrackingURLTemplates:[],trackingEvents:{}}}(p.parseAttributes(t));i.htmlResources=p.childrenByName(t,"HTMLResource").reduce(function(s,l){var u=p.parseNodeText(l);return u?s.concat(u):s},[]),i.iframeResources=p.childrenByName(t,"IFrameResource").reduce(function(s,l){var u=p.parseNodeText(l);return u?s.concat(u):s},[]),i.staticResources=p.childrenByName(t,"StaticResource").reduce(function(s,l){var u=p.parseNodeText(l);return u?s.concat({url:u,creativeType:l.getAttribute("creativeType")||null}):s},[]),i.altText=p.parseNodeText(p.childByName(t,"AltText"))||null;var o=p.childByName(t,"TrackingEvents");o&&p.childrenByName(o,"Tracking").forEach(function(s){var l=s.getAttribute("event"),u=p.parseNodeText(s);l&&u&&(Array.isArray(i.trackingEvents[l])||(i.trackingEvents[l]=[]),i.trackingEvents[l].push(u))}),i.companionClickTrackingURLTemplates=p.childrenByName(t,"CompanionClickTracking").map(function(s){return{id:s.getAttribute("id")||null,url:p.parseNodeText(s)}}),i.companionClickThroughURLTemplate=p.parseNodeText(p.childByName(t,"CompanionClickThrough"))||null;var a=p.childByName(t,"AdParameters");return a&&(i.adParameters=p.parseNodeText(a),i.xmlEncoded=a.getAttribute("xmlEncoded")||null),i}),r}function Un(n){return n.type==="linear"}function Sn(n,e){var r,t=function(){var c=Ye(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}),d=c.id,h=c.adId,f=c.sequence,m=c.apiFramework;return{id:d,adId:h,sequence:f,apiFramework:m,type:"linear",duration:0,skipDelay:null,mediaFiles:[],mezzanine:null,interactiveCreativeFile:null,closedCaptionFiles:[],videoClickThroughURLTemplate:null,videoClickTrackingURLTemplates:[],videoCustomClickURLTemplates:[],adParameters:null,icons:[],trackingEvents:{}}}(e);t.duration=p.parseDuration(p.parseNodeText(p.childByName(n,"Duration")));var i=n.getAttribute("skipoffset");if(i==null)t.skipDelay=null;else if(i.charAt(i.length-1)==="%"&&t.duration!==-1){var o=parseInt(i,10);t.skipDelay=t.duration*(o/100)}else t.skipDelay=p.parseDuration(i);var a=p.childByName(n,"VideoClicks");if(a){var s=p.childByName(a,"ClickThrough");t.videoClickThroughURLTemplate=s?{id:s.getAttribute("id")||null,url:p.parseNodeText(s)}:null,p.childrenByName(a,"ClickTracking").forEach(function(c){t.videoClickTrackingURLTemplates.push({id:c.getAttribute("id")||null,url:p.parseNodeText(c)})}),p.childrenByName(a,"CustomClick").forEach(function(c){t.videoCustomClickURLTemplates.push({id:c.getAttribute("id")||null,url:p.parseNodeText(c)})})}var l=p.childByName(n,"AdParameters");l&&(t.adParameters=p.parseNodeText(l)),p.childrenByName(n,"TrackingEvents").forEach(function(c){p.childrenByName(c,"Tracking").forEach(function(d){var h=d.getAttribute("event"),f=p.parseNodeText(d);if(h&&f){if(h==="progress"){if(!(r=d.getAttribute("offset")))return;h=r.charAt(r.length-1)==="%"?"progress-".concat(r):"progress-".concat(Math.round(p.parseDuration(r)))}Array.isArray(t.trackingEvents[h])||(t.trackingEvents[h]=[]),t.trackingEvents[h].push(f)}})}),p.childrenByName(n,"MediaFiles").forEach(function(c){p.childrenByName(c,"MediaFile").forEach(function(b){t.mediaFiles.push(function(w){var A={id:null,fileURL:null,fileSize:0,deliveryType:"progressive",mimeType:null,mediaType:null,codec:null,bitrate:0,minBitrate:0,maxBitrate:0,width:0,height:0,apiFramework:null,scalable:null,maintainAspectRatio:null};A.id=w.getAttribute("id"),A.fileURL=p.parseNodeText(w),A.deliveryType=w.getAttribute("delivery"),A.codec=w.getAttribute("codec"),A.mimeType=w.getAttribute("type"),A.mediaType=w.getAttribute("mediaType")||"2D",A.apiFramework=w.getAttribute("apiFramework"),A.fileSize=parseInt(w.getAttribute("fileSize")||0),A.bitrate=parseInt(w.getAttribute("bitrate")||0),A.minBitrate=parseInt(w.getAttribute("minBitrate")||0),A.maxBitrate=parseInt(w.getAttribute("maxBitrate")||0),A.width=parseInt(w.getAttribute("width")||0),A.height=parseInt(w.getAttribute("height")||0);var E=w.getAttribute("scalable");E&&typeof E=="string"&&(A.scalable=p.parseBoolean(E));var y=w.getAttribute("maintainAspectRatio");return y&&typeof y=="string"&&(A.maintainAspectRatio=p.parseBoolean(y)),A}(b))});var d=p.childByName(c,"InteractiveCreativeFile");d&&(t.interactiveCreativeFile=function(b){var w=function(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return{type:A.type||null,apiFramework:A.apiFramework||null,variableDuration:p.parseBoolean(A.variableDuration),fileURL:null}}(p.parseAttributes(b));return w.fileURL=p.parseNodeText(b),w}(d));var h=p.childByName(c,"ClosedCaptionFiles");h&&p.childrenByName(h,"ClosedCaptionFile").forEach(function(b){var w=function(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return{type:A.type||null,language:A.language||null,fileURL:null}}(p.parseAttributes(b));w.fileURL=p.parseNodeText(b),t.closedCaptionFiles.push(w)});var f=p.childByName(c,"Mezzanine"),m=function(b,w){var A={},E=!1;return w.forEach(function(y){b&&b.getAttribute(y)?A[y]=b.getAttribute(y):E=!0}),E?null:A}(f,["delivery","type","width","height"]);if(m){var g={id:null,fileURL:null,delivery:null,codec:null,type:null,width:0,height:0,fileSize:0,mediaType:"2D"};g.id=f.getAttribute("id"),g.fileURL=p.parseNodeText(f),g.delivery=m.delivery,g.codec=f.getAttribute("codec"),g.type=m.type,g.width=parseInt(m.width,10),g.height=parseInt(m.height,10),g.fileSize=parseInt(f.getAttribute("fileSize"),10),g.mediaType=f.getAttribute("mediaType")||"2D",t.mezzanine=g}});var u=p.childByName(n,"Icons");return u&&p.childrenByName(u,"Icon").forEach(function(c){t.icons.push(function(d){var h={program:null,height:0,width:0,xPosition:0,yPosition:0,apiFramework:null,offset:null,duration:0,type:null,staticResource:null,htmlResource:null,iframeResource:null,pxratio:"1",iconClickThroughURLTemplate:null,iconClickTrackingURLTemplates:[],iconViewTrackingURLTemplate:null};h.program=d.getAttribute("program"),h.height=parseInt(d.getAttribute("height")||0),h.width=parseInt(d.getAttribute("width")||0),h.xPosition=function(m){return["left","right"].indexOf(m)!==-1?m:parseInt(m||0)}(d.getAttribute("xPosition")),h.yPosition=function(m){return["top","bottom"].indexOf(m)!==-1?m:parseInt(m||0)}(d.getAttribute("yPosition")),h.apiFramework=d.getAttribute("apiFramework"),h.pxratio=d.getAttribute("pxratio")||"1",h.offset=p.parseDuration(d.getAttribute("offset")),h.duration=p.parseDuration(d.getAttribute("duration")),p.childrenByName(d,"HTMLResource").forEach(function(m){h.type=m.getAttribute("creativeType")||"text/html",h.htmlResource=p.parseNodeText(m)}),p.childrenByName(d,"IFrameResource").forEach(function(m){h.type=m.getAttribute("creativeType")||0,h.iframeResource=p.parseNodeText(m)}),p.childrenByName(d,"StaticResource").forEach(function(m){h.type=m.getAttribute("creativeType")||0,h.staticResource=p.parseNodeText(m)});var f=p.childByName(d,"IconClicks");return f&&(h.iconClickThroughURLTemplate=p.parseNodeText(p.childByName(f,"IconClickThrough")),p.childrenByName(f,"IconClickTracking").forEach(function(m){h.iconClickTrackingURLTemplates.push({id:m.getAttribute("id")||null,url:p.parseNodeText(m)})})),h.iconViewTrackingURLTemplate=p.parseNodeText(p.childByName(d,"IconViewTracking")),h}(c))}),t}function $n(n,e){var r=function(){var t=Ye(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}),i=t.id,o=t.adId,a=t.sequence,s=t.apiFramework;return{id:i,adId:o,sequence:a,apiFramework:s,type:"nonlinear",variations:[],trackingEvents:{}}}(e);return p.childrenByName(n,"TrackingEvents").forEach(function(t){var i,o;p.childrenByName(t,"Tracking").forEach(function(a){i=a.getAttribute("event"),o=p.parseNodeText(a),i&&o&&(Array.isArray(r.trackingEvents[i])||(r.trackingEvents[i]=[]),r.trackingEvents[i].push(o))})}),p.childrenByName(n,"NonLinear").forEach(function(t){var i={id:null,width:0,height:0,expandedWidth:0,expandedHeight:0,scalable:!0,maintainAspectRatio:!0,minSuggestedDuration:0,apiFramework:"static",adType:"nonLinearAd",type:null,staticResource:null,htmlResource:null,iframeResource:null,nonlinearClickThroughURLTemplate:null,nonlinearClickTrackingURLTemplates:[],adParameters:null};i.id=t.getAttribute("id")||null,i.width=t.getAttribute("width"),i.height=t.getAttribute("height"),i.expandedWidth=t.getAttribute("expandedWidth"),i.expandedHeight=t.getAttribute("expandedHeight"),i.scalable=p.parseBoolean(t.getAttribute("scalable")),i.maintainAspectRatio=p.parseBoolean(t.getAttribute("maintainAspectRatio")),i.minSuggestedDuration=p.parseDuration(t.getAttribute("minSuggestedDuration")),i.apiFramework=t.getAttribute("apiFramework"),p.childrenByName(t,"HTMLResource").forEach(function(a){i.type=a.getAttribute("creativeType")||"text/html",i.htmlResource=p.parseNodeText(a)}),p.childrenByName(t,"IFrameResource").forEach(function(a){i.type=a.getAttribute("creativeType")||0,i.iframeResource=p.parseNodeText(a)}),p.childrenByName(t,"StaticResource").forEach(function(a){i.type=a.getAttribute("creativeType")||0,i.staticResource=p.parseNodeText(a)});var o=p.childByName(t,"AdParameters");o&&(i.adParameters=p.parseNodeText(o)),i.nonlinearClickThroughURLTemplate=p.parseNodeText(p.childByName(t,"NonLinearClickThrough")),p.childrenByName(t,"NonLinearClickTracking").forEach(function(a){i.nonlinearClickTrackingURLTemplates.push({id:a.getAttribute("id")||null,url:p.parseNodeText(a)})}),r.variations.push(i)}),r}function Nt(n){var e=[];return n.forEach(function(r){var t=Ct(r);t&&e.push(t)}),e}function Ct(n){if(n.nodeName==="#comment")return null;var e,r={name:null,value:null,attributes:{},children:[]},t=n.attributes,i=n.childNodes;if(r.name=n.nodeName,n.attributes){for(var o in t)if(t.hasOwnProperty(o)){var a=t[o];a.nodeName&&a.nodeValue&&(r.attributes[a.nodeName]=a.nodeValue)}}for(var s in i)if(i.hasOwnProperty(s)){var l=Ct(i[s]);l&&r.children.push(l)}if(r.children.length===0||r.children.length===1&&["#cdata-section","#text"].indexOf(r.children[0].name)>=0){var u=p.parseNodeText(n);u!==""&&(r.value=u),r.children=[]}return(e=r).value===null&&Object.keys(e.attributes).length===0&&e.children.length===0?null:r}function Dn(n){var e=[];return n.forEach(function(r){var t,i,o={id:r.getAttribute("id")||null,adId:On(r),sequence:r.getAttribute("sequence")||null,apiFramework:r.getAttribute("apiFramework")||null},a=p.childByName(r,"UniversalAdId");a&&(t={idRegistry:a.getAttribute("idRegistry")||"unknown",value:p.parseNodeText(a)});var s=p.childByName(r,"CreativeExtensions");for(var l in s&&(i=Nt(p.childrenByName(s,"CreativeExtension"))),r.childNodes){var u=r.childNodes[l],c=void 0;switch(u.nodeName){case"Linear":c=Sn(u,o);break;case"NonLinearAds":c=$n(u,o);break;case"CompanionAds":c=In(u,o)}c&&(t&&(c.universalAdId=t),i&&(c.creativeExtensions=i),e.push(c))}}),e}function On(n){return n.getAttribute("AdID")||n.getAttribute("adID")||n.getAttribute("adId")||null}var Pe={Wrapper:{subElements:["VASTAdTagURI","Impression"]},BlockedAdCategories:{attributes:["authority"]},InLine:{subElements:["AdSystem","AdTitle","Impression","AdServingId","Creatives"]},Category:{attributes:["authority"]},Pricing:{attributes:["model","currency"]},Verification:{oneOfinLineResources:["JavaScriptResource","ExecutableResource"],attributes:["vendor"]},UniversalAdId:{attributes:["idRegistry"]},JavaScriptResource:{attributes:["apiFramework","browserOptional"]},ExecutableResource:{attributes:["apiFramework","type"]},Tracking:{attributes:["event"]},Creatives:{subElements:["Creative"]},Creative:{subElements:["UniversalAdId"]},Linear:{subElements:["MediaFiles","Duration"]},MediaFiles:{subElements:["MediaFile"]},MediaFile:{attributes:["delivery","type","width","height"]},Mezzanine:{attributes:["delivery","type","width","height"]},NonLinear:{oneOfinLineResources:["StaticResource","IFrameResource","HTMLResource"],attributes:["width","height"]},Companion:{oneOfinLineResources:["StaticResource","IFrameResource","HTMLResource"],attributes:["width","height"]},StaticResource:{attributes:["creativeType"]},Icons:{subElements:["Icon"]},Icon:{oneOfinLineResources:["StaticResource","IFrameResource","HTMLResource"]}};function It(n,e){if(Pe[n.nodeName]&&Pe[n.nodeName].attributes){var r=Pe[n.nodeName].attributes.filter(function(t){return!n.getAttribute(t)});r.length>0&&Le({name:n.nodeName,parentName:n.parentNode.nodeName,attributes:r},e)}}function Ut(n,e,r){var t=Pe[n.nodeName],i=!r&&n.nodeName!=="Wrapper";if(t&&!i){if(t.subElements){var o=t.subElements.filter(function(a){return!p.childByName(n,a)});o.length>0&&Le({name:n.nodeName,parentName:n.parentNode.nodeName,subElements:o},e)}r&&t.oneOfinLineResources&&(t.oneOfinLineResources.some(function(a){return p.childByName(n,a)})||Le({name:n.nodeName,parentName:n.parentNode.nodeName,oneOfResources:t.oneOfinLineResources},e))}}function St(n){return n.children&&n.children.length!==0}function Le(n,e){var r=n.name,t=n.parentName,i=n.attributes,o=n.subElements,a=n.oneOfResources,s="Element '".concat(r,"'");e("VAST-warning",{message:s+=i?" missing required attribute(s) '".concat(i.join(", "),"' "):o?" missing required sub element(s) '".concat(o.join(", "),"' "):a?" must provide one of the following '".concat(a.join(", "),"' "):" is empty",parentElement:t,specVersion:4.1})}var Pn={verifyRequiredValues:function n(e,r,t){if(e&&e.nodeName)if(e.nodeName==="InLine"&&(t=!0),It(e,r),St(e)){Ut(e,r,t);for(var i=0;i<e.children.length;i++)n(e.children[i],r,t)}else p.parseNodeText(e).length===0&&Le({name:e.nodeName,parentName:e.parentNode.nodeName},r)},hasSubElements:St,emitMissingValueWarning:Le,verifyRequiredAttributes:It,verifyRequiredSubElements:Ut};function Vn(n,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},t=r.allowMultipleAds,i=r.followAdditionalWrappers,o=n.childNodes;for(var a in o){var s=o[a];if(["Wrapper","InLine"].indexOf(s.nodeName)!==-1&&(s.nodeName!=="Wrapper"||i!==!1)){if(p.copyNodeAttribute("id",n,s),p.copyNodeAttribute("sequence",n,s),p.copyNodeAttribute("adType",n,s),s.nodeName==="Wrapper")return{ad:Bn(s,e),type:"WRAPPER"};if(s.nodeName==="InLine")return{ad:Mn(s,e,{allowMultipleAds:t}),type:"INLINE"}}}}function Mn(n,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},t=r.allowMultipleAds;return t===!1&&n.getAttribute("sequence")?null:$t(n,e)}function $t(n,e){var r=[];e&&Pn.verifyRequiredValues(n,e);var t=n.childNodes,i=function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return{id:l.id||null,sequence:l.sequence||null,adType:l.adType||null,adServingId:null,categories:[],expires:null,viewableImpression:{},system:null,title:null,description:null,advertiser:null,pricing:null,survey:null,errorURLTemplates:[],impressionURLTemplates:[],creatives:[],extensions:[],adVerifications:[],blockedAdCategories:[],followAdditionalWrappers:!0,allowMultipleAds:!1,fallbackOnNoAd:null}}(p.parseAttributes(n));for(var o in t){var a=t[o];switch(a.nodeName){case"Error":i.errorURLTemplates.push(p.parseNodeText(a));break;case"Impression":i.impressionURLTemplates.push({id:a.getAttribute("id")||null,url:p.parseNodeText(a)});break;case"Creatives":i.creatives=Dn(p.childrenByName(a,"Creative"));break;case"Extensions":var s=p.childrenByName(a,"Extension");i.extensions=Nt(s),i.adVerifications.length||(r=zn(s));break;case"AdVerifications":i.adVerifications=Dt(p.childrenByName(a,"Verification"));break;case"AdSystem":i.system={value:p.parseNodeText(a),version:a.getAttribute("version")||null};break;case"AdTitle":i.title=p.parseNodeText(a);break;case"AdServingId":i.adServingId=p.parseNodeText(a);break;case"Category":i.categories.push({authority:a.getAttribute("authority")||null,value:p.parseNodeText(a)});break;case"Expires":i.expires=parseInt(p.parseNodeText(a),10);break;case"ViewableImpression":i.viewableImpression=Fn(a);break;case"Description":i.description=p.parseNodeText(a);break;case"Advertiser":i.advertiser={id:a.getAttribute("id")||null,value:p.parseNodeText(a)};break;case"Pricing":i.pricing={value:p.parseNodeText(a),model:a.getAttribute("model")||null,currency:a.getAttribute("currency")||null};break;case"Survey":i.survey=p.parseNodeText(a);break;case"BlockedAdCategories":i.blockedAdCategories.push({authority:a.getAttribute("authority")||null,value:p.parseNodeText(a)})}}return r.length&&(i.adVerifications=i.adVerifications.concat(r)),i}function Bn(n,e){var r=$t(n,e),t=n.getAttribute("followAdditionalWrappers"),i=n.getAttribute("allowMultipleAds"),o=n.getAttribute("fallbackOnNoAd");r.followAdditionalWrappers=!t||p.parseBoolean(t),r.allowMultipleAds=!!i&&p.parseBoolean(i),r.fallbackOnNoAd=o?p.parseBoolean(o):null;var a=p.childByName(n,"VASTAdTagURI");if(a?r.nextWrapperURL=p.parseNodeText(a):(a=p.childByName(n,"VASTAdTagURL"))&&(r.nextWrapperURL=p.parseNodeText(p.childByName(a,"URL"))),r.creatives.forEach(function(s){if(["linear","nonlinear"].indexOf(s.type)!==-1){if(s.trackingEvents){r.trackingEvents||(r.trackingEvents={}),r.trackingEvents[s.type]||(r.trackingEvents[s.type]={});var l=function(c){var d=s.trackingEvents[c];Array.isArray(r.trackingEvents[s.type][c])||(r.trackingEvents[s.type][c]=[]),d.forEach(function(h){r.trackingEvents[s.type][c].push(h)})};for(var u in s.trackingEvents)l(u)}s.videoClickTrackingURLTemplates&&(Array.isArray(r.videoClickTrackingURLTemplates)||(r.videoClickTrackingURLTemplates=[]),s.videoClickTrackingURLTemplates.forEach(function(c){r.videoClickTrackingURLTemplates.push(c)})),s.videoClickThroughURLTemplate&&(r.videoClickThroughURLTemplate=s.videoClickThroughURLTemplate),s.videoCustomClickURLTemplates&&(Array.isArray(r.videoCustomClickURLTemplates)||(r.videoCustomClickURLTemplates=[]),s.videoCustomClickURLTemplates.forEach(function(c){r.videoCustomClickURLTemplates.push(c)}))}}),r.nextWrapperURL)return r}function Dt(n){var e=[];return n.forEach(function(r){var t={resource:null,vendor:null,browserOptional:!1,apiFramework:null,type:null,parameters:null,trackingEvents:{}},i=r.childNodes;for(var o in p.assignAttributes(r.attributes,t),i){var a=i[o];switch(a.nodeName){case"JavaScriptResource":case"ExecutableResource":t.resource=p.parseNodeText(a),p.assignAttributes(a.attributes,t);break;case"VerificationParameters":t.parameters=p.parseNodeText(a)}}var s=p.childByName(r,"TrackingEvents");s&&p.childrenByName(s,"Tracking").forEach(function(l){var u=l.getAttribute("event"),c=p.parseNodeText(l);u&&c&&(Array.isArray(t.trackingEvents[u])||(t.trackingEvents[u]=[]),t.trackingEvents[u].push(c))}),e.push(t)}),e}function zn(n){var e=null,r=[];return n.some(function(t){return e=p.childByName(t,"AdVerifications")}),e&&(r=Dt(p.childrenByName(e,"Verification"))),r}function Fn(n){var e={};e.id=n.getAttribute("id")||null;var r=n.childNodes;for(var t in r){var i=r[t],o=i.nodeName,a=p.parseNodeText(i);if((o==="Viewable"||o==="NotViewable"||o==="ViewUndetermined")&&a){var s=o.toLowerCase();Array.isArray(e[s])||(e[s]=[]),e[s].push(a)}}return e}var Ot=function(){function n(){fe(this,n),this._handlers=[]}return he(n,[{key:"on",value:function(e,r){if(typeof r!="function")throw new TypeError("The handler argument must be of type Function. Received type ".concat(De(r)));if(!e)throw new TypeError("The event argument must be of type String. Received type ".concat(De(e)));return this._handlers.push({event:e,handler:r}),this}},{key:"once",value:function(e,r){return this.on(e,function(t,i,o){var a={fired:!1,wrapFn:void 0};function s(){a.fired||(t.off(i,a.wrapFn),a.fired=!0,o.bind(t).apply(void 0,arguments))}return a.wrapFn=s,s}(this,e,r))}},{key:"off",value:function(e,r){return this._handlers=this._handlers.filter(function(t){return t.event!==e||t.handler!==r}),this}},{key:"emit",value:function(e){for(var r=arguments.length,t=new Array(r>1?r-1:0),i=1;i<r;i++)t[i-1]=arguments[i];var o=!1;return this._handlers.forEach(function(a){a.event==="*"&&(o=!0,a.handler.apply(a,[e].concat(t))),a.event===e&&(o=!0,a.handler.apply(a,t))}),o}},{key:"removeAllListeners",value:function(e){return e?(this._handlers=this._handlers.filter(function(r){return r.event!==e}),this):(this._handlers=[],this)}},{key:"listenerCount",value:function(e){return this._handlers.filter(function(r){return r.event===e}).length}},{key:"listeners",value:function(e){return this._handlers.reduce(function(r,t){return t.event===e&&r.push(t.handler),r},[])}},{key:"eventNames",value:function(){return this._handlers.map(function(e){return e.event})}}]),n}(),_n={get:function(n,e,r){r(new Error("Please bundle the library for node to use the node urlHandler"))}},Pt=12e4,Wn=function(){function n(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};fe(this,n),this.timeout=e.seconds||Pt,this.timeoutID=void 0}return he(n,[{key:"start",get:function(){var e=this;return new Promise(function(r,t){e.timeoutID=setTimeout(function(){var i="XHRURLHandler: Request timed out after ".concat(e.timeout," ms (408)");t(new Error(i))},e.timeout)})}},{key:"clear",value:function(){this.timeoutID&&clearTimeout(this.timeoutID)}}]),n}(),jn={get:function(n,e,r){if(window.location.protocol==="https:"&&n.indexOf("http://")===0)return r(new Error("XHRURLHandler: Cannot go from HTTPS to HTTP."));var t=e.withCredentials?"include":"omit",i=e.withCredentials?"cors":"no-cors",o=new Wn({seconds:e.timeout});try{Promise.race([fetch(n,{mode:i,credentials:t}),o.start]).then(function(a){if(a.status===200)return a.text();var s="XHRURLHandler: ".concat(a.statusText," (").concat(a.status,")");reject(new Error(s))}).then(function(a){return new window.DOMParser().parseFromString(a,"text/xml")}).then(function(a){(function(s,l){l(null,s,{byteLength:s==null?void 0:s.length,statusCode:200})})(a,r),resolve()}).catch(function(a){return r(new Error(a.message))})}catch{r(new Error("XHRURLHandler: Unexpected error"))}},supported:function(){return!0}},qn={get:function(n,e,r){return r||(typeof e=="function"&&(r=e),e={}),typeof window=="undefined"||window===null?_n.get(n,e,r):jn.get(n,e,r)}},Vt=0,Ge=0,Mt=function(n,e){!n||!e||n<=0||e<=0||(Ge=(Ge*Vt+8*n/e)/++Vt)},Hn={ERRORCODE:900,extensions:[]},Yn=function(n){gt(r,n);var e=vt(r);function r(){var t;return fe(this,r),(t=e.call(this)).remainingAds=[],t.parentURLs=[],t.errorURLTemplates=[],t.rootErrorURLTemplates=[],t.maxWrapperDepth=null,t.URLTemplateFilters=[],t.fetchingOptions={},t.parsingOptions={},t}return he(r,[{key:"addURLTemplateFilter",value:function(t){typeof t=="function"&&this.URLTemplateFilters.push(t)}},{key:"removeURLTemplateFilter",value:function(){this.URLTemplateFilters.pop()}},{key:"countURLTemplateFilters",value:function(){return this.URLTemplateFilters.length}},{key:"clearURLTemplateFilters",value:function(){this.URLTemplateFilters=[]}},{key:"trackVastError",value:function(t,i){for(var o=arguments.length,a=new Array(o>2?o-2:0),s=2;s<o;s++)a[s-2]=arguments[s];this.emit("VAST-error",Object.assign.apply(Object,[{},Hn,i].concat(a))),Q.track(t,i)}},{key:"getErrorURLTemplates",value:function(){return this.rootErrorURLTemplates.concat(this.errorURLTemplates)}},{key:"getEstimatedBitrate",value:function(){return Ge}},{key:"fetchVAST",value:function(t){var i=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;return new Promise(function(s,l){i.URLTemplateFilters.forEach(function(c){t=c(t)}),i.parentURLs.push(t);var u=Date.now();i.emit("VAST-resolving",{url:t,previousUrl:a,wrapperDepth:o,maxWrapperDepth:i.maxWrapperDepth,timeout:i.fetchingOptions.timeout}),i.urlHandler.get(t,i.fetchingOptions,function(c,d){var h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},f=Math.round(Date.now()-u),m=Object.assign({url:t,previousUrl:a,wrapperDepth:o,error:c,duration:f},h);i.emit("VAST-resolved",m),Mt(h.byteLength,f),c?l(c):s(d)})})}},{key:"initParsingStatus",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.errorURLTemplates=[],this.fetchingOptions={timeout:t.timeout||Pt,withCredentials:t.withCredentials},this.maxWrapperDepth=t.wrapperLimit||10,this.parentURLs=[],this.parsingOptions={allowMultipleAds:t.allowMultipleAds},this.remainingAds=[],this.rootErrorURLTemplates=[],this.rootURL="",this.urlHandler=t.urlHandler||t.urlhandler||qn,this.vastVersion=null,Mt(t.byteLength,t.requestDuration)}},{key:"getRemainingAds",value:function(t){var i=this;if(this.remainingAds.length===0)return Promise.reject(new Error("No more ads are available for the given VAST"));var o=t?Q.flatten(this.remainingAds):this.remainingAds.shift();return this.errorURLTemplates=[],this.parentURLs=[],this.resolveAds(o,{wrapperDepth:0,url:this.rootURL}).then(function(a){return i.buildVASTResponse(a)})}},{key:"getAndParseVAST",value:function(t){var i=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.initParsingStatus(o),this.URLTemplateFilters.forEach(function(a){t=a(t)}),this.rootURL=t,this.fetchVAST(t).then(function(a){return o.previousUrl=t,o.isRootVAST=!0,o.url=t,i.parse(a,o).then(function(s){return i.buildVASTResponse(s)})})}},{key:"parseVAST",value:function(t){var i=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.initParsingStatus(o),o.isRootVAST=!0,this.parse(t,o).then(function(a){return i.buildVASTResponse(a)})}},{key:"buildVASTResponse",value:function(t){var i,o={ads:(i={ads:t,errorURLTemplates:this.getErrorURLTemplates(),version:this.vastVersion}).ads||[],errorURLTemplates:i.errorURLTemplates||[],version:i.version||null};return this.completeWrapperResolving(o),o}},{key:"parseVastXml",value:function(t,i){var o=i.isRootVAST,a=o!==void 0&&o,s=i.url,l=s===void 0?null:s,u=i.wrapperDepth,c=u===void 0?0:u,d=i.allowMultipleAds,h=i.followAdditionalWrappers;if(!t||!t.documentElement||t.documentElement.nodeName!=="VAST")throw this.emit("VAST-ad-parsed",{type:"ERROR",url:l,wrapperDepth:c}),new Error("Invalid VAST XMLDocument");var f=[],m=t.documentElement.childNodes,g=t.documentElement.getAttribute("version");for(var b in a&&g&&(this.vastVersion=g),m){var w=m[b];if(w.nodeName==="Error"){var A=p.parseNodeText(w);a?this.rootErrorURLTemplates.push(A):this.errorURLTemplates.push(A)}else if(w.nodeName==="Ad"){if(this.vastVersion&&parseFloat(this.vastVersion)<3)d=!0;else if(d===!1&&f.length>1)break;var E=Vn(w,this.emit.bind(this),{allowMultipleAds:d,followAdditionalWrappers:h});E.ad?(f.push(E.ad),this.emit("VAST-ad-parsed",{type:E.type,url:l,wrapperDepth:c,adIndex:f.length-1,vastVersion:g})):this.trackVastError(this.getErrorURLTemplates(),{ERRORCODE:101})}}return f}},{key:"parse",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.url,a=o===void 0?null:o,s=i.resolveAll,l=s===void 0||s,u=i.wrapperSequence,c=u===void 0?null:u,d=i.previousUrl,h=d===void 0?null:d,f=i.wrapperDepth,m=f===void 0?0:f,g=i.isRootVAST,b=g!==void 0&&g,w=i.followAdditionalWrappers,A=i.allowMultipleAds,E=[];this.vastVersion&&parseFloat(this.vastVersion)<3&&b&&(A=!0);try{E=this.parseVastXml(t,{isRootVAST:b,url:a,wrapperDepth:m,allowMultipleAds:A,followAdditionalWrappers:w})}catch(y){return Promise.reject(y)}return E.length===1&&c!=null&&(E[0].sequence=c),l===!1&&(this.remainingAds=p.splitVAST(E),E=this.remainingAds.shift()),this.resolveAds(E,{wrapperDepth:m,previousUrl:h,url:a})}},{key:"resolveAds",value:function(){var t=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],o=arguments.length>1?arguments[1]:void 0,a=o.wrapperDepth,s=o.previousUrl,l=o.url,u=[];return s=l,i.forEach(function(c){var d=t.resolveWrappers(c,a,s);u.push(d)}),Promise.all(u).then(function(c){var d=Q.flatten(c);if(!d&&t.remainingAds.length>0){var h=t.remainingAds.shift();return t.resolveAds(h,{wrapperDepth:a,previousUrl:s,url:l})}return d})}},{key:"resolveWrappers",value:function(t,i,o){var a=this;return new Promise(function(s){var l;if(i++,!t.nextWrapperURL)return delete t.nextWrapperURL,s(t);if(i>=a.maxWrapperDepth||a.parentURLs.indexOf(t.nextWrapperURL)!==-1)return t.errorCode=302,delete t.nextWrapperURL,s(t);t.nextWrapperURL=p.resolveVastAdTagURI(t.nextWrapperURL,o),a.URLTemplateFilters.forEach(function(d){t.nextWrapperURL=d(t.nextWrapperURL)});var u=(l=a.parsingOptions.allowMultipleAds)!==null&&l!==void 0?l:t.allowMultipleAds,c=t.sequence;a.fetchVAST(t.nextWrapperURL,i,o).then(function(d){return a.parse(d,{url:t.nextWrapperURL,previousUrl:o,wrapperSequence:c,wrapperDepth:i,followAdditionalWrappers:t.followAdditionalWrappers,allowMultipleAds:u}).then(function(h){if(delete t.nextWrapperURL,h.length===0)return t.creatives=[],s(t);h.forEach(function(f){f&&p.mergeWrapperAdData(f,t)}),s(h)})}).catch(function(d){t.errorCode=301,t.errorMessage=d.message,s(t)})})}},{key:"completeWrapperResolving",value:function(t){if(t.ads.length===0)this.trackVastError(t.errorURLTemplates,{ERRORCODE:303});else for(var i=t.ads.length-1;i>=0;i--){var o=t.ads[i];(o.errorCode||o.creatives.length===0)&&(this.trackVastError(o.errorURLTemplates.concat(t.errorURLTemplates),{ERRORCODE:o.errorCode||303},{ERRORMESSAGE:o.errorMessage||""},{extensions:o.extensions},{system:o.system}),t.ads.splice(i,1))}}}]),r}(Ot),oe=null,Gn={data:{},length:0,getItem:function(n){return this.data[n]},setItem:function(n,e){this.data[n]=e,this.length=Object.keys(this.data).length},removeItem:function(n){delete this.data[n],this.length=Object.keys(this.data).length},clear:function(){this.data={},this.length=0}},Qn=function(){function n(){fe(this,n),this.storage=this.initStorage()}return he(n,[{key:"initStorage",value:function(){if(oe)return oe;try{oe=typeof window!="undefined"&&window!==null?window.localStorage||window.sessionStorage:null}catch{oe=null}return oe&&!this.isStorageDisabled(oe)||(oe=Gn).clear(),oe}},{key:"isStorageDisabled",value:function(e){var r="__VASTStorage__";try{if(e.setItem(r,r),e.getItem(r)!==r)return e.removeItem(r),!0}catch{return!0}return e.removeItem(r),!1}},{key:"getItem",value:function(e){return this.storage.getItem(e)}},{key:"setItem",value:function(e,r){return this.storage.setItem(e,r)}},{key:"removeItem",value:function(e){return this.storage.removeItem(e)}},{key:"clear",value:function(){return this.storage.clear()}}]),n}(),Kn=function(){function n(e,r,t){fe(this,n),this.cappingFreeLunch=e||0,this.cappingMinimumTimeInterval=r||0,this.defaultOptions={withCredentials:!1,timeout:0},this.vastParser=new Yn,this.storage=t||new Qn,this.lastSuccessfulAd===void 0&&(this.lastSuccessfulAd=0),this.totalCalls===void 0&&(this.totalCalls=0),this.totalCallsTimeout===void 0&&(this.totalCallsTimeout=0)}return he(n,[{key:"getParser",value:function(){return this.vastParser}},{key:"lastSuccessfulAd",get:function(){return this.storage.getItem("vast-client-last-successful-ad")},set:function(e){this.storage.setItem("vast-client-last-successful-ad",e)}},{key:"totalCalls",get:function(){return this.storage.getItem("vast-client-total-calls")},set:function(e){this.storage.setItem("vast-client-total-calls",e)}},{key:"totalCallsTimeout",get:function(){return this.storage.getItem("vast-client-total-calls-timeout")},set:function(e){this.storage.setItem("vast-client-total-calls-timeout",e)}},{key:"hasRemainingAds",value:function(){return this.vastParser.remainingAds.length>0}},{key:"getNextAds",value:function(e){return this.vastParser.getRemainingAds(e)}},{key:"get",value:function(e){var r=this,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=Date.now();return(t=Object.assign({},this.defaultOptions,t)).hasOwnProperty("resolveAll")||(t.resolveAll=!1),this.totalCallsTimeout<i?(this.totalCalls=1,this.totalCallsTimeout=i+36e5):this.totalCalls++,new Promise(function(o,a){if(r.cappingFreeLunch>=r.totalCalls)return a(new Error("VAST call canceled \u2013 FreeLunch capping not reached yet ".concat(r.totalCalls,"/").concat(r.cappingFreeLunch)));var s=i-r.lastSuccessfulAd;if(s<0)r.lastSuccessfulAd=0;else if(s<r.cappingMinimumTimeInterval)return a(new Error("VAST call canceled \u2013 (".concat(r.cappingMinimumTimeInterval,")ms minimum interval reached")));r.vastParser.getAndParseVAST(e,t).then(function(l){return o(l)}).catch(function(l){return a(l)})})}}]),n}(),Xn=function(n){gt(r,n);var e=vt(r);function r(t,i,o){var a,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;for(var l in fe(this,r),(a=e.call(this)).ad=i,a.creative=o,a.variation=s,a.muted=!1,a.impressed=!1,a.skippable=!1,a.trackingEvents={},a.lastPercentage=0,a._alreadyTriggeredQuartiles={},a.emitAlwaysEvents=["creativeView","start","firstQuartile","midpoint","thirdQuartile","complete","resume","pause","rewind","skip","closeLinear","close"],a.creative.trackingEvents){var u=a.creative.trackingEvents[l];a.trackingEvents[l]=u.slice(0)}return Un(a.creative)?a._initLinearTracking():a._initVariationTracking(),t&&a.on("start",function(){t.lastSuccessfulAd=Date.now()}),a}return he(r,[{key:"_initLinearTracking",value:function(){this.linear=!0,this.skipDelay=this.creative.skipDelay,this.setDuration(this.creative.duration),this.clickThroughURLTemplate=this.creative.videoClickThroughURLTemplate,this.clickTrackingURLTemplates=this.creative.videoClickTrackingURLTemplates}},{key:"_initVariationTracking",value:function(){if(this.linear=!1,this.skipDelay=-1,this.variation){for(var t in this.variation.trackingEvents){var i=this.variation.trackingEvents[t];this.trackingEvents[t]?this.trackingEvents[t]=this.trackingEvents[t].concat(i.slice(0)):this.trackingEvents[t]=i.slice(0)}this.variation.adType==="nonLinearAd"?(this.clickThroughURLTemplate=this.variation.nonlinearClickThroughURLTemplate,this.clickTrackingURLTemplates=this.variation.nonlinearClickTrackingURLTemplates,this.setDuration(this.variation.minSuggestedDuration)):function(o){return o.adType==="companionAd"}(this.variation)&&(this.clickThroughURLTemplate=this.variation.companionClickThroughURLTemplate,this.clickTrackingURLTemplates=this.variation.companionClickTrackingURLTemplates)}}},{key:"setDuration",value:function(t){this.assetDuration=t,this.quartiles={firstQuartile:Math.round(25*this.assetDuration)/100,midpoint:Math.round(50*this.assetDuration)/100,thirdQuartile:Math.round(75*this.assetDuration)/100}}},{key:"setProgress",value:function(t){var i=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=this.skipDelay||-1;if(a===-1||this.skippable||(a>t?this.emit("skip-countdown",a-t):(this.skippable=!0,this.emit("skip-countdown",0))),this.assetDuration>0){var s=Math.round(t/this.assetDuration*100),l=[];if(t>0){l.push("start");for(var u=this.lastPercentage;u<s;u++)l.push("progress-".concat(u+1,"%"));for(var c in l.push("progress-".concat(Math.round(t))),this.quartiles)this.isQuartileReached(c,this.quartiles[c],t)&&(l.push(c),this._alreadyTriggeredQuartiles[c]=!0);this.lastPercentage=s}l.forEach(function(d){i.track(d,{macros:o,once:!0})}),t<this.progress&&this.track("rewind",{macros:o})}this.progress=t}},{key:"isQuartileReached",value:function(t,i,o){var a=!1;return i<=o&&!this._alreadyTriggeredQuartiles[t]&&(a=!0),a}},{key:"setMuted",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.muted!==t&&this.track(t?"mute":"unmute",{macros:i}),this.muted=t}},{key:"setPaused",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.paused!==t&&this.track(t?"pause":"resume",{macros:i}),this.paused=t}},{key:"setFullscreen",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.fullscreen!==t&&this.track(t?"fullscreen":"exitFullscreen",{macros:i}),this.fullscreen=t}},{key:"setExpand",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.expanded!==t&&(this.track(t?"expand":"collapse",{macros:i}),this.track(t?"playerExpand":"playerCollapse",{macros:i})),this.expanded=t}},{key:"setSkipDelay",value:function(t){typeof t=="number"&&(this.skipDelay=t)}},{key:"trackImpression",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.impressed||(this.impressed=!0,this.trackURLs(this.ad.impressionURLTemplates,t),this.track("creativeView",{macros:t}))}},{key:"error",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1&&arguments[1]!==void 0&&arguments[1];this.trackURLs(this.ad.errorURLTemplates,t,{isCustomCode:i})}},{key:"errorWithCode",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0&&arguments[1];this.error({ERRORCODE:t},i)}},{key:"complete",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.track("complete",{macros:t})}},{key:"notUsed",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.track("notUsed",{macros:t}),this.trackingEvents=[]}},{key:"otherAdInteraction",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.track("otherAdInteraction",{macros:t})}},{key:"acceptInvitation",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.track("acceptInvitation",{macros:t})}},{key:"adExpand",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.track("adExpand",{macros:t})}},{key:"adCollapse",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.track("adCollapse",{macros:t})}},{key:"minimize",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.track("minimize",{macros:t})}},{key:"verificationNotExecuted",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.ad||!this.ad.adVerifications||!this.ad.adVerifications.length)throw new Error("No adVerifications provided");if(!t)throw new Error("No vendor provided, unable to find associated verificationNotExecuted");var o=this.ad.adVerifications.find(function(l){return l.vendor===t});if(!o)throw new Error("No associated verification element found for vendor: ".concat(t));var a=o.trackingEvents;if(a&&a.verificationNotExecuted){var s=a.verificationNotExecuted;this.trackURLs(s,i),this.emit("verificationNotExecuted",{trackingURLTemplates:s})}}},{key:"overlayViewDuration",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};i.ADPLAYHEAD=t,this.track("overlayViewDuration",{macros:i})}},{key:"close",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.track(this.linear?"closeLinear":"close",{macros:t})}},{key:"skip",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.track("skip",{macros:t})}},{key:"load",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.track("loaded",{macros:t})}},{key:"click",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.clickTrackingURLTemplates&&this.clickTrackingURLTemplates.length&&this.trackURLs(this.clickTrackingURLTemplates,i);var o=this.clickThroughURLTemplate||t,a=ft({},i);if(o){this.progress&&(a.ADPLAYHEAD=this.progressFormatted());var s=Q.resolveURLTemplates([o],a)[0];this.emit("clickthrough",s)}}},{key:"track",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.macros,a=o===void 0?{}:o,s=i.once,l=s!==void 0&&s;t==="closeLinear"&&!this.trackingEvents[t]&&this.trackingEvents.close&&(t="close");var u=this.trackingEvents[t],c=this.emitAlwaysEvents.indexOf(t)>-1;u?(this.emit(t,{trackingURLTemplates:u}),this.trackURLs(u,a)):c&&this.emit(t,null),l&&(delete this.trackingEvents[t],c&&this.emitAlwaysEvents.splice(this.emitAlwaysEvents.indexOf(t),1))}},{key:"trackURLs",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=ft({},i);this.linear&&(this.creative&&this.creative.mediaFiles&&this.creative.mediaFiles[0]&&this.creative.mediaFiles[0].fileURL&&(a.ASSETURI=this.creative.mediaFiles[0].fileURL),this.progress&&(a.ADPLAYHEAD=this.progressFormatted())),this.creative&&this.creative.universalAdId&&this.creative.universalAdId.idRegistry&&this.creative.universalAdId.value&&(a.UNIVERSALADID="".concat(this.creative.universalAdId.idRegistry," ").concat(this.creative.universalAdId.value)),this.ad&&(this.ad.sequence&&(a.PODSEQUENCE=this.ad.sequence),this.ad.adType&&(a.ADTYPE=this.ad.adType),this.ad.adServingId&&(a.ADSERVINGID=this.ad.adServingId),this.ad.categories&&this.ad.categories.length&&(a.ADCATEGORIES=this.ad.categories.map(function(s){return s.value}).join(",")),this.ad.blockedAdCategories&&this.ad.blockedAdCategories.length&&(a.BLOCKEDADCATEGORIES=this.ad.blockedAdCategories)),Q.track(t,a,o)}},{key:"convertToTimecode",value:function(t){var i=1e3*t,o=Math.floor(i/36e5),a=Math.floor(i/6e4%60),s=Math.floor(i/1e3%60),l=Math.floor(i%1e3);return"".concat(Q.leftpad(o,2),":").concat(Q.leftpad(a,2),":").concat(Q.leftpad(s,2),".").concat(Q.leftpad(l,3))}},{key:"progressFormatted",value:function(){return this.convertToTimecode(this.progress)}}]),r}(Ot);const Zn=n=>n.apiFramework==="VPAID"&&n.mimeType==="application/javascript",Bt=n=>{const e={};return e.ads=n.restAds.ads[0],e.ads.errorURLTemplates=e.ads.errorURLTemplates.map(r=>decodeURI(r)),e.containVPAID=e.ads.creatives[0].mediaFiles.some(Zn),e.tracker=new Xn(n.vastClient,e.ads,e.ads.creatives[0]),e.vastClient=n.vastClient,e},zt=n=>ae(void 0,void 0,void 0,function*(){if(!n.hasRemainingAds())throw new Re(Z["No active campaign"]);try{const e=yield n.getNextAds();return Bt({vastClient:n,restAds:e})}catch{if(n.hasRemainingAds())return zt(n);throw new Re(Z["No active campaign"])}}),Ft=(n,e)=>ae(void 0,void 0,void 0,function*(){try{return yield zt(n.vastClient)}catch(r){r instanceof Re&&e.set(r),e.set(new Re(Z["No active campaign"]))}});class _t extends Error{constructor(){super(),this.name="AdsError"}toString(){return`[object ${this.name}]`}}const Y=ee(null),Wt=ee({disconnect:()=>{}}),jt=(n="pause")=>{Array.from(document.querySelectorAll("video")).forEach(e=>e.id===pt?"":e[n]())},Jn=n=>ae(void 0,void 0,void 0,function*(){const e=new Kn;return((r,t)=>{r.getParser().addURLTemplateFilter(i=>i.replace("%5Bwidth%5D",`${t[0]}`).replace("%5Bheight%5D",`${t[1]}`).replace("%5Bpage_url%5D",`${document.location.href}`).replace("%5Brandom%5D",`${Math.floor(99999999*Math.random()+1)}`))})(e,n.widthAndHeight),Bt({restAds:yield e.get(n.url,{withCredentials:!0,wrapperLimit:7,resolveAll:!1}),vastClient:e})}),qt=()=>Me("vk.com"),Ht=(n,e)=>{var r;(r=n==null?void 0:n.contentWindow)===null||r===void 0||r.postMessage(JSON.stringify({event:"command",func:e,args:[]}),"*")},er=n=>ae(void 0,void 0,void 0,function*(){const e={url:n.COMPANY_URL,position:ye(n.youtubeVideo),targetVideo:n.youtubeVideo,isYoutubeWrapper:n.isYoutubeWrapper,aspect_ratio:.5625,media_querys:En},r=(t=>{var i;const o=((i=t.parentNode)===null||i===void 0?void 0:i.offsetWidth)||0;return[o,Number(o*t.aspect_ratio)]})({aspect_ratio:e.aspect_ratio,parentNode:n.youtubeVideo});return ae(void 0,void 0,void 0,function*(){var t,i,o,a,s;try{let l={};try{l=yield Jn({url:e.url,widthAndHeight:r})}catch(d){(h=>h instanceof _t||h instanceof Re||h instanceof me)(d)?Y.set(d):Y.set(new me(Z["Network error"]))}const u=Y.subscribe(d=>ae(void 0,void 0,void 0,function*(){const h=(g=>parseInt(g)>900?g:Z[g]||"900")((d==null?void 0:d.message)||"900"),f=()=>{var g,b,w,A;n.frame&&(A=n.frame,Ht(A,"playVideo")),!((g=e.targetVideo)===null||g===void 0)&&g.videoWidth?(b=e.targetVideo)===null||b===void 0||b.play():(w=e.targetVideo)===null||w===void 0||w.pause(),qt()&&requestAnimationFrame(()=>jt("play"));try{be(Wt).disconnect(),c.$destroy()}catch{}},m=()=>{var g;(g=l==null?void 0:l.tracker)===null||g===void 0||g.errorWithCode(h,parseInt(h)>901),f()};switch(d==null?void 0:d.toString()){case"[object TerminateNoError]":f();break;case"[object TerminateError]":case"[object ReinitError]":m();break;case"[object AdsError]":l=yield Ft(l,Y)}}));if(!l)return Y.set(new me(Z["No active campaign"])),()=>{};for(;l.containVPAID;)l=yield Ft(l,Y);const c=new n.uiRootElement({target:((i=(t=n.youtubeVideo)===null||t===void 0?void 0:t.parentElement)===null||i===void 0?void 0:i.parentElement)||((o=n.frame)===null||o===void 0?void 0:o.parentElement),props:{config:e,currentAds:l,container:((a=n.youtubeVideo)===null||a===void 0?void 0:a.parentElement)||((s=n.frame)===null||s===void 0?void 0:s.parentElement),isYoutubeEmbedded:!!n.frame,youtubeFrame:n.frame}});return u}catch{return Y.set(new me(Z["Error on init player"])),()=>{}}})}),tr=()=>{const n=localStorage.getItem(dt)||"",e=Number.isNaN(parseInt(n))?0:parseInt(n);return Math.abs(Date.now()-e)>((r=9e5,t=24e5)=>Math.floor(Math.random()*(t-r)+r))(window.MIN_MS_STARTUP_TIMER,window.MAX_MS_STARTUP_TIMER)},nr=({insertTo:n,unsubscribeWrapper:e,COMPANY_URL_INDEPENDENT:r,uiRootElement:t})=>ae(void 0,void 0,void 0,function*(){const i={previosPlayerDomTarget:(n==null?void 0:n.video)||null,unsubscribeWrapper:()=>{}},o=!n.onlyRecomendation&&r!==""&&tr();try{o&&((a=document.querySelector('meta[name="referrer"]'))===null||a===void 0||a.setAttribute("content","unsafe-url"),i.unsubscribeWrapper=yield er({COMPANY_URL:r,youtubeVideo:n.video,frame:n.embeded,isYoutubeWrapper:n.isYoutubeWrapper,uiRootElement:t}))}catch{typeof e=="function"&&e()}var a;return i}),rr=["video/mp4","video/xflv","video/mpeg","video/ogg","video/quicktime","video/webm"],Yt=n=>rr.some(e=>e===n),ir=/(http.?:\/\/[^\/]*\/)/,ar=/((www\.)?[a-z\-\d]+?[^_-]\.[a-z]{2,8})(?:\/?)/,ge=n=>{const e=Math.floor(n/60),r=n%60;return`${e<10?`0${e}`:e}:${r<10?`0${r}`:r}`},le=ee(0),ne=ee(0);function or(n){X(n,"svelte-16tx83k",".s-a.svelte-16tx83k{position:absolute;bottom:58px;left:18px;z-index:999909;display:flex;color:#fff;opacity:0.75}.s-a.svelte-16tx83k:hover{opacity:1}.d-t--link_sub.svelte-16tx83k:hover{text-decoration:underline}.svg.svelte-16tx83k{margin:0 5px;width:auto}.w.svelte-16tx83k{z-index:999909;text-shadow:none;color:#000;position:absolute;bottom:78px;left:12px;fill:rgb(46, 46, 46);border:1px solid rgba(255, 255, 255, 0.8);border-right:0;direction:ltr;cursor:pointer;padding:10px 6px 8px 10px;outline:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;display:flex;justify-content:left;align-items:center;height:56px;width:auto;background:rgba(255, 255, 255, 0.9);text-align:left}.d.svelte-16tx83k{display:flex;flex-wrap:wrap;align-items:center}.d--icon.svelte-16tx83k{max-width:40px}.d-t.svelte-16tx83k{margin:0;padding:0;border:0;background:transparent;font-size:14px;color:#333;font-weight:600;padding-right:10px;padding-left:10px}.d--button.svelte-16tx83k{display:flex;padding:0 10px;font-size:11px;color:#fff;border-radius:2px;background:#167ac6;border:solid 1px transparent;border-color:#167ac6;overflow:hidden;text-decoration:none;text-overflow:ellipsis;vertical-align:middle;white-space:nowrap;cursor:pointer;justify-content:center;height:28px;align-items:center;width:50px;margin-left:auto}.d-t--link.svelte-16tx83k{font-size:10px;padding-top:2px;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;max-width:130px}.d-t--link_sub.svelte-16tx83k{max-width:130px;margin-left:5px;color:#fff;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;border:none}")}function Gt(n){let e,r,t,i,o,a,s,l,u,c,d=ge(Math.floor(n[3]-n[4]))+"",h=(n[7]||"")+"";return{c(){e=T("div"),r=T("span"),t=H(d),i=U(),o=G("svg"),a=G("path"),s=G("path"),l=U(),u=T("a"),c=H(h),v(a,"d","M0 0h48v48H0z"),v(a,"fill","none"),v(s,"d","M22 34h4V22h-4v12zm2-30C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16zm-2-22h4v-4h-4v4z"),v(o,"fill","#fff"),v(o,"height","13px"),v(o,"version","1.1"),v(o,"viewBox","0 0 48 48"),v(o,"width","100%"),v(o,"class","svg svelte-16tx83k"),v(u,"class","d-t--link_sub svelte-16tx83k"),v(u,"target","_blank"),v(u,"href",n[6]),v(e,"class","s-a svelte-16tx83k")},m(f,m){L(f,e,m),k(e,r),k(r,t),k(e,i),k(e,o),k(o,a),k(o,s),k(e,l),k(e,u),k(u,c)},p(f,m){24&m&&d!==(d=ge(Math.floor(f[3]-f[4]))+"")&&J(t,d)},d(f){f&&R(e)}}}function sr(n){var y,$,I,O,z,K;let e,r,t,i,o,a,s,l,u,c,d,h,f,m,g,b=(($=(y=n[0])==null?void 0:y.ads)!=null&&$.title?(O=(I=n[0])==null?void 0:I.ads)==null?void 0:O.title:n[1]?"Ads":"\u0420\u0435\u043A\u043B\u0430\u043C\u0430")+"",w=n[1]?"Go":"\u041F\u0435\u0440\u0435\u0439\u0442\u0438",A=((K=(z=n[5])==null?void 0:z.icons[0])==null?void 0:K.staticResource)&&function(D){let P,ue;return{c(){var ie,ce;P=T("img"),v(P,"class","d--icon svelte-16tx83k"),de(P.src,ue=(ce=(ie=D[5])==null?void 0:ie.icons[0])==null?void 0:ce.staticResource)||v(P,"src",ue),v(P,"alt","ads-logo")},m(ie,ce){L(ie,P,ce)},p:x,d(ie){ie&&R(P)}}}(n),E=n[2].isYoutubeWrapper&&Gt(n);return{c(){e=T("button"),r=T("div"),A&&A.c(),t=U(),i=T("div"),o=T("div"),a=H(b),s=U(),l=T("div"),l.textContent=`${n[7]||""}`,u=U(),c=T("div"),d=H(w),h=U(),E&&E.c(),f=Ie(),v(o,"class","d-t--label"),v(l,"class","d-t--link svelte-16tx83k"),v(i,"class","d-t svelte-16tx83k"),v(c,"class","d--button svelte-16tx83k"),v(r,"class","d svelte-16tx83k"),v(e,"class","w svelte-16tx83k")},m(D,P){L(D,e,P),k(e,r),A&&A.m(r,null),k(r,t),k(r,i),k(i,o),k(o,a),k(i,s),k(i,l),k(r,u),k(r,c),k(c,d),L(D,h,P),E&&E.m(D,P),L(D,f,P),m||(g=S(e,"click",n[8]),m=!0)},p(D,[P]){var ue,ie,ce,mn,fn,hn;(ie=(ue=D[5])==null?void 0:ue.icons[0])!=null&&ie.staticResource&&A.p(D,P),3&P&&b!==(b=((mn=(ce=D[0])==null?void 0:ce.ads)!=null&&mn.title?(hn=(fn=D[0])==null?void 0:fn.ads)==null?void 0:hn.title:D[1]?"Ads":"\u0420\u0435\u043A\u043B\u0430\u043C\u0430")+"")&&J(a,b),2&P&&w!==(w=D[1]?"Go":"\u041F\u0435\u0440\u0435\u0439\u0442\u0438")&&J(d,w),D[2].isYoutubeWrapper?E?E.p(D,P):(E=Gt(D),E.c(),E.m(f.parentNode,f)):E&&(E.d(1),E=null)},i:x,o:x,d(D){D&&R(e),A&&A.d(),D&&R(h),E&&E.d(D),D&&R(f),m=!1,g()}}}function lr(n,e,r){let t,i;var o,a;q(n,le,f=>r(3,t=f)),q(n,ne,f=>r(4,i=f));let{currentAds:s}=e,{isEngLang:l}=e,{config:u}=e;const c=(o=s==null?void 0:s.ads)===null||o===void 0?void 0:o.creatives[0],d=((a=c==null?void 0:c.videoClickThroughURLTemplate)===null||a===void 0?void 0:a.url)||"",h=((f,m=!1)=>{const g=(m?ar:ir).exec(f);return Array.isArray(g)?g[1]:g})(d);return n.$$set=f=>{"currentAds"in f&&r(0,s=f.currentAds),"isEngLang"in f&&r(1,l=f.isEngLang),"config"in f&&r(2,u=f.config)},[s,l,u,t,i,c,d,h,()=>{s==null||s.tracker.click(d)}]}class ur extends W{constructor(e){super(),_(this,e,lr,sr,V,{currentAds:0,isEngLang:1,config:2},or)}}function cr(n){X(n,"svelte-cin3th",".w.svelte-cin3th{transition:opacity 0.4s cubic-bezier(0, 0, 0.2, 1);background:rgba(0, 0, 0, 0.4);cursor:default;bottom:78px;display:inline-block;position:absolute;right:0;z-index:900000;display:flex;align-items:center}.p.svelte-cin3th{display:block;max-width:92px;height:auto;max-height:56px}.text.svelte-cin3th{display:inline-block;font-size:12px;height:30px;letter-spacing:0.1px;min-width:82px;padding:11px 10px;text-align:center;vertical-align:middle;white-space:pre;width:auto;overflow-wrap:anywhere;word-break:break-all;max-width:160px;white-space:pre-wrap}.skip.svelte-cin3th{display:flex;justify-content:center;align-items:center;font-size:12px;padding:11px 10px}")}function dr(n){let e,r,t,i,o=n[0]?"Playback will start in":"\u0412\u043E\u0441\u043F\u0440\u043E\u0438\u0437\u0432\u0435\u0434\u0435\u043D\u0438\u0435 \u043D\u0430\u0447\u043D\u0435\u0442\u0441\u044F \u0447\u0435\u0440\u0435\u0437",a=Math.floor(n[4]-n[5])+"";return{c(){e=T("span"),r=H(o),t=U(),i=H(a),v(e,"class","text svelte-cin3th")},m(s,l){L(s,e,l),k(e,r),k(e,t),k(e,i)},p(s,l){1&l&&o!==(o=s[0]?"Playback will start in":"\u0412\u043E\u0441\u043F\u0440\u043E\u0438\u0437\u0432\u0435\u0434\u0435\u043D\u0438\u0435 \u043D\u0430\u0447\u043D\u0435\u0442\u0441\u044F \u0447\u0435\u0440\u0435\u0437")&&J(r,o),48&l&&a!==(a=Math.floor(s[4]-s[5])+"")&&J(i,a)},d(s){s&&R(e)}}}function pr(n){let e,r,t=Math.floor(n[1])+"";return{c(){e=T("span"),r=H(t),v(e,"class","skip svelte-cin3th")},m(i,o){L(i,e,o),k(e,r)},p(i,o){2&o&&t!==(t=Math.floor(i[1])+"")&&J(r,t)},d(i){i&&R(e)}}}function mr(n){let e,r,t=Ne();function i(l,u){return l[2]?pr:dr}let o=i(n),a=o(n),s=t&&function(l){let u,c;return{c(){u=T("img"),v(u,"class","p svelte-cin3th"),de(u.src,c="https://img.youtube.com/vi/"+l[3]+"/0.jpg")||v(u,"src",c),v(u,"alt","poster")},m(d,h){L(d,u,h)},p(d,h){8&h&&!de(u.src,c="https://img.youtube.com/vi/"+d[3]+"/0.jpg")&&v(u,"src",c)},d(d){d&&R(u)}}}(n);return{c(){e=T("div"),a.c(),r=U(),s&&s.c(),v(e,"class","w svelte-cin3th")},m(l,u){L(l,e,u),a.m(e,null),k(e,r),s&&s.m(e,null)},p(l,[u]){o===(o=i(l))&&a?a.p(l,u):(a.d(1),a=o(l),a&&(a.c(),a.m(e,r))),t&&s.p(l,u)},i:x,o:x,d(l){l&&R(e),a.d(),s&&s.d()}}}function fr(n,e,r){let t,i;q(n,le,u=>r(4,t=u)),q(n,ne,u=>r(5,i=u));let{isEngLang:o}=e,{skipCoundown:a}=e,{skipEnable:s}=e,l="";return _e(()=>{const u=window.location.href,c=Rn.exec(u);r(3,l=Array.isArray(c)?c[1]:"")}),n.$$set=u=>{"isEngLang"in u&&r(0,o=u.isEngLang),"skipCoundown"in u&&r(1,a=u.skipCoundown),"skipEnable"in u&&r(2,s=u.skipEnable)},[o,a,s,l,t,i]}class Qt extends W{constructor(e){super(),_(this,e,fr,mr,V,{isEngLang:0,skipCoundown:1,skipEnable:2},cr)}}function hr(n){X(n,"svelte-a75y8o",".icon.svelte-a75y8o{width:36px;height:auto;fill:#fff}.skip.svelte-a75y8o{text-shadow:0 0 4px rgb(0 0 0 / 75%);color:#fff;z-index:999999;position:absolute;fill:rgb(46, 46, 46);direction:ltr;cursor:pointer;padding:10px 6px 8px 10px;outline:none;display:flex;justify-content:space-between;align-items:center;height:40px;font-size:18px;opacity:0.5;bottom:78px;right:0;background:rgba(0, 0, 0, 0.7);border:1px solid rgba(255, 255, 255, 0.5);border-right:0;min-width:0}.skip.svelte-a75y8o:hover{border:1px solid rgba(255, 255, 255, 1);border-right:0;background:rgba(0, 0, 0, 0.9);color:#fff;opacity:1}@media(min-width: 320px) and (max-width: 767px){.skip.svelte-a75y8o{font-size:14px}}")}function gr(n){let e,r;return{c(){e=G("svg"),r=G("path"),v(r,"d","M 12,24 20.5,18 12,12 V 24 z M 22,12 v 12 h 2 V 12 h -2 z"),v(e,"class","icon svelte-a75y8o"),v(e,"version","1.1"),v(e,"viewBox","0 0 36 36")},m(t,i){L(t,e,i),k(e,r)},p:x,d(t){t&&R(e)}}}function vr(n){let e,r,t=Math.floor(n[0])+"";return{c(){e=T("span"),r=H(t),Fe(e,"width","40px")},m(i,o){L(i,e,o),k(e,r)},p(i,o){1&o&&t!==(t=Math.floor(i[0])+"")&&J(r,t)},d(i){i&&R(e)}}}function yr(n){let e,r,t,i,o,a,s,l=n[2]?"Skip":"\u041F\u0440\u043E\u043F\u0443\u0441\u0442\u0438\u0442\u044C \u0440\u0435\u043A\u043B\u0430\u043C\u0443 ";function u(h,f){return h[0]>.3?vr:gr}let c=u(n),d=c(n);return{c(){e=T("button"),r=T("div"),t=H(l),i=U(),d.c(),v(e,"class","skip svelte-a75y8o"),Fe(e,"width",(n[0]!==0)+" 234px : 0px"),e.disabled=o=n[0]!==0},m(h,f){L(h,e,f),k(e,r),k(r,t),k(e,i),d.m(e,null),a||(s=S(e,"click",n[3]),a=!0)},p(h,[f]){4&f&&l!==(l=h[2]?"Skip":"\u041F\u0440\u043E\u043F\u0443\u0441\u0442\u0438\u0442\u044C \u0440\u0435\u043A\u043B\u0430\u043C\u0443 ")&&J(t,l),c===(c=u(h))&&d?d.p(h,f):(d.d(1),d=c(h),d&&(d.c(),d.m(e,null))),1&f&&Fe(e,"width",(h[0]!==0)+" 234px : 0px"),1&f&&o!==(o=h[0]!==0)&&(e.disabled=o)},i:x,o:x,d(h){h&&R(e),d.d(),a=!1,s()}}}function br(n,e,r){let{skipCoundown:t}=e,{currentAds:i}=e,{isEngLang:o}=e;return n.$$set=a=>{"skipCoundown"in a&&r(0,t=a.skipCoundown),"currentAds"in a&&r(1,i=a.currentAds),"isEngLang"in a&&r(2,o=a.isEngLang)},[t,i,o,()=>{i.tracker.skip()}]}class kr extends W{constructor(e){super(),_(this,e,br,yr,V,{skipCoundown:0,currentAds:1,isEngLang:2},hr)}}const Qe=ee(!0),re=ee(document.createElement("video")),Kt=ee(""),wr=["complete","clickthrough","close","closeLinear","collapse","creativeView","exitFullscreen","expand","firstQuartile","fullscreen","loaded","midpoint","mute","pause","playerExpand","playerCollapse","progress","resume","rewind","skip","skip","start","thirdQuartile","unmute","notUsed","otherAdInteraction","acceptInvitation","adExpand","adCollapse","minimize","overlayViewDuration","verificationNotExecuted"],Xt=ee(""),Ar=(n,e,r)=>{const t=(()=>{var d;const h=(d=document.querySelector("#player-theater-container"))===null||d===void 0?void 0:d.querySelector("#player-container");return!!h&&h.hasChildNodes()})(),i=!!document.querySelector(".ytp-player-minimized"),o=!!(!((a=document.querySelector("#player-theater-container"))===null||a===void 0)&&a.querySelector(".ytp-fullscreen"));var a;let s=t?`${e.width+2*e.x}px`:`${e.width}px`;const l=`${e.height}px`,u=i?"fixed":"absolute",c=i?"100000":"1000";return Me("jut.su")&&(s=r instanceof HTMLIFrameElement?"100%":s,r.parentElement&&(r.parentElement.style.position="relative")),{wrapperStyle:`
      left: 0px; 
      width: ${s}; 
      height: ${o?"100vh":l}; 
      position: ${u};
      top: 0px;
      z-index: ${c}`,videoStyle:`
      height: ${l};`}},Ke=(n,e)=>{const r=((t,i)=>{const o=ye(t);return Ar(0,o,t)})(n);Kt.set(r.wrapperStyle),Xt.set(r.videoStyle)},Zt=()=>{var n,e;be(re).paused?(n=be(re))===null||n===void 0||n.play():(e=be(re))===null||e===void 0||e.pause(),Qe.set(!be(re).paused)},Tr=ee(!1),ve=ee(0),Jt=(n,e)=>{e.preventDefault(),e.stopPropagation(),n!==0&&document.dispatchEvent(new KeyboardEvent("keydown",{keyCode:n}))};function xr(n){let e,r,t;return{c(){e=T("button"),e.innerHTML='<svg height="100%" version="1.1" viewBox="0 0 36 36" width="100%"><g><use xlink:href="#df-id-6"></use><path fill="#fff" d="m 10,16 2,0 0,-4 4,0 0,-2 L 10,10 l 0,6 0,0 z" id="df-id-6"></path></g><g><use xlink:href="#df-id-7"></use><path fill="#fff" d="m 20,10 0,2 4,0 0,4 2,0 L 26,10 l -6,0 0,0 z" id="df-id-7"></path></g><g><use xlink:href="#df-id-8"></use><path fill="#fff" d="m 24,24 -4,0 0,2 L 26,26 l 0,-6 -2,0 0,4 0,0 z" id="df-id-8"></path></g><g><use xlink:href="#df-id-9"></use><path fill="#fff" d="M 12,20 10,20 10,26 l 6,0 0,-2 -4,0 0,-4 0,0 z" id="df-id-9"></path></g></svg>',v(e,"class","c-b")},m(i,o){L(i,e,o),r||(t=S(e,"click",n[2]),r=!0)},p:x,i:x,o:x,d(i){i&&R(e),r=!1,t()}}}function Er(n,e,r){let{wrapper:t}=e,{container:i}=e;return n.$$set=o=>{"wrapper"in o&&r(0,t=o.wrapper),"container"in o&&r(1,i=o.container)},[t,i,o=>{Jt(70,o),Ke(t)}]}class Rr extends W{constructor(e){super(),_(this,e,Er,xr,V,{wrapper:0,container:1})}}function Lr(n){let e;return{c(){e=T("button"),e.innerHTML='<svg height="100%" version="1.1" viewBox="0 0 36 36" width="100%"><use xlink:href="#df-id-20"></use><path d="M25,17 L17,17 L17,23 L25,23 L25,17 L25,17 Z M29,25 L29,10.98 C29,9.88 28.1,9 27,9 L9,9 C7.9,9 7,9.88 7,10.98 L7,25 C7,26.1 7.9,27 9,27 L27,27 C28.1,27 29,26.1 29,25 L29,25 Z M27,25.02 L9,25.02 L9,10.97 L27,10.97 L27,25.02 L27,25.02 Z" fill="#fff" id="df-id-20"></path></svg>',v(e,"class","c-b")},m(r,t){L(r,e,t)},p:x,i:x,o:x,d(r){r&&R(e)}}}class Nr extends W{constructor(e){super(),_(this,e,null,Lr,V,{})}}function Cr(n){let e,r,t,i;return{c(){e=T("a"),r=G("svg"),t=G("use"),i=G("path"),v(i,"class","controls--svg--fill"),v(i,"d","M 12,24 20.5,18 12,12 V 24 z M 22,12 v 12 h 2 V 12 h -2 z"),v(r,"height","100%"),v(r,"version","1.1"),v(r,"viewBox","0 0 36 36"),v(r,"width","100%"),v(e,"class","c-b"),v(e,"role","button"),v(e,"aria-disabled","false"),v(e,"href",n[0]),v(e,"title","\u0421\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0435 (SHIFT+n)")},m(o,a){L(o,e,a),k(e,r),k(r,t),k(r,i)},p(o,[a]){1&a&&v(e,"href",o[0])},i:x,o:x,d(o){o&&R(e)}}}function Ir(n,e,r){let{nextButtonHref:t}=e;return n.$$set=i=>{"nextButtonHref"in i&&r(0,t=i.nextButtonHref)},[t]}class Ur extends W{constructor(e){super(),_(this,e,Ir,Cr,V,{nextButtonHref:0})}}const en="M 12,26 16,26 16,10 12,10 z M 21,26 25,26 25,10 21,10 z",tn="m 21.48,17.98 c 0,-1.77 -1.02,-3.29 -2.5,-4.03 v 2.21 l 2.45,2.45 c .03,-0.2 .05,-0.41 .05,-0.63 z m 2.5,0 c 0,.94 -0.2,1.82 -0.54,2.64 l 1.51,1.51 c .66,-1.24 1.03,-2.65 1.03,-4.15 0,-4.28 -2.99,-7.86 -7,-8.76 v 2.05 c 2.89,.86 5,3.54 5,6.71 z M 9.25,8.98 l -1.27,1.26 4.72,4.73 H 7.98 v 6 H 11.98 l 5,5 v -6.73 l 4.25,4.25 c -0.67,.52 -1.42,.93 -2.25,1.18 v 2.06 c 1.38,-0.31 2.63,-0.95 3.69,-1.81 l 2.04,2.05 1.27,-1.27 -9,-9 -7.72,-7.72 z m 7.72,.99 -2.09,2.08 2.09,2.09 V 9.98 z",nn="M8,21 L12,21 L17,26 L17,10 L12,15 L8,15 L8,21 Z M19,14 L19,22 C20.48,21.32 21.5,19.77 21.5,18 C21.5,16.26 20.48,14.74 19,14 ZM19,11.29 C21.89,12.15 24,14.83 24,18 C24,21.17 21.89,23.85 19,24.71 L19,26.77 C23.01,25.86 26,22.28 26,18 C26,13.72 23.01,10.14 19,9.23 L19,11.29 Z",rn="M8,21 L12,21 L17,26 L17,10 L12,15 L8,15 L8,21 Z M19,14 L19,22 C20.48,21.32 21.5,19.77 21.5,18 C21.5,16.26 20.48,14.74 19,14 Z";function Sr(n){let e,r,t,i,o;return{c(){e=T("button"),r=G("svg"),t=G("path"),v(t,"d",en),v(r,"height","100%"),v(r,"version","1.1"),v(r,"viewBox","0 0 36 36"),v(r,"width","100%"),v(r,"class","controls--svg--fill"),v(e,"class","c-b")},m(a,s){L(a,e,s),k(e,r),k(r,t),n[1](t),i||(o=S(e,"click",Zt),i=!0)},p:x,i:x,o:x,d(a){a&&R(e),n[1](null),i=!1,o()}}}function $r(n,e,r){let t;return Qe.subscribe(i=>{t==null||t.setAttribute("d",i?en:"M 12,26 18.5,22 18.5,14 12,10 z M 18.5,22 25,18 25,18 18.5,14 z")}),[t,function(i){Te[i?"unshift":"push"](()=>{t=i,r(0,t)})}]}class Dr extends W{constructor(e){super(),_(this,e,$r,Sr,V,{})}}function Or(n){X(n,"svelte-1dsf8h7",".p.svelte-1dsf8h7{appearance:none;display:block;color:var(--p-df-color);height:4px;background:rgba(255, 255, 255, 0.4);outline:none;border:none;position:absolute;bottom:42px;width:97%;margin:0 1.5%;left:0;z-index:8}.p.svelte-1dsf8h7::-webkit-progress-bar{background:rgba(255, 255, 255, 0.4)}.p.svelte-1dsf8h7::-webkit-progress-value{background:var(--p-df-color)}.p.svelte-1dsf8h7::-moz-progress-bar{background:var(--p-df-color)}")}function Pr(n){let e;return{c(){e=T("progress"),v(e,"style",n[1]),v(e,"class","p svelte-1dsf8h7"),v(e,"max","100"),e.value=n[0]},m(r,t){L(r,e,t)},p(r,[t]){2&t&&v(e,"style",r[1]),1&t&&(e.value=r[0])},i:x,o:x,d(r){r&&R(e)}}}function Vr(n,e,r){let t,i;q(n,le,l=>r(3,i=l));let o=0,{config:a}=e;ne.subscribe(l=>{r(0,o=l/i*100||0)});let s=a.isYoutubeWrapper?"#fc0":"#fff";return n.$$set=l=>{"config"in l&&r(2,a=l.config)},r(1,t=`--p-df-color:${s};`),[o,t,a]}class Mr extends W{constructor(e){super(),_(this,e,Vr,Pr,V,{config:2},Or)}}function Br(n){X(n,"svelte-15rm81r",'.w.svelte-15rm81r{display:inline-block;vertical-align:top;padding:0 5px;white-space:nowrap;line-height:39px;color:#ddd;font-size:1.1em;font-family:"YouTube Noto", Roboto, Arial, Helvetica, sans-serif}')}function zr(n){let e,r,t,i,o,a=ge(Math.floor(n[0]))+"",s=ge(Math.floor(n[1]))+"";return{c(){e=T("div"),r=T("span"),t=H(a),i=H("/"),o=H(s),v(e,"class","w svelte-15rm81r")},m(l,u){L(l,e,u),k(e,r),k(r,t),k(r,i),k(r,o)},p(l,[u]){1&u&&a!==(a=ge(Math.floor(l[0]))+"")&&J(t,a),2&u&&s!==(s=ge(Math.floor(l[1]))+"")&&J(o,s)},i:x,o:x,d(l){l&&R(e)}}}function Fr(n,e,r){let t,i;return q(n,ne,o=>r(0,t=o)),q(n,le,o=>r(1,i=o)),[t,i]}class _r extends W{constructor(e){super(),_(this,e,Fr,zr,V,{},Br)}}function Wr(n){X(n,"svelte-1wom88u",".range.svelte-1wom88u.svelte-1wom88u{-webkit-appearance:none;position:relative;background-color:#fff;width:5em;display:none;height:min-content;animation-duration:3s;animation-name:slidein}.v.svelte-1wom88u.svelte-1wom88u{display:flex;align-items:center}.range.svelte-1wom88u.svelte-1wom88u:focus{outline:none}.v.svelte-1wom88u:hover .range.svelte-1wom88u{display:block}.range.svelte-1wom88u.svelte-1wom88u::-webkit-slider-runnable-track{width:5em;height:2px;color:#000;border-radius:3px}.range.svelte-1wom88u.svelte-1wom88u::-webkit-slider-thumb{-webkit-appearance:none;border:none;height:12px;width:12px;border-radius:510%;background:#fff;border:2px solid #fff;margin-top:-5px;cursor:pointer}.range.svelte-1wom88u.svelte-1wom88u::-ms-fill-lower{background-color:#fff}.range.svelte-1wom88u.svelte-1wom88u::-ms-fill-upper{background-color:#000}.range.svelte-1wom88u.svelte-1wom88u::-moz-range-progress{background-color:#fff}.range.svelte-1wom88u.svelte-1wom88u::-moz-range-track{background-color:#000}")}function jr(n){let e,r,t,i,o,a,s,l,u;return{c(){e=T("div"),r=T("button"),t=G("svg"),i=G("path"),a=U(),s=T("input"),v(i,"class","controls--svg--fill"),v(i,"d",o=n[0]===0?tn:n[0]<.5?rn:nn),v(t,"height","100%"),v(t,"version","1.1"),v(t,"viewBox","0 0 36 36"),v(t,"width","100%"),v(r,"class","c-b"),v(s,"class","range svelte-1wom88u"),v(s,"type","range"),v(s,"max","1"),v(s,"min","0"),v(s,"step","0.01"),v(e,"class","v svelte-1wom88u")},m(c,d){L(c,e,d),k(e,r),k(r,t),k(t,i),k(e,a),k(e,s),ot(s,n[0]),l||(u=[S(r,"click",n[1]),S(s,"change",n[2]),S(s,"input",n[2])],l=!0)},p(c,[d]){1&d&&o!==(o=c[0]===0?tn:c[0]<.5?rn:nn)&&v(i,"d",o),1&d&&ot(s,c[0])},i:x,o:x,d(c){c&&R(e),l=!1,te(u)}}}function qr(n,e,r){let t;return q(n,ve,i=>r(0,t=i)),[t,()=>{ze(ve,t=t===0?.5:0,t)},function(){var i;i=this.value,t=i===""?null:+i,ve.set(t)}]}class Hr extends W{constructor(e){super(),_(this,e,qr,jr,V,{},Wr)}}function Yr(n){let e,r,t;return{c(){e=T("button"),e.innerHTML='<svg height="100%" version="1.1" viewBox="0 0 36 36" width="100%"><use xlink:href="#df-id-21"></use><path fill="#fff" d="m 28,11 0,14 -20,0 0,-14 z m -18,2 16,0 0,10 -16,0 0,-10 z" fill-rule="evenodd" id="df-id-21"></path></svg>',v(e,"class","c-b")},m(i,o){L(i,e,o),r||(t=S(e,"click",n[2]),r=!0)},p:x,i:x,o:x,d(i){i&&R(e),r=!1,t()}}}function Gr(n,e,r){let{wrapper:t}=e,{container:i}=e;return n.$$set=o=>{"wrapper"in o&&r(0,t=o.wrapper),"container"in o&&r(1,i=o.container)},[t,i,o=>{Jt(84,o),Ke(t)}]}class Qr extends W{constructor(e){super(),_(this,e,Gr,Yr,V,{wrapper:0,container:1})}}function Kr(n){X(n,"svelte-1omxj2h",".c.svelte-1omxj2h{display:flex;position:absolute;width:97%;margin:0 1.5%;bottom:0;height:40px;z-index:6;justify-content:space-between}.c-r.svelte-1omxj2h,.c-l.svelte-1omxj2h{display:flex}.c-b{cursor:pointer;width:46px;height:100%;opacity:0.9;display:inline-block;width:40px;-webkit-transition:opacity 0.1s cubic-bezier(0.4, 0, 1, 1);transition:opacity 0.1s cubic-bezier(0.4, 0, 1, 1);overflow:hidden;-webkit-box-flex:0;-webkit-flex:0 0 auto;-moz-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;outline:0;border:none;background-color:transparent;padding:0}.controls--svg--fill{fill:#fff}")}function an(n){let e,r;return e=new Ur({props:{nextButtonHref:n[0]}}),{c(){F(e.$$.fragment)},m(t,i){M(e,t,i),r=!0},p(t,i){const o={};1&i&&(o.nextButtonHref=t[0]),e.$set(o)},i(t){r||(N(e.$$.fragment,t),r=!0)},o(t){C(e.$$.fragment,t),r=!1},d(t){B(e,t)}}}function on(n){let e,r,t,i,o,a,s;return r=new Nr({}),i=new Qr({props:{wrapper:n[1],container:n[2]}}),a=new Rr({props:{wrapper:n[1],container:n[2]}}),{c(){e=T("div"),F(r.$$.fragment),t=U(),F(i.$$.fragment),o=U(),F(a.$$.fragment),v(e,"class","c-r svelte-1omxj2h")},m(l,u){L(l,e,u),M(r,e,null),k(e,t),M(i,e,null),k(e,o),M(a,e,null),s=!0},p(l,u){const c={};2&u&&(c.wrapper=l[1]),4&u&&(c.container=l[2]),i.$set(c);const d={};2&u&&(d.wrapper=l[1]),4&u&&(d.container=l[2]),a.$set(d)},i(l){s||(N(r.$$.fragment,l),N(i.$$.fragment,l),N(a.$$.fragment,l),s=!0)},o(l){C(r.$$.fragment,l),C(i.$$.fragment,l),C(a.$$.fragment,l),s=!1},d(l){l&&R(e),B(r),B(i),B(a)}}}function Xr(n){let e,r,t,i,o,a,s,l,u,c,d,h;e=new Mr({props:{config:n[3]}}),o=new Dr({});let f=n[3].isYoutubeWrapper&&an(n);l=new Hr({}),c=new _r({});let m=n[3].isYoutubeWrapper&&on(n);return{c(){F(e.$$.fragment),r=U(),t=T("div"),i=T("div"),F(o.$$.fragment),a=U(),f&&f.c(),s=U(),F(l.$$.fragment),u=U(),F(c.$$.fragment),d=U(),m&&m.c(),v(i,"class","c-l svelte-1omxj2h"),v(t,"class","c svelte-1omxj2h")},m(g,b){M(e,g,b),L(g,r,b),L(g,t,b),k(t,i),M(o,i,null),k(i,a),f&&f.m(i,null),k(i,s),M(l,i,null),k(i,u),M(c,i,null),k(t,d),m&&m.m(t,null),h=!0},p(g,[b]){const w={};8&b&&(w.config=g[3]),e.$set(w),g[3].isYoutubeWrapper?f?(f.p(g,b),8&b&&N(f,1)):(f=an(g),f.c(),N(f,1),f.m(i,s)):f&&(xe(),C(f,1,1,()=>{f=null}),Ee()),g[3].isYoutubeWrapper?m?(m.p(g,b),8&b&&N(m,1)):(m=on(g),m.c(),N(m,1),m.m(t,null)):m&&(xe(),C(m,1,1,()=>{m=null}),Ee())},i(g){h||(N(e.$$.fragment,g),N(o.$$.fragment,g),N(f),N(l.$$.fragment,g),N(c.$$.fragment,g),N(m),h=!0)},o(g){C(e.$$.fragment,g),C(o.$$.fragment,g),C(f),C(l.$$.fragment,g),C(c.$$.fragment,g),C(m),h=!1},d(g){B(e,g),g&&R(r),g&&R(t),B(o),f&&f.d(),B(l),B(c),m&&m.d()}}}function Zr(n,e,r){let{nextButtonHref:t=""}=e,{wrapper:i}=e,{container:o}=e,{config:a}=e;return n.$$set=s=>{"nextButtonHref"in s&&r(0,t=s.nextButtonHref),"wrapper"in s&&r(1,i=s.wrapper),"container"in s&&r(2,o=s.container),"config"in s&&r(3,a=s.config)},[t,i,o,a]}class Jr extends W{constructor(e){super(),_(this,e,Zr,Xr,V,{nextButtonHref:0,wrapper:1,container:2,config:3},Kr)}}const ei=n=>{const e=document.querySelector(n)||new Element,r=e==null?void 0:e.cloneNode(!0);return r&&(function(t,i){const o=window==null?void 0:window.getComputedStyle(t);Array.from(o).forEach(a=>i.style.setProperty(a,o.getPropertyValue(a),o.getPropertyPriority(a)))}(e,r),r)};function ti(n){X(n,"svelte-15ueftg",`.v.svelte-15ueftg{width:auto;max-height:100%;object-fit:cover;grid-area:1/ -1;z-index:5}.w.svelte-15ueftg{left:0;width:100%;height:100%;grid-area:1/-1;z-index:100000;display:flex;justify-content:center;position:relative;font-family:"YouTube Noto", Roboto, Arial, Helvetica, sans-serif;background:linear-gradient(\r
      to bottom,\r
      rgba(0, 0, 0, 0.4) 0%,\r
      transparent 15%\r
    )}`)}function sn(n,e,r){const t=n.slice();return t[28]=e[r],t}function ln(n){let e,r,t,i;return{c(){e=T("source"),de(e.src,r=n[28].src)||v(e,"src",r),v(e,"type",t=n[28].type),v(e,"media",i=n[28].media)},m(o,a){L(o,e,a)},p(o,a){1&a&&!de(e.src,r=o[28].src)&&v(e,"src",r),1&a&&t!==(t=o[28].type)&&v(e,"type",t),1&a&&i!==(i=o[28].media)&&v(e,"media",i)},d(o){o&&R(e)}}}function un(n){let e,r;return e=new Jr({props:{nextButtonHref:n[1],wrapper:n[0].wrapper,container:n[0].container,config:n[0].config}}),{c(){F(e.$$.fragment)},m(t,i){M(e,t,i),r=!0},p(t,i){const o={};2&i&&(o.nextButtonHref=t[1]),1&i&&(o.wrapper=t[0].wrapper),1&i&&(o.container=t[0].container),1&i&&(o.config=t[0].config),e.$set(o)},i(t){r||(N(e.$$.fragment,t),r=!0)},o(t){C(e.$$.fragment,t),r=!1},d(t){B(e,t)}}}function ni(n){let e,r,t,i,o,a,s,l,u=!1,c=n[0].videoSources,d=[];for(let m=0;m<c.length;m+=1)d[m]=ln(sn(n,c,m));function h(){cancelAnimationFrame(i),r.paused||(i=wn(h),u=!0),n[18].call(r)}let f=n[2]&&un(n);return{c(){e=T("div"),r=T("video");for(let m=0;m<d.length;m+=1)d[m].c();o=U(),f&&f.c(),v(r,"class","v svelte-15ueftg"),v(r,"id",pt),r.muted=t=n[4]===0,v(r,"preload","metadata"),r.playsInline=!0,v(r,"style",n[5]),v(r,"x-webkit-airplay","allow"),v(r,"webkit-playsinline",""),r.controls=!1,v(e,"class","w svelte-15ueftg")},m(m,g){L(m,e,g),k(e,r);for(let b=0;b<d.length;b+=1)d[b].m(r,null);n[16](r),isNaN(n[4])||(r.volume=n[4]),k(e,o),f&&f.m(e,null),a=!0,s||(l=[S(r,"volumechange",n[17]),S(r,"canplay",n[14]),S(r,"play",n[8]),S(r,"play",n[7],{once:!0}),S(r,"pause",n[10]),S(r,"error",n[9]),S(r,"click",n[13]),S(r,"volumechange",n[12]),S(r,"timeupdate",h),S(r,"mouseover",n[15]),S(r,"ended",n[11])],s=!0)},p(m,[g]){if(1&g){let b;for(c=m[0].videoSources,b=0;b<c.length;b+=1){const w=sn(m,c,b);d[b]?d[b].p(w,g):(d[b]=ln(w),d[b].c(),d[b].m(r,null))}for(;b<d.length;b+=1)d[b].d(1);d.length=c.length}(!a||16&g&&t!==(t=m[4]===0))&&(r.muted=t),(!a||32&g)&&v(r,"style",m[5]),16&g&&!isNaN(m[4])&&(r.volume=m[4]),!u&&64&g&&!isNaN(m[6])&&(r.currentTime=m[6]),u=!1,m[2]?f?(f.p(m,g),4&g&&N(f,1)):(f=un(m),f.c(),N(f,1),f.m(e,null)):f&&(xe(),C(f,1,1,()=>{f=null}),Ee())},i(m){a||(N(f),a=!0)},o(m){C(f),a=!1},d(m){m&&R(e),function(g,b){for(let w=0;w<g.length;w+=1)g[w]&&g[w].d(b)}(d,m),n[16](null),f&&f.d(),s=!1,te(l)}}}function ri(n,e,r){let t,i,o,a,s;var l,u,c;q(n,re,y=>r(3,t=y)),q(n,le,y=>r(23,i=y)),q(n,ve,y=>r(4,o=y)),q(n,Xt,y=>r(5,a=y)),q(n,ne,y=>r(6,s=y));let{props:d={videoSources:[{src:"",type:"video/mp4",media:"",poster:""}],currentAds:{},config:{},wrapper:document.createElement("div"),container:document.createElement("div"),frame:document.createElement("iframe")}}=e,h="",f=!1;const m=(l=d.currentAds)===null||l===void 0?void 0:l.tracker;let g;const b=((u=d.config.targetVideo)===null||u===void 0?void 0:u.volume)||0,w=(c=d.config.targetVideo)===null||c===void 0?void 0:c.muted,A=()=>{Y.set(new _t)};let E=ne.subscribe(y=>{qt()&&jt("pause"),typeof g=="function"&&g(y)&&m.setProgress(y)});return _e(()=>{var y;g=(()=>{let I=0;return O=>O>I&&(I=O,!0)})(),((I,O,z)=>{const K=new ResizeObserver(()=>{Ke(O),Ne()&&!Je()&&Y.set(new me(Z["User left page"]))});z.set(K),K.observe(O||I)})(d.wrapper,d.frame?d.frame:d.container,Wt),ve.set(w?0:b),m.on("clickthrough",I=>{window.open(I)}),m.on("firstQuartile",()=>{}),m.on("midpoint",()=>{}),m.on("thirdQuartile",()=>{}),m.on("rewind",()=>{}),m.on("loaded",()=>{}),m.on("creativeView",()=>{Tr.set(!0)}),m.on("complete",()=>{Y.set(new Be)}),m.on("skip",()=>{Y.set(new Be)});const $=t.querySelector("source:last-child");if($==null||$.addEventListener("error",A),d.config.isYoutubeWrapper){const I={element:ei(".ytp-next-button"),unsubscribe:()=>{}};r(1,h=String((y=I.element)===null||y===void 0?void 0:y.getAttribute("href")))}t.load(),t.play().catch(()=>{ze(re,t.muted=!0,t),ze(re,t.volume=0,t),t.play()})}),lt(()=>{var y;E(),(y=t.querySelector("source:last-child"))===null||y===void 0||y.removeEventListener("error",A)}),n.$$set=y=>{"props"in y&&r(0,d=y.props)},[d,h,f,t,o,a,s,()=>{var y,$,I,O,z;m.trackImpression(),(y=d.config.targetVideo)===null||y===void 0||y.pause(),d.frame&&(z=d.frame,Ht(z,"pauseVideo"));const K=(I=($=d.currentAds)===null||$===void 0?void 0:$.ads)===null||I===void 0?void 0:I.advertiser;(D=>{var P;try{localStorage.setItem(dt,String(Date.now()))}catch{}try{(P=chrome==null?void 0:chrome.runtime)===null||P===void 0||P.sendMessage({type:"antistaff_progress",value:D})}catch{}})(Array.isArray(K)?(O=K[0])===null||O===void 0?void 0:O.value:K==null?void 0:K.value)},()=>{m.setPaused(!1)},A,()=>m.setPaused(!0),()=>{m.complete()},()=>{m==null||m.setMuted(t.muted)},()=>{Zt()},()=>{le.set(t.duration),m.setDuration(i),m.load(),r(2,f=!0)},()=>{m.otherAdInteraction()},function(y){Te[y?"unshift":"push"](()=>{t=y,re.set(t)})},function(){o=this.volume,ve.set(o)},function(){s=this.currentTime,ne.set(s)}]}class ii extends W{constructor(e){super(),_(this,e,ri,ni,V,{props:0},ti)}}let cn=!1;function ai(n){const e=r=>{!n||n.contains(r.target)||r.defaultPrevented||n.dispatchEvent(new CustomEvent("click_outside",n))};return document.addEventListener("click",e,!0),{destroy(){document.removeEventListener("click",e,!0)}}}function oi(n){X(n,"svelte-7s7kzn",'.sf-w.svelte-7s7kzn.svelte-7s7kzn{display:flex;background-color:#3c3c3c;color:white;align-items:center;height:max-content;margin-right:15px;position:absolute;top:16px;padding:8px 12px;right:0;border-radius:50%;cursor:pointer;z-index:61;-moz-box-sizing:border-box;box-sizing:border-box;transition:background-color 0.15s ease-in-out;border:none}.sf-a.svelte-7s7kzn.svelte-7s7kzn{display:flex;justify-content:center;align-items:center;background:#3c3c3c;color:white;position:absolute;padding:20px 40px;right:20px;flex-direction:column}.sf-a.svelte-7s7kzn span.svelte-7s7kzn{padding:5px}.sf-a-h.svelte-7s7kzn.svelte-7s7kzn{padding:0;margin:0;border:none;color:white}.sf-a-b.svelte-7s7kzn.svelte-7s7kzn{color:#fff;transition:all 0.5s;position:relative;margin-top:5px;padding:5px;display:flex;align-items:center;justify-content:center;cursor:pointer}.sf-a-c.svelte-7s7kzn.svelte-7s7kzn{color:#fff;transition:all 0.5s;position:absolute;top:6px;right:6px;cursor:pointer;background:none;border:none}.sf-a-b.svelte-7s7kzn.svelte-7s7kzn::before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;z-index:1;background-color:rgba(255, 255, 255, 0.1);transition:all 0.3s}.sf-a-b.svelte-7s7kzn.svelte-7s7kzn:hover::before{opacity:0;transform:scale(0.5, 0.5)}.sf-a-b.svelte-7s7kzn.svelte-7s7kzn::after{content:"";position:absolute;top:0;left:0;width:100%;height:100%;z-index:1;opacity:0;transition:all 0.3s;border:1px solid rgba(255, 255, 255, 0.5);transform:scale(1.2, 1.2)}.sf-a-b.svelte-7s7kzn.svelte-7s7kzn:hover::after{opacity:1;transform:scale(1, 1)}')}function si(n){let e,r,t,i,o,a,s,l,u;return{c(){e=T("div"),r=T("button"),r.textContent="\u2716",t=U(),i=T("h4"),i.textContent=`${n[1]}`,o=U(),a=T("div"),s=T("span"),s.textContent=`${n[2]}`,v(r,"class","sf-a-c svelte-7s7kzn"),v(i,"class","sf-a-h svelte-7s7kzn"),v(s,"class","svelte-7s7kzn"),v(a,"class","btn sf-a-b svelte-7s7kzn"),v(e,"class","sf-a svelte-7s7kzn")},m(c,d){var h;L(c,e,d),k(e,r),k(e,t),k(e,i),k(e,o),k(e,a),k(a,s),l||(u=[S(r,"click",n[3]),S(a,"click",n[4]),(h=ai.call(null,e),h&&it(h.destroy)?h.destroy:x),S(e,"click_outside",n[3])],l=!0)},p:x,d(c){c&&R(e),l=!1,te(u)}}}function li(n){let e,r,t;return{c(){e=T("button"),e.textContent="?",v(e,"class","sf-w svelte-7s7kzn")},m(i,o){L(i,e,o),r||(t=S(e,"click",n[3]),r=!0)},p:x,d(i){i&&R(e),r=!1,t()}}}function ui(n){let e;function r(o,a){return o[0]?li:si}let t=r(n),i=t(n);return{c(){i.c(),e=Ie()},m(o,a){i.m(o,a),L(o,e,a)},p(o,[a]){t===(t=r(o))&&i?i.p(o,a):(i.d(1),i=t(o),i&&(i.c(),i.m(e.parentNode,e)))},i:x,o:x,d(o){i.d(o),o&&R(e)}}}function ci(n,e,r){let t;const i=/en/g.test(navigator.language),o=i?"Ads from SaveFrom":"\u0420\u0435\u043A\u043B\u0430\u043C\u0430 \u043E\u0442 SaveFrom",a=i?"Disable ads for 30 days":"\u041E\u0442\u043A\u043B\u044E\u0447\u0438\u0442\u044C \u043D\u0430 30 \u0434\u043D\u0435\u0439";return r(0,t=!0),[t,o,a,s=>{s.preventDefault(),r(0,t=!t)},()=>{const s=new Date,l=s.setDate(s.getDate()+30);localStorage.setItem(et,String(l)),Y.set(new me(Z["User disable ads"]))}]}class di extends W{constructor(e){super(),_(this,e,ci,ui,V,{},oi)}}function pi(n){X(n,"svelte-1svcndf",'.gradient.svelte-1svcndf{height:48px;padding-bottom:50px;top:0;background-position:top;width:100%;position:absolute;background-repeat:repeat-x;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAADGCAYAAAAT+OqFAAAAdklEQVQoz42QQQ7AIAgEF/T/D+kbq/RWAlnQyyazA4aoAB4FsBSA/bFjuF1EOL7VbrIrBuusmrt4ZZORfb6ehbWdnRHEIiITaEUKa5EJqUakRSaEYBJSCY2dEstQY7AuxahwXFrvZmWl2rh4JZ07z9dLtesfNj5q0FU3A5ObbwAAAABJRU5ErkJggg==);-webkit-transition:opacity 0.25s cubic-bezier(0, 0, 0.2, 1);transition:opacity 0.25s cubic-bezier(0, 0, 0.2, 1);pointer-events:none;z-index:999999;box-sizing:content-box}.header.svelte-1svcndf{position:absolute;display:block;content:"Ads";color:rgb(238, 238, 238);width:100%;z-index:999999999999;width:100%;padding:12px 12px 0 16px;box-sizing:border-box;top:0;background:none;border:none}.desc-text.svelte-1svcndf{font-size:18px;margin-right:auto;margin-left:10px;color:rgb(238, 238, 238);display:flex;align-items:center}.desc--full.svelte-1svcndf{display:grid;grid-template-columns:60px 1fr 120px}.desc--short.svelte-1svcndf{display:grid;grid-template-columns:1fr 120px}.desc-icon.svelte-1svcndf{width:40px;z-index:2}')}function mi(n){let e,r,t,i,o,a,s=n[0]&&function(u){let c,d;return{c(){c=T("img"),v(c,"class","desc-icon svelte-1svcndf"),de(c.src,d=u[0])||v(c,"src",d),v(c,"alt","ads-logo")},m(h,f){L(h,c,f)},p:x,d(h){h&&R(c)}}}(n),l=n[1]&&function(u){let c;return{c(){c=T("div"),c.textContent=`${u[1]}`,v(c,"class","desc-text svelte-1svcndf")},m(d,h){L(d,c,h)},p:x,d(d){d&&R(c)}}}(n);return i=new di({}),{c(){var u;e=T("div"),s&&s.c(),r=U(),l&&l.c(),t=U(),F(i.$$.fragment),v(e,"class",(u=n[0]?"desc--full":"desc--short",o=(u==null?"":u)+" svelte-1svcndf"))},m(u,c){L(u,e,c),s&&s.m(e,null),k(e,r),l&&l.m(e,null),k(e,t),M(i,e,null),a=!0},p(u,c){u[0]&&s.p(u,c),u[1]&&l.p(u,c)},i(u){a||(N(i.$$.fragment,u),a=!0)},o(u){C(i.$$.fragment,u),a=!1},d(u){u&&R(e),s&&s.d(),l&&l.d(),B(i)}}}function fi(n){let e,r,t,i,o=!n[2]&&mi(n);return{c(){e=T("div"),r=U(),t=T("div"),o&&o.c(),v(e,"class","gradient svelte-1svcndf"),v(t,"class","header svelte-1svcndf")},m(a,s){L(a,e,s),L(a,r,s),L(a,t,s),o&&o.m(t,null),i=!0},p(a,[s]){a[2]||o.p(a,s)},i(a){i||(N(o),i=!0)},o(a){C(o),i=!1},d(a){a&&R(e),a&&R(r),a&&R(t),o&&o.d()}}}function hi(n,e,r){var t;let{currentAds:i}=e,{config:o}=e;const a=i.ads.creatives[0],s=(t=a==null?void 0:a.icons[0])===null||t===void 0?void 0:t.staticResource,l=i.ads.description;let u=!s&&!l;return n.$$set=c=>{"currentAds"in c&&r(3,i=c.currentAds),"config"in c&&r(4,o=c.config)},[s,l,u,i,o]}class gi extends W{constructor(e){super(),_(this,e,hi,fi,V,{currentAds:3,config:4},pi)}}function vi(n){X(n,"svelte-l91hul",".df-wrapper.svelte-l91hul{top:0;z-index:9999999999;position:absolute;width:100%;height:100%;background:black}")}function dn(n){let e,r,t,i,o,a,s,l,u,c,d,h;r=new gi({props:{currentAds:n[0],config:n[1]}}),i=new ii({props:{props:{wrapper:n[4],videoSources:n[9],currentAds:n[0],config:n[1],container:n[2],frame:n[3]}}});const f=[bi,yi],m=[];return a=function(g,b){return g[8].skipDelay?0:1}(n),s=m[a]=f[a](n),u=new ur({props:{currentAds:n[0],isEngLang:n[10],config:n[1]}}),{c(){e=T("div"),F(r.$$.fragment),t=U(),F(i.$$.fragment),o=U(),s.c(),l=U(),F(u.$$.fragment),v(e,"class","df-wrapper svelte-l91hul"),v(e,"style",n[7])},m(g,b){L(g,e,b),M(r,e,null),k(e,t),M(i,e,null),k(e,o),m[a].m(e,null),k(e,l),M(u,e,null),n[12](e),c=!0,d||(h=[S(e,"mouseover",Ti),S(e,"focus",xi)],d=!0)},p(g,b){const w={};1&b&&(w.currentAds=g[0]),2&b&&(w.config=g[1]),r.$set(w);const A={};31&b&&(A.props={wrapper:g[4],videoSources:g[9],currentAds:g[0],config:g[1],container:g[2],frame:g[3]}),i.$set(A),s.p(g,b);const E={};1&b&&(E.currentAds=g[0]),2&b&&(E.config=g[1]),u.$set(E),(!c||128&b)&&v(e,"style",g[7])},i(g){c||(N(r.$$.fragment,g),N(i.$$.fragment,g),N(s),N(u.$$.fragment,g),c=!0)},o(g){C(r.$$.fragment,g),C(i.$$.fragment,g),C(s),C(u.$$.fragment,g),c=!1},d(g){g&&R(e),B(r),B(i),m[a].d(),B(u),n[12](null),d=!1,te(h)}}}function yi(n){let e,r;return e=new Qt({props:{isEngLang:n[10],skipCoundown:n[6],skipEnable:!!n[8].skipDelay}}),{c(){F(e.$$.fragment)},m(t,i){M(e,t,i),r=!0},p(t,i){const o={};64&i&&(o.skipCoundown=t[6]),e.$set(o)},i(t){r||(N(e.$$.fragment,t),r=!0)},o(t){C(e.$$.fragment,t),r=!1},d(t){B(e,t)}}}function bi(n){let e,r,t,i,o;const a=[wi,ki],s=[];function l(u,c){return 64&c&&(e=null),e==null&&(e=!!(u[6]>.3&&Ne())),e?0:1}return r=l(n,-1),t=s[r]=a[r](n),{c(){t.c(),i=Ie()},m(u,c){s[r].m(u,c),L(u,i,c),o=!0},p(u,c){let d=r;r=l(u,c),r===d?s[r].p(u,c):(xe(),C(s[d],1,1,()=>{s[d]=null}),Ee(),t=s[r],t?t.p(u,c):(t=s[r]=a[r](u),t.c()),N(t,1),t.m(i.parentNode,i))},i(u){o||(N(t),o=!0)},o(u){C(t),o=!1},d(u){s[r].d(u),u&&R(i)}}}function ki(n){let e,r;return e=new kr({props:{skipCoundown:n[6],currentAds:n[0],isEngLang:n[10]}}),{c(){F(e.$$.fragment)},m(t,i){M(e,t,i),r=!0},p(t,i){const o={};64&i&&(o.skipCoundown=t[6]),1&i&&(o.currentAds=t[0]),e.$set(o)},i(t){r||(N(e.$$.fragment,t),r=!0)},o(t){C(e.$$.fragment,t),r=!1},d(t){B(e,t)}}}function wi(n){let e,r;return e=new Qt({props:{isEngLang:n[10],skipCoundown:n[6],skipEnable:!!n[8].skipDelay}}),{c(){F(e.$$.fragment)},m(t,i){M(e,t,i),r=!0},p(t,i){const o={};64&i&&(o.skipCoundown=t[6]),e.$set(o)},i(t){r||(N(e.$$.fragment,t),r=!0)},o(t){C(e.$$.fragment,t),r=!1},d(t){B(e,t)}}}function Ai(n){let e,r,t=n[5]&&dn(n);return{c(){t&&t.c(),e=Ie()},m(i,o){t&&t.m(i,o),L(i,e,o),r=!0},p(i,[o]){i[5]?t?(t.p(i,o),32&o&&N(t,1)):(t=dn(i),t.c(),N(t,1),t.m(e.parentNode,e)):t&&(xe(),C(t,1,1,()=>{t=null}),Ee())},i(i){r||(N(t),r=!0)},o(i){C(t),r=!1},d(i){t&&t.d(i),i&&R(e)}}}const Ti=n=>n.preventDefault(),xi=n=>n.preventDefault();function Ei(n,e,r){let t,i;q(n,Kt,y=>r(7,i=y));let{config:o}=e,{currentAds:a}=e,{container:s}=e,{isYoutubeEmbedded:l}=e,{youtubeFrame:u}=e;const c=a.ads.creatives[0],d=((y,$)=>{if((y==null?void 0:y.length)===1&&Yt(String(y[0].mimeType)))return[{src:y[0].fileURL,type:y[0].mimeType,media:"all",poster:""}];const I=y==null?void 0:y.sort((O,z)=>O.width<z.width?-1:1);return I==null?void 0:I.reduce((O,z,K)=>(Yt(String(z.mimeType))&&O.push({src:z.fileURL,type:z.mimeType,media:$[K],poster:""}),O),[])})(c.mediaFiles,o.media_querys),h=/en/g.test(navigator.language);let f;const m=c.skipDelay||1/0;let g=!1;const b=()=>{r(5,g=!0)};let w=(A=b,y=>{let $;try{$=JSON.parse(y.data)}catch{}if(y.origin==="https://www.youtube.com"&&y.data!==void 0)try{if($.event!=="onStateChange")return;$.info!==1||cn||(A(),cn=!0)}catch{}});var A;let E=ne.subscribe(y=>{r(6,t=y>m?0:m-Math.floor(y))});return _e(()=>{var y,$;a.tracker.on("skip-countdown",I=>{r(6,t=I)}),l&&(I=>I.contentWindow!==void 0)($=u)&&($.onload=()=>{var I,O;let z=JSON.stringify({event:"listening",id:$.id,channel:"widget"});(I=$.contentWindow)===null||I===void 0||I.postMessage(z,"https://www.youtube.com"),z=JSON.stringify({event:"command",func:"addEventListener",args:["onStateChange"],id:$.id,channel:"widget"}),(O=$.contentWindow)===null||O===void 0||O.postMessage(z,"https://www.youtube.com")}),l?window.addEventListener("message",w):(y=o.targetVideo)===null||y===void 0||y.addEventListener("timeupdate",b)}),lt(()=>{var y;typeof a.tracker.removeAllListeners=="function"&&wr.forEach($=>a.tracker.removeAllListeners($)),r(0,a.tracker=void 0,a),E(),ne.set(0),le.set(0),Qe.set(!0),re.set(document.createElement("video")),l?window.removeEventListener("message",w):(y=o.targetVideo)===null||y===void 0||y.removeEventListener("timeupdate",b)}),n.$$set=y=>{"config"in y&&r(1,o=y.config),"currentAds"in y&&r(0,a=y.currentAds),"container"in y&&r(2,s=y.container),"isYoutubeEmbedded"in y&&r(11,l=y.isYoutubeEmbedded),"youtubeFrame"in y&&r(3,u=y.youtubeFrame)},r(6,t=m||0),[a,o,s,u,f,g,t,i,c,d,h,l,function(y){Te[y?"unshift":"push"](()=>{f=y,r(4,f)})}]}class Ri extends W{constructor(e){super(),_(this,e,Ei,Ai,V,{config:1,currentAds:0,container:2,isYoutubeEmbedded:11,youtubeFrame:3},vi)}}const pn=async n=>{n.playerInstansParams.url,clearInterval(n.playerInstansParams.checkInterval),((r,t)=>{r.set(new Be),t(),r.set(new kn)})(Y,n.playerInstansParams.unsubscribeWrapper);const e=await nr({insertTo:n.insertTo,unsubscribeWrapper:n.playerInstansParams.unsubscribeWrapper,COMPANY_URL_INDEPENDENT:n.playerInstansParams.COMPANY_URL_INDEPENDENT,uiRootElement:Ri});n.playerInstansParams.unsubscribeWrapper=e.unsubscribeWrapper,n.insertTo.video=e.previosPlayerDomTarget?e.previosPlayerDomTarget:n.insertTo.video},Li=()=>{const n={COMPANY_URL_INDEPENDENT:"https://vst.doubleclick.host/048d8a50a322bcdd1cb4515107c79994",previosPlayerDomTarget:document.createElement("video"),url:location.href,unsubscribeWrapper:()=>{},checkInterval:null};Ne()?((e,r)=>{let t=!1,i=!1;window.addEventListener("yt-navigate-finish",()=>{t=!0,i=!1},!0),window.addEventListener("yt-rendererstamper-finished",()=>{if(t&&!i){t=!1,i=!0;const o=Ve();Je()&&r({insertTo:{video:o,isYoutubeWrapper:!0},playerInstansParams:e})}},!0)})(n,pn):bn(n,pn)},Ni=(Number(localStorage.getItem(et))||1)<Date.now(),Ci=(Number(localStorage.getItem(tt))||1)<Date.now();!window.IS_BLOCK&&Ni&&Ci&&((()=>{const n=new Date,e=n.setSeconds(n.getSeconds()+10);localStorage.setItem(tt,String(e))})(),Li())})();
