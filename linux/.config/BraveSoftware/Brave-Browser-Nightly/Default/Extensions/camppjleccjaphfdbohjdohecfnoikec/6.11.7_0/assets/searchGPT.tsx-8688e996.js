import{r as i,j as e,R as Fe,c as Re}from"./client-45b27fd3.js";import{g as _e,b as Ge,d as Ve,R as Se,U as We,a as pt,e as xt,A as ht,t as gt,c as Ue}from"./index-9b1f0f42.js";import{L as Me}from"./hook-ae816606.js";import{c as H,k as bt,L as le,o as Y,g as wt,p as vt}from"./index-825701e8.js";import{C as yt}from"./index-24d5af66.js";import{b as Xe,a as Rt,A as St}from"./index-37dc4817.js";import{b as Et,a as Pe,S as jt,C as Tt}from"./Combination-d7972bd9.js";import{a as Nt,M as Ct}from"./messageContext-827c44b4.js";import{T as At}from"./themeContext-38ece4f9.js";import{c as It}from"./index-203ce83a.js";import{G as _t}from"./globalInfoBanner-9dda3b2e.js";import{S as de,B as me}from"./skeleton-e68ed841.js";import{_ as J,$ as he}from"./index-cf2cbbfc.js";import{$ as Mt,c as Ee,d as Pt,a as kt,b as $t}from"./index-9811e1a4.js";import{$ as Ye,i as Lt,j as Ft,D as Ut,a as Bt,b as Dt,k as qt,e as Be,d as De,c as re}from"./dropdown-menu-fa01664b.js";import{c as G}from"./utils-01642ffa.js";import{q as Je,a as Ot}from"./backend-b5a741e2.js";import{f as E,o as Ht}from"./analytics-46c41402.js";import{b as je,f as Te}from"./webAccess-fb5e9839.js";import{u as qe}from"./useSSE-35954031.js";import{B as M}from"./button-f1c09d10.js";import{S as Ke}from"./merlin-logo-9fa3c977.js";import{u as ae}from"./useTranslation-c38a45bb.js";import{C as Oe}from"./index-e56b565e.js";import{c as Qt,A as fe,d as Ze,a as ne}from"./avatar-31868758.js";import{I as zt}from"./IconX-71686591.js";import{m as O}from"./motion-2f15212b.js";import{A as He}from"./index-39fb8d8a.js";import{I as Gt,a as Vt}from"./IconPhoto-e458151a.js";import{I as Qe}from"./IconChevronUp-6396b04a.js";import{c as et}from"./createReactComponent-d14705e3.js";import{I as Wt}from"./IconCheck-740a5f2a.js";import{I as Xt}from"./IconCopy-3f3f64da.js";import{I as Yt}from"./IconSend-9aa4a715.js";import{F as Jt}from"./index-fa8b2430.js";import{I as tt}from"./IconRocket-83cf4884.js";import{I as ze}from"./IconArrowUpRight-40f005f6.js";import{I as ue}from"./IconUser-ea7f052a.js";import{I as Kt}from"./IconSettings-4208f539.js";import{I as Zt}from"./IconLogout-0896d545.js";import{I as es}from"./IconSearch-2beabc71.js";import{I as ts}from"./IconExclamationCircle-56aaab40.js";import{c as ss,a as rs}from"./atom-one-light-7372aee1.js";import{c as ns}from"./index-5c33a703.js";import{P as as}from"./PersistQueryClientProvider-53edff98.js";import"./v4-4a60fe23.js";import"./purify.es-8e338605.js";import"./utils-f7fcf05a.js";import"./useAsyncWithPromise-6dde1473.js";import"./IconThumbUp-e2c311b9.js";var os=et("circle-filled","IconCircleFilled",[["path",{d:"M7 3.34a10 10 0 1 1 -4.995 8.984l-.005 -.324l.005 -.324a10 10 0 0 1 4.995 -8.336z",fill:"currentColor",key:"svg-0",strokeWidth:"0"}]]),is=et("star","IconStar",[["path",{d:"M12 17.75l-6.172 3.245l1.179 -6.873l-5 -4.867l6.9 -1l3.086 -6.253l3.086 6.253l6.9 1l-5 4.867l1.179 6.873z",key:"svg-0"}]]);const st="Tabs",[cs,Ir]=Mt(st,[Ye]),rt=Ye(),[ls,ke]=cs(st),ds=i.forwardRef((s,r)=>{const{__scopeTabs:a,value:h,onValueChange:c,defaultValue:n,orientation:f="horizontal",dir:x,activationMode:g="automatic",...l}=s,y=Et(x),[b,j]=kt({prop:h,onChange:c,defaultProp:n});return i.createElement(ls,{scope:a,baseId:$t(),value:b,onValueChange:j,orientation:f,dir:y,activationMode:g},i.createElement(he.div,J({dir:y,"data-orientation":f},l,{ref:r})))}),us="TabsList",ms=i.forwardRef((s,r)=>{const{__scopeTabs:a,loop:h=!0,...c}=s,n=ke(us,a),f=rt(a);return i.createElement(Lt,J({asChild:!0},f,{orientation:n.orientation,dir:n.dir,loop:h}),i.createElement(he.div,J({role:"tablist","aria-orientation":n.orientation},c,{ref:r})))}),fs="TabsTrigger",ps=i.forwardRef((s,r)=>{const{__scopeTabs:a,value:h,disabled:c=!1,...n}=s,f=ke(fs,a),x=rt(a),g=nt(f.baseId,h),l=at(f.baseId,h),y=h===f.value;return i.createElement(Ft,J({asChild:!0},x,{focusable:!c,active:y}),i.createElement(he.button,J({type:"button",role:"tab","aria-selected":y,"aria-controls":l,"data-state":y?"active":"inactive","data-disabled":c?"":void 0,disabled:c,id:g},n,{ref:r,onMouseDown:Ee(s.onMouseDown,b=>{!c&&b.button===0&&b.ctrlKey===!1?f.onValueChange(h):b.preventDefault()}),onKeyDown:Ee(s.onKeyDown,b=>{[" ","Enter"].includes(b.key)&&f.onValueChange(h)}),onFocus:Ee(s.onFocus,()=>{const b=f.activationMode!=="manual";!y&&!c&&b&&f.onValueChange(h)})})))}),xs="TabsContent",hs=i.forwardRef((s,r)=>{const{__scopeTabs:a,value:h,forceMount:c,children:n,...f}=s,x=ke(xs,a),g=nt(x.baseId,h),l=at(x.baseId,h),y=h===x.value,b=i.useRef(y);return i.useEffect(()=>{const j=requestAnimationFrame(()=>b.current=!1);return()=>cancelAnimationFrame(j)},[]),i.createElement(Pt,{present:c||y},({present:j})=>i.createElement(he.div,J({"data-state":y?"active":"inactive","data-orientation":x.orientation,role:"tabpanel","aria-labelledby":g,hidden:!j,id:l,tabIndex:0},f,{ref:r,style:{...s.style,animationDuration:b.current?"0s":void 0}}),j&&n))});function nt(s,r){return`${s}-trigger-${r}`}function at(s,r){return`${s}-content-${r}`}const gs=ds,ot=ms,it=ps,ct=hs,bs=gs,lt=i.forwardRef(({className:s,...r},a)=>e.jsx(ot,{ref:a,className:G("bg-muted text-muted-foreground inline-flex h-9 items-center justify-center rounded-lg p-1",s),...r}));lt.displayName=ot.displayName;const Ie=i.forwardRef(({className:s,...r},a)=>e.jsx(it,{ref:a,className:G("ring-offset-background focus-visible:ring-ring data-[state=active]:bg-background data-[state=active]:text-foreground inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow",s),...r}));Ie.displayName=it.displayName;const ws=i.forwardRef(({className:s,...r},a)=>e.jsx(ct,{ref:a,className:G("ring-offset-background focus-visible:ring-ring mt-2 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2",s),...r}));ws.displayName=ct.displayName;function pe({children:s}){const[r,a]=i.useState(!1),[h,c]=i.useState(0),n=i.useRef(null);return i.useEffect(()=>{var f;n!=null&&n.current&&c((f=n==null?void 0:n.current)==null?void 0:f.textContent.length)},[s]),e.jsxs("div",{ref:n,className:G("w-full",h>15&&"truncate"),onMouseLeave:()=>a(!r),onMouseEnter:()=>a(!r),children:[s,r&&h>15&&e.jsx("div",{className:"opacity-1 text-foreground bg-background absolute -top-3.5 left-1/2 z-[999] -translate-x-1/2 rounded-lg border bg-zinc-200 px-2 py-0.5 shadow-md dark:bg-zinc-700",children:s})]})}function vs(s){const{queryTerms:r}=s,[a,h]=i.useState(null),{t:c}=ae(),{merlinConfig:n}=i.useContext(Pe);return i.useEffect(()=>{let f=!1;n.availableTools.forEach((x,g)=>{x.keywords.forEach(l=>{if(r.toLowerCase().includes(l.toLowerCase())){h(n.availableTools[g]),f=!0;return}})})},[r,n]),e.jsx(e.Fragment,{children:a&&e.jsxs("div",{className:"dark:bg-background my-4 flex  flex-col justify-between rounded-lg border-zinc-300  bg-zinc-50 p-3 dark:border-zinc-700",children:[e.jsx("img",{src:a.toolImage,alt:"",className:"h-[194.63px] w-full rounded-lg"}),e.jsxs(M,{className:"mt-2 flex w-full items-center space-x-2 font-semibold",onClick:()=>{E({eventData:{searchedKeyword:r,toolName:a.toolName},eventName:"Serp Tools Advertisement Card",eventType:"Button",firedFromFile:"features/serp/advertisementCard"}),window.open(a.ctaLink,"_blank")},children:[e.jsx(Ke,{className:"h-4"}),e.jsx("p",{children:c("serp_index.try_for_free")})]})]})})}function ys({setCurrentMode:s,toggleRealtimeMode:r}){const{t:a}=ae();return e.jsxs("div",{className:"color-background flex flex-row gap-3 rounded-lg border p-3",children:[e.jsx("div",{className:"text-muted-foreground text-xs font-normal",children:a("serp_index.use_live_search")}),e.jsx("div",{children:e.jsx(M,{onClick:()=>{s("REALTIME"),E({eventName:"tryRealtimeCTASERP",eventType:"Button",feature:"SUPER SERP",firedFromFile:"src/features/serp/body.tsx"}),r(!0)},children:a("serp_index.realtime")})})]})}const xe=Qt(s=>({currentMode:"",defaultResponse:{answer:"",relatedQuestions:[]},realtimeResponse:{answer:"",medias:[],relatedQuestions:[],sources:[]},setCurrentMode:r=>s(()=>({currentMode:r})),setDefaultAnswer:r=>{s(a=>({defaultResponse:{...a.defaultResponse,answer:`${a.defaultResponse.answer}${r}`}}))},setDefaultRelatedQuestions:r=>s(a=>({defaultResponse:{...a.defaultResponse,relatedQuestions:r}})),setRealtimeAnswer:r=>{s(a=>({realtimeResponse:{...a.realtimeResponse,answer:`${a.realtimeResponse.answer}${r}`}}))},setRealtimeMedias:r=>{s(a=>({realtimeResponse:{...a.realtimeResponse,medias:r}}))},setRealtimeRelatedQuestions:r=>s(a=>({realtimeResponse:{...a.realtimeResponse,relatedQuestions:r}})),setRealtimeSources:r=>{s(a=>({realtimeResponse:{...a.realtimeResponse,sources:r}}))}})),Ne=3e3,Rs=[4,5,3,4,4,5,2,3,4,5,5,3];function Ss({fetchData:s,isLoading:r,isStreamingClosed:a,isSuccess:h,queryTerms:c,realtimeLimitExceeded:n,requestIdHeader:f,setTriggerCompleteResponseAfterLogin:x,toggleRealtimeMode:g}){const{t:l}=ae(),[y,b]=i.useState(!1),[j,B]=i.useState(!1),[P,T]=i.useState(!1),[R,L]=i.useState([]),[A=We,I]=Me({instance:new _e({area:"local"}),key:"UserSettings"}),{...N}=i.useContext(Xe),{currentMode:w,defaultResponse:_,realtimeResponse:v,setCurrentMode:K}=xe(p=>({currentMode:p.currentMode,defaultResponse:p.defaultResponse,realtimeResponse:p.realtimeResponse,setCurrentMode:p.setCurrentMode}));i.useContext(Pe);const[F,V]=i.useState(Ne),[Q,Z]=i.useState(!1),ee=Fe.useRef(null),z=Fe.useRef(w==="DEFAULT"),te=()=>(F-Ne)/Ne*282.6,ge=()=>{Z(!0)};async function oe(){clearInterval(ee.current),Z(!1),K("DEFAULT"),V(0),s(),z.current=!0,await I({...A,serp:{...A.serp,realtime:!1}})}i.useEffect(()=>{L(w==="DEFAULT"?_.relatedQuestions:v.relatedQuestions)},[w,_.relatedQuestions,v.relatedQuestions]),i.useEffect(()=>{w==="DEFAULT"&&V(0)},[w]),i.useEffect(()=>(Q&&F>0?ee.current=setInterval(()=>{V(p=>p-10)},10):!Q&&F===0&&(V(0),Z(!1)),F===0&&Q&&oe(),()=>clearInterval(ee.current)),[Q,F]),i.useEffect(()=>{w==="REALTIME"&&(!N.isAuthenticated||n)&&!z.current&&ge()},[N.isAuthenticated,w,n]);function be(){navigator.clipboard.writeText(w==="REALTIME"?v.answer:_.answer),b(!0),setTimeout(()=>{b(!1)},1e3),E({eventName:"CopyButton",eventType:"Button",feature:"SUPER SERP",firedFromFile:"src/features/serp/body.tsx"})}function se(){return e.jsxs("div",{className:"space-y-4 pt-2",children:[w==="REALTIME"&&e.jsxs("div",{className:" grid h-full grid-cols-3 items-center justify-start gap-2 overflow-x-auto",children:[e.jsx(de,{className:"h-24 space-y-1 overflow-hidden rounded-lg  hover:cursor-pointer"}),e.jsx(de,{className:"h-24 space-y-1 overflow-hidden rounded-lg  hover:cursor-pointer"}),e.jsx(de,{className:"h-24 space-y-1 overflow-hidden rounded-lg hover:cursor-pointer"})]}),Rs.map((p,S)=>e.jsxs("div",{className:"flex gap-3",children:[" ",[...Array(p)].map(k=>e.jsx(de,{className:"h-3 w-full"},k))]},S))]})}return w==="REALTIME"&&(!N.isAuthenticated||n)?e.jsx("div",{className:"flex h-full w-full flex-1 flex-col overflow-hidden",children:e.jsxs("div",{className:"bg-background merlinExt-custom-scrollbar relative flex min-h-[435px] w-full items-center justify-center overflow-y-auto",children:[e.jsxs(M,{size:"icon",variant:"ghost",className:"absolute right-2 top-2 h-7 w-7 rounded-full",onClick:oe,children:[e.jsx("svg",{className:"absolute right-0 top-0 h-full w-full -rotate-90 transform",viewBox:"0 0 100 100",children:e.jsx("circle",{className:"text-foreground",fill:"none",strokeWidth:"8",stroke:"currentColor",strokeDasharray:"282.6",strokeDashoffset:te(),strokeLinecap:"round",cx:"50",cy:"50",r:"45"})}),e.jsx(zt,{className:"h-4 w-4"})]}),e.jsxs("div",{className:"flex w-[60%] flex-col items-center justify-center gap-2 p-2 text-center",children:[e.jsx("span",{className:"text-lg font-semibold",children:N.isAuthenticated?`${l("serp_index.exhausted_all")}`:`${l("serp_index.login_for_free")}`}),e.jsxs(M,{variant:"ghost",className:"merlinExt-magic-btn-border relative my-4 flex rotate-6 items-center justify-center gap-2 rounded-full p-1 shadow-lg",children:[e.jsxs("div",{className:"bg-background center-with-flex h-full w-full rounded-full p-2",children:["🌐 ",l("serp_index.realtime_search_cta")]}),e.jsxs("div",{className:"absolute -right-6 -top-2 flex rotate-45 items-end gap-0.5",children:[e.jsx("div",{className:"border-muted-foreground w-3 rotate-45 border-t-2"}),e.jsx("div",{className:"border-muted-foreground  mb-1 w-3 rotate-90 border-t-2"}),e.jsx("div",{className:"border-muted-foreground w-3 -rotate-45 border-t-2"})]}),e.jsxs("div",{className:"items-endx absolute -bottom-2 -left-6 flex rotate-45 gap-0.5",children:[e.jsx("div",{className:"border-muted-foreground w-3 -rotate-45 border-t-2"}),e.jsx("div",{className:"border-muted-foreground  mt-1 w-3 rotate-90 border-t-2"}),e.jsx("div",{className:"border-muted-foreground w-3 rotate-45 border-t-2"})]})]}),e.jsx("span",{className:"text-muted-foreground text-sm",children:N.isAuthenticated?`${l("serp_index.subscribe_prompt")}`:`${l("serp_index.login_prompt")}`}),e.jsx(M,{onClick:()=>{E({eventName:N.isAuthenticated?"SubscribeCTARealtimeBody":"LoginCTARealtimeBody",eventType:"Button",feature:"SUPER SERP",firedFromFile:"src/features/serp/body.tsx"}),H(N.isAuthenticated?Ve+"?from=super-serp-realtime-cta":Ge),x(p=>p+1)},children:N.isAuthenticated?`${l("serp_index.subscribe")}`:`${l("serp_index.login")}`})]})]})}):e.jsxs(jt,{className:"relative flex w-full flex-1 flex-col",children:[e.jsx("div",{className:" relative w-full ",children:e.jsxs("div",{className:"bg-background min-h-[320px] w-full",children:[w==="REALTIME"&&v.sources.length>0&&e.jsx("div",{className:"w-full space-y-2 px-3 py-2",children:e.jsxs(O.div,{animate:{height:"auto",transition:{duration:.3}},className:"border-muted-background space-y-2 rounded-md border  px-2 py-2",children:[e.jsxs("div",{className:"flex h-6 items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:l("serp_index.sources")}),e.jsxs("button",{type:"button",onClick:()=>B(p=>!p),className:"flex items-center justify-center gap-2",children:[e.jsx(He,{children:!j&&a&&e.jsxs(O.div,{initial:{opacity:0,x:-150},animate:{opacity:1,transition:{duration:.3},x:0},exit:{opacity:0,x:-150},className:"relative flex items-center justify-center ",children:[v.sources.slice(0,3).map((p,S)=>e.jsxs(fe,{className:"border-muted-foreground bg-background -mr-2 h-6 w-6 rounded-full border ",children:[e.jsx(Ze,{src:p.imgLink}),e.jsx(ne,{children:e.jsx(Gt,{className:"text-muted-foreground"})})]},S)),v.sources.length-3>0&&e.jsx(fe,{className:"border-muted-foreground bg-background -mr-2 h-6 w-6 rounded-full border ",children:e.jsxs(ne,{className:"text-muted-foreground text-xs",children:["+",v.sources.length-3]})})]},0)}),e.jsx(Qe,{className:G("h-5 w-5 stroke-[2px] transition-all duration-200",j||!a?"rotate-0":"rotate-180")})]})]}),e.jsx(He,{children:(j||!a)&&e.jsx(O.div,{initial:{opacity:0,y:-20},animate:{opacity:1,transition:{duration:.3},y:0},className:G("text-muted-foreground grid h-full grid-cols-2 gap-2 overflow-x-auto"),children:v.sources.slice(0,2).map((p,S)=>e.jsxs(O.button,{initial:{opacity:0},animate:{opacity:1,transition:{duration:.3}},type:"button",onClick:()=>H(p.url),className:" space-y-1 overflow-hidden rounded-lg border  p-1.5 hover:cursor-pointer",children:[e.jsx("div",{className:"line-clamp-1 text-ellipsis  text-start text-xs",children:p.title}),e.jsxs("div",{className:"flex items-center justify-between gap-1 ",children:[e.jsxs("div",{className:"flex items-center justify-start gap-2 overflow-hidden text-ellipsis",children:[e.jsx("img",{className:"h-4 w-4 rounded-full",src:p.imgLink,alt:p.alt}),e.jsx("span",{className:"line-clamp-1 w-full text-start text-xs",children:p.url})]}),e.jsxs("div",{className:"flex items-center justify-end gap-1",children:[e.jsx(os,{className:"h-1 w-1  "}),e.jsxs("span",{className:"text-xs",children:[" ",S+1," "]})]})]})]},S))})})]})}),w==="REALTIME"&&v.answer.length==0||w!=="REALTIME"&&_.answer.length==0?e.jsx("div",{className:"px-3",children:se()}):e.jsxs("div",{className:"",children:[e.jsx("div",{className:" px-3 pt-1",children:e.jsx("div",{className:"text-foreground min-w-0 text-base",children:w==="DEFAULT"?e.jsx(Oe,{addMath:!1,content:_.answer}):e.jsx(Oe,{addMath:!1,content:v.answer.replaceAll(/\[citation:(.*?)\]/g,(p,S)=>{var k;return`<sup className="rounded-full text-xs cursor-pointer [&>*]:!text-white h-4 w-4 px-1 bg-zinc-400 hover:bg-zinc-500 dark:bg-zinc-700 hover:dark:bg-zinc-600">[${S}](${(k=v.sources[S-1])==null?void 0:k.url})</sup> `})})})}),!r&&e.jsx("div",{className:"mb-3 flex justify-start px-3",children:e.jsx(M,{size:"icon",variant:"ghost",onClick:be,className:"flex-center h-6 w-6",disabled:y,children:y?e.jsx(Wt,{size:18,className:"text-zinc-500"}):e.jsx(Xt,{size:18,className:"text-zinc-500"})})}),w==="REALTIME"&&v.medias.length>0&&e.jsx("div",{className:"space-y-2 px-3 pb-2 pt-1",children:e.jsxs("div",{className:" grid h-full grid-cols-3 items-center justify-start gap-2 overflow-x-auto",children:[v.medias.slice(0,2).map((p,S)=>e.jsx(O.button,{initial:{opacity:0},animate:{opacity:1,transition:{duration:.3}},type:"button",onClick:()=>H(p.id?`https://www.google.com/search?q=${c}&tbm=isch#imgrc=${p.id}`:p.link),className:"h-24 space-y-1 overflow-hidden rounded-lg hover:cursor-pointer",children:e.jsx("img",{className:"h-full w-full object-cover",src:p.link,alt:p.link})},S)),P&&v.medias.slice(2,20).map((p,S)=>e.jsx(O.button,{initial:{opacity:0},animate:{opacity:1,transition:{duration:.3}},type:"button",onClick:()=>H(p.link),className:"h-24 w-full space-y-1 overflow-hidden rounded-lg hover:cursor-pointer",children:e.jsx("img",{className:"h-full w-full object-cover",src:p.link,alt:p.link})},S)),e.jsxs(M,{type:"button",variant:"outline",onClick:()=>{E({eventName:P?"SeeLessImagesRealtimeSERP":"SeeMoreImagesRealtimeSERP",eventType:"Button",feature:"SUPER SERP",firedFromFile:"src/features/serp/body.tsx"}),T(p=>!p)},className:G("center-with-flex bg-background  h-24  flex-col gap-0.5 space-y-1 overflow-hidden rounded-lg text-sm hover:cursor-pointer"),children:[!P&&e.jsx(Vt,{className:"text-muted-foreground h-4 w-4"}),e.jsxs("div",{className:"text-muted-foreground flex-col items-center justify-center  text-xs font-normal ",children:[e.jsx("span",{children:P&&e.jsx(Qe,{className:"text-muted-foreground h-4 w-4 "})}),e.jsx("span",{className:"",children:P?`${l("serp_index.see_less")}`:`${l("serp_index.see_more")}`})]})]},3)]})})]}),w!=="REALTIME"&&!r&&e.jsx("div",{className:"my-1 p-3 pt-0",children:e.jsx(ys,{setCurrentMode:K,toggleRealtimeMode:g})}),(R==null?void 0:R.length)>0&&e.jsxs(O.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1,transition:{duration:.4}},className:"relative flex w-full flex-col px-3 py-1",children:[e.jsxs("span",{className:"text-muted-foreground  mb-0 text-base font-medium",children:[" ",l("serp_index.related_questions")," "]}),R==null?void 0:R.map((p,S)=>e.jsxs("button",{type:"button",onClick:()=>{window.parent.postMessage({data:{context:w==="REALTIME"?v.answer:_.answer,query:p},type:Se.SEARCH_GPT},"*"),E({eventName:"relatedQuestionSERP",eventType:"Button",feature:"SUPER SERP",firedFromFile:"src/features/serp/body.tsx"})},className:"border-muted-background text-muted-foreground group relative inline-flex items-start justify-between  border-b px-4 py-3 text-left font-medium",children:[e.jsx("span",{className:" text-sm",children:p}),e.jsx("div",{className:"ml-1 mt-0.5",children:e.jsx(Yt,{className:" h-4 w-4 stroke-[1.5px] "})})]},S))]})]})}),h&&e.jsx(e.Fragment,{children:e.jsx(O.div,{initial:{opacity:0},animate:{opacity:1,transition:{duration:.3}},className:"bg-background sticky bottom-0 space-y-2 rounded-lg px-3 py-5 text-sm",children:e.jsxs("div",{className:"grid w-full grid-cols-2 items-center justify-between gap-2",children:[e.jsx(M,{variant:"outline",className:"merlinExt-magic-btn-border col-span-1",onClick:()=>{window.parent.postMessage({data:{context:w==="REALTIME"?v.answer:_.answer,searchTerms:c},type:Se.SEARCH_GPT},"*"),E({eventName:"AskAFollowupSERP",eventType:"Button",feature:"SUPER SERP",firedFromFile:"src/features/serp/body.tsx"})},children:e.jsx("div",{className:"center-with-flex bg-background h-full w-full rounded",children:e.jsx(pe,{children:l("serp_index.followup")})})}),e.jsx(M,{variant:"secondary",onClick:()=>{window.parent.postMessage({type:Se.SEARCH_GPT},"*"),E({eventName:"StartNewChatSERP",eventType:"Button",feature:"SUPER SERP",firedFromFile:"src/features/serp/body.tsx"})},className:"col-span-1",children:e.jsx(pe,{children:l("start_new_chat")})})]})})})]})}const Es=({isLoading:s,queryTerms:r,requestIdHeader:a,toggleRealtimeMode:h})=>{const{t:c}=ae(),{...n}=i.useContext(Rt),{usageDetails:f}=n;function x(){var T,R,L,A;return((R=(T=f==null?void 0:f.cappedFeatures)==null?void 0:T.realtimeSerp)==null?void 0:R.limit)-((A=(L=f==null?void 0:f.cappedFeatures)==null?void 0:L.realtimeSerp)==null?void 0:A.used)}const{currentMode:g,defaultResponse:l,realtimeResponse:y,setCurrentMode:b}=xe(T=>({currentMode:T.currentMode,defaultResponse:T.defaultResponse,realtimeResponse:T.realtimeResponse,setCurrentMode:T.setCurrentMode})),[j,B]=i.useState(!1);function P(){var A,I,N,w,_,v;if(!n.isAuthenticated)return e.jsx(ne,{children:e.jsx(ue,{className:"h-5 w-5"})});const T=Ht(n==null?void 0:n.token);if(!T)return e.jsx(ne,{children:e.jsx(ue,{className:"h-5 w-5"})});const R=(A=T==null?void 0:T.details)==null?void 0:A.picture,L=n.name.length===0?(I=n.email)==null?void 0:I[0]:(((w=(N=n.name.split(" "))==null?void 0:N[0])==null?void 0:w[0])||"")+(((v=(_=n.name.split(" "))==null?void 0:_[1])==null?void 0:v[0])||"");return e.jsxs(e.Fragment,{children:[" ",e.jsx(Ze,{src:R,alt:L}),e.jsx(ne,{children:L||e.jsx(ue,{className:"h-5 w-5 stroke-[1.5]"})})]})}return e.jsxs("div",{className:"bg-background flex h-full w-full items-center rounded-t-lg p-3",children:[e.jsx("a",{rel:"noreferrer",target:"_blank",className:"center-with-flex hover:cursor-pointer",onClick:()=>{H(pt.DOMAIN),E({eventData:"Merlin Dashboard",eventName:"OpenPage",eventType:"Button",feature:"SUPER SERP",firedFromFile:"features/serp"})},children:e.jsx(Ke,{className:"h-6 w-6"})}),e.jsx("div",{className:"center-with-flex h-full w-full text-sm font-medium text-zinc-400",children:c("serp_index.ai_search")}),!s&&(g==="REALTIME"?y.answer.length>0:l.answer.length>0)&&e.jsx("div",{children:!j&&e.jsx(Jt,{hideText:!0,leftAlign:!0,queryTerms:r,promptResult:g==="REALTIME"?y.answer:l.answer,callingSite:window.location.href,email:n.isAuthenticated?n.email:"UNAUTHENTICATED_USER",requestId:a,parentFeedbackSent:B})}),e.jsxs(Ut,{children:[e.jsx(Bt,{asChild:!0,children:e.jsx(fe,{onClick:()=>E({eventName:"AvatarClickSERPHeader",eventType:"Button",feature:"SUPER SERP",firedFromFile:"src/features/serp/header.tsx"}),className:"h-6 w-6 hover:cursor-pointer",children:P()})}),e.jsxs(Dt,{className:"my-2 w-64 p-0",align:"end",children:[e.jsxs(qt,{className:"flex items-center justify-between px-3 py-1 font-normal",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(fe,{className:"h-8 w-8",children:P()}),e.jsxs("div",{className:"flex flex-col items-start justify-center",children:[e.jsx("span",{className:"line-clamp-1 text-sm font-medium",children:n!=null&&n.name?n==null?void 0:n.name:c("serp_index.hi_there")}),e.jsx("span",{className:"text-muted-foreground line-clamp-1 text-xs",children:n!=null&&n.email?n==null?void 0:n.email:c("serp_index.login_to_get_more")})]})]}),n.isAuthenticated?e.jsx(me,{variant:"secondary",className:"rounded-md px-2 py-0.5",children:n.isAuthenticated?f.type==="PAID"?c("serp_index.pro"):c("serp_index.free"):c("serp_index.pro")}):e.jsx(me,{variant:"secondary",className:"rounded-md px-2 py-1 hover:cursor-pointer",onClick:()=>{E({eventName:"LoginDropdownSERP",eventType:"Button",feature:"SUPER SERP",firedFromFile:"src/features/serp/header.tsx"}),H(Ge)},children:c("serp_index.login")})]}),e.jsx(Be,{className:"my-0"}),e.jsxs(De,{className:"p-1",children:[e.jsx(re,{asChild:!0,children:e.jsxs(M,{variant:"ghost",className:"flex w-full items-center justify-between gap-2 hover:cursor-pointer",onClick:()=>{E({eventName:"ToggleRealtimeSERPDropdown",eventType:"Button",feature:"SUPER SERP",firedFromFile:"src/features/serp/header.tsx"}),b("REALTIME"),h(!0)},children:[e.jsxs("div",{className:"flex items-center justify-start gap-2 text-sm font-normal",children:[e.jsx(tt,{className:"h-4 w-4"})," ",c("serp_index.realtime")]}),e.jsx(me,{className:"bg-[#2563EB] hover:bg-[#2563EB]",children:!n.isAuthenticated||x()<=0||n.usageDetails.type!==c("serp_index.free")?c("serp_index.pro"):`${x()}/10`})]})}),n.usageDetails.type===c("serp_index.free")&&e.jsx(re,{asChild:!0,children:e.jsxs(M,{variant:"ghost",onClick:()=>{E({eventName:"GoProSERPDropdown",eventType:"Button",feature:"SUPER SERP",firedFromFile:"src/features/serp/header.tsx"}),H(Ve+"?from=super-serp-dropdown")},className:"flex w-full items-center justify-between hover:cursor-pointer",children:[e.jsxs("div",{className:"flex items-center justify-start gap-2 text-sm font-normal",children:[e.jsx(is,{className:"h-4 w-4"})," ",c("serp_index.go_pro")]}),e.jsx(ze,{className:"h-4 w-4 stroke-[1.5px]"})]})}),e.jsx(re,{asChild:!0,children:e.jsxs(M,{variant:"ghost",onClick:()=>{E({eventName:"DashboardSERPDropdown",eventType:"Button",feature:"SUPER SERP",firedFromFile:"src/features/serp/header.tsx"}),H(xt)},className:"flex w-full items-center justify-between hover:cursor-pointer",children:[e.jsxs("div",{className:"flex items-center justify-start gap-2 text-sm font-normal",children:[e.jsx(ue,{className:"h-4 w-4"})," ",c("serp_index.dashboard")]}),e.jsx(ze,{className:"h-4 w-4 stroke-[1.5px]"})]})}),e.jsx(re,{asChild:!0,children:e.jsxs(M,{variant:"ghost",className:"flex w-full items-center justify-start gap-2 text-sm font-normal hover:cursor-pointer",onClick:()=>{E({eventName:"SettingsPageSERPDropdown",eventType:"Button",feature:"SUPER SERP",firedFromFile:"src/features/serp/header.tsx"}),bt({action:ht.OPEN_OPTIONS_PAGE})},children:[e.jsx(Kt,{className:"h-4 w-4"})," ",c("serp_index.settings")]})})]}),e.jsx(Be,{className:"my-0"}),n.isAuthenticated&&e.jsx(De,{className:"p-1",children:e.jsx(re,{asChild:!0,children:e.jsxs(M,{onClick:()=>{E({eventName:"LogOutSERPDropdown",eventType:"Button",feature:"SUPER SERP",firedFromFile:"src/features/serp/header.tsx"}),H(gt)},variant:"ghost",className:"flex w-full items-center justify-start gap-2 text-sm font-normal hover:cursor-pointer",children:[e.jsx(Zt,{className:"h-4 w-4"})," Log out"]})})})]})]})]})},$=s=>s.split("").reverse().join(""),js=()=>{const s=document.title,r="- Google Search",a=$(s).replace($(r),"");return $(a)},Ts=()=>{const s=document.title,r="_百度搜索",a=$(s).replace($(r),"");return $(a)},Ns=()=>{const s=document.title,r="- Search",a=$(s).replace($(r),"");return $(a)},Cs=()=>{const s=document.title,a=/^(.*?) - Yahoo.*?Search Results/.exec(s);return a&&a.length>1?a[1].trim():null},As=()=>{const r=new URLSearchParams(window.location.search).get("text");return r||null},Is=()=>{const s=document.title,r="at DuckDuckGo",a=$(s).replace($(r),"");return $(a)},Ce=()=>{const s=window.location.hostname;return s.includes("google")?"google":s.includes("baidu")?"baidu":s.includes("bing")?"bing":s.includes("yahoo")?"yahoo":s.includes("yandex")?"yandex":s.includes("duckduckgo")?"duckduckgo":"google"};function _s({newMount:s}){const{t:r}=ae(),[a,h]=i.useState(!1),[c,n]=i.useState(""),[f,x]=i.useState([]),[g,l]=i.useState(0),{merlinConfig:y}=i.useContext(Pe),[b,j]=i.useState(null),[B,P]=i.useState(""),[T,R]=i.useState(!1),[L,A]=i.useState(!1),{...I}=i.useContext(Xe),{usageDetails:N}=I;function w(){var t,o,d,m;return((o=(t=N==null?void 0:N.cappedFeatures)==null?void 0:t.realtimeSerp)==null?void 0:o.limit)-((m=(d=N==null?void 0:N.cappedFeatures)==null?void 0:d.realtimeSerp)==null?void 0:m.used)}const{getFromBackground:_}=i.useContext(Nt),[v,K]=i.useState(!1),[F,V]=i.useState(!1),{currentMode:Q,defaultResponse:Z,realtimeResponse:ee,setCurrentMode:z}=xe(t=>({currentMode:t.currentMode,defaultResponse:t.defaultResponse,realtimeResponse:t.realtimeResponse,setCurrentMode:t.setCurrentMode})),te=i.useRef(!1),{setDefaultAnswer:ge,setDefaultRelatedQuestions:oe,setRealtimeAnswer:be,setRealtimeMedias:se,setRealtimeRelatedQuestions:p,setRealtimeSources:S}=xe(t=>({setDefaultAnswer:t.setDefaultAnswer,setDefaultRelatedQuestions:t.setDefaultRelatedQuestions,setRealtimeAnswer:t.setRealtimeAnswer,setRealtimeMedias:t.setRealtimeMedias,setRealtimeRelatedQuestions:t.setRealtimeRelatedQuestions,setRealtimeSources:t.setRealtimeSources})),{serpSSE:k}=qe(`${Ue.DOMAIN}/serp?&customJWT=true&requestFrom=SEARCH_GPT`,"serpSSE",{method:"POST",onClose:()=>{k.setStatus("success"),R(!1),A(!0)},onError:()=>{h(!0),R(!1),A(!0)},onMessage:t=>{var m,u,C;const o=JSON.parse(t.data),d=o.data.content;ge(d),((m=o==null?void 0:o.data)==null?void 0:m.eventType)==="SYSTEM"&&o!=null&&o.data.hasOwnProperty("questions")&&(x((u=o==null?void 0:o.data)==null?void 0:u.questions),oe((C=o==null?void 0:o.data)==null?void 0:C.questions))},onOpen:async t=>{t.ok&&t.headers.get("X-Request-Id")&&(j(t.headers.get("X-Request-Id")),R(!0),A(!1))}},!1),{serpSSE:W}=qe(`${Ue.DOMAIN}/serp/realtime?&customJWT=true&requestFrom=REALTIME_SEARCH_GPT`,"serpSSE",{method:"POST",onClose:()=>{W.setStatus("success"),R(!1),A(!0)},onError:t=>{t.type=="RATE_LIMITED"?V(!0):(h(!0),R(!1),A(!0))},onMessage:t=>{var o,d,m;try{const u=JSON.parse(t.data),C=u.data.content;be(C),((o=u==null?void 0:u.data)==null?void 0:o.eventType)==="SYSTEM"&&u!=null&&u.data.hasOwnProperty("questions")&&(x((d=u==null?void 0:u.data)==null?void 0:d.questions),p((m=u==null?void 0:u.data)==null?void 0:m.questions))}catch{}},onOpen:async t=>{t.ok&&t.headers.get("X-Request-Id")&&(j(t.headers.get("X-Request-Id")),R(!0),A(!1))}},!1),[ie=We,we]=Me({instance:new _e({area:"local"}),key:"UserSettings"}),[ve,dt]=i.useState(!1),ye=()=>{let t;const{hostname:o}=window.location;let m=Je.getQueryData(["sharedUserSettings"]).language??"AUTO";if(o.includes("google"))t=js();else if(o.includes("bing"))t=Ns();else if(o.includes("yahoo"))t=Cs();else if(o.includes("yandex"))m==="AUTO"&&(m="RUSSIAN"),t=As();else if(o.includes("duckduckgo"))t=Is();else if(o.includes("baidu"))m==="AUTO"&&(m="CHINESE_SIMPLIFIED"),t=Ts();else return;return n(t),P(m),[t,m]},X=i.useCallback(async t=>{if(Z.answer.length>0)return;R(!0);const[o,d]=ye();o&&k.execute({forceFullResponse:!te.current,language:d||"AUTO",query:o,showRelatedQuestions:!0})},[k,te]),$e=async()=>{let t;const{hostname:o}=window.location;if(o.includes("google")){const d=document.getElementById("rcnt"),m=d.querySelector("#rhs")!==null,u=window.location.search;if(/tbm=/.test(u)||/tbs=/.test(u)||/.com\/maps=/.test(u)||/.com\/travel=/.test(u))return;if(m)t=document.getElementById("rhs"),t.children.length>0&&await new Promise(U=>setTimeout(U,100));else{const U=d.querySelector("#center_col"),D=U.parentNode,q=Array.prototype.indexOf.call(D.children,U);t=document.createElement("div"),t.id="rhs",await new Promise(Le=>setTimeout(Le,100)),d.insertBefore(t,d.children[q+1])}}else if(o.includes("bing"))document.getElementById("b_content").querySelector("#b_context")!==null&&(t=document.getElementById("b_context"),t.children.length>0&&await new Promise(u=>setTimeout(u,100)));else if(o.includes("yahoo"))document.getElementById("results").querySelector("#right")!==null&&(t=document.querySelector("#right"),t.children.length>0&&await new Promise(u=>setTimeout(u,100)));else if(o.includes("yandex"))document.querySelector(".main__content").querySelector("#search-result-aside")!==null&&(t=document.querySelector("#search-result-aside"),t.children.length>0&&await new Promise(u=>setTimeout(u,100)));else if(o.includes("duckduckgo")){let d;const m=await Y(".js-react-sidebar");m?(d=m,d.children.length>0&&await new Promise(u=>setTimeout(u,100))):(d=await Y(".react-results--sidebar"),d.children.length>0&&await new Promise(u=>setTimeout(u,100)))}else if(o.includes("baidu")){let d="",m;new MutationObserver(C=>{const U=document.querySelector("div#_mask");if(m=document.querySelector("div#content_right.cr-offset"),location.href!=d&&U==null){d=location.href,(()=>{document.querySelector("div#wrapper_wrapper").querySelector("div#content_right.cr-offset")!==null&&(m=document.querySelector("div#content_right.cr-offset"))})();const q=document.getElementById("merlin-serp");m.prepend(q),q.hidden=!1}}).observe(document.documentElement,{childList:!0,subtree:!0})}if(!o.includes("baidu")){const d=document.getElementById("merlin-serp");t.prepend(d),d.hidden=!1}},ce=async(t,o)=>{E({eventData:"SERP Realtime Mode",eventName:t?"EnableFeature":"DisableFeature",eventType:"Button",feature:"SERP",firedFromFile:"features/serp"});try{if(w()>0&&await we({...ie,serp:{...ie.serp,realtime:t}}),ee.answer.length>0||!I.isAuthenticated||F)return;if(R(!0),K(t),o){k.execute({forceFullResponse:!te.current,language:B,query:c,showRelatedQuestions:!0});return}if(k.close(),t){const d=Ce(),m=je(document.body.innerHTML,d);if(I.isAuthenticated&&!F){const u=await Te(_,c);se(u),W.execute({articles:m,language:B,query:c,showRelatedQuestions:!0}),S(m.map(C=>({alt:C.from,imgLink:C.imgLink,title:C.title,url:C.url})))}}}catch{}};i.useEffect(()=>{(async()=>{var t;try{const o=await le.get("UserSettings");w()<=0&&!((t=o==null?void 0:o.serp)!=null&&t.queryExhausted)&&(await we({...o,serp:{...o.serp,queryExhausted:!0,realtime:!1}}),z("DEFAULT"),X())}catch{}})()},[]),i.useEffect(()=>{(async()=>{var o,d,m;const t=await le.get("UserSettings");dt((o=t==null?void 0:t.serp)==null?void 0:o.showResponse),z(t.serp.realtime?"REALTIME":"DEFAULT"),t.serp.realtime||X(),I.isAuthenticated&&y.misc.serp.realtime&&w()>0&&(K((d=t==null?void 0:t.serp)==null?void 0:d.realtime),t.serp.realtime&&z("REALTIME")),(m=t==null?void 0:t.serp)!=null&&m.showResponse&&Q==="DEFAULT"&&X()})()},[]),i.useEffect(()=>{(async()=>{try{g&&I.isAuthenticated&&(Q==="REALTIME"?await ce(!0):await X(!0),l(0))}catch{}})()},[g,I.isAuthenticated]),i.useEffect(()=>{if(s){let t=!1;(async()=>{if(window.location.hostname.includes("duckduckgo")){let o;const d=await Y(".js-react-sidebar");d?(o=d,o.children.length>0&&await new Promise(u=>setTimeout(u,100))):(o=await Y(".react-results--sidebar"),o.children.length>0&&await new Promise(u=>setTimeout(u,100)));const m=document.getElementById("merlin-serp");o.prepend(m),m.hidden=!1,t=!0}})(),document.addEventListener("DOMContentLoaded",async()=>{if(!t){$e();const[o,d]=ye();t=!0;const m=await le.get("UserSettings"),u=Ce(),C=je(document.body.innerHTML,u);if(I.isAuthenticated&&!F){const U=await Te(_,o);se(U),m.serp.realtime&&W.execute({articles:C,language:d,query:o,showRelatedQuestions:!0}),S(C.map(D=>({alt:D.from,imgLink:D.imgLink,title:D.title,url:D.url})))}}}),document.addEventListener("readystatechange",async o=>{if((o.target.readyState==="interactive"||o.target.readyState==="complete")&&!t){$e();const[d,m]=ye();t=!0;const u=await le.get("UserSettings"),C=Ce(),U=je(document.body.innerHTML,C);if(I.isAuthenticated&&!F){const D=await Te(_,d);se(D),u.serp.realtime&&W.execute({articles:U,language:m,query:d,showRelatedQuestions:!0}),S(U.map(q=>({alt:q.from,imgLink:q.imgLink,title:q.title,url:q.url})))}}})}},[s]);const[ut,mt]=i.useState("");i.useEffect(()=>{mt(v?W.status||!a?"success":"error":k.status||!a?"success":"error")},[v,W.status,k.status,a]);function ft(){return ve?a?e.jsx("div",{className:"bg-background  min-h-[435px] w-full",children:e.jsxs("div",{className:" center-with-flex mx-2 my-4 gap-2 rounded-md border border-red-500 px-4 py-3 text-red-500",children:[e.jsx(ts,{className:"h-6 w-6 stroke-[1.5px]"}),e.jsx("span",{className:"",children:r("serp_index.something_wrong")})]})}):ve?e.jsx(Ss,{isStreamingClosed:L,isSuccess:ut==="success",setTriggerCompleteResponseAfterLogin:l,isLoading:T,queryTerms:c,requestIdHeader:b,toggleRealtimeMode:ce,realtimeLimitExceeded:F,fetchData:X}):null:null}return e.jsxs(e.Fragment,{children:[e.jsx(vs,{queryTerms:c}),e.jsxs(O.div,{initial:{opacity:0,y:-10},animate:{opacity:1,transition:{duration:.3},y:0},className:It("plain-text-color dark:bg-background relative mb-2 flex max-h-[46rem] min-h-[29rem] w-full max-w-[600px] flex-col items-center justify-start rounded-lg border border-zinc-300 bg-zinc-50 transition-[min-height] duration-500 dark:border-zinc-700",{"min-h-[5rem]":ve}),children:[e.jsx(bs,{defaultValue:"DEFAULT",className:"w-full p-3",value:Q,onValueChange:t=>z(t==="REALTIME"?"REALTIME":t==="DEFAULT"?"DEFAULT":""),children:e.jsxs(lt,{className:"h-full w-full rounded-lg p-1.5",children:[e.jsxs(Ie,{value:"REALTIME",className:"flex w-1/2 items-center justify-center gap-2",onClick:()=>{E({eventName:"ToggleRealtimeSERPTab",eventType:"Button",feature:"SUPER SERP",firedFromFile:"src/features/serp/index.tsx"}),ce(!0)},children:[e.jsx(tt,{className:"h-5 w-5 shrink-0"}),e.jsx(pe,{children:r("serp_index.realtime")}),e.jsx(me,{className:"bg-violet-600 px-2 py-0.5 text-white hover:bg-violet-600",children:!I.isAuthenticated||I.usageDetails.type!=="FREE"?e.jsx("span",{children:r("serp_index.pro")}):e.jsxs("span",{children:[w()??10,"/10"]})})]}),e.jsxs(Ie,{value:"DEFAULT",className:"flex w-1/2 items-center justify-center gap-2",onClick:async()=>{X(),E({eventName:"ToggleDefaultSERPTab",eventType:"Button",feature:"SUPER SERP",firedFromFile:"src/features/serp/index.tsx"}),we({...ie,serp:{...ie.serp,realtime:!1}})},children:[e.jsx(es,{className:"h-5 w-5 shrink-0"}),e.jsx(pe,{children:r("serp_index.default")})]})]})}),ft(),e.jsx(Es,{toggleRealtimeMode:ce,isLoading:T,queryTerms:c,requestIdHeader:b}),e.jsx(_t,{feature:"SERP",fileName:"features/serp"})]})]})}const Ms=async()=>{if(document.getElementById("merlin-serp"))return;const s=await wt();if(s&&!s.misc.serp.visible)return;const r=document.createElement("merlin-component");r.id="merlin-serp",r.className="merlin serp";const a=r.attachShadow({mode:"open"}),h=document.createElement("style");h.textContent=`${ns}
  :host(#merlin-serp) {
  }
  .reactAppRoot {
    all: initial; /* 1st rule so subsequent properties are reset. */
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    position: relative;
    z-index: 1;
  }

  .dark {
    ${ss}
}
${rs}
  `;const c=document.createElement("div");c.id="reactAppRoot",c.className="reactAppRoot serp",a.appendChild(h),a.appendChild(c),s.misc.serp.newMount?(r.hidden=!0,vt(r),Re(c).render(e.jsx(Ae,{newMount:s.misc.serp.newMount}))):document.onreadystatechange=async()=>{if(document.readyState==="interactive"){let n;const{hostname:f}=window.location;if(f.includes("google")){const x=document.getElementById("rcnt"),g=x.querySelector("#rhs")!==null,l=window.location.search;if(/tbm=/.test(l)||/tbs=/.test(l)||/.com\maps=/.test(l)||/.com\/travel=/.test(l))return;if(g)n=document.getElementById("rhs"),n.children.length>0&&await new Promise(b=>setTimeout(b,100));else{const b=x.querySelector("#center_col"),j=b.parentNode,B=Array.prototype.indexOf.call(j.children,b);n=document.createElement("div"),n.id="rhs",await new Promise(P=>setTimeout(P,100)),x.insertBefore(n,x.children[B+1])}}else if(f.includes("bing"))document.getElementById("b_content").querySelector("#b_context")!==null&&(n=document.getElementById("b_context"),n.children.length>0&&await new Promise(l=>setTimeout(l,100)));else if(f.includes("yahoo"))document.getElementById("results").querySelector("#right")!==null&&(n=document.querySelector("#right"),n.children.length>0&&await new Promise(l=>setTimeout(l,100)));else if(f.includes("yandex"))document.querySelector(".main__content").querySelector("#search-result-aside")!==null&&(n=document.querySelector("#search-result-aside"),n.children.length>0&&await new Promise(l=>setTimeout(l,100)));else if(f.includes("duckduckgo")){let x;const g=await Y(".js-react-sidebar");g?(x=g,x.children.length>0&&await new Promise(l=>setTimeout(l,100))):(x=await Y(".react-results--sidebar"),x.children.length>0&&await new Promise(l=>setTimeout(l,100)))}else if(f.includes("baidu")){let x="",g;new MutationObserver(y=>{const b=document.querySelector("div#_mask");g=document.querySelector("div#content_right.cr-offset"),location.href!=x&&b==null&&(x=location.href,document.querySelector("div#wrapper_wrapper").querySelector("div#content_right.cr-offset")!==null&&(g=document.querySelector("div#content_right.cr-offset")),g.prepend(r),Re(c).render(e.jsx(Ae,{newMount:s.misc.serp.newMount})))}).observe(document.documentElement,{childList:!0,subtree:!0})}f.includes("baidu")||(n.prepend(r),Re(c).render(e.jsx(Ae,{newMount:s.misc.serp.newMount})))}}};function Ae({newMount:s}){const[r={serp:{visible:!1}}]=Me({instance:new _e({area:"local"}),key:"UserSettings"});return r.serp.visible?e.jsx(yt,{children:e.jsx(Ct,{children:e.jsx(At,{websiteOverride:!0,children:e.jsx(Tt,{children:e.jsx(as,{client:Je,persistOptions:{persister:Ot},children:e.jsx(St,{children:e.jsx(_s,{newMount:s})})})})})})}):null}Ms();
