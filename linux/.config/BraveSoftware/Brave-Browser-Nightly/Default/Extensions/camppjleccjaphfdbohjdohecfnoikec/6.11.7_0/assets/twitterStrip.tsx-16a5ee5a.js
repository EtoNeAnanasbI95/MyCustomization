import{c as w,j as c,r as E}from"./client-45b27fd3.js";import{g,P as S,S as x,U as v}from"./index-9b1f0f42.js";import{L as C}from"./hook-ae816606.js";import{g as q}from"./index-825701e8.js";import{C as P}from"./index-24d5af66.js";import{F as A}from"./index-1e8e4211.js";import{A as R}from"./index-37dc4817.js";import{T as O}from"./themeContext-38ece4f9.js";import{q as j,a as W}from"./backend-b5a741e2.js";import{c as F}from"./index-5c33a703.js";import{d as h}from"./debounce-c70d88e0.js";import{P as M}from"./PersistQueryClientProvider-53edff98.js";import"./index-203ce83a.js";import"./index-fa8b2430.js";import"./useTranslation-c38a45bb.js";import"./index-39fb8d8a.js";import"./motion-2f15212b.js";import"./IconThumbUp-e2c311b9.js";import"./createReactComponent-d14705e3.js";import"./index-6199ef00.js";import"./analytics-46c41402.js";import"./useAsyncWithPromise-6dde1473.js";import"./useSSE-35954031.js";import"./languageLogoMap-9be38ce0.js";import"./index-83e03e04.js";import"./foyerLogo-7f07d1ff.js";import"./index-b9ed417e.js";import"./useSharedUserSettings-04e5c292.js";import"./useMutation-24b8df85.js";import"./useOnClickOutside-4f6061f4.js";import"./useUserSettings-c0487dc5.js";import"./fuzzysort-5484efc2.js";import"./IconX-71686591.js";import"./IconCheck-740a5f2a.js";import"./v4-4a60fe23.js";import"./IconSearch-2beabc71.js";import"./IconChevronLeft-dc942a4c.js";import"./IconExclamationCircle-56aaab40.js";import"./IconSend-9aa4a715.js";import"./IconChevronRight-f54b4a77.js";import"./IconQuestionMark-483d2d08.js";import"./IconLanguage-57b34183.js";import"./IconSettings-4208f539.js";import"./IconBulb-63654e33.js";const I=async()=>{var s,m;const i=await q();if(i&&!i.fabStrip.twitter.visible)return;const e=(m=(s=i.fabStrip)==null?void 0:s.twitter)==null?void 0:m.containerClassname,o=await L(e);o&&!o.querySelector("merlin-component")&&T(t=>o.insertBefore(t,o.firstChild.nextSibling));const n=new MutationObserver(h(()=>{try{const r=document.querySelector("[id^='typeaheadDropdownWrapped-']"),a=document.querySelector(".merlin.fabStrip");r?a&&(a.style.zIndex="0"):a.style.zIndex="1000"}catch{}const t=document.querySelectorAll(e||".css-175oi2r.r-1iusvr4.r-16y2uox.r-1777fci.r-1h8ys4a.r-1bylmt5.r-13tjlyg.r-7qyjyx.r-1ftll1t");if(t.length>0)for(let r=0;r<t.length;r++)t[r].querySelector("merlin-component")||T(a=>t[r].insertBefore(a,t[r].firstChild.nextSibling))},300)),l={childList:!0,subtree:!0};n.observe(document.body,l)},L=i=>new Promise(e=>{const o=new MutationObserver(h(()=>{const n=document.querySelector(i||".css-175oi2r.r-1iusvr4.r-16y2uox.r-1777fci.r-1h8ys4a.r-1bylmt5.r-13tjlyg.r-7qyjyx.r-1ftll1t");n&&(e(n),o.disconnect())},300));o.observe(document.body,{childList:!0,subtree:!0})}),T=async i=>{var b;const e=document.createElement("merlin-component");e.id="merlin-fabStrip",e.className="merlin fabStrip";const o=e.attachShadow({mode:"open"}),n=document.createElement("style");n.textContent=`${F}
    :host(.merlin.fabStrip) {
      all: initial; /* 1st rule so subsequent properties are reset. */
      position: relative;
      display: block;
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      z-index: 1000;
    }
    .fabStrip {
      all: initial; /* 1st rule so subsequent properties are reset. */
      position: relative;
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    .fabStrip ::-webkit-scrollbar {
      display: none;
      -ms-overflow-style: none;
      scrollbar-width: none;
    }
    `;const l=document.createElement("div");l.id="reactAppRoot",l.className="reactAppRoot fabStrip",o.appendChild(n),o.appendChild(l),i(e);const s={};let m=null,t=null,r=null,a=null,d=null,y="";try{if(t=e.closest('[data-testid="cellInnerDiv"], [aria-labelledby="modal-header"]'),t&&(d=t.querySelector("article"),d&&(m=d.querySelector('[data-testid="tweetText"]')),r=t.querySelector('[data-testid="attachments"]'),a=t.querySelector('article a div[dir="ltr"]')),m){const p=m.textContent;s.tweetText=p}a&&(y=a.textContent.trim(),s.postBy=y);try{if(r){const p=(b=r.textContent)==null?void 0:b.trim();p&&(s.quoteTweetText=p)}}catch{}}catch{}let u,f;d||r?(u=S.TWEET_REPLY,f=x.TWITTER.TWEET_REPLY):(u=S.TWEET,f=x.TWITTER.TWEET),w(l).render(c.jsx(N,{editor:e,contextData:s,promptsFor:u,mountOn:f}))};function N(i){const{contextData:e,editor:o,mountOn:n,promptsFor:l}=i,[s,m]=E.useState(""),[t=v]=C({instance:new g({area:"local"}),key:"UserSettings"});return t.merlinOnSocialMedia.visible&&t.merlinOnSocialMedia.twitter.visible?c.jsx(P,{children:c.jsx(R,{children:c.jsx(M,{client:j,persistOptions:{persister:W},children:c.jsx(O,{websiteOverride:!0,children:c.jsx(A,{editor:o,host:"twitter",contextData:e,promptsFor:l,dotMenuPosition:"top",mountOn:n,textareaValue:s,setTextareaValue:m})})})})}):null}I();
