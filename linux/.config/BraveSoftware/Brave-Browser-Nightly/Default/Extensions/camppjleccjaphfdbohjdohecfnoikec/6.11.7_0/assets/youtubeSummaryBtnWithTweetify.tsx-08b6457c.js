import{r as w,R as k,j as e,c as S}from"./client-45b27fd3.js";import{R as f,g as B}from"./index-9b1f0f42.js";import{L as z}from"./hook-ae816606.js";import{r as m,U as C}from"./index-825701e8.js";import{c as x}from"./index-203ce83a.js";import{F as N}from"./foyerLogo-7f07d1ff.js";import{a as E,A}from"./index-37dc4817.js";import{T as y}from"./webAccessTooltip-5740d933.js";import{i as I,s as R,T as U,P as T,Y}from"./postMessageConstants-347e1d65.js";import{f as h}from"./analytics-46c41402.js";import{u as F}from"./useTranslation-c38a45bb.js";import{A as a}from"./index-39fb8d8a.js";import{m as n}from"./motion-2f15212b.js";import{I as j,a as L}from"./IconBrandTwitter-e8b4a1ff.js";import{I as $}from"./IconBrandMedium-8b3318a3.js";import{I as O}from"./IconChevronRight-f54b4a77.js";import{c as P}from"./index-5c33a703.js";import"./createReactComponent-d14705e3.js";const D=d=>{const{t}=F(),l=w.useContext(E),r=I(),{isAuthLoading:o,isAuthenticated:u,usageDetails:p}=l,[H,g]=k.useState(!1),[i,_]=w.useState(!1),[s,v]=w.useState({adsState:!1,queryCost:0,tweetifyQueryCost:0}),M=c=>{c.preventDefault(),R({action:U.HANDLE_SUMMARIZE_FROM_MID_BUTTON,type:T.FROM_TWEETIFY_MID_BUTTONS})};return w.useEffect(()=>{function c(b){b.data.type===T.FROM_YT_SUMMARIZER&&b.data.action==Y.UPDATE_COST_AND_ADS_STATE&&v(b.data.context)}return window.addEventListener("message",c),()=>window.removeEventListener("message",c)},[]),e.jsx(a,{children:e.jsxs(n.div,{className:x("flex flex-wrap items-center justify-start gap-3 pt-3 font-sans text-sm font-medium",r==="dark"&&"dark"),children:[e.jsxs(n.button,{layout:!0,type:"button",onMouseEnter:()=>g(!0),onMouseLeave:()=>g(!1),onClick:M,className:"center-with-flex bg-cornblue-600 group relative cursor-pointer gap-2 rounded-[4px] border-[0px] px-3 py-2 font-sans",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:[e.jsx("div",{className:"h-5 w-5",children:e.jsx(N,{})}),u&&e.jsx(a,{children:e.jsx(y,{zIndex:300,position:"top-left",children:s.adsState?t("yt_lib.wait_ad"):`${t("yt_lib.will_use")} ${s.queryCost??4} ${m(p.type)?t("yt_lib.words"):t("yt_lib.free_summ")}`})}),e.jsx(a,{children:e.jsx(n.div,{className:"blackspace-nowrap group relative font-sans text-sm font-semibold text-zinc-50",initial:{opacity:0},animate:{opacity:1},transition:{duration:.2},children:u?"Summarize":e.jsx(e.Fragment,{children:o?"Logging in...":"Login"})})})]}),u&&e.jsxs(n.div,{onClick:()=>{i||_(!0)},className:"flex flex-wrap items-center justify-start gap-0",animate:{gap:i?"12px":0},children:[e.jsxs(n.button,{className:"border-cornblue-600 group relative z-[4] flex h-[35px] min-w-[45px] items-center justify-center rounded-[4px] border bg-white px-3 py-2 dark:bg-[#212121] dark:text-zinc-50",type:"button",onClick:()=>{i&&(window.parent.postMessage({data:{handleGenerateTweet:!0,openTweetifyInChat:!0},type:f.YOUTUBE_SUMMARY},"*"),h({eventName:"GenerateTweetMidButton",eventType:"Button",feature:"YoutubeSummarizer",firedFromFile:"components/tweetify/TweetifyMidButton"}))},children:[i&&e.jsx(a,{children:e.jsx(y,{zIndex:300,position:"top",children:s.adsState?t("yt_lib.wait_ad"):`${t("yt_lib.will_use")} ${s.tweetifyQueryCost??4} ${m(p.type)?t("yt_lib.words"):t("yt_lib.free_summ")}`})}),e.jsx("span",{children:e.jsx(j,{className:"stroke-black dark:stroke-white",size:19})}),e.jsx(a,{children:i&&e.jsx(n.span,{className:"overflow-hidden whitespace-nowrap ",initial:{width:0},animate:{width:"auto"},exit:{width:0},transition:{duration:.2},children:t("tweetify.create_tweet_only")})})]}),i&&e.jsxs(n.button,{animate:{x:i?0:-10},transition:{duration:.2},layout:!0,className:x("border-cornblue-600 group relative z-[3] flex h-[35px] min-w-[45px] items-center justify-center rounded-[4px] border bg-white px-3 py-2 dark:bg-[#212121] dark:text-zinc-50"),type:"button",onClick:()=>{i&&(window.parent.postMessage({data:{handleGenerateTweetThread:!0,openTweetifyInChat:!0},type:f.YOUTUBE_SUMMARY},"*"),h({eventName:"GenerateTweetThreadMidButton",eventType:"Button",feature:"YoutubeSummarizer",firedFromFile:"components/tweetify/TweetifyMidButton"}))},children:[i&&e.jsx(a,{children:e.jsx(y,{zIndex:300,position:"top",children:s.adsState?t("yt_lib.wait_ad"):`${t("yt_lib.will_use")} ${s.tweetifyQueryCost??4} ${m(p.type)?t("yt_lib.words"):t("yt_lib.free_summ")}`})}),e.jsx("span",{children:e.jsx(j,{className:"stroke-black dark:stroke-white",size:19})}),e.jsx(a,{children:i&&e.jsx(n.span,{className:"overflow-hidden whitespace-nowrap pl-2",initial:{width:0},animate:{width:"auto"},exit:{width:0},transition:{duration:.2},children:t("tweetify.create_tweet_thread")})})]}),e.jsxs(n.button,{animate:{x:i?0:-10},transition:{duration:.2},layout:!0,className:x("border-cornblue-600 group relative z-[2] flex h-[35px] min-w-[45px] -translate-x-[10px] items-center justify-center rounded-[4px] border bg-white px-3 py-2 dark:bg-[#212121] dark:text-zinc-50"),type:"button",onClick:()=>{i&&(window.parent.postMessage({data:{handleGenerateLinkedinPost:!0,openTweetifyInChat:!0},type:f.YOUTUBE_SUMMARY},"*"),h({eventName:"GenerateLinkedInPostMidButton",eventType:"Button",feature:"YoutubeSummarizer",firedFromFile:"components/tweetify/TweetifyMidButton"}))},children:[i&&e.jsx(a,{children:e.jsx(y,{zIndex:300,position:"top",children:s.adsState?t("yt_lib.wait_ad"):`${t("yt_lib.will_use")} ${s.tweetifyQueryCost??4} ${m(p.type)?t("yt_lib.words"):t("yt_lib.free_summ")}`})}),e.jsx("span",{children:e.jsx(L,{className:"stroke-black dark:stroke-white",size:22})}),e.jsx(a,{children:i&&e.jsx(n.span,{className:"overflow-hidden whitespace-nowrap pl-2",initial:{width:0},animate:{width:"auto"},exit:{width:0},transition:{duration:.2},children:t("tweetify.create_post")})})]}),e.jsxs(n.button,{animate:{x:i?0:-20},transition:{duration:.2},layout:!0,className:x("border-cornblue-600 group relative z-[1] flex h-[35px] min-w-[45px] -translate-x-[20px] items-center justify-center rounded-[4px] border bg-white px-3 py-2 dark:bg-[#212121] dark:text-zinc-50"),type:"button",onClick:()=>{i&&(window.parent.postMessage({data:{handleGenerateBlogPost:!0,openTweetifyInChat:!0},type:f.YOUTUBE_SUMMARY},"*"),h({eventName:"GenerateBlogPostMidButton",eventType:"Button",feature:"YoutubeSummarizer",firedFromFile:"components/tweetify/TweetifyMidButton"}))},children:[i&&e.jsx(a,{children:e.jsx(y,{zIndex:300,position:"top",children:s.adsState?t("yt_lib.wait_ad"):`${t("yt_lib.will_use")} ${s.tweetifyQueryCost??4} ${m(p.type)?t("yt_lib.words"):t("yt_lib.free_summ")}`})}),e.jsx("span",{children:e.jsx($,{className:"stroke-black dark:stroke-white",size:22})}),e.jsx(a,{children:i&&e.jsx(n.span,{className:"overflow-hidden whitespace-nowrap pl-2",initial:{width:0},animate:{width:"auto"},exit:{width:0},transition:{duration:.2},children:t("tweetify.create_blog")})})]})]}),u&&e.jsx(n.button,{animate:{rotate:i?180:0,x:i?0:-30},transition:{duration:.2},onClick:()=>_(c=>!c),type:"button",children:e.jsx(O,{className:"stroke-zinc-500"})})]})})},G=()=>{const[d={ytSummarizer:{visible:!1}}]=z({instance:new B({area:"local"}),key:"UserSettings"});return d.ytSummarizer.visible?e.jsx(A,{children:e.jsx(D,{})}):null};function W(){return new Promise(d=>{const t=new MutationObserver(()=>{const r=document.querySelector("div#top-row.style-scope.ytd-watch-metadata");r&&(d(r),t.disconnect())}),l=document.getElementById("page-manager");t.observe(l,{childList:!0,subtree:!0})})}const q=async d=>{const t=document.createElement("merlin-component");t.id="merlin-tweetify-buttons",t.className="merlin tweetify-buttons";const l=t.attachShadow({mode:"open"}),r=document.createElement("style");r.textContent=`${P}
:host(#merlin-tweetify-buttons) {
    all: initial; /* 1st rule so subsequent properties are reset. */
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}
.ytTweetifyButtonsAppRoot {
    z-index: 1 !important;
}
`;const o=document.createElement("div");o.id="ytTweetifyButtonsAppRoot",o.className="ytTweetifyButtonsAppRoot",l.appendChild(r),l.appendChild(o),d(t),S(o).render(e.jsx(G,{}))},Q=async()=>{if(document.getElementById("merlin-tweetify-buttons"))return;const d=await C();if(!(d&&!d.tweetify.visible)&&(await W(),document.body)){const t=new MutationObserver(()=>{const r=document.querySelectorAll("div#top-row.style-scope.ytd-watch-metadata");if(r.length>0)for(let o=0;o<r.length;o++)r[o].nextElementSibling.id!=="merlin-tweetify-buttons"&&(q(u=>r[o].insertAdjacentElement("afterend",u)),t.disconnect())}),l=document.querySelectorAll("div#top-row.style-scope.ytd-watch-metadata")[0];t.observe(l,{attributes:!0,childList:!0,subtree:!0})}};Q();
