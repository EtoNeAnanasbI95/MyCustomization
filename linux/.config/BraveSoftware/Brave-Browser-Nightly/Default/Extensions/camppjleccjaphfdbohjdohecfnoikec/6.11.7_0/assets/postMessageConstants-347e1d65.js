import{U as m,W as N,d as I}from"./index-825701e8.js";var E=(e=>(e.DEFAULT="default",e.LOADING="loading",e.GLIMPSE="glimpse",e.TRANSCRIPT="transcript",e.SUCCESS="success",e.ERROR="error",e.HOVER="hover",e))(E||{});const O=14,R=100,i=2e3,g="https://img.youtube.com/vi/${videoId}/sddefault.jpg";var U=(e=>(e.NOT_FOUND="NOT_FOUND",e.UNKNOWN="UNKNOWN",e.FOUND="FOUND",e))(U||{}),f=(e=>(e.INITIATED="INITIATED",e.SUCCESS="SUCCESS",e.UNKNOWN="UNKNOWN",e))(f||{});const A=()=>{const e=document.getElementsByClassName("video-ads ytp-ad-module")[0];return!!(e&&e.hasChildNodes())};function M(e){var o;if(e=decodeURI(e),typeof e=="string"){const n=(o=(e==null?void 0:e.split("?"))[1])==null?void 0:o.split("&"),r={};return n&&n.length&&n.map(s=>{const a=s==null?void 0:s.split("="),c=a[0],u=a[1];r[c]=u}),r}}const T=e=>{const o=[/^https?:\/\/youtu\.be\/(.*)$/,/^https?:\/\/www\.youtube\.com\/watch\?v=(.*)$/,/^https?:\/\/www\.youtube\.com\/embed\/(.*)$/,/^https?:\/\/www\.youtube\.com\/v\/(.*)$/,/^https?:\/\/www\.youtube\.com\/live\/([^?&]*)$/];let t=null;for(const n of o){const r=e.match(n);if(r){t=r[1];break}}if(!t){const n=M(e);t=n==null?void 0:n.v}if(!t)throw new Error(`Could not parse video ID from YouTube URL: ${e}`);return t=t==null?void 0:t.split("&")[0],t},w=()=>{const e=window.location.href;return T(e)},y=async(e,o,t)=>{const n=await m();let r=n.summarizer.youtube.costPerHour??O;o==="NOT_FOUND"&&(r=n.summarizer.whisper.costPerHour??R);let s=null,a=null;if(e){const[c,u=0,d=0]=e.split(":").reverse();s=Number(c)+Number(u)*60+Number(d)*3600}return s&&(a=Math.ceil(s/3600*r)),t&&(a*=i),a??null},F=async(e,o,t)=>{let n;if(e){const[r,s=0,a=0]=e.split(":").reverse();n=a<3?o+(t?1*i:1):a<6?o+(t?2*i:2):a<9?o+(t?3*i:3):o+(t?4*i:4)}return n},h=e=>{const o=Math.floor(Number(e)/3600),t=Math.floor(Number(e)%3600/60),n=Math.floor(Number(e)%3600%60);return`${o>0?`${o}:`:""}${t<10?`0${t}`:t}:${n<10?`0${n}`:n}`},G=()=>{var n;const e=(n=document.querySelector("span.ytp-time-duration"))==null?void 0:n.textContent;let o,t=3e3;if(e){const[r,s=0,a=0]=e.split(":").reverse();o=Number(r)+Number(s)*60+Number(a)*3600,o<1800?t=3e3:o<3600?t=8e3:t=12e3}return t},b="Crafted by Merlin AI.",l=(e,o)=>{e.click();const t=document.getElementById("contenteditable-root");I(t,o)},L=(e,o,t)=>{const n=e.map(s=>`${h(s.timeStamp)} ${s.content}`).join(`
`)+`
${b}`,r=document.getElementById("comments");if(r){r.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"});const s=document.getElementById("placeholder-area");if(s){l(s,n);const c=T(document.URL);o&&t&&c&&N(o,t,c);return}new MutationObserver((c,u)=>{for(const d of c)if(d.addedNodes){for(const _ of d.addedNodes)if(_ instanceof HTMLElement&&_.id==="placeholder-area"){l(_,n),u.disconnect();return}}}).observe(r,{childList:!0,subtree:!0})}},P=()=>document.documentElement.hasAttribute("dark")?"dark":"light",$=()=>{document.getElementById("merlin-yt-summarizer").scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})};var H=(e=>(e.FROM_COMMENT_SECTION_HIGHLIGHTS_BUTTON="FROM_COMMENT_SECTION_HIGHLIGHTS_BUTTON",e.FROM_TWEETIFY_MID_BUTTONS="FROM_TWEETIFY_MID_BUTTONS",e.FROM_CHAT_UI="FROM_CHAT_UI",e.FROM_YT_SUMMARIZER="FROM_YT_SUMMARIZER",e))(H||{}),S=(e=>(e.INITIATE_COMMENT_PROCESS="INITIATE_COMMENT_PROCESS",e.GET_SHARED_STATE_ON_MOUNTING="GET_SHARED_STATE_ON_MOUNTING",e))(S||{}),C=(e=>(e.NO_CAPTIONS_UPDATE_TRIGGER="NO_CAPTIONS_UPDATE_TRIGGER",e))(C||{}),v=(e=>(e.UPDATE_COST_AND_ADS_STATE="UPDATE_COST_AND_ADS_STATE",e.SET_HIGHLIGHTS_SUCCESS="SET_HIGHLIGHTS_SUCCESS",e.RESET_HIGHLIGHTS_BUTTON="RESET_HIGHLIGHTS_BUTTON",e))(v||{}),D=(e=>(e.OPEN_TWEETIFY_IN_CHAT="OPEN_TWEETIFY_IN_CHAT",e.HANDLE_SUMMARIZE_FROM_MID_BUTTON="HANDLE_SUMMARIZE_FROM_MID_BUTTON",e))(D||{});const Y=(e,o="*",t)=>{window.parent.postMessage(e,o,t)};export{U as C,H as P,D as T,E as U,v as Y,C as a,g as b,$ as c,w as d,f as e,h as f,T as g,L as h,P as i,y as j,F as k,G as l,A as m,S as n,Y as s};
