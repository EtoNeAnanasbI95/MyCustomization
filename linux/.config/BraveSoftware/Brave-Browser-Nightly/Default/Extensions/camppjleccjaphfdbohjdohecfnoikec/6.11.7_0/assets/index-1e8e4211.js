import{R as ne,r as s,j as e}from"./client-45b27fd3.js";import{g as We,A as it,H as U,e as Tt,q as Ie,r as Ct,s as _t,j as At,d as mt,U as ft,O as de,S as h,P as Ge,F as Mt,b as Lt,c as Rt,E as Dt}from"./index-9b1f0f42.js";import{L as Ke}from"./hook-ae816606.js";import{c as u}from"./index-203ce83a.js";import{b as bt}from"./index-37dc4817.js";import{Y as Ot,c as Ue,r as ot,D as Ut,F as Ft,G as xt,H as at,f as ht,K as Bt,h as qt,d as we}from"./index-825701e8.js";import{F as Gt}from"./index-fa8b2430.js";import{I as lt,T as Vt}from"./index-6199ef00.js";import{q as Wt}from"./backend-b5a741e2.js";import{a as gt,f as Q,b as Ve}from"./analytics-46c41402.js";import{u as ke}from"./useAsyncWithPromise-6dde1473.js";import{u as Kt}from"./useSSE-35954031.js";import{L as Ht,I as Xt}from"./languageLogoMap-9be38ce0.js";import{P as Qt}from"./index-83e03e04.js";import{F as Yt}from"./foyerLogo-7f07d1ff.js";import{u as $t}from"./index-b9ed417e.js";import{u as Jt}from"./useSharedUserSettings-04e5c292.js";import{u as vt,I as Fe}from"./useOnClickOutside-4f6061f4.js";import{u as Zt}from"./useUserSettings-c0487dc5.js";import{e as yt,h as ue,I as kt,i as Pe,f as Nt,S as ct,a as dt,c as er,d as Ee,j as Be,R as ut,g as tr,b as rr}from"./fuzzysort-5484efc2.js";import{u as Ne}from"./useTranslation-c38a45bb.js";import{I as He}from"./IconX-71686591.js";import{I as Te}from"./IconCheck-740a5f2a.js";import{v as jt}from"./v4-4a60fe23.js";import{A as se}from"./index-39fb8d8a.js";import{m as w}from"./motion-2f15212b.js";import{I as nr}from"./IconSearch-2beabc71.js";import{c as sr}from"./createReactComponent-d14705e3.js";import{I as pt}from"./IconChevronLeft-dc942a4c.js";import{I as ir}from"./IconExclamationCircle-56aaab40.js";import{I as or}from"./IconSend-9aa4a715.js";import{I as ze}from"./IconChevronRight-f54b4a77.js";import{a as ar,I as lr,b as cr}from"./IconQuestionMark-483d2d08.js";import{I as dr}from"./IconLanguage-57b34183.js";import{I as ur}from"./IconSettings-4208f539.js";import{I as pr}from"./IconBulb-63654e33.js";var mr=sr("octagon","IconOctagon",[["path",{d:"M12.802 2.165l5.575 2.389c.48 .206 .863 .589 1.07 1.07l2.388 5.574c.22 .512 .22 1.092 0 1.604l-2.389 5.575c-.206 .48 -.589 .863 -1.07 1.07l-5.574 2.388c-.512 .22 -1.092 .22 -1.604 0l-5.575 -2.389a2.036 2.036 0 0 1 -1.07 -1.07l-2.388 -5.574a2.036 2.036 0 0 1 0 -1.604l2.389 -5.575c.206 -.48 .589 -.863 1.07 -1.07l5.574 -2.388a2.036 2.036 0 0 1 1.604 0z",key:"svg-0"}]]);const qe=(b,o)=>{const m=ne.useMemo(()=>new We({area:"local"}),[]),[l=null,n]=Ke({instance:m,key:o}),i=ne.useCallback(async x=>{await n({...l,[b]:x})},[b,n,l]);return ne.useMemo(()=>({[b]:{setSharedState:i,state:(l==null?void 0:l[b])||null}}),[b,i,l])};function fr(b){const[o,m]=s.useState(!1),l=s.useMemo(()=>new IntersectionObserver(([n])=>m(n.isIntersecting)),[b]);return s.useEffect(()=>(l.observe(b.current),()=>l.disconnect()),[]),o}function br(b){var O;const{t:o}=Ne(),{...m}=ne.useContext(bt),[l,n]=ne.useState(!1),{host:i,setActiveWindow:x}=b,g=s.useRef(null),v=s.useRef(null),j=fr(g),y=s.useRef(null),_=s.useRef(null),Y=s.useRef(`dot-menu-portal-${jt()}`);vt(_,()=>n(!1));const{sharedUserSettingsMutation:F,sharedUserSettingsQuery:V}=Jt(),[ie,z,ae]=Zt(),$=Object.keys(Ie),{tutorial:oe,updateTutorial:J}=$t(i);s.useEffect(()=>{var T;const c=(T=g.current)==null?void 0:T.getBoundingClientRect();oe&&(c!=null&&c.x)&&(c!=null&&c.y)&&j&&window.parent.postMessage({data:{action:it.OPEN_TUTORIAL,position:{x:c==null?void 0:c.x,y:c==null?void 0:c.y}},type:"TUTORIAL"},"*")},[oe,j]),s.useEffect(()=>{l&&gt({page_location:"components/fabStrip",page_title:"Dot Menu FabStrip"})},[l]);const Z=c=>{if($.includes(c)){F.mutate({language:c});return}Q({eventData:c,eventName:"SwitchLanguage",eventType:"Button",feature:"Dot Menu",firedFromFile:"features/chat/components/header"}),F.mutate({language:"AUTO"})},ee=()=>{Q({eventName:"OpenOptionsPage",eventType:"Button",feature:U[i],firedFromFile:"components/fabStrip/dotMenu"}),Ut.runtime.sendMessage({action:it.OPEN_OPTIONS_PAGE}),n(!1)};function A(){var c,T;return(c=V.data.apiKey)!=null&&c.enabled&&((T=V.data.apiKey)!=null&&T.value)?e.jsxs("div",{className:"flex items-center",children:[e.jsx(Fe,{className:"res-icon-big fill-blue-400 text-blue-400"}),o("dotmenu.key")]}):m.usageDetails.type===At.PAID?e.jsx("div",{className:"flex items-center justify-center rounded-md border-2 border-amber-400 px-2 py-0.5 text-xs font-medium text-zinc-800 transition-colors duration-300 ease-in-out dark:border-amber-500 dark:text-zinc-100",children:e.jsx("span",{className:"whitespace-nowrap text-zinc-50",children:o("dotmenu.pro")})}):m.usageDetails.type&&ot(m.usageDetails.type)?e.jsxs("div",{className:"flex items-center",children:[e.jsx(Fe,{className:"res-icon-big fill-blue-400 text-blue-400"}),o("dotmenu.work")]}):e.jsx("div",{onClick:()=>{Q({eventName:"GoProButton",eventType:"Button",feature:U[i],firedFromFile:"components/fabStrip/dotMenu"}),Ue(mt+"?from=go-pro-three-dot-menu-fabstrip")},className:"bg-btn-gradient flex cursor-pointer items-center justify-center rounded-md bg-right-bottom px-2 py-0.5 text-xs font-medium transition-all duration-500 [background-size:400%_400%] hover:bg-left-top",children:e.jsx("span",{className:"whitespace-nowrap text-zinc-50",children:o("dotmenu.go_pro")})})}return e.jsxs("div",{className:u({"relative flex items-center text-gray-800 dark:text-gray-200":!0}),ref:g,children:[e.jsx("button",{id:"three-dot-menu",type:"button",ref:v,onMouseDownCapture:c=>{l&&(c.preventDefault(),c.stopPropagation())},onClick:()=>{n(!l)},children:e.jsx(ar,{})}),e.jsx(Qt,{selector:{mountAsHtmlChild:!0},shouldMount:l,id:Y.current,className:"merlin dot-menu-fab-strip-portal",groupBy:"dot-menu-fab-strip-portal-group",websiteOverride:!0,children:e.jsx(se,{children:e.jsxs(w.div,{ref:_,className:u("dark:bg-background my-2 flex h-fit w-48 flex-col rounded-lg border border-zinc-200 bg-zinc-100 text-sm shadow-lg dark:border-zinc-700 dark:text-zinc-100"),initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{position:"fixed",...Ot(v,{height:200,width:200},10,!1)},children:[e.jsxs("div",{className:"flex w-full justify-between px-2 py-1",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"h-5 w-5 cursor-pointer",onClick:()=>{Q({eventData:"Merlin Dashboard",eventName:"OpenPage",eventType:"Button",feature:U[i],firedFromFile:"components/fabStrip/dotMenu"}),Ue(Tt+"?from=go-pro-three-dot-menu-fabstrip"),n(!1)},children:e.jsx(Yt,{})}),e.jsx("div",{children:o("merlin")})]}),e.jsx("div",{children:m.isAuthenticated&&e.jsx(e.Fragment,{children:A()})})]}),e.jsx("span",{className:u({"w-full border-b border-b-zinc-200 dark:border-b-zinc-800":!0})}),m.isAuthenticated&&e.jsx(e.Fragment,{children:!ot(m.usageDetails.type)&&!((O=V.data.apiKey)!=null&&O.enabled)&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:u("flex w-full items-center justify-between px-2 py-0.5",{}),children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Fe,{className:"res-icon-big fill-amber-400 text-amber-400"}),m.usageDetails.limit-m.usageDetails.used]}),e.jsx("div",{children:o("dotmenu.queries_left")})]}),e.jsx("span",{className:u({"w-full border-b border-b-zinc-200 dark:border-b-zinc-800":!0})})]})}),e.jsxs("div",{ref:y,className:"language-dropdown group/language-dropdown relative flex w-full cursor-pointer items-center justify-between px-2 py-0.5 hover:bg-zinc-300 dark:hover:bg-zinc-800",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(dr,{className:"h-4 w-4 text-zinc-600 dark:text-zinc-300"}),o("dotmenu.lang")]}),e.jsx("div",{children:e.jsx(ze,{className:"h-4 w-4 text-zinc-600 dark:text-zinc-300"})}),e.jsx(se,{children:e.jsx(w.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,transition:{delay:.1}},className:"c-hide group-hover/language-dropdown:c-show absolute right-[100%] top-0 h-fit w-48 flex-col overflow-hidden rounded-lg",children:e.jsx("div",{className:"merlinExt-custom-scrollbar scrollbar-w-1 dark:bg-background flex h-[121px] w-full scroll-m-1 flex-col gap-1 overflow-y-auto overflow-x-hidden scroll-smooth rounded border border-zinc-200 bg-zinc-100 text-sm text-zinc-700 dark:border-zinc-700 dark:text-zinc-100",children:$.map((c,T)=>e.jsxs("div",{className:"flex cursor-pointer items-center justify-between px-2 py-0.5 text-sm hover:bg-zinc-200 hover:dark:bg-zinc-800",onClick:()=>Z(c),children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ht,{language:c}),Ie[c]]}),Ie[V.data.language]==Ie[c]&&e.jsx(Te,{size:20,strokeWidth:4,color:"green"})]},T))})})})]}),e.jsxs(e.Fragment,{children:[e.jsxs("button",{type:"button",className:u("flex w-full cursor-pointer appearance-none items-center gap-2 px-2 py-0.5 hover:bg-zinc-300 dark:hover:bg-zinc-800"),onClick:()=>{x&&x(be.SAVED_PROMPTS),n(!1)},children:[e.jsx(yt,{className:u({"h-4 w-4 text-zinc-600 dark:text-zinc-300":!0})}),e.jsx("div",{children:o("dotmenu.all_prompts")})]}),e.jsx("span",{className:u({"w-full border-b border-b-zinc-200 dark:border-b-zinc-800":!0})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:u("group/disable relative flex w-full cursor-pointer items-center justify-between px-2 py-0.5 hover:bg-zinc-300 dark:hover:bg-zinc-800"),children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(lr,{className:u({"h-4 w-4 text-zinc-600 dark:text-zinc-300":!0})}),o("dotmenu.disable")]}),e.jsx("div",{children:e.jsx(ze,{className:u({"h-4 w-4 text-zinc-600 dark:text-zinc-300":!0})})}),e.jsx(se,{children:e.jsx(w.div,{className:u("c-hide group-hover/disable:c-show dark:bg-background absolute right-[100%] top-0 flex h-fit w-48 flex-col overflow-hidden rounded-lg bg-zinc-100 text-sm text-zinc-800 dark:border dark:border-zinc-700 dark:text-zinc-200"),initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:e.jsx("div",{className:u("flex w-full cursor-pointer items-center justify-between px-2 py-0.5 hover:bg-zinc-300 dark:hover:bg-zinc-800"),onClick:()=>{Q({eventName:"DisableFeature",eventType:"Button",feature:U[i],firedFromFile:"components/fabStrip/dotMenu"}),z(i)},children:o("dotmenu.forever")})})})]}),e.jsxs("button",{type:"button",onClick:ee,className:u({"flex w-full cursor-pointer appearance-none items-center gap-2 px-2 py-0.5 transition-colors duration-300 ease-in-out hover:bg-zinc-300 dark:bg-inherit dark:hover:bg-zinc-800":!0}),children:[e.jsx("div",{children:e.jsx(ur,{className:u({"h-4 w-4 text-zinc-600 dark:text-zinc-300":!0})})}),e.jsx("p",{children:o("dotmenu.settings")})]}),e.jsxs("button",{type:"button",onClick:()=>{J(!0),n(!1)},className:u({"flex w-full cursor-pointer appearance-none items-center gap-2 px-2 py-0.5 transition-colors duration-300 ease-in-out hover:bg-zinc-300 dark:bg-inherit dark:hover:bg-zinc-800":!0}),children:[e.jsx("div",{children:e.jsx(pr,{className:u({"h-4 w-4 text-zinc-600 dark:text-zinc-300":!0})})}),e.jsx("p",{children:o("dotmenu.tutorial")})]})]}),e.jsxs(e.Fragment,{children:[e.jsx("span",{className:u({"w-full border-b border-b-zinc-200 dark:border-b-zinc-800":!0})}),e.jsxs("div",{children:[e.jsxs("div",{className:u("flex w-full cursor-pointer items-center gap-2 px-2 py-0.5 hover:bg-zinc-300 dark:hover:bg-zinc-800"),onClick:()=>{Q({eventData:"Product Wiki",eventName:"OpenPage",eventType:"Button",feature:U[i],firedFromFile:"components/fabStrip/dotMenu"}),window.open(Ct,"_blank"),n(!1)},children:[e.jsx(cr,{className:u({"h-4 w-4 text-zinc-600 dark:text-zinc-300":!0})}),e.jsx("div",{children:o("dotmenu.product_wiki")})]}),e.jsxs("div",{className:u("pt-0,5 group/support relative flex w-full cursor-pointer items-center justify-between rounded-b-lg px-2 pb-1 hover:bg-zinc-300 dark:hover:bg-zinc-800"),children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Xt,{className:u({"h-4 w-4 text-zinc-600 dark:text-zinc-300":!0})}),o("dotmenu.support")]}),e.jsx("div",{children:e.jsx(ze,{className:u({"h-4 w-4 text-zinc-600 dark:text-zinc-300":!0})})}),e.jsx(se,{children:e.jsxs(w.div,{className:u("group-hover/support:c-show c-hide dark:bg-background absolute bottom-0 right-[100%] flex h-fit w-48 flex-col overflow-hidden rounded-lg bg-zinc-100 text-sm text-zinc-800 dark:border dark:border-zinc-700 dark:text-zinc-200"),initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[e.jsx("a",{className:u("flex w-full cursor-pointer appearance-none items-center justify-between px-2 py-0.5 hover:bg-zinc-300 dark:hover:bg-zinc-800"),target:"_blank",onClick:()=>{Q({eventData:"Mail Us",eventName:"OpenPage",eventType:"Button",feature:U[i],firedFromFile:"components/fabStrip/dotMenu"}),Ue(m.usageDetails.type==="PAID"?"mailto:urgent-support@getmerlin.in":"mailto:support@getmerlin.in"),n(!1)},rel:"noreferrer",children:o("dotmenu.mail")}),e.jsx("div",{className:u("flex w-full cursor-pointer items-center justify-between px-2 py-0.5 hover:bg-zinc-300 dark:hover:bg-zinc-800"),onClick:()=>{Q({eventData:"Feedback Page",eventName:"OpenPage",eventType:"Button",feature:U[i],firedFromFile:"components/fabStrip/dotMenu"}),window.open(_t,"_blank"),n(!1)},children:o("dotmenu.feedback")})]})})]})]})]})]})})})]})}const Xe=s.createContext(null),xr=({children:b,isWebpage:o=!1})=>{const[m,l]=s.useState([]),[n,i]=s.useState([]),[x,g]=s.useState({editPrompt:!1,id:null}),[v,j]=s.useState({activeUI:"",isCollapsed:!o,isVisible:o}),[y,_]=s.useState({activeUI:"",isCollapsed:!o,isVisible:!0});return e.jsx(Xe.Provider,{value:{editorState:x,isWebpage:o,leftUI:v,pinnedSavedPrompts:m,rightUI:y,setEditorState:g,setLeftUI:j,setPinnedSavedPrompts:l,setRightUI:_,setUserMadePromptTemplates:i,userMadePromptTemplates:n},children:b})};function hr(b){const{t:o}=Ne(),{changeActiveWindow:m,from:l="DEFAULT",host:n,promptsFor:i,setUserPromptsUpdated:x,userPrompt:g}=b,{editorState:v,isWebpage:j,setEditorState:y,setLeftUI:_,setUserMadePromptTemplates:Y,userMadePromptTemplates:F}=s.useContext(Xe),{addUserPromptTemplate:V}=ke(Ft,"addUserPromptTemplate",!1),{editUserPromptTemplate:ie}=ke(xt,"editUserPromptTemplate",!1),[z,ae]=s.useState(""),[$,oe]=s.useState(g?g.toString():""),J=s.useRef(null),Z=s.useRef(null);function ee(){l==="FAB_STRIP"?m(""):_({activeUI:"",isCollapsed:!1,isVisible:!1})}function A(){l==="FAB_STRIP"?m("Saved Prompts"):_({activeUI:"Saved Prompts",isCollapsed:!1,isVisible:!0})}s.useEffect(()=>{if(n==="twitter"){try{J.current.addEventListener("click",ue),Z.current.addEventListener("click",ue)}catch{}return()=>{try{J.current.removeEventListener("click",ue),Z.current.removeEventListener("click",ue)}catch{}}}},[]),s.useEffect(()=>{if(v.editPrompt){const N=F.findIndex(P=>P.id===v.id);ae(F[N].promptName),oe(F[N].promptText)}return()=>{v.editPrompt&&y({editPrompt:!1,id:null})}},[]);const[O,c]=s.useState(!1),[T,te]=s.useState(!1),[W,M]=s.useState(!1);async function L(){const N=at(i??"");try{const P=await V.execute({id:jt(),promptName:z,promptTag:N,promptText:$});P&&(Y(P.userMade),l==="FAB_STRIP"&&x(re=>re+1)),c(!1),M(!0),setTimeout(()=>{M(!1),A()},1e3)}catch{te(!0),c(!1),setTimeout(()=>{te(!1)},1e3)}}async function R(){var P;const N=at(i??"");try{const re=F.findIndex(ce=>ce.id===v.id),le=(P=F[re])==null?void 0:P.type;if(le&&le==="merlin"){L();return}const xe={id:F[re].id,promptName:z,promptTag:F[re].promptTag??N,promptText:$},me=await ie.execute(xe);me&&(Y(me.userMade),l==="FAB_STRIP"&&x(ce=>ce+1)),c(!1),M(!0),setTimeout(()=>{y({editPrompt:!1,id:null}),M(!1),A()},1e3)}catch{te(!0),c(!1),setTimeout(()=>{te(!1)},1e3)}}function pe(){return W?e.jsx("div",{className:"center-with-flex merlinExt-custom-scrollbar scrollbar-w-1 flex-1 overflow-y-auto overflow-x-hidden p-2",children:e.jsx("span",{className:"text-lg",children:v.editPrompt?o("prompt.edited"):o("prompt.added")})}):T?e.jsx("div",{className:"center-with-flex merlinExt-custom-scrollbar scrollbar-w-1 flex-1 overflow-y-auto overflow-x-hidden p-2",children:e.jsxs("span",{className:"text-lg",children:[o("fab_strip.failed_to_save"),"("]})}):O?e.jsx("div",{className:"center-with-flex merlinExt-custom-scrollbar scrollbar-w-1 flex-1 overflow-y-auto overflow-x-hidden p-2",children:e.jsx("span",{className:"merlinExt-circular-loader"})}):e.jsxs("form",{onSubmit:N=>{if(N.preventDefault(),z.trim().length===0||$.trim().length===0)return!1;v.editPrompt?R():L(),c(!0)},className:"flex h-full flex-1 flex-col items-stretch justify-between gap-3",children:[e.jsxs("div",{className:"",children:[e.jsx("div",{className:"res-small-text mb-1 font-medium text-zinc-500",children:o("fab_strip.name")}),e.jsx("input",{ref:J,required:!0,type:"text",value:z,onChange:N=>ae(N.target.value),onInput:N=>{const P=N.target;P.checkValidity()&&P.value.trim().length===0?P.setCustomValidity("Please provide a prompt name"):P.setCustomValidity("")},placeholder:o("prompt.short_name"),autoFocus:!0,minLength:2,maxLength:40,className:"focus-visible:ring-cornblue-800 w-full rounded bg-zinc-100 p-3 outline-none dark:bg-zinc-800"})]}),e.jsxs("div",{className:"flex flex-1 flex-col items-stretch",children:[e.jsx("div",{className:"res-small-text mb-1 font-medium text-zinc-500",children:o("fab_strip.desc")}),e.jsx("textarea",{ref:Z,required:!0,value:$,onChange:N=>oe(N.target.value),onInput:N=>{const P=N.target;P.checkValidity()&&P.value.trim().length===0?P.setCustomValidity("Please provide a prompt description"):P.setCustomValidity("")},placeholder:o("prompt.eg"),minLength:2,maxLength:8e3,className:"focus-visible:ring-cornblue-800 box-border h-full w-full flex-1 resize-none rounded bg-zinc-100 p-3 outline-none dark:bg-zinc-800"})]}),e.jsx("div",{className:"flex items-center justify-center gap-2",children:e.jsxs("button",{type:"submit",id:"save",className:"c-transition-colors flex items-center justify-center gap-1 rounded-lg bg-transparent px-3 py-2 hover:bg-zinc-400 dark:hover:bg-zinc-800",children:[e.jsx(Te,{className:"res-icon-small"}),e.jsx("span",{children:o("fab_strip.save")})]})})]})}return e.jsxs(e.Fragment,{children:[!j&&e.jsxs("div",{className:"font-inter flex items-stretch justify-between border-b border-b-zinc-800 px-3 py-2",children:[v.editPrompt&&e.jsx("button",{type:"button",onClick:()=>A(),children:e.jsx(kt,{className:"res-icon-big"})}),e.jsx("span",{className:"flex items-center gap-1",children:v.editPrompt?e.jsxs(e.Fragment,{children:[e.jsx(Pe,{className:"res-icon-big"}),e.jsx("span",{className:"res-text-medium font-medium",children:o("fab_strip.edit_prompt")})]}):e.jsxs(e.Fragment,{children:[e.jsx(Nt,{className:"res-icon-big"}),e.jsx("span",{className:"res-text-medium font-medium",children:o("fab_strip.save_prompt")})]})}),e.jsx("button",{type:"button",onClick:()=>ee(),children:e.jsx(He,{className:"res-icon-big"})})]}),e.jsx("div",{className:"res-small-text flex h-full flex-1 flex-col items-stretch bg-zinc-200 p-3 dark:bg-zinc-700",children:pe()})]})}function gr(b){const{t:o}=Ne(),m=ne.useRef(null),{handleCustomPrompt:l,host:n="none",setActiveWindow:i,setValue:x,value:g}=b,v=j=>{j.stopPropagation(),j.preventDefault(),x(j.target.value)};return ne.useEffect(()=>{m.current.style.height="auto",m.current.style.height=`${Math.min(m.current.scrollHeight+2,80)}px`},[g]),ne.useEffect(()=>{try{setTimeout(()=>{m.current.focus()},100)}catch{}},[]),ne.useEffect(()=>{if(n==="twitter"){const j=m.current;try{j.addEventListener("click",ue)}catch{}return()=>{try{j.removeEventListener("click",ue)}catch{}}}},[]),e.jsxs("div",{className:"center-with-flex border-cornblue-500 dark:border-cornblue-400 relative flex w-full appearance-none items-center justify-between gap-1 overflow-hidden truncate whitespace-nowrap rounded-2xl  border  px-2 py-[5.5px] text-sm text-zinc-700 outline-none transition-[colors,box-shadow] duration-300 placeholder:text-zinc-400 dark:text-zinc-200 dark:placeholder:text-zinc-400 ",children:[e.jsx("textarea",{value:g,ref:m,onChange:v,rows:1,style:{overflow:"auto",resize:"none",width:"100%"},className:"h-full resize-none border-none bg-inherit text-inherit outline-none placeholder:max-w-[90%] placeholder:truncate ",placeholder:o("fab_strip.personalized"),onKeyDown:j=>{j.shiftKey&&j.key==="Enter"||j.key==="Enter"&&(Ve({feature:U[n],firedFromFile:"components/fabStrip",prompt_text:g,prompt_type:"Custom"}),l(g),j.stopPropagation())}}),n!=="facebook"&&e.jsx(Nt,{onClick:()=>{i(be.SAVE_PROMPT)},className:"text-cornblue-500 dark:text-cornblue-200 h-5 w-5 cursor-pointer"})]})}const wt=b=>{var i;const[o=ft,m]=Ke({instance:new We({area:"local"}),key:"UserSettings"});return{model:(i=o.merlinOnSocialMedia[b])==null?void 0:i.prefferedModel,updateModel:x=>{m({...o,merlinOnSocialMedia:{...o.merlinOnSocialMedia,[b]:{...o.merlinOnSocialMedia[b],prefferedModel:x}}})}}};function vr(b){const{host:o,isTwitterModal:m=!1,mountOn:l="NONE",promptsFor:n,value:i}=b,[x,g]=s.useState(!1),{updateModel:v}=wt(o),j=s.useRef(null);return vt(j,ne.useCallback(()=>g(!1),[])),e.jsxs("div",{className:u({"relative flex items-center text-gray-800 dark:text-gray-200":!0}),ref:j,children:[e.jsxs("button",{className:"ml-2 rounded-full border border-gray-300 p-2 hover:bg-gray-100 dark:border-gray-700 dark:hover:bg-gray-800",type:"button",onClick:()=>{g(!x)},children:[(i==null?void 0:i.name)===de.GPT_4.name&&e.jsx(ct,{className:"h-4 w-4"}),(i==null?void 0:i.name)===de.GPT_3.name&&e.jsx(dt,{className:"h-4 w-4"})]}),e.jsx(se,{children:x&&e.jsxs(w.div,{className:u("absolute bottom-[45px] right-2 flex h-fit w-32 flex-col rounded-lg bg-zinc-200 text-sm shadow-lg dark:border dark:border-zinc-700 dark:bg-zinc-700",{"bottom-[4px] right-8":m||l===h.FACEBOOK.PERSONAL.POST,"top-[120%]":n===Ge.TWEET&&!m}),initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[e.jsx("div",{onClick:()=>{v(de.GPT_3),g(!x)},className:"w-full cursor-pointer justify-between rounded-t-lg px-2 py-1 hover:bg-zinc-300 dark:hover:bg-zinc-800",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"flex flex-1 items-center",children:[e.jsx("span",{className:"mr-2",children:e.jsx(dt,{className:"h-4 w-4"})}),de.GPT_3.name]}),(i==null?void 0:i.name)===de.GPT_3.name&&e.jsx("div",{className:"flex items-center justify-center",children:e.jsx(Te,{className:"h-4 w-4"})})]})}),e.jsx("span",{className:u({"w-full border-b border-b-zinc-200 dark:border-b-zinc-800":!0})}),e.jsx("div",{onClick:()=>{v(de.GPT_4),g(!x)},className:"w-full cursor-pointer justify-between rounded-b-lg px-2 py-1 hover:bg-zinc-300 dark:hover:bg-zinc-800",children:e.jsxs("div",{className:"flex  gap-2",children:[e.jsxs("div",{className:"flex flex-1 items-center",children:[e.jsx("span",{className:"mr-2",children:e.jsx(ct,{className:"h-4 w-4"})}),de.GPT_4.name]}),(i==null?void 0:i.name)===de.GPT_4.name&&e.jsx("div",{className:"flex items-center justify-center",children:e.jsx(Te,{className:"h-4 w-4"})})]})})]})})]})}function yr(b){const{t:o}=Ne(),{changeActiveWindow:m,from:l="DEFAULT",host:n,merlinPrompts:i,setUserPromptsUpdated:x,updateUserPrompt:g}=b,[v,j]=s.useState(""),{getUserPromptTemplates:y}=ke(ht,"getUserPromptTemplates",!1),{deleteUserPromptTemplate:_}=ke(Bt,"deleteUserPromptTemplate",!1),{editUserPromptTemplate:Y}=ke(xt,"editUserPromptTemplate",!1),{isWebpage:F,setEditorState:V,setLeftUI:ie,setPinnedSavedPrompts:z,setUserMadePromptTemplates:ae,userMadePromptTemplates:$}=s.useContext(Xe),[oe,J]=s.useState(!0),[Z,ee]=s.useState(!1),[A,O]=s.useState($),[c,T]=s.useState([]),[te,W]=s.useState(!1),M=s.useRef(null),L=s.useRef(c),R=s.useRef(c);s.useEffect(()=>{if(n==="twitter"){try{M.current.addEventListener("click",ue)}catch{}return()=>{try{M.current.removeEventListener("click",ue)}catch{}}}},[]);function pe(r){if(l==="FAB_STRIP"&&i){const E=r.length;i.forEach((I,k)=>{O(f=>(f.push({id:E+k,promptName:I.name,promptText:I.content,type:"merlin"}),f))})}}s.useEffect(()=>{(async()=>{var E,I;const r=await y.execute();if(r){if(r!=null&&r.userMade){if(ee(!1),r.pinnedPromptIds){const f=(I=(E=r.pinnedPromptIds)==null?void 0:E.map(D=>r.userMade.find(ge=>ge.id===D)))==null?void 0:I.filter(Boolean);T(f||[])}const k=r.userMade.filter(f=>{var D;return!((D=r.pinnedPromptIds)!=null&&D.includes(f.id))});O(k),pe(r==null?void 0:r.userMade),ae(r==null?void 0:r.userMade),z((r==null?void 0:r.pinnedPromptIds)||[]),l==="FAB_STRIP"&&x(f=>f+1)}else ee(!0),O("It seems like you don't have any saved prompts.");J(!1);return}ee(!0),O("Failed to get user saved prompts."),J(!1)})()},[]);function N(r){re(),V({editPrompt:!0,id:r})}function P(){l==="FAB_STRIP"?m(""):ie({activeUI:"",isCollapsed:!1,isVisible:!1})}function re(){l==="FAB_STRIP"?m("Edit your prompt"):ie({activeUI:"Edit your prompt",isCollapsed:!1,isVisible:!0})}async function le(r){const E=c.filter(f=>f.id!==r);T(E);const I=A.filter(f=>f.id!==r);O(I);const k=await _.execute({id:r});k&&(pe(k.userMade),ae(k==null?void 0:k.userMade),z((k==null?void 0:k.pinnedPromptIds)||[]),l==="FAB_STRIP"&&x(f=>f+1))}const xe=async r=>{try{T(f=>[...f,r]),O(f=>f.filter(D=>D.id!==r.id));const E=c.map(f=>f.id);E.push(r.id);const I={pinnedPromptIds:E},k=await Y.execute(I);k!=null&&k.pinnedPromptIds&&z((k==null?void 0:k.pinnedPromptIds)||[])}catch{ee(!0),J(!1),setTimeout(()=>{ee(!1)},1e3)}},me=async r=>{try{T(D=>D.filter(ge=>ge.id!==r.id)),O(D=>[r,...D]);const k={pinnedPromptIds:c.filter(D=>D.id!==r.id).map(D=>D.id)},f=await Y.execute(k);f!=null&&f.pinnedPromptIds&&z((f==null?void 0:f.pinnedPromptIds)||[])}catch{ee(!0),J(!1),setTimeout(()=>{ee(!1)},1e3)}},ce=async r=>{T(r),L.current=r},Ce=async r=>{const E={pinnedPromptIds:r},I=await Y.execute(E);I!=null&&I.pinnedPromptIds&&z((I==null?void 0:I.pinnedPromptIds)||[])};function Se(r,E){const I=[];return tr.go(r,E,{keys:["promptName","promptText"],scoreFn:f=>Math.max(f[0]?f[0].score:-1e3,f[1]?f[1].score-100:-1e3)}).forEach(f=>I.push(f.obj)),I}const B=()=>{W(!0)},he=()=>{W(!1);const r=L.current.map(k=>k.id),E=R.current.map(k=>k.id);!r.every((k,f)=>k===E[f])&&(Ce(r),R.current=[...L.current])},_e=()=>c.map(r=>e.jsx(ut.Item,{value:r,onDragStart:B,onDragEnd:he,children:e.jsxs("div",{className:"font-hanken dark:bg-background group relative min-h-[90px] items-stretch overflow-hidden rounded-[4px] bg-zinc-50",children:[e.jsxs("div",{onClick:()=>{te||g(r.promptText,!0)},className:"z-10 flex w-[92%] cursor-pointer flex-col items-stretch gap-1 p-3 transition-[width] group-hover:w-[90%]",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("span",{className:"truncate text-ellipsis whitespace-nowrap font-semibold",children:[r.promptName,(r==null?void 0:r.type)==="merlin"?" (by merlin)":""]})}),e.jsx("div",{className:"line-clamp-2 text-ellipsis",children:r.promptText})]}),e.jsxs("div",{className:"absolute right-[5px] top-1/2 flex h-[90%] w-[10%] -translate-y-1/2 flex-col items-center justify-center gap-[3px]",children:[e.jsx("div",{className:"absolute left-0 top-0 h-full w-full translate-x-[116%] rounded-[4px] bg-zinc-200 p-2 transition-all group-hover:translate-x-0 dark:bg-zinc-700"}),e.jsxs("div",{className:`relative top-0 z-10 flex w-full translate-x-[116%] flex-col items-center justify-center
            gap-[3px] transition-all group-hover:translate-x-0`,children:[e.jsx("button",{type:"button",className:"dark:hover:bg-background rounded-sm p-[2px] hover:bg-zinc-50",onClick:()=>N(r.id),children:e.jsx(Pe,{size:16,className:"res-icon-small"})}),e.jsx("button",{onClick:()=>le(r.id),type:"button",className:"dark:hover:bg-background rounded-sm p-[2px] hover:bg-zinc-50",children:e.jsx(Ee,{size:16,className:"res-icon-small"})})]}),e.jsx("button",{className:"dark:hover:bg-background z-10 rounded-sm p-[2px] hover:bg-zinc-50",type:"button",onClick:()=>me(r),children:e.jsx(Be,{size:16,className:"res-icon-small"})})]})]})},r.id));function Ae(){return oe?e.jsx("div",{className:"center-with-flex flex-1",children:e.jsx("span",{className:"merlinExt-circular-loader"})}):Z?e.jsx("div",{className:"center-with-flex flex-1",children:A}):A.length>0||c.length>0?v!==""?e.jsx(e.Fragment,{children:Se(v,[...A,...c]).map(r=>e.jsx(w.div,{children:e.jsxs("div",{className:"font-hanken dark:bg-background group relative min-h-[90px] items-stretch overflow-hidden rounded-[4px] bg-zinc-50",children:[e.jsxs("div",{onClick:()=>{g(r.promptText,!0)},className:"flex w-full cursor-pointer flex-col items-stretch gap-1 p-3 transition-[width] group-hover:w-[90%]",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("span",{className:"truncate text-ellipsis whitespace-nowrap font-semibold",children:[r.promptName,(r==null?void 0:r.type)==="merlin"?" (by merlin)":""]})}),e.jsx("div",{className:"line-clamp-2 text-ellipsis",children:r.promptText})]}),e.jsxs("div",{className:"absolute right-[5px] top-1/2 flex h-[90%] w-[10%] -translate-y-1/2 translate-x-[116%] flex-col items-center justify-center gap-[3px] rounded-[4px] bg-zinc-200 p-2 transition-all group-hover:-translate-y-1/2 group-hover:translate-x-0 dark:bg-zinc-700",children:[e.jsx("button",{type:"button",className:"dark:hover:bg-background rounded-sm p-[2px] hover:bg-zinc-50",onClick:()=>N(r.id),children:e.jsx(Pe,{size:16,className:"res-icon-small"})}),e.jsx("button",{onClick:()=>le(r.id),type:"button",className:"dark:hover:bg-background rounded-sm p-[2px] hover:bg-zinc-50",children:e.jsx(Ee,{size:16,className:"res-icon-small"})}),e.jsx("button",{className:"dark:hover:bg-background rounded-sm p-[2px] hover:bg-zinc-50",type:"button",onClick:()=>xe(r),children:e.jsx(Be,{size:16,className:"res-icon-small"})})]})]})},r.id))}):e.jsxs(e.Fragment,{children:[c.length>0&&e.jsx("div",{style:{overflow:A.length>0?"hidden":"initial"},className:"table overflow-hidden",children:e.jsx(ut.Group,{axis:"y",values:c,onReorder:ce,className:"flex flex-col gap-2",children:_e()})}),c.length>0&&A.length>0&&e.jsx(w.div,{className:"relative w-full py-1",children:e.jsx("div",{className:"dark:bg-background absolute left-0 top-1/2 h-[2px] w-full -translate-y-1/2 bg-zinc-300"})}),e.jsx("div",{className:"flex flex-col gap-2",children:A.map(r=>e.jsx(w.div,{layoutId:r.id,children:e.jsxs("div",{className:"font-hanken dark:bg-background group relative min-h-[90px] items-stretch overflow-hidden rounded-[4px] bg-zinc-50",children:[e.jsxs("div",{onClick:()=>{g(r.promptText,!0)},className:"flex w-full cursor-pointer flex-col items-stretch gap-1 p-3 transition-[width] group-hover:w-[90%]",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("span",{className:"truncate text-ellipsis whitespace-nowrap font-semibold",children:[r.promptName,(r==null?void 0:r.type)==="merlin"?" (by merlin)":""]})}),e.jsx("div",{className:"line-clamp-2 text-ellipsis",children:r.promptText})]}),e.jsxs("div",{className:"absolute right-[5px] top-1/2 flex h-[90%] w-[10%] -translate-y-1/2 translate-x-[116%] flex-col items-center justify-center gap-[3px] rounded-[4px] bg-zinc-200 p-2 transition-all group-hover:-translate-y-1/2 group-hover:translate-x-0 dark:bg-zinc-700",children:[e.jsx("button",{type:"button",className:"dark:hover:bg-background rounded-sm p-[2px] hover:bg-zinc-50",onClick:()=>N(r.id),children:e.jsx(Pe,{size:16,className:"res-icon-small"})}),e.jsx("button",{onClick:()=>le(r.id),type:"button",className:"dark:hover:bg-background rounded-sm p-[2px] hover:bg-zinc-50",children:e.jsx(Ee,{size:16,className:"res-icon-small"})}),e.jsx("button",{className:"dark:hover:bg-background rounded-sm p-[2px] hover:bg-zinc-50",type:"button",onClick:()=>xe(r),children:e.jsx(Be,{size:16,className:"res-icon-small"})})]})]})},r.id))})]}):e.jsxs("div",{className:"center-with-flex flex-1 flex-col",children:[e.jsxs("div",{children:[o("fab_strip.no_prev_prompt"),"("]}),e.jsx("div",{className:"mb-4",children:o("fab_strip.add_new_prompt")})]})}return e.jsxs(e.Fragment,{children:[!F&&e.jsxs("div",{className:"font-inter flex items-stretch justify-between border-b border-b-zinc-200 px-3 py-2 dark:border-b-zinc-800",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(yt,{className:"res-icon-big"}),e.jsx("span",{className:"res-text-medium font-medium",children:o("fab_strip.saved_prompt")})]}),e.jsx("button",{type:"button",onClick:()=>P(),children:e.jsx(He,{className:"res-icon-big"})})]}),e.jsxs("div",{className:"font-inter flex items-center justify-between gap-1 px-3 dark:bg-zinc-800",children:[e.jsx(nr,{className:"res-icon-big"}),e.jsx("input",{ref:M,type:"text",value:v,autoFocus:!0,onChange:r=>j(r.target.value),className:"w-full flex-1 bg-transparent p-2 focus-visible:outline-none dark:bg-zinc-800",placeholder:o("prompt.search_prompt")})]}),e.jsx("div",{className:"res-small-text merlinExt-custom-scrollbar scrollbar-w-1 flex h-full flex-col gap-2 overflow-y-auto bg-zinc-200 p-2 dark:bg-zinc-700",children:e.jsx(se,{children:Ae()})}),e.jsx("div",{className:"font-inter flex items-center justify-center rounded-b-lg px-3 py-1 dark:bg-zinc-800",children:e.jsxs("button",{type:"button",className:"c-transition-colors flex items-center justify-center gap-1 self-center rounded-md bg-transparent px-2 py-2 hover:bg-zinc-400 dark:hover:bg-zinc-700",onClick:()=>re(),children:[e.jsx(er,{className:"res-icon-small"}),e.jsx("div",{className:"text-sm",children:o("fab_strip.add_prompt")})]})})]})}function kr({stopGenerating:b}){const{t:o}=Ne();return e.jsxs("button",{type:"button",className:"center-with-flex border-cornblue-500 text-cornblue-500 hover:border-cornblue-600 hover:bg-cornblue-100 focus-visible:ring-cornblue-400 active:border-cornblue-700 disabled:border-cornblue-200 dark:border-cornblue-400 dark:text-cornblue-200 dark:hover:bg-cornblue-300/50 dark:focus-visible:text-cornblue-300 dark:focus-visible:ring-cornblue-500 dark:active:bg-cornblue-300/30 dark:disabled:border-cornblue-800 relative gap-1 overflow-hidden truncate whitespace-nowrap rounded-full border px-2 py-1 text-sm font-semibold ring-0 transition-[background-color,box-shadow] duration-300 focus-visible:outline-none focus-visible:ring",onClick:()=>{Q({eventName:"StopGeneratingButton",eventType:"Button",feature:"merlinOnSocialMedia",firedFromFile:"components/fabStrip"}),b()},children:[e.jsx(mr,{strokeWidth:0,size:"18px",fill:"red"}),o("fab_strip.stop_gen")]})}function Nr(b){const{handleStripBtn:o,host:m="NONE",id:l,prompt:n,promptsFor:i,setCustomPromptActive:x,setTextareaValue:g}=b;function v(j){x(!0),g(j)}return e.jsxs("div",{className:"border-cornblue-500 text-cornblue-500 hover:border-cornblue-600  active:border-cornblue-700 disabled:border-cornblue-200 disabled:text-cornblue-200 dark:border-cornblue-400 dark:text-cornblue-200 dark:active:text-cornblue-100 dark:disabled:border-cornblue-800 dark:disabled:text-cornblue-800  flex max-w-[180px] items-center text-ellipsis whitespace-nowrap rounded-full border text-sm font-semibold transition-colors duration-300 ease-in-out",children:[e.jsx("button",{type:"button",onClick:()=>{m!=="twitter"&&o(n)},onMouseDownCapture:()=>{m==="twitter"&&o(n)},className:u({"border-cornblue-500 hover:border-cornblue-600 hover:bg-cornblue-100 focus-visible:ring-cornblue-400 active:border-cornblue-700 disabled:border-cornblue-200 dark:border-cornblue-400 dark:hover:bg-cornblue-300/50 dark:focus-visible:text-cornblue-300 dark:focus-visible:ring-cornblue-500 dark:active:bg-cornblue-300/30 dark:disabled:border-cornblue-800 truncate rounded-l-full border-r px-2 py-1  ring-0 transition-[background-color,box-shadow] duration-300 focus-visible:outline-none focus-visible:ring":!0}),children:b.children}),e.jsx("button",{type:"button",onClick:()=>v(n),className:u({"hover:bg-cornblue-100 focus-visible:ring-cornblue-400 dark:hover:bg-cornblue-300/50 dark:focus-visible:text-cornblue-300 dark:focus-visible:ring-cornblue-500 dark:active:bg-cornblue-300/30 h-full rounded-r-full  p-1 ring-0 transition-[background-color,box-shadow] duration-300 focus-visible:outline-none focus-visible:ring":!0}),children:e.jsx(rr,{className:"res-icon-big"})})]})}const be={NONE:"",SAVE_PROMPT:"Edit your prompt",SAVED_PROMPTS:"Saved Prompts"};function on(b){var rt,nt,st;const{t:o}=Ne(),{contextData:m,editor:l,host:n,mountOn:i,promptsFor:x,setTextareaValue:g,textareaValue:v,toggleStrip:j}=b,{...y}=s.useContext(bt),[_,Y]=s.useState(null),[F,V]=s.useState(!1),[ie,z]=s.useState(!1),[ae,$]=s.useState(null),[oe,J]=s.useState(null),{model:Z,updateModel:ee}=wt(n),[A,O]=s.useState(null),c=s.useRef(null),T=s.useRef([]),te=s.useRef(null),W=s.useRef(null),M=s.useRef(null),L=s.useRef(null),R=s.useRef(null),[pe,N]=s.useState("none"),[P,re]=s.useState(!1),[le,xe]=s.useState(""),[me,ce]=s.useState(!1),[Ce,Se]=s.useState(0),[B,he]=s.useState("left"),[_e=ft,Ae]=Ke({instance:new We({area:"local"}),key:"UserSettings"}),[r,E]=s.useState(""),[I,k]=s.useState(""),[f,D]=s.useState(null);function ge(){if(R.current){const t=R.current.scrollLeft===0,a=Math.ceil(R.current.scrollLeft)>=R.current.scrollWidth-R.current.clientWidth;t&&he("left"),a&&he("right"),t&&a&&he("both"),!a&&!t&&he("none")}}function Qe(t){Object.values(be).includes(t)?N(t):(console.error("Invalid window name passed to changeActiveWindow"),N(be.NONE))}function Me(t,a=!0){a&&z(!0),g(t),xe(t),N(be.NONE)}function Ye(){const{parentNode:t}=l,a=t.querySelector(".DraftEditor-root > .DraftEditor-editorContainer > .public-DraftEditor-content").querySelector(".public-DraftStyleDefault-block > span");te.current=a}function Le(){var a,d,p,S;let t;i===h.LINKEDIN.COMMENT_REPLY||i===h.LINKEDIN.COMMENT?(d=(a=l.parentElement)==null?void 0:a.querySelector('div.ql-editor[contenteditable="true"][role="textbox"]'))!=null&&d.querySelector("p:last-child")?t=(S=(p=l.parentElement)==null?void 0:p.querySelector('div.ql-editor[contenteditable="true"][role="textbox"]'))==null?void 0:S.querySelector("p:last-child"):t=l.parentElement.querySelector('div.ql-editor[contenteditable="true"][role="textbox"]'):i===h.LINKEDIN.POST?t=l.closest(".share-box").querySelector(".ql-editor"):i===h.LINKEDIN.MESSAGE?t=l.parentNode.querySelector(".msg-form__contenteditable"):i===h.LINKEDIN.INVITE&&(t=l.parentNode.querySelector("textarea")),W.current=t}function St(){const t=l.parentElement.parentElement,a='div[contenteditable="true"][role="textbox"]',d='div[aria-autocomplete="list"][aria-expanded="false"][contenteditable="true"][role="combobox"]',p='textarea[aria-busy="false"][aria-disabled="false"][aria-invalid="true"]',S="textarea";let G;t.querySelector(a)&&(G=t.querySelector(a)),t.querySelector(d)&&(G=t.querySelector(d)),t.querySelector(p)&&(G=t.querySelector(p)),t.querySelector(S)&&(G=t.querySelector(S)),c.current=G}function It(){const t=l.parentElement,a='[dir="ltr"][role="textbox"][contenteditable="true"]';if(t.querySelector(a)){const d=t.querySelector(a);te.current=d}}const{getUserPromptTemplates:Pt}=ke(ht,"getUserPromptTemplates",!1),{handleSSE:C}=Kt(`${Rt.DOMAIN}/generative/${n}?&customJWT=true&generativeVersion=1.1`,"handleSSE",{method:"POST",onError:t=>{Y(t)},onMessage:t=>{let d=JSON.parse(t.data).data.content;if(k(p=>p+d),n==="twitter"){Ye();const p=te.current;d=d.replaceAll(`
`," "),new Promise(S=>setTimeout(()=>{we(p,d),S(null)},0))}else if(n==="linkedin"){Le();const p=W.current;i===h.LINKEDIN.INVITE?(p.focus(),p.value+=d):i===h.LINKEDIN.MESSAGE?we(p,d):p.textContent+=d}else if(n==="facebook"){const p=c.current;if(i===h.FACEBOOK.BUSINESS.AD||i===h.FACEBOOK.BUSINESS.MESSAGE){p.focus(),p.value+=d;const S=new Event("input",{bubbles:!0});p.dispatchEvent(S)}else we(p,d)}else if(n==="outlook")we(te.current,d);else{L.current||(L.current=M.current),T.current.includes(L.current)||T.current.push(L.current),L.current.textContent+=d;const p=M.current.querySelector(".gmail_quote"),S=M.current.querySelector(".gmail_signature");if(d.includes(`
`)){const G=M.current.querySelector("br");G&&G.remove();const X=document.createElement("p"),je=M.current;if(S){const fe=L.current;fe.parentElement.insertBefore(X,fe.nextSibling)}else if(p){const fe=p.parentNode.childNodes,zt=Array.prototype.indexOf.call(fe,p);je.insertBefore(X,je.childNodes[zt])}else je.appendChild(X);L.current=X}}},onOpen:async t=>{t.ok&&t.headers.get("X-Request-Id")&&D(t.headers.get("X-Request-Id")),i===h.LINKEDIN.MESSAGE&&we(W.current,"")}});function $e(t){const a=R.current,d=a.offsetWidth,p={left:-d+60,right:d-60};a.scrollBy(p[t],0),setTimeout(()=>{ge()},350)}async function Je(){if(Q({eventName:"ClearButton",eventType:"Button",feature:U[n],firedFromFile:"components/fabStrip"}),Y(null),g(""),n==="linkedin"){Le();const t=W.current;i===h.LINKEDIN.MESSAGE?t.textContent="":i===h.LINKEDIN.INVITE?(t.value="",W.current.focus(),W.current.blur()):i===h.LINKEDIN.COMMENT_REPLY||i===h.LINKEDIN.COMMENT?t.closest('div.ql-editor[contenteditable="true"][role="textbox"]').innerHTML="":t.textContent="",C.setStatus("idle");return}if(n==="gmail"){T.current.forEach(t=>{t.textContent=""}),C.setStatus("idle");return}n==="outlook"&&(te.current.textContent="",C.setStatus("idle"))}function Ze(){Q({eventName:"GoBackButton",eventType:"Button",feature:U[n],firedFromFile:"components/fabStrip"}),C.setStatus("idle"),v&&z(!0)}function et(){Q({eventName:"RegenerateButton",eventType:"Button",feature:U[n],firedFromFile:"components/fabStrip"}),Y(null),C.reset(),Je(),ve(ae)}async function ve(t,a=Z==null?void 0:Z.id){if(n==="twitter"&&Ye(),n==="linkedin"){Le();const p=W.current;try{p.textContent!==""&&(p.innerHTML+=`

`)}catch{}}if(n==="gmail"){let p=null;p=l.closest(".iN").querySelector('.editable[role="textbox"]'),M.current=p;const S=M.current;if(S==null?void 0:S.querySelector(".gmail_quote")){const X=document.createElement("div");S.insertBefore(X,S.childNodes[0]),L.current=X}else{const X=S.querySelector("div");L.current=X}}n==="facebook"&&St(),n==="outlook"&&It(),$(t);const d=Wt.getQueryData(["sharedUserSettings"]);C.execute({context:m,language:d.language,modelId:a,mountOn:i,query:t}),E(JSON.stringify({contextData:m,feature:i,mountOn:i,prompt:t})),Ve({feature:U[n],firedFromFile:"components/fabStrip",prompt_text:t,prompt_type:"Saved"})}function tt(t){t&&($(t),ve(t),z(!1),V(!1))}s.useEffect(()=>{if(n==="linkedin"){const{parentNode:t}=l,a=new MutationObserver(d=>{for(const p of d){const{parentNode:S}=l,G=S.querySelector(".comments-comment-box__form-container .comments-comment-box__form .comments-comment-box__submit-button");try{G&&G.addEventListener("click",()=>{Ze()})}catch{}}});return a.observe(t,{attributes:!0,childList:!0,subtree:!0}),()=>{a.disconnect()}}ge()},[]),s.useEffect(()=>{if(n==="twitter"){const a=l.parentElement.closest('[aria-labelledby="modal-header"]');re(!!a)}},[]),s.useEffect(()=>{if(n==="linkedin"&&i===h.LINKEDIN.INVITE&&C.status==="success")try{W.current.blur()}catch{}},[C.status]),s.useEffect(()=>{if(R.current){const t=R.current.offsetWidth;R.current.scrollWidth>t?ce(!0):ce(!1)}},[R.current,A]),s.useEffect(()=>{y.isAuthenticated&&!y.isLoading&&(async()=>{try{let t=await qt(),a;Object.keys(t).includes(x)?(a=[...t[x]],t=t[x]):(a=[...t[Ge.FALLBACK]],t=t[Ge.FALLBACK]),J(a);const d=await Pt.execute();d&&d!=null&&d.userMade&&d.userMade.forEach(p=>{const{id:S,promptName:G,promptTag:X,promptText:je}=p,fe={content:je,id:S,name:G};X&&X===x?t.unshift(fe):t.push(fe)}),O(t)}catch{O(Mt)}})()},[y.isLoading,y.isAuthenticated,Ce]);const Re=s.useRef(null),De=s.useRef(null),Oe=ne.useRef(null);s.useEffect(()=>{if(n==="gmail"){let t=null;const a=l.closest(".h7.ie");if(a){const d=a.querySelector(".adn.ads");d&&(t=d.getAttribute("data-message-id"))}De.current=t;return}if(n==="facebook"){const t=document.querySelector('div[role="main"].x9f619.x1n2onr6.x1ja2u2z.x78zum5.x1iyjqo2.xs83m0k.xeuugli.xl56j7k.x1qjc9v5.xozqiw3.x1q0g3np.x1iplk16.x1xfsgkm.xqmdsaz.x1mtsufr.x1w9j1nh .x9f619.x1n2onr6.x1ja2u2z.x78zum5.xdt5ytf.x2lah0s.x193iq5w.xeuugli');t&&(Re.current=t.getAttribute("data-message-id"));return}if(n==="linkedin"&&i===h.LINKEDIN.INVITE){const t=document.querySelector(".scaffold-layout__main");if(t){const a=t.querySelector(".pv-top-card");if(a){const d=a.getAttribute("data-member-id")||"linkedin";Oe.current=d}}}},[l]);const{[Re.current]:K}=qe(Re.current,"facebook"),{[De.current]:q}=qe(De.current,"gmail"),{[Oe.current]:H}=qe(Oe.current,"linkedin"),ye=s.useRef(!1);s.useEffect(()=>{var t;n==="gmail"&&!y.isLoading&&y.isAuthenticated&&!ye.current&&(q.state&&((t=q.state)==null?void 0:t.status)==="loading"&&(ye.current=!0),(async()=>{var a,d,p;q.state&&((a=q.state)==null?void 0:a.status)==="loading"&&await ve(q.state.prompt,(p=(d=q.state)==null?void 0:d.model)==null?void 0:p.id)})())},[(rt=q.state)==null?void 0:rt.status]),s.useEffect(()=>{var t;n==="facebook"&&!y.isLoading&&y.isAuthenticated&&!ye.current&&(K.state&&((t=K.state)==null?void 0:t.status)==="loading"&&(ye.current=!0),(async()=>{var a,d,p;K.state&&((a=K.state)==null?void 0:a.status)==="loading"&&await ve(K.state.prompt,(p=(d=K.state)==null?void 0:d.model)==null?void 0:p.id)})())},[(nt=K.state)==null?void 0:nt.status]),s.useEffect(()=>{var t;n==="linkedin"&&i===h.LINKEDIN.INVITE&&!y.isLoading&&y.isAuthenticated&&!ye.current&&(H.state&&((t=H.state)==null?void 0:t.status)==="loading"&&(ye.current=!0),(async()=>{var a,d,p;H.state&&((a=H.state)==null?void 0:a.status)==="loading"&&await ve(H.state.prompt,(p=(d=H.state)==null?void 0:d.model)==null?void 0:p.id)})())},[(st=H.state)==null?void 0:st.status]),s.useEffect(()=>{(async()=>{var t;n==="gmail"&&q.state&&C.status==="success"&&q.state.status==="loading"&&(g((t=q.state)==null?void 0:t.prompt),await q.setSharedState({prompt:null,status:"idle"})),n==="facebook"&&K.state&&C.status==="success"&&K.state.status==="loading"&&await K.setSharedState({prompt:null,status:"idle"}),n==="linkedin"&&i===h.LINKEDIN.INVITE&&H.state&&C.status==="success"&&H.state.status==="loading"&&await H.setSharedState({prompt:null,status:"idle"})})()},[C.status]),s.useEffect(()=>{y.isAuthenticated&&gt({page_location:"components/fabStrip",page_title:U[n]+" FabStrip"})},[y.isAuthenticated]),s.useEffect(()=>()=>{(async()=>(n==="gmail"&&q.state&&await q.setSharedState({prompt:null,status:"idle"}),n==="facebook"&&K.state&&await K.setSharedState({prompt:null,status:"idle"}),n==="linkedin"&&i===h.LINKEDIN.INVITE&&H.state&&await H.setSharedState({prompt:null,status:"idle"})))()},[]);function Et(){return _&&_.type===Dt.RATE_LIMITED?e.jsx(w.span,{initial:{opacity:0},animate:{opacity:1,transition:{duration:.3}},children:e.jsxs("button",{type:"button",className:"center-with-flex border-cornblue-500 text-cornblue-500  hover:border-cornblue-600  hover:bg-cornblue-100 focus-visible:ring-cornblue-400 active:border-cornblue-700 disabled:border-cornblue-200 dark:border-cornblue-400 dark:text-cornblue-200 dark:hover:bg-cornblue-300/50 dark:focus-visible:text-cornblue-300 dark:focus-visible:ring-cornblue-500 dark:active:bg-cornblue-300/30 dark:disabled:border-cornblue-800  relative gap-1 overflow-hidden truncate whitespace-nowrap rounded-full border px-2 py-1 text-sm font-semibold  ring-0 transition-[background-color,box-shadow] duration-300 focus-visible:outline-none focus-visible:ring",onClick:()=>window.open(mt+"?from=out-of-queries-fabstrip","_blank"),children:[o("fab_strip.out_of_queries")," ",e.jsx("span",{className:"underline",children:o("fab_strip.merlin_pro")})," ",o("fab_strip.for_more")]})}):C.status==="streaming"||C.loading?e.jsxs("span",{className:"flex items-center justify-end gap-2 py-1",children:[e.jsx(w.span,{initial:{opacity:0,y:-10},animate:{opacity:1,transition:{delay:.1,duration:.3},y:0},children:e.jsx(kr,{stopGenerating:async()=>{C.close(),g(""),n==="gmail"&&await q.setSharedState({prompt:null,status:"idle"}),n==="facebook"&&await K.setSharedState({prompt:null,status:"idle"}),n==="linkedin"&&i===h.LINKEDIN.INVITE&&await H.setSharedState({prompt:null,status:"idle"})}})}),e.jsx(w.span,{initial:{opacity:0,y:-10},animate:{opacity:1,transition:{delay:.2,duration:.3},y:0},children:e.jsxs("span",{children:[o("fab_strip.writing"),"..."]})})]},"loading"):C.status==="success"&&i!==h.LINKEDIN.MESSAGE&&n!=="twitter"&&n!=="facebook"?e.jsxs("span",{className:"text-cornblue-500 dark:text-cornblue-200 flex items-stretch justify-end gap-2 py-1 text-sm font-semibold",children:[e.jsx(w.span,{initial:{opacity:0},animate:{opacity:1,transition:{duration:.3}},children:e.jsxs("button",{type:"button",className:"center-with-flex border-cornblue-500 hover:border-cornblue-600  hover:bg-cornblue-100  focus-visible:ring-cornblue-400 active:border-cornblue-700 disabled:border-cornblue-200 dark:border-cornblue-400 dark:hover:bg-cornblue-300/50 dark:focus-visible:text-cornblue-300 dark:focus-visible:ring-cornblue-500 dark:active:bg-cornblue-300/30 dark:disabled:border-cornblue-800 relative gap-1 overflow-hidden truncate whitespace-nowrap rounded-full rounded-l-full border px-2 py-1  ring-0 transition-[background-color,box-shadow] duration-300 focus-visible:outline-none focus-visible:ring",onClick:()=>Ze(),children:[i!==h.FACEBOOK.PERSONAL.MESSAGE&&e.jsx(pt,{size:20,strokeWidth:1.5}),o("fab_strip.go_back")]})}),e.jsx(w.span,{initial:{opacity:0},animate:{opacity:1,transition:{duration:.3}},children:e.jsxs("button",{type:"button",className:"center-with-flex border-cornblue-500 hover:border-cornblue-600  hover:bg-cornblue-100  focus-visible:ring-cornblue-400 active:border-cornblue-700 disabled:border-cornblue-200 dark:border-cornblue-400 dark:hover:bg-cornblue-300/50 dark:focus-visible:text-cornblue-300 dark:focus-visible:ring-cornblue-500 dark:active:bg-cornblue-300/30 dark:disabled:border-cornblue-800 relative gap-1 overflow-hidden truncate whitespace-nowrap rounded-full rounded-l-full border px-2 py-1  ring-0 transition-[background-color,box-shadow] duration-300 focus-visible:outline-none focus-visible:ring",onClick:()=>Je(),children:[e.jsx(Ee,{size:20,strokeWidth:1.5}),o("fab_strip.clear")]})}),e.jsx(w.span,{initial:{opacity:0},animate:{opacity:1,transition:{duration:.3}},children:e.jsxs("button",{type:"button",className:"center-with-flex border-cornblue-500 hover:border-cornblue-600  hover:bg-cornblue-100  focus-visible:ring-cornblue-400 active:border-cornblue-700 disabled:border-cornblue-200 dark:border-cornblue-400 dark:hover:bg-cornblue-300/50 dark:focus-visible:text-cornblue-300 dark:focus-visible:ring-cornblue-500 dark:active:bg-cornblue-300/30 dark:disabled:border-cornblue-800 relative gap-1 overflow-hidden truncate whitespace-nowrap rounded-full rounded-l-full border px-2 py-1  ring-0 transition-[background-color,box-shadow] duration-300 focus-visible:outline-none focus-visible:ring",onClick:()=>et(),children:[e.jsx(lt,{size:20,strokeWidth:1.5}),o("fab_strip.regen")]})})]},"success"):C.status==="error"||_?e.jsxs("span",{className:"flex items-stretch justify-end gap-2 py-1",children:[e.jsxs(w.span,{initial:{opacity:0,y:-10},animate:{opacity:1,transition:{delay:0*.1+.3,duration:.3},y:0},className:"group",children:[(_==null?void 0:_.message)&&e.jsxs("div",{className:"res-tiny-text absolute bottom-[120%] left-2/4 z-50 -mr-2 -mt-2 w-fit max-w-full -translate-x-2/4 font-medium opacity-0 transition-all duration-300 group-hover:opacity-100 group-hover:will-change-transform",children:[e.jsx("div",{className:"relative break-words rounded-lg bg-gray-100 px-2 py-1.5 text-center text-zinc-700 dark:bg-gray-800 dark:text-zinc-200",children:_.message}),e.jsx("div",{className:"absolute -bottom-1 left-1/2 -z-10 h-3 w-3 -translate-x-1/2 rotate-45 transform bg-gray-100 dark:bg-gray-800"})]}),e.jsxs("button",{type:"button",className:"center-with-flex relative cursor-default  gap-1  overflow-hidden whitespace-nowrap rounded-full border-2 border-rose-500 bg-rose-100 px-2  py-1 text-sm text-rose-500 dark:border-rose-600 dark:bg-rose-900 dark:text-rose-100",children:[e.jsx(ir,{size:20,strokeWidth:1.5}),o("external_mount.something_wrong")]})]}),e.jsx(w.span,{initial:{opacity:0,y:-10},animate:{opacity:1,transition:{delay:1*.1+.3,duration:.3},y:0},children:e.jsxs("button",{type:"button",className:"center-with-flex border-cornblue-500 hover:border-cornblue-600  hover:bg-cornblue-100  focus-visible:ring-cornblue-400 active:border-cornblue-700 disabled:border-cornblue-200 dark:border-cornblue-400 dark:hover:bg-cornblue-300/50 dark:focus-visible:text-cornblue-300 dark:focus-visible:ring-cornblue-500 dark:active:bg-cornblue-300/30 dark:disabled:border-cornblue-800 relative gap-1 overflow-hidden truncate whitespace-nowrap rounded-full rounded-l-full border px-2 py-1  ring-0 transition-[colors,box-shadow] duration-300 focus-visible:outline-none focus-visible:ring",onClick:()=>et(),children:[e.jsx(lt,{size:20,strokeWidth:1.5}),o("external_mount.retry")]})})]},"error"):A?ie?e.jsxs(w.div,{className:"center-with-flex min-h-[33px] w-full gap-2",initial:{opacity:0,y:-10},animate:{opacity:1,transition:{delay:.4,duration:.3},y:0},children:[e.jsx(w.button,{initial:{opacity:0,y:-10},animate:{opacity:1,transition:{delay:.6,duration:.3},y:0},className:"appearance-none",onClick:()=>{z(!1),Me("",!1)},children:e.jsx(kt,{className:"text-cornblue-500 dark:text-cornblue-200  h-5 w-5"})}),e.jsx(gr,{value:v,setValue:Me,setActiveWindow:N,host:n,handleCustomPrompt:tt}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(w.button,{initial:{opacity:0,y:-10},animate:{opacity:1,transition:{delay:.5,duration:.3},y:0},className:"appearance-none",onClick:()=>{Ve({feature:U[n],firedFromFile:"components/fabStrip",prompt_text:v,prompt_type:"Custom"}),tt(v)},children:e.jsx(or,{className:"text-cornblue-500 dark:text-cornblue-200  h-5 w-5"})})})]}):e.jsxs(e.Fragment,{children:[e.jsx(se,{children:e.jsx(w.button,{initial:{opacity:0,y:-10},animate:{opacity:1,transition:{delay:0*.1+.3,duration:.3},y:0},exit:{opacity:0,y:-10},onClick:()=>$e("left"),disabled:B==="left"||B==="both",className:u("center-with-flex",B==="left"||B==="both"?"text-gray-500 focus-visible:outline-none":"text-cornblue-500 focus-visible:outline-cornblue-400 dark:text-cornblue-200 dark:focus-visible:text-cornblue-300 dark:focus-visible:outline-cornblue-500 rounded-full outline-none transition-[background-color,outline] duration-300 ease-in-out focus-visible:outline-2 focus-visible:outline-offset-0"),id:"leftBtn",children:e.jsx(pt,{size:20,className:u("rounded-full transition-colors duration-200 ease-in-out",B==="left"||B==="both"?"":"hover:bg-cornblue-100 dark:hover:bg-cornblue-300/50 bg-transparent")})})}),e.jsx("span",{ref:R,className:u({"merlinExt-custom-scrollbar scrollbar-h-1 flex snap-x scroll-px-0.5 items-stretch justify-between gap-2 overflow-x-auto scroll-smooth px-0.5 py-1":!0,"pr-1":!me}),children:A.map((t,a)=>e.jsx(w.span,{className:"snap-start",initial:{opacity:0,y:-10},animate:{opacity:1,transition:{delay:a*.1+.4,duration:.3},y:0},children:e.jsx(Nr,{id:a,prompt:t.content,promptsFor:x,handleStripBtn:ve,setTextareaValue:g,setCustomPromptActive:z,host:n,children:t.name})},a))}),e.jsx(se,{children:me&&e.jsx(w.button,{initial:{opacity:0,y:-10},animate:{opacity:1,transition:{delay:4*.1+.3,duration:.3},y:0},exit:{opacity:0,y:-10},onClick:()=>$e("right"),disabled:B==="right"||B==="both",className:u("center-with-flex",B==="right"||B==="both"?"text-gray-500 focus-visible:outline-none":"text-cornblue-500 focus-visible:outline-cornblue-400 dark:text-cornblue-200 dark:focus-visible:text-cornblue-300 dark:focus-visible:outline-cornblue-500 rounded-full outline-none transition-[background-color,outline] duration-300 ease-in-out focus-visible:outline-2 focus-visible:outline-offset-0"),id:"rightBtn",children:e.jsx(ze,{size:20,className:u("rounded-full transition-colors duration-200 ease-in-out",B==="right"||B==="both"?"":"hover:bg-cornblue-100 dark:hover:bg-cornblue-300/50 bg-transparent")})})}),e.jsxs("div",{className:"center-with-flex",children:[e.jsx(w.button,{initial:{opacity:0,y:-10},animate:{opacity:1,transition:{delay:5*.1+.3,duration:.3},y:0},exit:{opacity:0},className:u("center-with-flex border-cornblue-500 text-cornblue-500 hover:border-cornblue-600 hover:bg-cornblue-100 focus-visible:ring-cornblue-400 active:border-cornblue-700 disabled:border-cornblue-200 dark:border-cornblue-400 dark:text-cornblue-200  dark:hover:bg-cornblue-300/50 dark:focus-visible:text-cornblue-300 dark:focus-visible:ring-cornblue-500 dark:active:bg-cornblue-300/30 dark:disabled:border-cornblue-800 gap-1 rounded-full border px-2 py-1 text-sm font-semibold  ring-0 transition-[background-color,box-shadow] duration-300 focus-visible:outline-none focus-visible:ring"),onMouseEnter:()=>{V(!0)},onMouseLeave:()=>{V(!1)},onMouseDownCapture:()=>{z(!0),V(!1)},children:o("external_mount.create")}),e.jsx(se,{children:F&&e.jsx(Vt,{text:o("external_mount.create_prompt"),className:u("absolute -top-[34px] z-[99999] text-xs font-medium",n==="facebook"&&"right-[0px]",(i===h.GMAIL.GMAIL_COMPOSE||i===h.GMAIL.GMAIL_REPLY)&&"right-[50px]",i===h.GMAIL.GMAIL_EXTERNAL_MOUNT&&"right- left-[48%] w-fit")})})]})]}):e.jsx("span",{className:u({"flex items-stretch justify-end gap-2 py-1":!0}),children:e.jsx(w.span,{initial:{opacity:0,y:-10},animate:{opacity:1,transition:{delay:.3,duration:.3},y:0},children:e.jsxs("span",{children:[o("external_mount.loading"),"..."]})})})}return e.jsx(xr,{children:e.jsxs(se,{children:[e.jsxs(w.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:u("center-with-flex merlin-fab-strip flex gap-1 px-1",{"bg-white":n==="gmail","items-stretch":!ie,"mt-3":i===h.LINKEDIN.INVITE,"plain-text-color":n!=="gmail","pt-[6px]":ie,"px-2 pl-4":i===h.LINKEDIN.COMMENT,"px-5":i===h.LINKEDIN.POST}),children:[!y.isLoading&&y.isAuthenticated&&e.jsxs("div",{className:u({"flex flex-1 items-stretch justify-end gap-1 overflow-hidden":!0,"justify-start":i===h.GMAIL.GMAIL_EXTERNAL_MOUNT}),children:[Et(),pe===be.SAVE_PROMPT&&e.jsx("div",{className:"dark:bg-background  fixed left-2/4 top-2/4 z-[2147483647] flex h-[40vh] min-h-[420px] w-[30vw] max-w-[360px] -translate-x-2/4 -translate-y-2/4 flex-col items-stretch rounded-lg border border-zinc-200 bg-zinc-50 dark:border-zinc-800",children:e.jsx(hr,{userPrompt:le||v,changeActiveWindow:Qe,host:n,from:"FAB_STRIP",setUserPromptsUpdated:Se,promptsFor:x})}),pe===be.SAVED_PROMPTS&&e.jsx("div",{className:"dark:bg-background  fixed left-2/4 top-2/4 z-[2147483647] flex h-[40vh] min-h-[420px] w-[30vw] max-w-[360px] -translate-x-2/4 -translate-y-2/4 flex-col items-stretch rounded-lg border border-zinc-200 bg-zinc-50 dark:border-zinc-800",children:e.jsx(yr,{changeActiveWindow:Qe,updateUserPrompt:Me,host:n,from:"FAB_STRIP",merlinPrompts:oe,setUserPromptsUpdated:Se,promptsFor:x})})]}),!y.isLoading&&!y.isAuthenticated&&i!==h.GMAIL.GMAIL_EXTERNAL_MOUNT&&e.jsx(w.span,{className:u({"ml-auto py-1":!0}),initial:{opacity:0},animate:{opacity:1,transition:{duration:.3}},children:e.jsx("button",{type:"button",className:"center-with-flex border-cornblue-500 text-cornblue-500  hover:border-cornblue-600 hover:bg-cornblue-100 focus-visible:ring-cornblue-400 active:border-cornblue-700 disabled:border-cornblue-200 dark:border-cornblue-400 dark:text-cornblue-200 dark:hover:bg-cornblue-300/50 dark:focus-visible:text-cornblue-300 dark:focus-visible:ring-cornblue-500 dark:active:bg-cornblue-300/30 dark:disabled:border-cornblue-800  relative gap-1 overflow-hidden truncate whitespace-nowrap rounded-full border px-2 py-1 text-sm font-semibold  ring-0 transition-[background-color,box-shadow] duration-300 focus-visible:outline-none focus-visible:ring",onClick:()=>{Q({eventData:"Merlin Login",eventName:"OpenPage",eventType:"Button",feature:U[n],firedFromFile:"components/fabStrip"}),window.open(Lt,"_blank")},children:o("external_mount.login")})}),i!==h.GMAIL.GMAIL_EXTERNAL_MOUNT&&e.jsxs("div",{className:u({"flex items-stretch justify-between gap-1":!0}),children:[e.jsx(vr,{position:b.dotMenuPosition,promptsFor:x,isTwitterModal:!1,setActiveWindow:N,host:n,value:Z}),e.jsx(br,{position:b.dotMenuPosition,promptsFor:x,mountOn:i,isTwitterModal:P,setActiveWindow:N,host:n}),n==="gmail"&&e.jsx("button",{type:"button",onClick:()=>j(_e,Ae,!1),children:e.jsx(He,{className:u({"res-icon-big":!0})})})]})]}),C.status==="success"&&e.jsx("div",{className:"m-2",children:e.jsx(Gt,{queryTerms:r,promptResult:I,callingSite:window.location.href,email:!y.email||y.email===""?"EMAIL_NOT_FOUND":y.email,requestId:f})})]})})}export{xr as C,br as D,gr as E,on as F,vr as G,hr as S,wt as a,yr as b,Nr as c,qe as u};
