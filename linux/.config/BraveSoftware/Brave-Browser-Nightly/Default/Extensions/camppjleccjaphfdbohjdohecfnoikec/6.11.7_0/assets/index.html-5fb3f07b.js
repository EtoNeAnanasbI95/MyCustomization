import"./index-47331bf0.js";import{c as _,j as e,r as n}from"./client-45b27fd3.js";import{S as d}from"./merlin-logo-9fa3c977.js";import{D as s,$ as y,a0 as j}from"./index-825701e8.js";/* empty css             */import"./i18n-697e4fe6.js";import{u as v}from"./useTranslation-c38a45bb.js";import"./index-9b1f0f42.js";function N(){const{t:o}=v(),[x,r]=n.useState(!1),[i,h]=n.useState(null),[m,b]=n.useState(!1),f=async()=>{i?await s.tabs.reload(i.id):await s.tabs.query({active:!0,currentWindow:!0}).then(t=>{s.tabs.reload(t[0].id)}),s.action.setPopup({popup:"",tabId:i.id}).then(()=>{r(!1),window.close()})};n.useEffect(()=>{(async()=>{try{const t=(await s.tabs.query({active:!0,currentWindow:!0}))[0];if(h(t),await y()){s.action.setPopup({popup:s.runtime.getURL("/popup.html"),tabId:t.id}).then(()=>{r(!0),b(!0)});return}if(t.url=="https://getmerlin.in/chat"){s.action.setPopup({popup:"",tabId:t.id}).then(()=>{r(!1),window.close()});return}if(t.url.includes("chrome://")||t.url.includes("edge://")||t.url.includes("extension://"))t.url.includes("shortcut")||s.tabs.create({url:"https://getmerlin.in/chat"}),s.action.setPopup({popup:"",tabId:t.id}).then(()=>{r(!1),window.close()});else{let l=0,a=!1;const w=4;for(;l<w&&!a;)await new Promise(c=>setTimeout(c,50)),l++,a=await s.tabs.sendMessage(t.id,{data:{from:"extPopupButton"}}).then(()=>!0).catch(c=>!1);if(a){s.action.setPopup({popup:"",tabId:t.id}).then(()=>{r(!1),window.close()});return}s.tabs.sendMessage(t.id,{data:{from:"extPopupButton"}}).then(()=>{s.action.setPopup({popup:"",tabId:t.id}).then(()=>{r(!1),window.close()})}).catch(c=>{r(!0)})}}catch{r(!0)}})()},[]);function g(){return x?m?e.jsxs("div",{className:"bg-background flex h-64 w-96 flex-col justify-center gap-2 px-3 py-2 text-zinc-100",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(d,{className:"h-8 w-8"}),e.jsx("div",{className:"text-lg font-medium",children:o("popup_index.shortcut_conflict")})]}),e.jsxs("div",{className:"text-zinc-400",children:[e.jsxs("div",{children:[o("popup_index.message")," ",e.jsx("kbd",{className:"rounded-lg border border-gray-500 bg-gray-600 px-1 py-0.5 text-xs font-semibold text-gray-100",children:o("popup_index.ctrl_m")})," ",o("popup_index.here_what_to_do")]}),e.jsxs("ul",{className:" my-2 list-inside list-disc",children:[e.jsx("li",{children:o("popup_index.goto_shortcut")}),e.jsx("li",{children:o("popup_index.switch_custom")})]}),o("popup_index.this_ensures")," ",e.jsx("kbd",{className:"rounded-lg border border-gray-500 bg-gray-600 px-1 py-0.5 text-xs font-semibold text-gray-100",children:o("popup_index.ctrl_m")})," ",o("popup_index.wont_summon")]}),e.jsx("button",{type:"button",onClick:()=>{const t=j(),u=t==="firefox"?"about:addons":t==="edge"?"edge://extensions/shortcuts":"chrome://extensions/shortcuts";s.tabs.create({active:!0,url:u})},className:"border-cornblue-500 bg-cornblue-600 hover:bg-cornblue-500 cursor-pointer gap-2 rounded-md border px-4 py-1.5 text-base text-zinc-50 transition-all duration-500 [border-style:solid] dark:text-zinc-900",children:o("popup_index.open_shortcut")})]}):e.jsxs("div",{className:"bg-background flex h-40 w-80 flex-col justify-center gap-2 px-3 py-2 text-zinc-100",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(d,{className:"h-8 w-8"}),e.jsx("div",{className:"text-lg font-medium",children:o("popup_index.merlin_refresh")})]}),e.jsx("div",{className:"text-zinc-400",children:o("popup_index.plz_refresh")}),e.jsx("button",{type:"button",onClick:f,className:"border-cornblue-500 bg-cornblue-600 hover:bg-cornblue-500 cursor-pointer gap-2 rounded-md border px-4 py-1.5 text-base text-zinc-50 transition-all duration-500 [border-style:solid] dark:text-zinc-900",children:o("popup_index.refresh")})]}):null}return e.jsx("div",{className:"bg-background h-full w-full",children:g()})}const p=document.getElementById("root");p&&_(p).render(e.jsx(N,{}));
