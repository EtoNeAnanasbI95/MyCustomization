var background=function(e){"use strict";function t(){let e=new Uint32Array(1);return crypto.getRandomValues(e),e[0]}function n(){return crypto.randomUUID()}function r(){const e=new Uint32Array(28);return crypto.getRandomValues(e),Array.from(e,(e=>("0"+e.toString(16)).slice(-2))).join("")}function s(e){try{return JSON.parse(atob(e.split(".")[1]))}catch(e){return null}}const a=[{langCode:"DE",langCodeForSpeech:"de-DE",supportsFormality:!0},{langCode:"EN-GB",langCodeForSpeech:"en",voice:"Google UK English Male"},{langCode:"EN-US",langCodeForSpeech:"en",voice:"Google UK English Male"},{langCode:"FR",langCodeForSpeech:"fr-FR",voice:"Thomas",supportsFormality:!0},{langCode:"ES",langCodeForSpeech:"es-ES",voice:"Google espaÃ±ol",label:"ES",supportsFormality:!0},{langCode:"IT",langCodeForSpeech:"it-IT",supportsFormality:!0},{langCode:"ID",langCodeForSpeech:"id-ID"},{langCode:"PL",langCodeForSpeech:"pl-PL",supportsFormality:!0},{langCode:"NL",langCodeForSpeech:"nl-NL",voice:"Google Nederlands",label:"NL",supportsFormality:!0},{langCode:"PT-PT",langCodeForSpeech:"pt-PT",supportsFormality:!0},{langCode:"PT-BR",langCodeForSpeech:"pt-PT",supportsFormality:!0},{langCode:"RU",langCodeForSpeech:"ru-RU",supportsFormality:!0},{langCode:"ZH",langCodeForSpeech:"zh-CN"},{langCode:"JA",langCodeForSpeech:"ja-JP",supportsFormality:!0},{langCode:"BG",langCodeForSpeech:"bg-BG"},{langCode:"CS",langCodeForSpeech:"cs-CZ"},{langCode:"DA",langCodeForSpeech:"da-DK"},{langCode:"ET",langCodeForSpeech:"et"},{langCode:"FI",langCodeForSpeech:"fi-FI",voice:"Satu"},{langCode:"EL",langCodeForSpeech:"el-GR"},{langCode:"HU",langCodeForSpeech:"hu-HU"},{langCode:"LV",langCodeForSpeech:"lv"},{langCode:"LT",langCodeForSpeech:"lt"},{langCode:"RO",langCodeForSpeech:"ro-RO"},{langCode:"SK",langCodeForSpeech:"sk-SK"},{langCode:"SL",langCodeForSpeech:"sl"},{langCode:"SV",langCodeForSpeech:"sv-SE"},{langCode:"TR",langCodeForSpeech:"tr-TR"},{langCode:"UK",langCodeForSpeech:"uk-UA"},{langCode:"NB",langCodeForSpeech:"nb-NO"},{langCode:"KO",langCodeForSpeech:"ko-KR"},{langCode:"AR",langCodeForSpeech:"ar-AR"}],o=["EN-GB","EN-US","EN","DE"],i=0,c={inline:"inline",automatic:"automatic",manual:"manual",input:"input"},l={notLoggedIn:1,loggedInPro:2,loggedInFree:3},u={notLoggedIn:1500,loggedInFree:5e3},d={notLoggedIn:2e3,loggedInFree:2e3},p={defaultPopup:1,fptInjectedPopup:2,inlineTooltipPopup:3},h={extensionIcon:1,fptAutoInject:2},g={defaultPopup:1,injectedFptPopup:2,inlinePopup:3},m={hintKeyboardShortcut:"HINT_KEYBOARD_SHORTCUT",inputTranslation:"INPUT_TRANSLATION",inlineTranslation:"INLINE_TRANSLATION",fullPageTranslation:"FULL_PAGE_TRANSLATION",accountSuccessfullyCreated:"ACCOUNT_SUCCESSFULLY_CREATED",successfullyLoggedIn:"SUCCESSFULLY_LOGGED_IN"},f={inlineTranslationTriggerIcon:"INLINE_TRANSLATION_TRIGGER_ICON",inlineTranslationSettingsIcon:"INLINE_TRANSLATION_SETTINGS_ICON",inlineTranslationSettingPopup:"INLINE_TRANSLATION_SETTING_POPUP",inputTranslationTriggerIcon:"INPUT_TRANSLATION_TRIGGER_ICON",inputImproveTriggerIcon:"INPUT_IMPROVE_TRIGGER_ICON",inputTranslationSettingsIcon:"INPUT_TRANSLATION_SETTINGS_ICON",inputTranslationSettingPopup:"INPUT_TRANSLATION_SETTING_POPUP",settingsPageFPT:"SETTINGS_PAGE_FPT",settingsPageReading:"SETTINGS_PAGE_READING",settingsPageWriting:"SETTINGS_PAGE_WRITING",settingsPageIntegrations:"SETTINGS_PAGE_INTEGRATIONS",fptHideModal:"FPT_HIDE_MODAL",inputTranslationReadMoreLink:"INPUT_TRANSLATION_READ_MORE_LINK",inlineTranslationReadMoreLink:"INLINE_TRANSLATION_READ_MORE_LINK",fptTranslationReadMoreLink:"FPT_TRANSLATION_READ_MORE_LINK",extensionHubToggleSwitch:"EXTENSION_HUB_TOGGLE_SWITCH",hubCustomizeShortcut:"HUB_CUSTOMIZE_SHORTCUT",hubLoginButton:"HUB_LOGIN_BUTTON",hubUpgradeToProLink:"HUB_UPGRADE_TO_PRO_LINK",hubTryProLink:"HUB_TRY_PRO_LINK",hubTryWriteProLink:"HUB_TRY_WRITE_PRO_LINK",settingsPageCustomizeShortcutButton:"SETTINGS_PAGE_CUSTOMIZE_SHORTCUT_BUTTON",hubFPTEnableCheckbox:"HUB_FPT_ENABLE_CHECKBOX",hubFPTDisableCheckbox:"HUB_FPT_DISABLE_CHECKBOX",deeplWriteIcon:"DEEPL_WRITE_ICON",gmailOnboardingPopup:"gmailOnboardingPopup",gmailOnboardingIcon:"gmailOnboardingIcon",gmailCharLimitLogin:"gmailCharLimitLogin",gmailFeedbackSurvey:"gmailFeedbackSurvey",hubViewIntegrations:"HUB_VIEW_INTEGRATIONS",hubCloseCustomizationsWidget:"HUB_CLOSE_CUSTOMIZATIONS_WIDGET",gslidesFeedbackSurvey:"GSLIDES_FEEDBACK_SURVEY",gslidesCharLimitLogin:"GSLIDES_CHAR_LIMIT_LOGIN",zendeskTryProLink:"ZENDESK_TRY_PRO_LINK",onboardingSignUp:"ONBOARDING_SIGN_UP",onboardingSkipSignUp:"ONBOARDING_SKIP_SIGN_UP",onboardingLoginLink:"ONBOARDING_LOGIN_LINK",onboardingSeeAllIntegrations:"ONBOARDING_SEE_ALL_INTEGRATIONS",iconToggleInHubTranslator:"ICON_TOGGLE_IN_HUB_TRANSLATOR",iconToggleInHubWrite:"ICON_TOGGLE_IN_HUB_WRITE",manageIconSettings:"MANAGE_ICON_SETTINGS",writeLanguageSwitchedInHub:"WRITE_LANGUAGE_SWITCHED_IN_HUB",writeLanguageSwitchedInSettings:"WRITE_LANGUAGE_SWITCHED_IN_SETTINGS"},_={triggerTranslation:"trigger-translation",changeLanguage:"change-language"},y={clickOnShortcutNotifiction:"CLICK_ON_SHORTCUT_NOTIFICATION",clickOnInlineTranslationShowAlternatives:"CLICK_ON_INLINE_TRANSLATION_SHOW_ALTERNATIVES",clickOnInlineTranslationCloseIcon:"CLICK_ON_INLINE_TRANSLATION_CLOSE_ICON",clickOnLogoutMenuEntry:"CLICK_ON_LOGOUT_MENU_ENTRY"},S={disablePerSite:"DISABLE_PER_SITE",disableEverywhere:"DISABLE_EVERYWHERE",enableEverywhere:"ENABLE_EVERYWHERE",enablePerSite:"ENABLE_PER_SITE"},T={inputTranslation:"INPUT_TRANSLATION",inlineTranslation:"INLINE_TRANSLATION",fullPageTranslation:"FULL_PAGE_TRANSLATION",gdocs:"GDOCS"},b={top:1,right:2,bottom:3,left:4},E={openPage:"OPEN_PAGE",backButton:"BACK_BUTTON",nextButton:"NEXT_BUTTON",navigation:"NAVIGATION"},v={unspecified:0,chrome:1,edge:2,local:3,firefox:4},w={chrome:"cofdbpoegempjloogbagkncekinflcnj",edge:"fancfknaplihpclbhbpclnmmjcjanbaf",local:"ocpdpnakdghopjcifldjidbdmfobmmoi",firefox:"firefox-extension@deepl.com"},I={deepl:1,linguee:2,google_translate:3,word_365:4,power_point_365:5,jira:6,confluence:7,gmail:8},k=5,C={default:"DEFAULT",gdocs:"GDOCS",zendesk:"ZENDESK",whatsappWeb:"WHATSAPP_WEB",twitter:"TWITTER",gmail:"GMAIL",gslides:"GSLIDES",linkedIn:"LINKEDIN"},R={translate:"translate",write:"write"},x={user:"USER",extension:"EXTENSION"},L={OPEN_TICKET:"OPEN_TICKET",DETECT_TICKET_LANGUAGE:"DETECT_TICKET_LANGUAGE",SWITCH_TICKET_LANGUAGE:"SWITCH_TICKET_LANGUAGE",ENABLE_AUTOTRANSLATE:"ENABLE_AUTOTRANSLATE",DISABLE_AUTOTRANSLATE:"DISABLE_AUTOTRANSLATE",TRANSLATE_MESSAGE:"TRANSLATE_MESSAGE",TRANSLATE_INPUT:"TRANSLATE_INPUT",ERROR:"ERROR"},A={translation:"TRANSLATION",login:"LOGIN"},O={chat:"CHAT",message:"MESSAGE"},N={TRANSLATOR:"TRANSLATOR",WRITE:"WRITE",API:"API",DOC_TRANSLATOR:"DOC_TRANSLATOR"},D={free:"free",pro:"pro",none:"none"},P={TEXT_REFINEMENT_REQUEST:"TEXT_REFINEMENT_REQUEST",GDOCS_INSERT_COPY:"GDOCS_INSERT_COPY",GDOCS_DISCARD_COPY:"GDOCS_DISCARD_COPY",GDOCS_CHAR_LIMIT_REACHED:"GDOCS_CHAR_LIMIT_REACHED",RESULT_ACCEPTED:"RESULT_ACCEPTED",RESULT_REVERTED:"RESULT_REVERTED",ERROR:"ERROR"},M={RESULT_ACCEPTED:"RESULT_ACCEPTED",RESULT_REVERTED:"RESULT_REVERTED",ERROR:"ERROR"},F={ALTERNATIVES_OPENED:"ALTERNATIVES_OPENED",SEGMENTATION_SELECTED:"SEGMENTATION_SELECTED",ALTERNATIVE_SELECTED:"ALTERNATIVE_SELECTED"},U={READING_VIEW_TRANSLATE:"READING_VIEW_TRANSLATE",COMPOSE_VIEW_TRANSLATE:"COMPOSE_VIEW_TRANSLATE",COMPOSE_VIEW_IMPROVE:"COMPOSE_VIEW_IMPROVE"},B={ANONYMOUS_USER_LIMIT_EXCEEDED:"ANONYMOUS_USER_LIMIT_EXCEEDED",FREE_ACCOUNT_LIMIT_EXCEEDED:"FREE_ACCOUNT_LIMIT_EXCEEDED",WRITE_ANONYMOUS_USER_LIMIT_EXCEEDED:"WRITE_ANONYMOUS_USER_LIMIT_EXCEEDED",WRITE_FREE_ACCOUNT_LIMIT_EXCEEDED:"WRITE_FREE_ACCOUNT_LIMIT_EXCEEDED"},G={PRO_TRIAL:"PRO_TRIAL",LOGIN:"LOGIN",SIGNUP:"SIGNUP"},j={WORD:"word",SENTENCE:"sentence"},$={none:"None",pro:"Pro",free:"Free"},W={chrome:"Chrome",edge:"Edge",brave:"Brave",firefox:"Firefox",opera:"Opera",safari:"Safari"};function H(e,t){let n;try{switch(e){case W.chrome:case W.brave:n=t.split("Chrome/")[1].split(" ")[0];break;case W.edge:n=t.split("Edg/")[1].split(" ")[0];break;case W.firefox:n=t.split("Firefox/")[1].split(" ")[0];break;case W.opera:n=t.split("OPR/")[1].split(" ")[0];break;case W.safari:n=t.split("Version/")[1].split(" ")[0]}}catch(t){console.error(`Could not get the browsers (${e}) version from user agent`,t)}try{!n&&navigator?.userAgentData&&function(e){return e===W.chrome||e===W.edge||e===W.brave||e===W.opera}(e)&&(n=q(e).version)}catch(t){console.error(`Could not get the chromium browsers (${e}) version`,t)}return n&&"string"==typeof n?n:"unknown_browser_version"}function q(e){if(!navigator.userAgentData||!e)return;const t=new RegExp(`${e}`,"i");return navigator.userAgentData.brands.filter((e=>t.test(e.brand)))[0]}function V(){const e=navigator?.userAgent||"unknown_user_agent",t=navigator?.userAgentData?.platform||navigator?.platform||"unknown_platform";let n="unknown_browser",r="unknown_browser_version";const s=navigator?.language||"unknown_browser_language";try{const t=e.match(/chrome|chromium|crios/i),s=e.match(/edg/i)||q(W.edge),a=e.match(/firefox|fxios/i),o=e.match(/opr\//i)||q(W.opera),i=e.match(/safari/i),c=q(W.brave);t?(n=W.chrome,s&&(n=W.edge),o&&(n=W.opera),c&&(n=W.brave)):s?n=W.edge:a?n=W.firefox:o?n=W.opera:i&&(n=W.safari),r=H(n,e)}catch(e){console.error("Could not get the name of the brower",e)}return{userAgent:e,platform:t,browser:n,browserVersion:r,browserLang:s}}function z(){if({IS_PROD:!0,BASE_URLS:{dapApi:"https://s.deepl.com/chrome/statistics",toolingApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.20.1",toolingApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.20.1",toolingWriteApiPro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.20.1",toolingWriteApi:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.20.1",classicApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.20.1",classicApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.20.1",classicApiWrite:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.20.1",classicApiWritePro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.20.1",classicApiGlossary:"https://api.deepl.com/termbases/jsonrpc?client=chrome-extension,1.20.1",login:"https://www.deepl.com/auth/login",token:"https://w.deepl.com/oidc/token",logout:"https://www.deepl.com/auth/logout",feedbackSurvey:"https://deepl.typeform.com/to/MkMfP2Y6",newFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_cMvbeX0WZGvkKGi",firefoxFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eyfDZqQmXuNTFOK",uninstallSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eJxAD8c7J5hqSRU",gslidesFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_9XBLSAbDmLq5emO",deeplPro:"https://www.deepl.com/pro",deeplProWrite:"https://www.deepl.com/pro-write",deeplTranslator:"https://www.deepl.com/translator",deeplDoctrans:"https://www.deepl.com/translator/files",deeplTermsOfServiceFree:"https://www.deepl.com/en/pro-license?tab=free",deeplCreateAccount:"https://www.deepl.com/signup",extensionStorePage:"https://bit.ly/DeepL-Chrome",supportArticle:"https://support.deepl.com/hc/articles/4407580229522",deeplSupport:"https://support.deepl.com/hc",chromeWebstore:"https://chrome.google.com/webstore/detail/deepl-translate-reading-w/cofdbpoegempjloogbagkncekinflcnj",edgeWebstore:"https://microsoftedge.microsoft.com/addons/detail/deepl-translate-reading-/fancfknaplihpclbhbpclnmmjcjanbaf",firefoxWebstore:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate",firefoxShortcutDocs:"https://support.mozilla.org/kb/manage-extension-shortcuts-firefox",clientStateApi:"https://w.deepl.com/web",experimentsEndpoint:"https://s.deepl.com/chrome/experiments",gmailFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_db8ItFTmYBcZjYW",customerSegmentationSurveyFree:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2071",customerSegmentationSurveyPro:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2070",arabicSurvey:"https://deepl.qualtrics.com/jfe/form/SV_ekTrC2ePp0wn7xQ"},APP_VERSION:"1.20.1",FEATURE_FLAGS:{TRANSLATE_INPUT:!0,PAGE_TRANSLATION:!0,IMPROVE_WRITING:!0,DOCUMENT_TRANSLATION:!0,RECOMMEND_TO_A_FRIEND:!0,PRO_LOGIN:!0,WEBPAGE_CUSTOMIZER:!0,GDOCS_INTEGRATION:!0,ZENDESK_INTEGRATION:!0,GMAIL_INTEGRATION:!0,GSLIDES_INTEGRATION:!0,ON_INSTALL_ONBOARDING:!0,WHATSAPP_TRANSLATE_ALL_CHAT:!1,DEEPL_WRITE_GENERAL:!1,DEEPL_WRITE_GDOCS:!0,SHOW_CUSTOMER_SEGMENTATION_SURVEY:!1,ARABIC_SURVEY:!0}}.browserBuild)return{IS_PROD:!0,BASE_URLS:{dapApi:"https://s.deepl.com/chrome/statistics",toolingApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.20.1",toolingApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.20.1",toolingWriteApiPro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.20.1",toolingWriteApi:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.20.1",classicApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.20.1",classicApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.20.1",classicApiWrite:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.20.1",classicApiWritePro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.20.1",classicApiGlossary:"https://api.deepl.com/termbases/jsonrpc?client=chrome-extension,1.20.1",login:"https://www.deepl.com/auth/login",token:"https://w.deepl.com/oidc/token",logout:"https://www.deepl.com/auth/logout",feedbackSurvey:"https://deepl.typeform.com/to/MkMfP2Y6",newFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_cMvbeX0WZGvkKGi",firefoxFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eyfDZqQmXuNTFOK",uninstallSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eJxAD8c7J5hqSRU",gslidesFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_9XBLSAbDmLq5emO",deeplPro:"https://www.deepl.com/pro",deeplProWrite:"https://www.deepl.com/pro-write",deeplTranslator:"https://www.deepl.com/translator",deeplDoctrans:"https://www.deepl.com/translator/files",deeplTermsOfServiceFree:"https://www.deepl.com/en/pro-license?tab=free",deeplCreateAccount:"https://www.deepl.com/signup",extensionStorePage:"https://bit.ly/DeepL-Chrome",supportArticle:"https://support.deepl.com/hc/articles/4407580229522",deeplSupport:"https://support.deepl.com/hc",chromeWebstore:"https://chrome.google.com/webstore/detail/deepl-translate-reading-w/cofdbpoegempjloogbagkncekinflcnj",edgeWebstore:"https://microsoftedge.microsoft.com/addons/detail/deepl-translate-reading-/fancfknaplihpclbhbpclnmmjcjanbaf",firefoxWebstore:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate",firefoxShortcutDocs:"https://support.mozilla.org/kb/manage-extension-shortcuts-firefox",clientStateApi:"https://w.deepl.com/web",experimentsEndpoint:"https://s.deepl.com/chrome/experiments",gmailFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_db8ItFTmYBcZjYW",customerSegmentationSurveyFree:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2071",customerSegmentationSurveyPro:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2070",arabicSurvey:"https://deepl.qualtrics.com/jfe/form/SV_ekTrC2ePp0wn7xQ"},APP_VERSION:"1.20.1",FEATURE_FLAGS:{TRANSLATE_INPUT:!0,PAGE_TRANSLATION:!0,IMPROVE_WRITING:!0,DOCUMENT_TRANSLATION:!0,RECOMMEND_TO_A_FRIEND:!0,PRO_LOGIN:!0,WEBPAGE_CUSTOMIZER:!0,GDOCS_INTEGRATION:!0,ZENDESK_INTEGRATION:!0,GMAIL_INTEGRATION:!0,GSLIDES_INTEGRATION:!0,ON_INSTALL_ONBOARDING:!0,WHATSAPP_TRANSLATE_ALL_CHAT:!1,DEEPL_WRITE_GENERAL:!1,DEEPL_WRITE_GDOCS:!0,SHOW_CUSTOMER_SEGMENTATION_SURVEY:!1,ARABIC_SURVEY:!0}}.browserBuild.toLowerCase()===W.firefox.toLowerCase();const e=chrome.runtime.getURL("");return V().browser===W.firefox||/moz-extension:\/\//gm.test(e)}const Y={share_feedback_survey:"DOCS_GOOGLE_COM_FEEDBACK_FORM",new_share_feedback_survey:"NEW_FEEDBACK_FORM",try_DeepL_Pro:"DEEPL_COM_PRO",try_DeepL_Pro_Write:"DEEPL_COM_PRO_WRITE",show_more_translation:"DEEPL_COM_TRANSLATOR",deepl_translator_home:"DEEPL_COM_HOMEPAGE",deepl_write_home:"DEEPL_COM_WRITE",deepl_terms_of_service_free:"DEEPL_COM_TERMS_OF_SERVICE_FREE",deepl_create_account:"DEEPL_CREATE_ACCOUNT",deepl_translator_docs:"DEEPL_COM_DOCTRANS",shortcut_settings:"SHORTCUT_SETTINGS",support_article:"SUPPORT_ARTICLE",chrome_write_a_review:"CHROME_WRITE_A_REVIEW",edge_write_a_review:"EDGE_WRITE_A_REVIEW",gmail_feedback_survey:"GMAIL_FEEDBACK_SURVEY",gslides_feedback_survey:"GSLIDES_FEEDBACK_SURVEY",firefox_write_a_review:"FIREFOX_WRITE_A_REVIEW",external:{whatsapp:"EXTERNAL_WHATSAPP",twitter:"EXTERNAL_TWITTER",youtube:"EXTERNAL_YOUTUBE",facebook:"EXTERNAL_FACEBOOK",github:"EXTERNAL_GITHUB",discord:"EXTERNAL_DISCORD",telegram:"EXTERNAL_TELEGRAM",reddit:"EXTERNAL_REDDIT",gmail:"EXTERNAL_GMAIL",gdocs:"EXTERNAL_GDOCS",gslides:"EXTERNAL_GSLIDES",linkedIn:"EXTERNAL_LINKEDIN",msOffice:"EXTERNAL_MS_OFFICE"},deepl_support:"DEEPL_SUPPORT",firefox_feedback_survey:"FIREFOX_FEEDBACK_SURVEY",firefox_shortcut_docs:"FIREFOX_SHORTCUT_DOCS",customer_segmentation_survey_free:"CUSTOMER_SEGMENTATION_SURVEY_FREE",customer_segmentation_survey_pro:"CUSTOMER_SEGMENTATION_SURVEY_PRO",arabic_survey:"ARABIC_SURVEY"},K={DOCS_GOOGLE_COM_FEEDBACK_FORM:"https://deepl.typeform.com/to/MkMfP2Y6",NEW_FEEDBACK_FORM:"https://deepl.qualtrics.com/jfe/form/SV_cMvbeX0WZGvkKGi",DEEPL_COM_PRO:"https://www.deepl.com/pro",DEEPL_COM_PRO_WRITE:"https://www.deepl.com/pro-write",DEEPL_COM_TRANSLATOR:"https://www.deepl.com/translator",DEEPL_COM_WRITE:{dapApi:"https://s.deepl.com/chrome/statistics",toolingApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.20.1",toolingApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.20.1",toolingWriteApiPro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.20.1",toolingWriteApi:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.20.1",classicApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.20.1",classicApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.20.1",classicApiWrite:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.20.1",classicApiWritePro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.20.1",classicApiGlossary:"https://api.deepl.com/termbases/jsonrpc?client=chrome-extension,1.20.1",login:"https://www.deepl.com/auth/login",token:"https://w.deepl.com/oidc/token",logout:"https://www.deepl.com/auth/logout",feedbackSurvey:"https://deepl.typeform.com/to/MkMfP2Y6",newFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_cMvbeX0WZGvkKGi",firefoxFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eyfDZqQmXuNTFOK",uninstallSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eJxAD8c7J5hqSRU",gslidesFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_9XBLSAbDmLq5emO",deeplPro:"https://www.deepl.com/pro",deeplProWrite:"https://www.deepl.com/pro-write",deeplTranslator:"https://www.deepl.com/translator",deeplDoctrans:"https://www.deepl.com/translator/files",deeplTermsOfServiceFree:"https://www.deepl.com/en/pro-license?tab=free",deeplCreateAccount:"https://www.deepl.com/signup",extensionStorePage:"https://bit.ly/DeepL-Chrome",supportArticle:"https://support.deepl.com/hc/articles/4407580229522",deeplSupport:"https://support.deepl.com/hc",chromeWebstore:"https://chrome.google.com/webstore/detail/deepl-translate-reading-w/cofdbpoegempjloogbagkncekinflcnj",edgeWebstore:"https://microsoftedge.microsoft.com/addons/detail/deepl-translate-reading-/fancfknaplihpclbhbpclnmmjcjanbaf",firefoxWebstore:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate",firefoxShortcutDocs:"https://support.mozilla.org/kb/manage-extension-shortcuts-firefox",clientStateApi:"https://w.deepl.com/web",experimentsEndpoint:"https://s.deepl.com/chrome/experiments",gmailFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_db8ItFTmYBcZjYW",customerSegmentationSurveyFree:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2071",customerSegmentationSurveyPro:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2070",arabicSurvey:"https://deepl.qualtrics.com/jfe/form/SV_ekTrC2ePp0wn7xQ"}.deeplWrite,DEEPL_COM_DOCTRANS:"https://www.deepl.com/translator/files",DEEPL_COM_TERMS_OF_SERVICE_FREE:"https://www.deepl.com/en/pro-license?tab=free",DEEPL_CREATE_ACCOUNT:"https://www.deepl.com/signup",SHORTCUT_SETTINGS:"chrome://extensions/shortcuts",SUPPORT_ARTICLE:"https://support.deepl.com/hc/articles/4407580229522",CHROME_WEBSTORE:"https://chrome.google.com/webstore/detail/deepl-translate-reading-w/cofdbpoegempjloogbagkncekinflcnj",FIREFOX_WEBSTORE:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate",EDGE_WEBSTORE:"https://microsoftedge.microsoft.com/addons/detail/deepl-translate-reading-/fancfknaplihpclbhbpclnmmjcjanbaf",GMAIL_FEEDBACK_SURVEY:"https://deepl.qualtrics.com/jfe/form/SV_db8ItFTmYBcZjYW",GSLIDES_FEEDBACK_SURVEY:"https://deepl.qualtrics.com/jfe/form/SV_9XBLSAbDmLq5emO",EXTERNAL:{WHATSAPP:"https://web.whatsapp.com",TWITTER:"https://www.twitter.com",YOUTUBE:"https://www.youtube.com",FACEBOOK:"https://www.facebook.com",GITHUB:"https://www.github.com",DISCORD:"https://www.discord.com",TELEGRAM:"https://web.telegram.org",REDDIT:"https://www.reddit.com",GMAIL:"https://www.gmail.com",GDOCS:"https://docs.google.com",GSLIDES:"https://slides.google.com",LINKEDIN:"https://www.linkedin.com/",MSOFFICE:"https://www.office.com/"},DEEPL_SUPPORT:"https://support.deepl.com/hc",FIREFOX_FEEDBACK:"https://deepl.qualtrics.com/jfe/form/SV_eyfDZqQmXuNTFOK",FIREFOX_SHORTCUT_DOCS:"https://support.mozilla.org/kb/manage-extension-shortcuts-firefox",CUSTOMER_SEGMENTATION_SURVEY_FREE:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2071",CUSTOMER_SEGMENTATION_SURVEY_PRO:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2070",ARABIC_SURVEY:"https://deepl.qualtrics.com/jfe/form/SV_ekTrC2ePp0wn7xQ"};function X(e){const{destination:t,...n}=e;if(void 0!==t)switch(t){case Y.share_feedback_survey:return K.DOCS_GOOGLE_COM_FEEDBACK_FORM;case Y.new_share_feedback_survey:return K.NEW_FEEDBACK_FORM;case Y.try_DeepL_Pro:return n?.utmContent?Z(K.DEEPL_COM_PRO,[["utm_source","browser_extension"],["utm_medium","chrome"],["utm_content",n?.utmContent]]):K.DEEPL_COM_PRO;case Y.try_DeepL_Pro_Write:return n?.utmContent?Z(K.DEEPL_COM_PRO_WRITE,[["utm_source","browser_extension"],["utm_medium","chrome"],["utm_content",n?.utmContent]]):K.DEEPL_COM_PRO_WRITE;case Y.show_more_translation:return n?function({sourceLang:e,targetLang:t,textToShare:n}){if(!e||!t||!n)return"";const r=new URL(K.DEEPL_COM_TRANSLATOR);let s=`${e.toLowerCase()}/${t.toLowerCase()}/${encodeURIComponent(n)}`;return r.hash=s,r.href}(n):void console.error("Invalid action.");case Y.deepl_translator_home:return n?.utmContent?Z(K.DEEPL_COM_TRANSLATOR,[["utm_source","browser_extension"],["utm_medium","chrome"],["utm_content",n?.utmContent]]):K.DEEPL_COM_TRANSLATOR;case Y.deepl_write_home:return n?.utmContent?Z(K.DEEPL_COM_WRITE,[["utm_source","browser_extension"],["utm_medium","chrome"],["utm_content",n?.utmContent]]):K.DEEPL_COM_WRITE;case Y.deepl_translator_docs:return n?.utmContent?Z(K.DEEPL_COM_DOCTRANS,[["utm_source","browser_extension"],["utm_medium","chrome"],["utm_content",n?.utmContent]]):K.DEEPL_COM_DOCTRANS;case Y.deepl_terms_of_service_free:return K.DEEPL_COM_TERMS_OF_SERVICE_FREE;case Y.shortcut_settings:return K.SHORTCUT_SETTINGS;case Y.support_article:return K.SUPPORT_ARTICLE;case Y.external.whatsapp:return K.EXTERNAL.WHATSAPP;case Y.external.twitter:return K.EXTERNAL.TWITTER;case Y.external.youtube:return K.EXTERNAL.YOUTUBE;case Y.external.facebook:return K.EXTERNAL.FACEBOOK;case Y.external.github:return K.EXTERNAL.GITHUB;case Y.external.discord:return K.EXTERNAL.DISCORD;case Y.external.telegram:return K.EXTERNAL.TELEGRAM;case Y.external.reddit:return K.EXTERNAL.REDDIT;case Y.external.gmail:return K.EXTERNAL.GMAIL;case Y.external.gdocs:return K.EXTERNAL.GDOCS;case Y.external.gslides:return K.EXTERNAL.GSLIDES;case Y.external.linkedIn:return K.EXTERNAL.LINKEDIN;case Y.external.msOffice:return K.EXTERNAL.MSOFFICE;case Y.deepl_support:return K.DEEPL_SUPPORT;case Y.chrome_write_a_review:return K.CHROME_WEBSTORE;case Y.edge_write_a_review:return K.EDGE_WEBSTORE;case Y.gmail_feedback_survey:return K.GMAIL_FEEDBACK_SURVEY;case Y.gslides_feedback_survey:return K.GSLIDES_FEEDBACK_SURVEY;case Y.firefox_write_a_review:return K.FIREFOX_WEBSTORE;case Y.firefox_feedback_survey:return K.FIREFOX_FEEDBACK;case Y.firefox_shortcut_docs:return K.FIREFOX_SHORTCUT_DOCS;case Y.deepl_create_account:if(n){let e=[];if(n.utmContent){e=[...[["utm_source","browser_extension"],["utm_medium","chrome"],["utm_content",n.utmContent]]]}if(n.redirectToOnboarding&&!z()){const t=`${chrome.runtime.getURL("")}onboarding.html`;e.push(["redirectUri",t])}return Z(K.DEEPL_CREATE_ACCOUNT,e)}return K.DEEPL_CREATE_ACCOUNT;case Y.customer_segmentation_survey_free:return K.CUSTOMER_SEGMENTATION_SURVEY_FREE;case Y.customer_segmentation_survey_pro:return K.CUSTOMER_SEGMENTATION_SURVEY_PRO;case Y.arabic_survey:return K.ARABIC_SURVEY;default:return}}function J(e){const t=X(e),{openInSameTab:n}=e;if(!t)return;const r=new URL(t).href;n?chrome.tabs.query({active:!0,currentWindow:!0},(function(e){const t=e[0];chrome.tabs.update(t.id,{url:r})})):chrome.tabs.create({url:r,active:!0})}function Z(e,t){if(0===t.length||!e)return;const n=new URL(e);return t.forEach((e=>{2===e.length&&n.searchParams.append(e[0],e[1])})),n.href}const Q=Object.prototype.toString;function ee(e){switch(Q.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return de(e,Error)}}function te(e,t){return Q.call(e)===`[object ${t}]`}function ne(e){return te(e,"ErrorEvent")}function re(e){return te(e,"DOMError")}function se(e){return te(e,"String")}function ae(e){return"object"==typeof e&&null!==e&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function oe(e){return null===e||ae(e)||"object"!=typeof e&&"function"!=typeof e}function ie(e){return te(e,"Object")}function ce(e){return"undefined"!=typeof Event&&de(e,Event)}function le(e){return Boolean(e&&e.then&&"function"==typeof e.then)}function ue(e){return"number"==typeof e&&e!=e}function de(e,t){try{return e instanceof t}catch(e){return!1}}function pe(e){return!("object"!=typeof e||null===e||!e.__isVue&&!e._isVue)}function he(e,t=0){return"string"!=typeof e||0===t||e.length<=t?e:`${e.slice(0,t)}...`}function ge(e,t){if(!Array.isArray(e))return"";const n=[];for(let t=0;t<e.length;t++){const r=e[t];try{pe(r)?n.push("[VueViewModel]"):n.push(String(r))}catch(e){n.push("[value cannot be serialized]")}}return n.join(t)}function me(e,t,n=!1){return!!se(e)&&(te(t,"RegExp")?t.test(e):!!se(t)&&(n?e===t:e.includes(t)))}function fe(e,t=[],n=!1){return t.some((t=>me(e,t,n)))}function _e(e,t,n=250,r,s,a,o){if(!(a.exception&&a.exception.values&&o&&de(o.originalException,Error)))return;const i=a.exception.values.length>0?a.exception.values[a.exception.values.length-1]:void 0;var c,l;i&&(a.exception.values=(c=ye(e,t,s,o.originalException,r,a.exception.values,i,0),l=n,c.map((e=>(e.value&&(e.value=he(e.value,l)),e)))))}function ye(e,t,n,r,s,a,o,i){if(a.length>=n+1)return a;let c=[...a];if(de(r[s],Error)){Se(o,i);const a=e(t,r[s]),l=c.length;Te(a,s,l,i),c=ye(e,t,n,r[s],s,[a,...c],a,l)}return Array.isArray(r.errors)&&r.errors.forEach(((r,a)=>{if(de(r,Error)){Se(o,i);const l=e(t,r),u=c.length;Te(l,`errors[${a}]`,u,i),c=ye(e,t,n,r,s,[l,...c],l,u)}})),c}function Se(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,..."AggregateError"===e.type&&{is_exception_group:!0},exception_id:t}}function Te(e,t,n,r){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,type:"chained",source:t,exception_id:n,parent_id:r}}function be(e){return e&&e.Math==Math?e:void 0}const Ee="object"==typeof globalThis&&be(globalThis)||"object"==typeof window&&be(window)||"object"==typeof self&&be(self)||"object"==typeof global&&be(global)||function(){return this}()||{};function ve(){return Ee}function we(e,t,n){const r=n||Ee,s=r.__SENTRY__=r.__SENTRY__||{};return s[e]||(s[e]=t())}const Ie=ve(),ke=80;function Ce(e,t={}){if(!e)return"<unknown>";try{let n=e;const r=5,s=[];let a=0,o=0;const i=" > ",c=i.length;let l;const u=Array.isArray(t)?t:t.keyAttrs,d=!Array.isArray(t)&&t.maxStringLength||ke;for(;n&&a++<r&&(l=Re(n,u),!("html"===l||a>1&&o+s.length*c+l.length>=d));)s.push(l),o+=l.length,n=n.parentNode;return s.reverse().join(i)}catch(e){return"<unknown>"}}function Re(e,t){const n=e,r=[];let s,a,o,i,c;if(!n||!n.tagName)return"";if(Ie.HTMLElement&&n instanceof HTMLElement&&n.dataset&&n.dataset.sentryComponent)return n.dataset.sentryComponent;r.push(n.tagName.toLowerCase());const l=t&&t.length?t.filter((e=>n.getAttribute(e))).map((e=>[e,n.getAttribute(e)])):null;if(l&&l.length)l.forEach((e=>{r.push(`[${e[0]}="${e[1]}"]`)}));else if(n.id&&r.push(`#${n.id}`),s=n.className,s&&se(s))for(a=s.split(/\s+/),c=0;c<a.length;c++)r.push(`.${a[c]}`);const u=["aria-label","type","name","title","alt"];for(c=0;c<u.length;c++)o=u[c],i=n.getAttribute(o),i&&r.push(`[${o}="${i}"]`);return r.join("")}function xe(){try{return Ie.document.location.href}catch(e){return""}}function Le(e){return Ie.document&&Ie.document.querySelector?Ie.document.querySelector(e):null}function Ae(e){if(!Ie.HTMLElement)return null;let t=e;for(let e=0;e<5;e++){if(!t)return null;if(t instanceof HTMLElement&&t.dataset.sentryComponent)return t.dataset.sentryComponent;t=t.parentNode}return null}const Oe="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,Ne=["debug","info","warn","error","log","assert","trace"],De={};function Pe(e){if(!("console"in Ee))return e();const t=Ee.console,n={},r=Object.keys(De);r.forEach((e=>{const r=De[e];n[e]=t[e],t[e]=r}));try{return e()}finally{r.forEach((e=>{t[e]=n[e]}))}}const Me=function(){let e=!1;const t={enable:()=>{e=!0},disable:()=>{e=!1},isEnabled:()=>e};return Oe?Ne.forEach((n=>{t[n]=(...t)=>{e&&Pe((()=>{Ee.console[n](`Sentry Logger [${n}]:`,...t)}))}})):Ne.forEach((e=>{t[e]=()=>{}})),t}(),Fe=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function Ue(e,t=!1){const{host:n,path:r,pass:s,port:a,projectId:o,protocol:i,publicKey:c}=e;return`${i}://${c}${t&&s?`:${s}`:""}@${n}${a?`:${a}`:""}/${r?`${r}/`:r}${o}`}function Be(e){const t=Fe.exec(e);if(!t)return void Pe((()=>{console.error(`Invalid Sentry Dsn: ${e}`)}));const[n,r,s="",a,o="",i]=t.slice(1);let c="",l=i;const u=l.split("/");if(u.length>1&&(c=u.slice(0,-1).join("/"),l=u.pop()),l){const e=l.match(/^\d+/);e&&(l=e[0])}return Ge({host:a,pass:s,path:c,projectId:l,port:o,protocol:n,publicKey:r})}function Ge(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function je(e){const t="string"==typeof e?Be(e):Ge(e);if(t&&function(e){if(!Oe)return!0;const{port:t,projectId:n,protocol:r}=e;return!(["protocol","publicKey","host","projectId"].find((t=>!e[t]&&(Me.error(`Invalid Sentry Dsn: ${t} missing`),!0)))||(n.match(/^\d+$/)?function(e){return"http"===e||"https"===e}(r)?t&&isNaN(parseInt(t,10))&&(Me.error(`Invalid Sentry Dsn: Invalid port ${t}`),1):(Me.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),1):(Me.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),1)))}(t))return t}class $e extends Error{constructor(e,t="warn"){super(e),this.message=e,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=t}}function We(e,t,n){if(!(t in e))return;const r=e[t],s=n(r);"function"==typeof s&&qe(s,r),e[t]=s}function He(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch(n){Oe&&Me.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function qe(e,t){try{const n=t.prototype||{};e.prototype=t.prototype=n,He(e,"__sentry_original__",t)}catch(e){}}function Ve(e){return e.__sentry_original__}function ze(e){if(ee(e))return{message:e.message,name:e.name,stack:e.stack,...Ke(e)};if(ce(e)){const t={type:e.type,target:Ye(e.target),currentTarget:Ye(e.currentTarget),...Ke(e)};return"undefined"!=typeof CustomEvent&&de(e,CustomEvent)&&(t.detail=e.detail),t}return e}function Ye(e){try{return t=e,"undefined"!=typeof Element&&de(t,Element)?Ce(e):Object.prototype.toString.call(e)}catch(e){return"<unknown>"}var t}function Ke(e){if("object"==typeof e&&null!==e){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}return{}}function Xe(e){return Je(e,new Map)}function Je(e,t){if(function(e){if(!ie(e))return!1;try{const t=Object.getPrototypeOf(e).constructor.name;return!t||"Object"===t}catch(e){return!0}}(e)){const n=t.get(e);if(void 0!==n)return n;const r={};t.set(e,r);for(const n of Object.keys(e))void 0!==e[n]&&(r[n]=Je(e[n],t));return r}if(Array.isArray(e)){const n=t.get(e);if(void 0!==n)return n;const r=[];return t.set(e,r),e.forEach((e=>{r.push(Je(e,t))})),r}return e}const Ze=50,Qe=/\(error: (.*)\)/,et=/captureMessage|captureException/;function tt(...e){const t=e.sort(((e,t)=>e[0]-t[0])).map((e=>e[1]));return(e,n=0)=>{const r=[],s=e.split("\n");for(let e=n;e<s.length;e++){const n=s[e];if(n.length>1024)continue;const a=Qe.test(n)?n.replace(Qe,"$1"):n;if(!a.match(/\S*Error: /)){for(const e of t){const t=e(a);if(t){r.push(t);break}}if(r.length>=Ze)break}}return function(e){if(!e.length)return[];const t=Array.from(e);/sentryWrapped/.test(t[t.length-1].function||"")&&t.pop();t.reverse(),et.test(t[t.length-1].function||"")&&(t.pop(),et.test(t[t.length-1].function||"")&&t.pop());return t.slice(0,Ze).map((e=>({...e,filename:e.filename||t[t.length-1].filename,function:e.function||"?"})))}(r)}}const nt="<anonymous>";function rt(e){try{return e&&"function"==typeof e&&e.name||nt}catch(e){return nt}}const st={},at={};function ot(e,t){st[e]=st[e]||[],st[e].push(t)}function it(e,t){at[e]||(t(),at[e]=!0)}function ct(e,t){const n=e&&st[e];if(n)for(const r of n)try{r(t)}catch(t){Oe&&Me.error(`Error while triggering instrumentation handler.\nType: ${e}\nName: ${rt(r)}\nError:`,t)}}function lt(){"console"in Ee&&Ne.forEach((function(e){e in Ee.console&&We(Ee.console,e,(function(t){return De[e]=t,function(...t){ct("console",{args:t,level:e});const n=De[e];n&&n.apply(Ee.console,t)}}))}))}function ut(){const e=Ee,t=e.crypto||e.msCrypto;let n=()=>16*Math.random();try{if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,"");t&&t.getRandomValues&&(n=()=>{const e=new Uint8Array(1);return t.getRandomValues(e),e[0]})}catch(e){}return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,(e=>(e^(15&n())>>e/4).toString(16)))}function dt(e){return e.exception&&e.exception.values?e.exception.values[0]:void 0}function pt(e){const{message:t,event_id:n}=e;if(t)return t;const r=dt(e);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function ht(e,t,n){const r=e.exception=e.exception||{},s=r.values=r.values||[],a=s[0]=s[0]||{};a.value||(a.value=t||""),a.type||(a.type=n||"Error")}function gt(e,t){const n=dt(e);if(!n)return;const r=n.mechanism;if(n.mechanism={type:"generic",handled:!0,...r,...t},t&&"data"in t){const e={...r&&r.data,...t.data};n.mechanism.data=e}}function mt(e){if(e&&e.__sentry_captured__)return!0;try{He(e,"__sentry_captured__",!0)}catch(e){}return!1}function ft(e){return Array.isArray(e)?e:[e]}const _t=Ee,yt=1e3;let St,Tt,bt;function Et(e){ot("dom",e),it("dom",vt)}function vt(){if(!_t.document)return;const e=ct.bind(null,"dom"),t=wt(e,!0);_t.document.addEventListener("click",t,!1),_t.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach((t=>{const n=_t[t]&&_t[t].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(We(n,"addEventListener",(function(t){return function(n,r,s){if("click"===n||"keypress"==n)try{const r=this,a=r.__sentry_instrumentation_handlers__=r.__sentry_instrumentation_handlers__||{},o=a[n]=a[n]||{refCount:0};if(!o.handler){const r=wt(e);o.handler=r,t.call(this,n,r,s)}o.refCount++}catch(e){}return t.call(this,n,r,s)}})),We(n,"removeEventListener",(function(e){return function(t,n,r){if("click"===t||"keypress"==t)try{const n=this,s=n.__sentry_instrumentation_handlers__||{},a=s[t];a&&(a.refCount--,a.refCount<=0&&(e.call(this,t,a.handler,r),a.handler=void 0,delete s[t]),0===Object.keys(s).length&&delete n.__sentry_instrumentation_handlers__)}catch(e){}return e.call(this,t,n,r)}})))}))}function wt(e,t=!1){return n=>{if(!n||n._sentryCaptured)return;const r=function(e){try{return e.target}catch(e){return null}}(n);if(function(e,t){return"keypress"===e&&(!t||!t.tagName||"INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName&&!t.isContentEditable)}(n.type,r))return;He(n,"_sentryCaptured",!0),r&&!r._sentryId&&He(r,"_sentryId",ut());const s="keypress"===n.type?"input":n.type;if(!function(e){if(e.type!==Tt)return!1;try{if(!e.target||e.target._sentryId!==bt)return!1}catch(e){}return!0}(n)){e({event:n,name:s,global:t}),Tt=n.type,bt=r?r._sentryId:void 0}clearTimeout(St),St=_t.setTimeout((()=>{bt=void 0,Tt=void 0}),yt)}}const It=ve();function kt(){if(!("fetch"in It))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch(e){return!1}}function Ct(e){return e&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function Rt(e){const t="fetch";ot(t,e),it(t,xt)}function xt(){(function(){if("string"==typeof EdgeRuntime)return!0;if(!kt())return!1;if(Ct(It.fetch))return!0;let e=!1;const t=It.document;if(t&&"function"==typeof t.createElement)try{const n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(e=Ct(n.contentWindow.fetch)),t.head.removeChild(n)}catch(e){Oe&&Me.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return e})()&&We(Ee,"fetch",(function(e){return function(...t){const{method:n,url:r}=function(e){if(0===e.length)return{method:"GET",url:""};if(2===e.length){const[t,n]=e;return{url:At(t),method:Lt(n,"method")?String(n.method).toUpperCase():"GET"}}const t=e[0];return{url:At(t),method:Lt(t,"method")?String(t.method).toUpperCase():"GET"}}(t),s={args:t,fetchData:{method:n,url:r},startTimestamp:Date.now()};return ct("fetch",{...s}),e.apply(Ee,t).then((e=>(ct("fetch",{...s,endTimestamp:Date.now(),response:e}),e)),(e=>{throw ct("fetch",{...s,endTimestamp:Date.now(),error:e}),e}))}}))}function Lt(e,t){return!!e&&"object"==typeof e&&!!e[t]}function At(e){return"string"==typeof e?e:e?Lt(e,"url")?e.url:e.toString?e.toString():"":""}let Ot=null;function Nt(e){const t="error";ot(t,e),it(t,Dt)}function Dt(){Ot=Ee.onerror,Ee.onerror=function(e,t,n,r,s){return ct("error",{column:r,error:s,line:n,msg:e,url:t}),!(!Ot||Ot.__SENTRY_LOADER__)&&Ot.apply(this,arguments)},Ee.onerror.__SENTRY_INSTRUMENTED__=!0}let Pt=null;function Mt(e){const t="unhandledrejection";ot(t,e),it(t,Ft)}function Ft(){Pt=Ee.onunhandledrejection,Ee.onunhandledrejection=function(e){return ct("unhandledrejection",e),!(Pt&&!Pt.__SENTRY_LOADER__)||Pt.apply(this,arguments)},Ee.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const Ut=ve();const Bt=Ee;let Gt;function jt(e){const t="history";ot(t,e),it(t,$t)}function $t(){if(!function(){const e=Ut.chrome,t=e&&e.app&&e.app.runtime,n="history"in Ut&&!!Ut.history.pushState&&!!Ut.history.replaceState;return!t&&n}())return;const e=Bt.onpopstate;function t(e){return function(...t){const n=t.length>2?t[2]:void 0;if(n){const e=Gt,t=String(n);Gt=t;ct("history",{from:e,to:t})}return e.apply(this,t)}}Bt.onpopstate=function(...t){const n=Bt.location.href,r=Gt;Gt=n;if(ct("history",{from:r,to:n}),e)try{return e.apply(this,t)}catch(e){}},We(Bt.history,"pushState",t),We(Bt.history,"replaceState",t)}const Wt=Ee,Ht="__sentry_xhr_v3__";function qt(e){ot("xhr",e),it("xhr",Vt)}function Vt(){if(!Wt.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;We(e,"open",(function(e){return function(...t){const n=Date.now(),r=se(t[0])?t[0].toUpperCase():void 0,s=function(e){if(se(e))return e;try{return e.toString()}catch(e){}return}(t[1]);if(!r||!s)return e.apply(this,t);this[Ht]={method:r,url:s,request_headers:{}},"POST"===r&&s.match(/sentry_key/)&&(this.__sentry_own_request__=!0);const a=()=>{const e=this[Ht];if(e&&4===this.readyState){try{e.status_code=this.status}catch(e){}ct("xhr",{args:[r,s],endTimestamp:Date.now(),startTimestamp:n,xhr:this})}};return"onreadystatechange"in this&&"function"==typeof this.onreadystatechange?We(this,"onreadystatechange",(function(e){return function(...t){return a(),e.apply(this,t)}})):this.addEventListener("readystatechange",a),We(this,"setRequestHeader",(function(e){return function(...t){const[n,r]=t,s=this[Ht];return s&&se(n)&&se(r)&&(s.request_headers[n.toLowerCase()]=r),e.apply(this,t)}})),e.apply(this,t)}})),We(e,"send",(function(e){return function(...t){const n=this[Ht];if(!n)return e.apply(this,t);void 0!==t[0]&&(n.body=t[0]);return ct("xhr",{args:[n.method,n.url],startTimestamp:Date.now(),xhr:this}),e.apply(this,t)}}))}function zt(){return!("undefined"!=typeof __SENTRY_BROWSER_BUNDLE__&&__SENTRY_BROWSER_BUNDLE__)&&"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0)}function Yt(){return"undefined"!=typeof window&&(!zt()||void 0!==Ee.process&&"renderer"===Ee.process.type)}function Kt(e,t=100,n=1/0){try{return Jt("",e,t,n)}catch(e){return{ERROR:`**non-serializable** (${e})`}}}function Xt(e,t=3,n=102400){const r=Kt(e,t);return s=r,function(e){return~-encodeURI(e).split(/%..|./).length}(JSON.stringify(s))>n?Xt(e,t-1,n):r;var s}function Jt(e,t,n=1/0,r=1/0,s=function(){const e="function"==typeof WeakSet,t=e?new WeakSet:[];return[function(n){if(e)return!!t.has(n)||(t.add(n),!1);for(let e=0;e<t.length;e++)if(t[e]===n)return!0;return t.push(n),!1},function(n){if(e)t.delete(n);else for(let e=0;e<t.length;e++)if(t[e]===n){t.splice(e,1);break}}]}()){const[a,o]=s;if(null==t||["number","boolean","string"].includes(typeof t)&&!ue(t))return t;const i=function(e,t){try{if("domain"===e&&t&&"object"==typeof t&&t._events)return"[Domain]";if("domainEmitter"===e)return"[DomainEmitter]";if("undefined"!=typeof global&&t===global)return"[Global]";if("undefined"!=typeof window&&t===window)return"[Window]";if("undefined"!=typeof document&&t===document)return"[Document]";if(pe(t))return"[VueViewModel]";if(ie(n=t)&&"nativeEvent"in n&&"preventDefault"in n&&"stopPropagation"in n)return"[SyntheticEvent]";if("number"==typeof t&&t!=t)return"[NaN]";if("function"==typeof t)return`[Function: ${rt(t)}]`;if("symbol"==typeof t)return`[${String(t)}]`;if("bigint"==typeof t)return`[BigInt: ${String(t)}]`;const r=function(e){const t=Object.getPrototypeOf(e);return t?t.constructor.name:"null prototype"}(t);return/^HTML(\w*)Element$/.test(r)?`[HTMLElement: ${r}]`:`[object ${r}]`}catch(e){return`**non-serializable** (${e})`}var n}(e,t);if(!i.startsWith("[object "))return i;if(t.__sentry_skip_normalization__)return t;const c="number"==typeof t.__sentry_override_normalization_depth__?t.__sentry_override_normalization_depth__:n;if(0===c)return i.replace("object ","");if(a(t))return"[Circular ~]";const l=t;if(l&&"function"==typeof l.toJSON)try{return Jt("",l.toJSON(),c-1,r,s)}catch(e){}const u=Array.isArray(t)?[]:{};let d=0;const p=ze(t);for(const e in p){if(!Object.prototype.hasOwnProperty.call(p,e))continue;if(d>=r){u[e]="[MaxProperties ~]";break}const t=p[e];u[e]=Jt(e,t,c-1,r,s),d++}return o(t),u}var Zt;function Qt(e){return new tn((t=>{t(e)}))}function en(e){return new tn(((t,n)=>{n(e)}))}!function(e){e[e.PENDING=0]="PENDING";e[e.RESOLVED=1]="RESOLVED";e[e.REJECTED=2]="REJECTED"}(Zt||(Zt={}));class tn{constructor(e){tn.prototype.__init.call(this),tn.prototype.__init2.call(this),tn.prototype.__init3.call(this),tn.prototype.__init4.call(this),this._state=Zt.PENDING,this._handlers=[];try{e(this._resolve,this._reject)}catch(e){this._reject(e)}}then(e,t){return new tn(((n,r)=>{this._handlers.push([!1,t=>{if(e)try{n(e(t))}catch(e){r(e)}else n(t)},e=>{if(t)try{n(t(e))}catch(e){r(e)}else r(e)}]),this._executeHandlers()}))}catch(e){return this.then((e=>e),e)}finally(e){return new tn(((t,n)=>{let r,s;return this.then((t=>{s=!1,r=t,e&&e()}),(t=>{s=!0,r=t,e&&e()})).then((()=>{s?n(r):t(r)}))}))}__init(){this._resolve=e=>{this._setResult(Zt.RESOLVED,e)}}__init2(){this._reject=e=>{this._setResult(Zt.REJECTED,e)}}__init3(){this._setResult=(e,t)=>{this._state===Zt.PENDING&&(le(t)?t.then(this._resolve,this._reject):(this._state=e,this._value=t,this._executeHandlers()))}}__init4(){this._executeHandlers=()=>{if(this._state===Zt.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach((e=>{e[0]||(this._state===Zt.RESOLVED&&e[1](this._value),this._state===Zt.REJECTED&&e[2](this._value),e[0]=!0)}))}}}function nn(e){const t=[];function n(e){return t.splice(t.indexOf(e),1)[0]}return{$:t,add:function(r){if(!(void 0===e||t.length<e))return en(new $e("Not adding Promise because buffer limit was reached."));const s=r();return-1===t.indexOf(s)&&t.push(s),s.then((()=>n(s))).then(null,(()=>n(s).then(null,(()=>{})))),s},drain:function(e){return new tn(((n,r)=>{let s=t.length;if(!s)return n(!0);const a=setTimeout((()=>{e&&e>0&&n(!1)}),e);t.forEach((e=>{Qt(e).then((()=>{--s||(clearTimeout(a),n(!0))}),r)}))}))}}}function rn(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:r,relative:t[5]+n+r}}const sn=["fatal","error","warning","log","info","debug"];function an(e){return"warn"===e?"warning":sn.includes(e)?e:"log"}const on=1e3;function cn(){return Date.now()/on}const ln=function(){const{performance:e}=Ee;if(!e||!e.now)return cn;const t=Date.now()-e.now(),n=null==e.timeOrigin?t:e.timeOrigin;return()=>(n+e.now())/on}(),un=(()=>{const{performance:e}=Ee;if(!e||!e.now)return;const t=36e5,n=e.now(),r=Date.now(),s=e.timeOrigin?Math.abs(e.timeOrigin+n-r):t,a=s<t,o=e.timing&&e.timing.navigationStart,i="number"==typeof o?Math.abs(o+n-r):t;return a||i<t?s<=i?e.timeOrigin:o:r})(),dn="baggage",pn="sentry-",hn=/^sentry-/,gn=8192;function mn(e){if(!se(e)&&!Array.isArray(e))return;let t={};if(Array.isArray(e))t=e.reduce(((e,t)=>{const n=_n(t);for(const t of Object.keys(n))e[t]=n[t];return e}),{});else{if(!e)return;t=_n(e)}const n=Object.entries(t).reduce(((e,[t,n])=>{if(t.match(hn)){e[t.slice(pn.length)]=n}return e}),{});return Object.keys(n).length>0?n:void 0}function fn(e){if(!e)return;return function(e){if(0===Object.keys(e).length)return;return Object.entries(e).reduce(((e,[t,n],r)=>{const s=`${encodeURIComponent(t)}=${encodeURIComponent(n)}`,a=0===r?s:`${e},${s}`;return a.length>gn?(Oe&&Me.warn(`Not adding key: ${t} with val: ${n} to baggage header due to exceeding baggage size limits.`),e):a}),"")}(Object.entries(e).reduce(((e,[t,n])=>(n&&(e[`${pn}${t}`]=n),e)),{}))}function _n(e){return e.split(",").map((e=>e.split("=").map((e=>decodeURIComponent(e.trim()))))).reduce(((e,[t,n])=>(e[t]=n,e)),{})}const yn=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function Sn(e){if(!e)return;const t=e.match(yn);if(!t)return;let n;return"1"===t[3]?n=!0:"0"===t[3]&&(n=!1),{traceId:t[1],parentSampled:n,parentSpanId:t[2]}}function Tn(e,t){const n=Sn(e),r=mn(t),{traceId:s,parentSpanId:a,parentSampled:o}=n||{};return n?{traceId:s||ut(),parentSpanId:a||ut().substring(16),spanId:ut().substring(16),sampled:o,dsc:r||{}}:{traceId:s||ut(),spanId:ut().substring(16)}}function bn(e=ut(),t=ut().substring(16),n){let r="";return void 0!==n&&(r=n?"-1":"-0"),`${e}-${t}${r}`}function En(e,t=[]){return[e,t]}function vn(e,t){const[n,r]=e;return[n,[...r,t]]}function wn(e,t){const n=e[1];for(const e of n){if(t(e,e[0].type))return!0}return!1}function In(e,t){return(t||new TextEncoder).encode(e)}function kn(e,t){const[n,r]=e;let s=JSON.stringify(n);function a(e){"string"==typeof s?s="string"==typeof e?s+e:[In(s,t),e]:s.push("string"==typeof e?In(e,t):e)}for(const e of r){const[t,n]=e;if(a(`\n${JSON.stringify(t)}\n`),"string"==typeof n||n instanceof Uint8Array)a(n);else{let e;try{e=JSON.stringify(n)}catch(t){e=JSON.stringify(Kt(n))}a(e)}}return"string"==typeof s?s:function(e){const t=e.reduce(((e,t)=>e+t.length),0),n=new Uint8Array(t);let r=0;for(const t of e)n.set(t,r),r+=t.length;return n}(s)}function Cn(e,t){const n="string"==typeof e.data?In(e.data,t):e.data;return[Xe({type:"attachment",length:n.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType}),n]}const Rn={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",statsd:"unknown"};function xn(e){return Rn[e]}function Ln(e){if(!e||!e.sdk)return;const{name:t,version:n}=e.sdk;return{name:t,version:n}}function An(e,t,n,r){const s=e.sdkProcessingMetadata&&e.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&{sdk:t},...!!n&&r&&{dsn:Ue(r)},...s&&{trace:Xe({...s})}}}const On=6e4;function Nn(e,t=Date.now()){const n=parseInt(`${e}`,10);if(!isNaN(n))return 1e3*n;const r=Date.parse(`${e}`);return isNaN(r)?On:r-t}function Dn(e,t,n=Date.now()){return function(e,t){return e[t]||e.all||0}(e,t)>n}function Pn(e,{statusCode:t,headers:n},r=Date.now()){const s={...e},a=n&&n["x-sentry-rate-limits"],o=n&&n["retry-after"];if(a)for(const e of a.trim().split(",")){const[t,n]=e.split(":",2),a=parseInt(t,10),o=1e3*(isNaN(a)?60:a);if(n)for(const e of n.split(";"))s[e]=r+o;else s.all=r+o}else o?s.all=r+Nn(o,r):429===t&&(s.all=r+6e4);return s}function Mn(e,t){const n={type:t.name||t.constructor.name,value:t.message},r=function(e,t){return e(t.stack||"",1)}(e,t);return r.length&&(n.stacktrace={frames:r}),n}function Fn(e){let t,n=e[0],r=1;for(;r<e.length;){const s=e[r],a=e[r+1];if(r+=2,("optionalAccess"===s||"optionalCall"===s)&&null==n)return;"access"===s||"optionalAccess"===s?(t=n,n=a(n)):"call"!==s&&"optionalCall"!==s||(n=a(((...e)=>n.call(t,...e))),t=void 0)}return n}const Un="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,Bn="production";function Gn(){return we("globalEventProcessors",(()=>[]))}function jn(e){Gn().push(e)}function $n(e,t,n,r=0){return new tn(((s,a)=>{const o=e[r];if(null===t||"function"!=typeof o)s(t);else{const i=o({...t},n);Un&&o.id&&null===i&&Me.log(`Event processor "${o.id}" dropped event`),le(i)?i.then((t=>$n(e,t,n,r+1).then(s))).then(null,a):$n(e,i,n,r+1).then(s).then(null,a)}}))}function Wn(e){const t=ln(),n={sid:ut(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>function(e){return Xe({sid:`${e.sid}`,init:e.init,started:new Date(1e3*e.started).toISOString(),timestamp:new Date(1e3*e.timestamp).toISOString(),status:e.status,errors:e.errors,did:"number"==typeof e.did||"string"==typeof e.did?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}})}(n)};return e&&Hn(n,e),n}function Hn(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),e.did||t.did||(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||ln(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=32===t.sid.length?t.sid:ut()),void 0!==t.init&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),"number"==typeof t.started&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if("number"==typeof t.duration)e.duration=t.duration;else{const t=e.timestamp-e.started;e.duration=t>=0?t:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),"number"==typeof t.errors&&(e.errors=t.errors),t.status&&(e.status=t.status)}function qn(e,t){let n={};t?n={status:t}:"ok"===e.status&&(n={status:"exited"}),Hn(e,n)}const Vn=1;function zn(e){const{spanId:t,traceId:n}=e.spanContext(),{data:r,op:s,parent_span_id:a,status:o,tags:i,origin:c}=Jn(e);return Xe({data:r,op:s,parent_span_id:a,span_id:t,status:o,tags:i,trace_id:n,origin:c})}function Yn(e){const{traceId:t,spanId:n}=e.spanContext();return bn(t,n,Zn(e))}function Kn(e){return"number"==typeof e?Xn(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?Xn(e.getTime()):ln()}function Xn(e){return e>9999999999?e/1e3:e}function Jn(e){return function(e){return"function"==typeof e.getSpanJSON}(e)?e.getSpanJSON():"function"==typeof e.toJSON?e.toJSON():{}}function Zn(e){const{traceFlags:t}=e.spanContext();return Boolean(t&Vn)}function Qn(e,t,n,r,s,a){const{normalizeDepth:o=3,normalizeMaxBreadth:i=1e3}=e,c={...t,event_id:t.event_id||n.event_id||ut(),timestamp:t.timestamp||cn()},l=n.integrations||e.integrations.map((e=>e.name));!function(e,t){const{environment:n,release:r,dist:s,maxValueLength:a=250}=t;"environment"in e||(e.environment="environment"in t?n:Bn);void 0===e.release&&void 0!==r&&(e.release=r);void 0===e.dist&&void 0!==s&&(e.dist=s);e.message&&(e.message=he(e.message,a));const o=e.exception&&e.exception.values&&e.exception.values[0];o&&o.value&&(o.value=he(o.value,a));const i=e.request;i&&i.url&&(i.url=he(i.url,a))}(c,e),function(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}(c,l),void 0===t.type&&function(e,t){const n=Ee._sentryDebugIds;if(!n)return;let r;const s=er.get(t);s?r=s:(r=new Map,er.set(t,r));const a=Object.keys(n).reduce(((e,s)=>{let a;const o=r.get(s);o?a=o:(a=t(s),r.set(s,a));for(let t=a.length-1;t>=0;t--){const r=a[t];if(r.filename){e[r.filename]=n[s];break}}return e}),{});try{e.exception.values.forEach((e=>{e.stacktrace.frames.forEach((e=>{e.filename&&(e.debug_id=a[e.filename])}))}))}catch(e){}}(c,e.stackParser);const u=function(e,t){if(!t)return e;const n=e?e.clone():new br;return n.update(t),n}(r,n.captureContext);n.mechanism&&gt(c,n.mechanism);const d=s&&s.getEventProcessors?s.getEventProcessors():[],p=function(){Tr||(Tr=new br);return Tr}().getScopeData();if(a){yr(p,a.getScopeData())}if(u){yr(p,u.getScopeData())}const h=[...n.attachments||[],...p.attachments];h.length&&(n.attachments=h),_r(c,p);return $n([...d,...Gn(),...p.eventProcessors],c,n).then((e=>(e&&function(e){const t={};try{e.exception.values.forEach((e=>{e.stacktrace.frames.forEach((e=>{e.debug_id&&(e.abs_path?t[e.abs_path]=e.debug_id:e.filename&&(t[e.filename]=e.debug_id),delete e.debug_id)}))}))}catch(e){}if(0===Object.keys(t).length)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const n=e.debug_meta.images;Object.keys(t).forEach((e=>{n.push({type:"sourcemap",code_file:e,debug_id:t[e]})}))}(e),"number"==typeof o&&o>0?function(e,t,n){if(!e)return null;const r={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map((e=>({...e,...e.data&&{data:Kt(e.data,t,n)}})))},...e.user&&{user:Kt(e.user,t,n)},...e.contexts&&{contexts:Kt(e.contexts,t,n)},...e.extra&&{extra:Kt(e.extra,t,n)}};e.contexts&&e.contexts.trace&&r.contexts&&(r.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(r.contexts.trace.data=Kt(e.contexts.trace.data,t,n)));e.spans&&(r.spans=e.spans.map((e=>{const r=Jn(e).data;return r&&(e.data=Kt(r,t,n)),e})));return r}(e,o,i):e)))}const er=new WeakMap;function tr(e){if(e)return function(e){return e instanceof br||"function"==typeof e}(e)||function(e){return Object.keys(e).some((e=>nr.includes(e)))}(e)?{captureContext:e}:e}const nr=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];function rr(e,t){return xr().captureException(e,tr(t))}function sr(e,t){return xr().captureEvent(e,t)}function ar(e,t){xr().addBreadcrumb(e,t)}function or(e,t){xr().setContext(e,t)}function ir(...e){const t=xr();if(2===e.length){const[n,r]=e;return n?t.withScope((()=>(t.getStackTop().scope=n,r(n)))):t.withScope(r)}return t.withScope(e[0])}function cr(){return xr().getClient()}function lr(){return xr().getScope()}function ur(e){const t=cr(),n=Lr(),r=lr(),{release:s,environment:a=Bn}=t&&t.getOptions()||{},{userAgent:o}=Ee.navigator||{},i=Wn({release:s,environment:a,user:r.getUser()||n.getUser(),...o&&{userAgent:o},...e}),c=n.getSession();return c&&"ok"===c.status&&Hn(c,{status:"exited"}),dr(),n.setSession(i),r.setSession(i),i}function dr(){const e=Lr(),t=lr(),n=t.getSession()||e.getSession();n&&qn(n),pr(),e.setSession(),t.setSession()}function pr(){const e=Lr(),t=lr(),n=cr(),r=t.getSession()||e.getSession();r&&n&&n.captureSession&&n.captureSession(r)}function hr(e=!1){e?dr():pr()}function gr(e){return e.transaction}function mr(e,t,n){const r=t.getOptions(),{publicKey:s}=t.getDsn()||{},{segment:a}=n&&n.getUser()||{},o=Xe({environment:r.environment||Bn,release:r.release,user_segment:a,public_key:s,trace_id:e});return t.emit&&t.emit("createDsc",o),o}function fr(e){const t=cr();if(!t)return{};const n=mr(Jn(e).trace_id||"",t,lr()),r=gr(e);if(!r)return n;const s=r&&r._frozenDynamicSamplingContext;if(s)return s;const{sampleRate:a,source:o}=r.metadata;null!=a&&(n.sample_rate=`${a}`);const i=Jn(r);return o&&"url"!==o&&(n.transaction=i.description),n.sampled=String(Zn(r)),t.emit&&t.emit("createDsc",n),n}function _r(e,t){const{fingerprint:n,span:r,breadcrumbs:s,sdkProcessingMetadata:a}=t;!function(e,t){const{extra:n,tags:r,user:s,contexts:a,level:o,transactionName:i}=t,c=Xe(n);c&&Object.keys(c).length&&(e.extra={...c,...e.extra});const l=Xe(r);l&&Object.keys(l).length&&(e.tags={...l,...e.tags});const u=Xe(s);u&&Object.keys(u).length&&(e.user={...u,...e.user});const d=Xe(a);d&&Object.keys(d).length&&(e.contexts={...d,...e.contexts});o&&(e.level=o);i&&(e.transaction=i)}(e,t),r&&function(e,t){e.contexts={trace:zn(t),...e.contexts};const n=gr(t);if(n){e.sdkProcessingMetadata={dynamicSamplingContext:fr(t),...e.sdkProcessingMetadata};const r=Jn(n).description;r&&(e.tags={transaction:r,...e.tags})}}(e,r),function(e,t){e.fingerprint=e.fingerprint?ft(e.fingerprint):[],t&&(e.fingerprint=e.fingerprint.concat(t));e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint}(e,n),function(e,t){const n=[...e.breadcrumbs||[],...t];e.breadcrumbs=n.length?n:void 0}(e,s),function(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}(e,a)}function yr(e,t){const{extra:n,tags:r,user:s,contexts:a,level:o,sdkProcessingMetadata:i,breadcrumbs:c,fingerprint:l,eventProcessors:u,attachments:d,propagationContext:p,transactionName:h,span:g}=t;Sr(e,"extra",n),Sr(e,"tags",r),Sr(e,"user",s),Sr(e,"contexts",a),Sr(e,"sdkProcessingMetadata",i),o&&(e.level=o),h&&(e.transactionName=h),g&&(e.span=g),c.length&&(e.breadcrumbs=[...e.breadcrumbs,...c]),l.length&&(e.fingerprint=[...e.fingerprint,...l]),u.length&&(e.eventProcessors=[...e.eventProcessors,...u]),d.length&&(e.attachments=[...e.attachments,...d]),e.propagationContext={...e.propagationContext,...p}}function Sr(e,t,n){if(n&&Object.keys(n).length){e[t]={...e[t]};for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[t][r]=n[r])}}let Tr;class br{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=Er()}static clone(e){return e?e.clone():new br}clone(){const e=new br;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},e._user=this._user,e._level=this._level,e._span=this._span,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._requestSession=this._requestSession,e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e}setClient(e){this._client=e}getClient(){return this._client}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,segment:void 0,username:void 0},this._session&&Hn(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,t){return this._tags={...this._tags,[e]:t},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,t){return this._extra={...this._extra,[e]:t},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,t){return null===t?delete this._contexts[e]:this._contexts[e]=t,this._notifyScopeListeners(),this}setSpan(e){return this._span=e,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const e=this._span;return e&&e.transaction}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const t="function"==typeof e?e(this):e;if(t instanceof br){const e=t.getScopeData();this._tags={...this._tags,...e.tags},this._extra={...this._extra,...e.extra},this._contexts={...this._contexts,...e.contexts},e.user&&Object.keys(e.user).length&&(this._user=e.user),e.level&&(this._level=e.level),e.fingerprint.length&&(this._fingerprint=e.fingerprint),t.getRequestSession()&&(this._requestSession=t.getRequestSession()),e.propagationContext&&(this._propagationContext=e.propagationContext)}else if(ie(t)){const t=e;this._tags={...this._tags,...t.tags},this._extra={...this._extra,...t.extra},this._contexts={...this._contexts,...t.contexts},t.user&&(this._user=t.user),t.level&&(this._level=t.level),t.fingerprint&&(this._fingerprint=t.fingerprint),t.requestSession&&(this._requestSession=t.requestSession),t.propagationContext&&(this._propagationContext=t.propagationContext)}return this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=Er(),this}addBreadcrumb(e,t){const n="number"==typeof t?t:100;if(n<=0)return this;const r={timestamp:cn(),...e},s=this._breadcrumbs;return s.push(r),this._breadcrumbs=s.length>n?s.slice(-n):s,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}getAttachments(){return this.getScopeData().attachments}clearAttachments(){return this._attachments=[],this}getScopeData(){const{_breadcrumbs:e,_attachments:t,_contexts:n,_tags:r,_extra:s,_user:a,_level:o,_fingerprint:i,_eventProcessors:c,_propagationContext:l,_sdkProcessingMetadata:u,_transactionName:d,_span:p}=this;return{breadcrumbs:e,attachments:t,contexts:n,tags:r,extra:s,user:a,level:o,fingerprint:i||[],eventProcessors:c,propagationContext:l,sdkProcessingMetadata:u,transactionName:d,span:p}}applyToEvent(e,t={},n=[]){_r(e,this.getScopeData());return $n([...n,...Gn(),...this._eventProcessors],e,t)}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...e},this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,t){const n=t&&t.event_id?t.event_id:ut();if(!this._client)return Me.warn("No client configured on scope - will not capture exception!"),n;const r=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:r,...t,event_id:n},this),n}captureMessage(e,t,n){const r=n&&n.event_id?n.event_id:ut();if(!this._client)return Me.warn("No client configured on scope - will not capture message!"),r;const s=new Error(e);return this._client.captureMessage(e,t,{originalException:e,syntheticException:s,...n,event_id:r},this),r}captureEvent(e,t){const n=t&&t.event_id?t.event_id:ut();return this._client?(this._client.captureEvent(e,{...t,event_id:n},this),n):(Me.warn("No client configured on scope - will not capture event!"),n)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((e=>{e(this)})),this._notifyingListeners=!1)}}function Er(){return{traceId:ut(),spanId:ut().substring(16)}}const vr="7.107.0",wr=parseFloat(vr),Ir=100;class kr{constructor(e,t,n,r=wr){let s,a;this._version=r,t?s=t:(s=new br,s.setClient(e)),n?a=n:(a=new br,a.setClient(e)),this._stack=[{scope:s}],e&&this.bindClient(e),this._isolationScope=a}isOlderThan(e){return this._version<e}bindClient(e){const t=this.getStackTop();t.client=e,t.scope.setClient(e),e&&e.setupIntegrations&&e.setupIntegrations()}pushScope(){const e=this.getScope().clone();return this.getStack().push({client:this.getClient(),scope:e}),e}popScope(){return!(this.getStack().length<=1)&&!!this.getStack().pop()}withScope(e){const t=this.pushScope();let n;try{n=e(t)}catch(e){throw this.popScope(),e}return le(n)?n.then((e=>(this.popScope(),e)),(e=>{throw this.popScope(),e})):(this.popScope(),n)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(e,t){const n=this._lastEventId=t&&t.event_id?t.event_id:ut(),r=new Error("Sentry syntheticException");return this.getScope().captureException(e,{originalException:e,syntheticException:r,...t,event_id:n}),n}captureMessage(e,t,n){const r=this._lastEventId=n&&n.event_id?n.event_id:ut(),s=new Error(e);return this.getScope().captureMessage(e,t,{originalException:e,syntheticException:s,...n,event_id:r}),r}captureEvent(e,t){const n=t&&t.event_id?t.event_id:ut();return e.type||(this._lastEventId=n),this.getScope().captureEvent(e,{...t,event_id:n}),n}lastEventId(){return this._lastEventId}addBreadcrumb(e,t){const{scope:n,client:r}=this.getStackTop();if(!r)return;const{beforeBreadcrumb:s=null,maxBreadcrumbs:a=Ir}=r.getOptions&&r.getOptions()||{};if(a<=0)return;const o={timestamp:cn(),...e},i=s?Pe((()=>s(o,t))):o;null!==i&&(r.emit&&r.emit("beforeAddBreadcrumb",i,t),n.addBreadcrumb(i,a))}setUser(e){this.getScope().setUser(e),this.getIsolationScope().setUser(e)}setTags(e){this.getScope().setTags(e),this.getIsolationScope().setTags(e)}setExtras(e){this.getScope().setExtras(e),this.getIsolationScope().setExtras(e)}setTag(e,t){this.getScope().setTag(e,t),this.getIsolationScope().setTag(e,t)}setExtra(e,t){this.getScope().setExtra(e,t),this.getIsolationScope().setExtra(e,t)}setContext(e,t){this.getScope().setContext(e,t),this.getIsolationScope().setContext(e,t)}configureScope(e){const{scope:t,client:n}=this.getStackTop();n&&e(t)}run(e){const t=Rr(this);try{e(this)}finally{Rr(t)}}getIntegration(e){const t=this.getClient();if(!t)return null;try{return t.getIntegration(e)}catch(t){return Un&&Me.warn(`Cannot retrieve integration ${e.id} from the current Hub`),null}}startTransaction(e,t){const n=this._callExtensionMethod("startTransaction",e,t);if(Un&&!n){this.getClient()?Me.warn("Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':\nSentry.addTracingExtensions();\nSentry.init({...});\n"):Me.warn("Tracing extension 'startTransaction' is missing. You should 'init' the SDK before calling 'startTransaction'")}return n}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(e=!1){if(e)return this.endSession();this._sendSessionUpdate()}endSession(){const e=this.getStackTop().scope,t=e.getSession();t&&qn(t),this._sendSessionUpdate(),e.setSession()}startSession(e){const{scope:t,client:n}=this.getStackTop(),{release:r,environment:s=Bn}=n&&n.getOptions()||{},{userAgent:a}=Ee.navigator||{},o=Wn({release:r,environment:s,user:t.getUser(),...a&&{userAgent:a},...e}),i=t.getSession&&t.getSession();return i&&"ok"===i.status&&Hn(i,{status:"exited"}),this.endSession(),t.setSession(o),o}shouldSendDefaultPii(){const e=this.getClient(),t=e&&e.getOptions();return Boolean(t&&t.sendDefaultPii)}_sendSessionUpdate(){const{scope:e,client:t}=this.getStackTop(),n=e.getSession();n&&t&&t.captureSession&&t.captureSession(n)}_callExtensionMethod(e,...t){const n=Cr().__SENTRY__;if(n&&n.extensions&&"function"==typeof n.extensions[e])return n.extensions[e].apply(this,t);Un&&Me.warn(`Extension method ${e} couldn't be found, doing nothing.`)}}function Cr(){return Ee.__SENTRY__=Ee.__SENTRY__||{extensions:{},hub:void 0},Ee}function Rr(e){const t=Cr(),n=Or(t);return Nr(t,e),n}function xr(){const e=Cr();if(e.__SENTRY__&&e.__SENTRY__.acs){const t=e.__SENTRY__.acs.getCurrentHub();if(t)return t}return function(e=Cr()){t=e,t&&t.__SENTRY__&&t.__SENTRY__.hub&&!Or(e).isOlderThan(wr)||Nr(e,new kr);var t;return Or(e)}(e)}function Lr(){return xr().getIsolationScope()}function Ar(e,t={}){const n=Cr();return n.__SENTRY__&&n.__SENTRY__.acs?n.__SENTRY__.acs.runWithAsyncContext(e,t):e()}function Or(e){return we("hub",(()=>new kr),e)}function Nr(e,t){if(!e)return!1;return(e.__SENTRY__=e.__SENTRY__||{}).hub=t,!0}function Dr(e){return(e||xr()).getScope().getTransaction()}const Pr=Sn;let Mr=!1;function Fr(){const e=Dr();if(e){const t="internal_error";Un&&Me.log(`[Tracing] Transaction: ${t} -> Global error occured`),e.setStatus(t)}}var Ur;function Br(e){if(e<400&&e>=100)return"ok";if(e>=400&&e<500)switch(e){case 401:return"unauthenticated";case 403:return"permission_denied";case 404:return"not_found";case 409:return"already_exists";case 413:return"failed_precondition";case 429:return"resource_exhausted";default:return"invalid_argument"}if(e>=500&&e<600)switch(e){case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline_exceeded";default:return"internal_error"}return"unknown_error"}Fr.tag="sentry_tracingErrorCallback",function(e){e.Ok="ok";e.DeadlineExceeded="deadline_exceeded";e.Unauthenticated="unauthenticated";e.PermissionDenied="permission_denied";e.NotFound="not_found";e.ResourceExhausted="resource_exhausted";e.InvalidArgument="invalid_argument";e.Unimplemented="unimplemented";e.Unavailable="unavailable";e.InternalError="internal_error";e.UnknownError="unknown_error";e.Cancelled="cancelled";e.AlreadyExists="already_exists";e.FailedPrecondition="failed_precondition";e.Aborted="aborted";e.OutOfRange="out_of_range";e.DataLoss="data_loss"}(Ur||(Ur={}));const Gr=Br;function jr(e,t){e.setTag("http.status_code",String(t)),e.setData("http.response.status_code",t);const n=Br(t);"unknown_error"!==n&&e.setStatus(n)}function $r(e,t,n=(()=>{})){let r;try{r=e()}catch(e){throw t(e),n(),e}return function(e,t,n){if(le(e))return e.then((e=>(n(),e)),(e=>{throw t(e),n(),e}));return n(),e}(r,t,n)}function Wr(e){if("boolean"==typeof __SENTRY_TRACING__&&!__SENTRY_TRACING__)return!1;const t=cr(),n=e||t&&t.getOptions();return!!n&&(n.enableTracing||"tracesSampleRate"in n||"tracesSampler"in n)}function Hr(e){if(!Wr())return;const t=zr(e),n=xr(),r=e.scope?e.scope.getSpan():qr();if(e.onlyIfParent&&!r)return;const s=(e.scope||lr()).clone();return Vr(n,{parentSpan:r,spanContext:t,forceTransaction:e.forceTransaction,scope:s})}function qr(){return lr().getSpan()}function Vr(e,{parentSpan:t,spanContext:n,forceTransaction:r,scope:s}){if(!Wr())return;const a=Lr();let o;if(t&&!r)o=t.startChild(n);else if(t){const r=fr(t),{traceId:s,spanId:a}=t.spanContext(),i=Zn(t);o=e.startTransaction({traceId:s,parentSpanId:a,parentSampled:i,...n,metadata:{dynamicSamplingContext:r,...n.metadata}})}else{const{traceId:t,dsc:r,parentSpanId:i,sampled:c}={...a.getPropagationContext(),...s.getPropagationContext()};o=e.startTransaction({traceId:t,parentSpanId:i,parentSampled:c,...n,metadata:{dynamicSamplingContext:r,...n.metadata}})}return s.setSpan(o),function(e,t,n){e&&(He(e,Kr,n),He(e,Yr,t))}(o,s,a),o}function zr(e){if(e.startTime){const t={...e};return t.startTimestamp=Kn(e.startTime),delete t.startTime,t}return e}const Yr="_sentryScope",Kr="_sentryIsolationScope";let Xr;function Jr(e){return Xr?Xr.get(e):void 0}function Zr(e){const t=Jr(e);if(!t)return;const n={};for(const[,[e,r]]of t)n[e]||(n[e]=[]),n[e].push(Xe(r));return n}const Qr="sentry.source",es="sentry.sample_rate",ts="sentry.op",ns="sentry.origin";class rs{constructor(e=1e3){this._maxlen=e,this.spans=[]}add(e){this.spans.length>this._maxlen?e.spanRecorder=void 0:this.spans.push(e)}}class ss{constructor(e={}){this._traceId=e.traceId||ut(),this._spanId=e.spanId||ut().substring(16),this._startTime=e.startTimestamp||ln(),this.tags=e.tags?{...e.tags}:{},this.data=e.data?{...e.data}:{},this.instrumenter=e.instrumenter||"sentry",this._attributes={},this.setAttributes({[ns]:e.origin||"manual",[ts]:e.op,...e.attributes}),this._name=e.name||e.description,e.parentSpanId&&(this._parentSpanId=e.parentSpanId),"sampled"in e&&(this._sampled=e.sampled),e.status&&(this._status=e.status),e.endTimestamp&&(this._endTime=e.endTimestamp),e.exclusiveTime&&(this._exclusiveTime=e.exclusiveTime),this._measurements=e.measurements?{...e.measurements}:{}}get name(){return this._name||""}set name(e){this.updateName(e)}get description(){return this._name}set description(e){this._name=e}get traceId(){return this._traceId}set traceId(e){this._traceId=e}get spanId(){return this._spanId}set spanId(e){this._spanId=e}set parentSpanId(e){this._parentSpanId=e}get parentSpanId(){return this._parentSpanId}get sampled(){return this._sampled}set sampled(e){this._sampled=e}get attributes(){return this._attributes}set attributes(e){this._attributes=e}get startTimestamp(){return this._startTime}set startTimestamp(e){this._startTime=e}get endTimestamp(){return this._endTime}set endTimestamp(e){this._endTime=e}get status(){return this._status}set status(e){this._status=e}get op(){return this._attributes[ts]}set op(e){this.setAttribute(ts,e)}get origin(){return this._attributes[ns]}set origin(e){this.setAttribute(ns,e)}spanContext(){const{_spanId:e,_traceId:t,_sampled:n}=this;return{spanId:e,traceId:t,traceFlags:n?Vn:0}}startChild(e){const t=new ss({...e,parentSpanId:this._spanId,sampled:this._sampled,traceId:this._traceId});t.spanRecorder=this.spanRecorder,t.spanRecorder&&t.spanRecorder.add(t);const n=gr(this);if(t.transaction=n,Un&&n){const r=`[Tracing] Starting '${e&&e.op||"< unknown op >"}' span on transaction '${Jn(t).description||"< unknown name >"}' (${n.spanContext().spanId}).`;Me.log(r),this._logMessage=r}return t}setTag(e,t){return this.tags={...this.tags,[e]:t},this}setData(e,t){return this.data={...this.data,[e]:t},this}setAttribute(e,t){void 0===t?delete this._attributes[e]:this._attributes[e]=t}setAttributes(e){Object.keys(e).forEach((t=>this.setAttribute(t,e[t])))}setStatus(e){return this._status=e,this}setHttpStatus(e){return jr(this,e),this}setName(e){this.updateName(e)}updateName(e){return this._name=e,this}isSuccess(){return"ok"===this._status}finish(e){return this.end(e)}end(e){if(this._endTime)return;const t=gr(this);if(Un&&t&&t.spanContext().spanId!==this._spanId){const e=this._logMessage;e&&Me.log(e.replace("Starting","Finishing"))}this._endTime=Kn(e)}toTraceparent(){return Yn(this)}toContext(){return Xe({data:this._getData(),description:this._name,endTimestamp:this._endTime,op:this.op,parentSpanId:this._parentSpanId,sampled:this._sampled,spanId:this._spanId,startTimestamp:this._startTime,status:this._status,tags:this.tags,traceId:this._traceId})}updateWithContext(e){return this.data=e.data||{},this._name=e.name||e.description,this._endTime=e.endTimestamp,this.op=e.op,this._parentSpanId=e.parentSpanId,this._sampled=e.sampled,this._spanId=e.spanId||this._spanId,this._startTime=e.startTimestamp||this._startTime,this._status=e.status,this.tags=e.tags||{},this._traceId=e.traceId||this._traceId,this}getTraceContext(){return zn(this)}getSpanJSON(){return Xe({data:this._getData(),description:this._name,op:this._attributes[ts],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:this._status,tags:Object.keys(this.tags).length>0?this.tags:void 0,timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[ns],_metrics_summary:Zr(this),profile_id:this._attributes.profile_id,exclusive_time:this._exclusiveTime,measurements:Object.keys(this._measurements).length>0?this._measurements:void 0})}isRecording(){return!this._endTime&&!!this._sampled}toJSON(){return this.getSpanJSON()}_getData(){const{data:e,_attributes:t}=this,n=Object.keys(e).length>0,r=Object.keys(t).length>0;if(n||r)return n&&r?{...e,...t}:n?e:t}}class as extends ss{constructor(e,t){super(e),this._contexts={},this._hub=t||xr(),this._name=e.name||"",this._metadata={...e.metadata},this._trimEnd=e.trimEnd,this.transaction=this;const n=this._metadata.dynamicSamplingContext;n&&(this._frozenDynamicSamplingContext={...n})}get name(){return this._name}set name(e){this.setName(e)}get metadata(){return{source:"custom",spanMetadata:{},...this._metadata,...this._attributes[Qr]&&{source:this._attributes[Qr]},...this._attributes[es]&&{sampleRate:this._attributes[es]}}}set metadata(e){this._metadata=e}setName(e,t="custom"){this._name=e,this.setAttribute(Qr,t)}updateName(e){return this._name=e,this}initSpanRecorder(e=1e3){this.spanRecorder||(this.spanRecorder=new rs(e)),this.spanRecorder.add(this)}setContext(e,t){null===t?delete this._contexts[e]:this._contexts[e]=t}setMeasurement(e,t,n=""){this._measurements[e]={value:t,unit:n}}setMetadata(e){this._metadata={...this._metadata,...e}}end(e){const t=Kn(e),n=this._finishTransaction(t);if(n)return this._hub.captureEvent(n)}toContext(){return Xe({...super.toContext(),name:this._name,trimEnd:this._trimEnd})}updateWithContext(e){return super.updateWithContext(e),this._name=e.name||"",this._trimEnd=e.trimEnd,this}getDynamicSamplingContext(){return fr(this)}setHub(e){this._hub=e}getProfileId(){if(void 0!==this._contexts&&void 0!==this._contexts.profile)return this._contexts.profile.profile_id}_finishTransaction(e){if(void 0!==this._endTime)return;this._name||(Un&&Me.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>"),super.end(e);const t=this._hub.getClient();if(t&&t.emit&&t.emit("finishTransaction",this),!0!==this._sampled)return Un&&Me.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled."),void(t&&t.recordDroppedEvent("sample_rate","transaction"));const n=this.spanRecorder?this.spanRecorder.spans.filter((e=>e!==this&&Jn(e).timestamp)):[];if(this._trimEnd&&n.length>0){const e=n.map((e=>Jn(e).timestamp)).filter(Boolean);this._endTime=e.reduce(((e,t)=>e>t?e:t))}const{scope:r,isolationScope:s}={scope:(a=this)[Yr],isolationScope:a[Kr]};var a;const{metadata:o}=this,{source:i}=o,c={contexts:{...this._contexts,trace:zn(this)},spans:n,start_timestamp:this._startTime,tags:this.tags,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{...o,capturedSpanScope:r,capturedSpanIsolationScope:s,...Xe({dynamicSamplingContext:fr(this)})},_metrics_summary:Zr(this),...i&&{transaction_info:{source:i}}};return Object.keys(this._measurements).length>0&&(Un&&Me.log("[Measurements] Adding measurements to transaction",JSON.stringify(this._measurements,void 0,2)),c.measurements=this._measurements),Un&&Me.log(`[Tracing] Finishing ${this.op} transaction: ${this._name}.`),c}}const os={idleTimeout:1e3,finalTimeout:3e4,heartbeatInterval:5e3},is=["heartbeatFailed","idleTimeout","documentHidden","finalTimeout","externalFinish","cancelled"];class cs extends rs{constructor(e,t,n,r){super(r),this._pushActivity=e,this._popActivity=t,this.transactionSpanId=n}add(e){if(e.spanContext().spanId!==this.transactionSpanId){const t=e.end;e.end=(...n)=>(this._popActivity(e.spanContext().spanId),t.apply(e,n)),void 0===Jn(e).timestamp&&this._pushActivity(e.spanContext().spanId)}super.add(e)}}class ls extends as{constructor(e,t,n=os.idleTimeout,r=os.finalTimeout,s=os.heartbeatInterval,a=!1,o=!1){super(e,t),this._idleHub=t,this._idleTimeout=n,this._finalTimeout=r,this._heartbeatInterval=s,this._onScope=a,this.activities={},this._heartbeatCounter=0,this._finished=!1,this._idleTimeoutCanceledPermanently=!1,this._beforeFinishCallbacks=[],this._finishReason=is[4],this._autoFinishAllowed=!o,a&&(Un&&Me.log(`Setting idle transaction on scope. Span ID: ${this.spanContext().spanId}`),t.getScope().setSpan(this)),o||this._restartIdleTimeout(),setTimeout((()=>{this._finished||(this.setStatus("deadline_exceeded"),this._finishReason=is[3],this.end())}),this._finalTimeout)}end(e){const t=Kn(e);if(this._finished=!0,this.activities={},"ui.action.click"===this.op&&this.setAttribute("finishReason",this._finishReason),this.spanRecorder){Un&&Me.log("[Tracing] finishing IdleTransaction",new Date(1e3*t).toISOString(),this.op);for(const e of this._beforeFinishCallbacks)e(this,t);this.spanRecorder.spans=this.spanRecorder.spans.filter((e=>{if(e.spanContext().spanId===this.spanContext().spanId)return!0;Jn(e).timestamp||(e.setStatus("cancelled"),e.end(t),Un&&Me.log("[Tracing] cancelling span since transaction ended early",JSON.stringify(e,void 0,2)));const{start_timestamp:n,timestamp:r}=Jn(e),s=n&&n<t,a=(this._finalTimeout+this._idleTimeout)/1e3,o=r&&n&&r-n<a;if(Un){const t=JSON.stringify(e,void 0,2);s?o||Me.log("[Tracing] discarding Span since it finished after Transaction final timeout",t):Me.log("[Tracing] discarding Span since it happened after Transaction was finished",t)}return s&&o})),Un&&Me.log("[Tracing] flushing IdleTransaction")}else Un&&Me.log("[Tracing] No active IdleTransaction");if(this._onScope){const e=this._idleHub.getScope();e.getTransaction()===this&&e.setSpan(void 0)}return super.end(e)}registerBeforeFinishCallback(e){this._beforeFinishCallbacks.push(e)}initSpanRecorder(e){if(!this.spanRecorder){const t=e=>{this._finished||this._pushActivity(e)},n=e=>{this._finished||this._popActivity(e)};this.spanRecorder=new cs(t,n,this.spanContext().spanId,e),Un&&Me.log("Starting heartbeat"),this._pingHeartbeat()}this.spanRecorder.add(this)}cancelIdleTimeout(e,{restartOnChildSpanChange:t}={restartOnChildSpanChange:!0}){this._idleTimeoutCanceledPermanently=!1===t,this._idleTimeoutID&&(clearTimeout(this._idleTimeoutID),this._idleTimeoutID=void 0,0===Object.keys(this.activities).length&&this._idleTimeoutCanceledPermanently&&(this._finishReason=is[5],this.end(e)))}setFinishReason(e){this._finishReason=e}sendAutoFinishSignal(){this._autoFinishAllowed||(Un&&Me.log("[Tracing] Received finish signal for idle transaction."),this._restartIdleTimeout(),this._autoFinishAllowed=!0)}_restartIdleTimeout(e){this.cancelIdleTimeout(),this._idleTimeoutID=setTimeout((()=>{this._finished||0!==Object.keys(this.activities).length||(this._finishReason=is[1],this.end(e))}),this._idleTimeout)}_pushActivity(e){this.cancelIdleTimeout(void 0,{restartOnChildSpanChange:!this._idleTimeoutCanceledPermanently}),Un&&Me.log(`[Tracing] pushActivity: ${e}`),this.activities[e]=!0,Un&&Me.log("[Tracing] new activities count",Object.keys(this.activities).length)}_popActivity(e){if(this.activities[e]&&(Un&&Me.log(`[Tracing] popActivity ${e}`),delete this.activities[e],Un&&Me.log("[Tracing] new activities count",Object.keys(this.activities).length)),0===Object.keys(this.activities).length){const e=ln();this._idleTimeoutCanceledPermanently?this._autoFinishAllowed&&(this._finishReason=is[5],this.end(e)):this._restartIdleTimeout(e+this._idleTimeout/1e3)}}_beat(){if(this._finished)return;const e=Object.keys(this.activities).join("");e===this._prevHeartbeatString?this._heartbeatCounter++:this._heartbeatCounter=1,this._prevHeartbeatString=e,this._heartbeatCounter>=3?this._autoFinishAllowed&&(Un&&Me.log("[Tracing] Transaction finished because of no change for 3 heart beats"),this.setStatus("deadline_exceeded"),this._finishReason=is[0],this.end()):this._pingHeartbeat()}_pingHeartbeat(){Un&&Me.log(`pinging Heartbeat -> current counter: ${this._heartbeatCounter}`),setTimeout((()=>{this._beat()}),this._heartbeatInterval)}}function us(e,t,n){if(!Wr(t))return e.sampled=!1,e;if(void 0!==e.sampled)return e.setAttribute(es,Number(e.sampled)),e;let r;return"function"==typeof t.tracesSampler?(r=t.tracesSampler(n),e.setAttribute(es,Number(r))):void 0!==n.parentSampled?r=n.parentSampled:void 0!==t.tracesSampleRate?(r=t.tracesSampleRate,e.setAttribute(es,Number(r))):(r=1,e.setAttribute(es,r)),ds(r)?r?(e.sampled=Math.random()<r,e.sampled?(Un&&Me.log(`[Tracing] starting ${e.op} transaction - ${Jn(e).description}`),e):(Un&&Me.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(r)})`),e)):(Un&&Me.log("[Tracing] Discarding transaction because "+("function"==typeof t.tracesSampler?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0")),e.sampled=!1,e):(Un&&Me.warn("[Tracing] Discarding transaction because of invalid sample rate."),e.sampled=!1,e)}function ds(e){return ue(e)||"number"!=typeof e&&"boolean"!=typeof e?(Un&&Me.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(e)} of type ${JSON.stringify(typeof e)}.`),!1):!(e<0||e>1)||(Un&&Me.warn(`[Tracing] Given sample rate is invalid. Sample rate must be between 0 and 1. Got ${e}.`),!1)}function ps(){const e=this.getScope().getSpan();return e?{"sentry-trace":Yn(e)}:{}}function hs(e,t){const n=this.getClient(),r=n&&n.getOptions()||{},s=r.instrumenter||"sentry",a=e.instrumenter||"sentry";s!==a&&(Un&&Me.error(`A transaction was started with instrumenter=\`${a}\`, but the SDK is configured with the \`${s}\` instrumenter.\nThe transaction will not be sampled. Please use the ${s} instrumentation to start transactions.`),e.sampled=!1);let o=new as(e,this);return o=us(o,r,{name:e.name,parentSampled:e.parentSampled,transactionContext:e,attributes:{...e.data,...e.attributes},...t}),o.isRecording()&&o.initSpanRecorder(r._experiments&&r._experiments.maxSpans),n&&n.emit&&n.emit("startTransaction",o),o}function gs(e,t,n,r,s,a,o,i=!1){const c=e.getClient(),l=c&&c.getOptions()||{};let u=new ls(t,e,n,r,o,s,i);return u=us(u,l,{name:t.name,parentSampled:t.parentSampled,transactionContext:t,attributes:{...t.data,...t.attributes},...a}),u.isRecording()&&u.initSpanRecorder(l._experiments&&l._experiments.maxSpans),c&&c.emit&&c.emit("startTransaction",u),u}function ms(){const e=Cr();e.__SENTRY__&&(e.__SENTRY__.extensions=e.__SENTRY__.extensions||{},e.__SENTRY__.extensions.startTransaction||(e.__SENTRY__.extensions.startTransaction=hs),e.__SENTRY__.extensions.traceHeaders||(e.__SENTRY__.extensions.traceHeaders=ps),Mr||(Mr=!0,Nt(Fr),Mt(Fr)))}function fs(e,t,n){const r=Dr();r&&r.setMeasurement(e,t,n)}function _s(e,t,n,r){const s=Ln(n),a=e.type&&"replay_event"!==e.type?e.type:"event";!function(e,t){t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]])}(e,n&&n.sdk);const o=An(e,s,r,t);delete e.sdkProcessingMetadata;return En(o,[[{type:a},e]])}const ys="7";function Ss(e){const t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}function Ts(e,t){return n={sentry_key:e.publicKey,sentry_version:ys,...t&&{sentry_client:`${t.name}/${t.version}`}},Object.keys(n).map((e=>`${encodeURIComponent(e)}=${encodeURIComponent(n[e])}`)).join("&");var n}function bs(e,t={}){const n="string"==typeof t?t:t.tunnel,r="string"!=typeof t&&t._metadata?t._metadata.sdk:void 0;return n||`${function(e){return`${Ss(e)}${e.projectId}/envelope/`}(e)}?${Ts(e,r)}`}const Es=[];function vs(e){const t=e.defaultIntegrations||[],n=e.integrations;let r;t.forEach((e=>{e.isDefaultInstance=!0})),r=Array.isArray(n)?[...t,...n]:"function"==typeof n?ft(n(t)):t;const s=function(e){const t={};return e.forEach((e=>{const{name:n}=e,r=t[n];r&&!r.isDefaultInstance&&e.isDefaultInstance||(t[n]=e)})),Object.keys(t).map((e=>t[e]))}(r),a=function(e,t){for(let n=0;n<e.length;n++)if(!0===t(e[n]))return n;return-1}(s,(e=>"Debug"===e.name));if(-1!==a){const[e]=s.splice(a,1);s.push(e)}return s}function ws(e,t){for(const n of t)n&&n.afterAllSetup&&n.afterAllSetup(e)}function Is(e,t,n){if(n[t.name])Un&&Me.log(`Integration skipped because it was already installed: ${t.name}`);else{if(n[t.name]=t,-1===Es.indexOf(t.name)&&(t.setupOnce(jn,xr),Es.push(t.name)),t.setup&&"function"==typeof t.setup&&t.setup(e),e.on&&"function"==typeof t.preprocessEvent){const n=t.preprocessEvent.bind(t);e.on("preprocessEvent",((t,r)=>n(t,r,e)))}if(e.addEventProcessor&&"function"==typeof t.processEvent){const n=t.processEvent.bind(t),r=Object.assign(((t,r)=>n(t,r,e)),{id:t.name});e.addEventProcessor(r)}Un&&Me.log(`Integration installed: ${t.name}`)}}function ks(e,t){return Object.assign((function(...e){return t(...e)}),{id:e})}const Cs=/[^a-zA-Z0-9_/.-]+/g,Rs=/[^\w\d\s_:/@.{}[\]$-]+/g;function xs(e,t,n,r){const s={sent_at:(new Date).toISOString()};n&&n.sdk&&(s.sdk={name:n.sdk.name,version:n.sdk.version}),r&&t&&(s.dsn=Ue(t));const a=function(e){const t=function(e){let t="";for(const n of e){const e=Object.entries(n.tags),r=e.length>0?`|#${e.map((([e,t])=>`${e}:${t}`)).join(",")}`:"";t+=`${n.name}@${n.unit}:${n.metric}|${n.metricType}${r}|T${n.timestamp}\n`}return t}(e);return[{type:"statsd",length:t.length},t]}(e);return En(s,[a])}const Ls="Not capturing exception because it's already been captured.";class As{constructor(e){if(this._options=e,this._integrations={},this._integrationsInitialized=!1,this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],e.dsn?this._dsn=je(e.dsn):Un&&Me.warn("No DSN provided, client will not send events."),this._dsn){const t=bs(this._dsn,e);this._transport=e.transport({recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:t})}}captureException(e,t,n){if(mt(e))return void(Un&&Me.log(Ls));let r=t&&t.event_id;return this._process(this.eventFromException(e,t).then((e=>this._captureEvent(e,t,n))).then((e=>{r=e}))),r}captureMessage(e,t,n,r){let s=n&&n.event_id;const a=ae(e)?e:String(e),o=oe(e)?this.eventFromMessage(a,t,n):this.eventFromException(e,n);return this._process(o.then((e=>this._captureEvent(e,n,r))).then((e=>{s=e}))),s}captureEvent(e,t,n){if(t&&t.originalException&&mt(t.originalException))return void(Un&&Me.log(Ls));let r=t&&t.event_id;const s=(e.sdkProcessingMetadata||{}).capturedSpanScope;return this._process(this._captureEvent(e,t,s||n).then((e=>{r=e}))),r}captureSession(e){"string"!=typeof e.release?Un&&Me.warn("Discarded session because of missing or non-string release"):(this.sendSession(e),Hn(e,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(e){const t=this._transport;return t?(this.metricsAggregator&&this.metricsAggregator.flush(),this._isClientDoneProcessing(e).then((n=>t.flush(e).then((e=>n&&e))))):Qt(!0)}close(e){return this.flush(e).then((e=>(this.getOptions().enabled=!1,this.metricsAggregator&&this.metricsAggregator.close(),e)))}getEventProcessors(){return this._eventProcessors}addEventProcessor(e){this._eventProcessors.push(e)}setupIntegrations(e){(e&&!this._integrationsInitialized||this._isEnabled()&&!this._integrationsInitialized)&&this._setupIntegrations()}init(){this._isEnabled()&&this._setupIntegrations()}getIntegrationById(e){return this.getIntegrationByName(e)}getIntegrationByName(e){return this._integrations[e]}getIntegration(e){try{return this._integrations[e.id]||null}catch(t){return Un&&Me.warn(`Cannot retrieve integration ${e.id} from the current Client`),null}}addIntegration(e){const t=this._integrations[e.name];Is(this,e,this._integrations),t||ws(this,[e])}sendEvent(e,t={}){this.emit("beforeSendEvent",e,t);let n=_s(e,this._dsn,this._options._metadata,this._options.tunnel);for(const e of t.attachments||[])n=vn(n,Cn(e,this._options.transportOptions&&this._options.transportOptions.textEncoder));const r=this._sendEnvelope(n);r&&r.then((t=>this.emit("afterSendEvent",e,t)),null)}sendSession(e){const t=function(e,t,n,r){const s=Ln(n);return En({sent_at:(new Date).toISOString(),...s&&{sdk:s},...!!r&&t&&{dsn:Ue(t)}},["aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()]])}(e,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(t)}recordDroppedEvent(e,t,n){if(this._options.sendClientReports){const n=`${e}:${t}`;Un&&Me.log(`Adding outcome: "${n}"`),this._outcomes[n]=this._outcomes[n]+1||1}}captureAggregateMetrics(e){Un&&Me.log(`Flushing aggregated metrics, number of metrics: ${e.length}`);const t=xs(e,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(t)}on(e,t){this._hooks[e]||(this._hooks[e]=[]),this._hooks[e].push(t)}emit(e,...t){this._hooks[e]&&this._hooks[e].forEach((e=>e(...t)))}_setupIntegrations(){const{integrations:e}=this._options;this._integrations=function(e,t){const n={};return t.forEach((t=>{t&&Is(e,t,n)})),n}(this,e),ws(this,e),this._integrationsInitialized=!0}_updateSessionFromEvent(e,t){let n=!1,r=!1;const s=t.exception&&t.exception.values;if(s){r=!0;for(const e of s){const t=e.mechanism;if(t&&!1===t.handled){n=!0;break}}}const a="ok"===e.status;(a&&0===e.errors||a&&n)&&(Hn(e,{...n&&{status:"crashed"},errors:e.errors||Number(r||n)}),this.captureSession(e))}_isClientDoneProcessing(e){return new tn((t=>{let n=0;const r=setInterval((()=>{0==this._numProcessing?(clearInterval(r),t(!0)):(n+=1,e&&n>=e&&(clearInterval(r),t(!1)))}),1)}))}_isEnabled(){return!1!==this.getOptions().enabled&&void 0!==this._transport}_prepareEvent(e,t,n,r=Lr()){const s=this.getOptions(),a=Object.keys(this._integrations);return!t.integrations&&a.length>0&&(t.integrations=a),this.emit("preprocessEvent",e,t),Qn(s,e,t,n,this,r).then((e=>{if(null===e)return e;const t={...r.getPropagationContext(),...n?n.getPropagationContext():void 0};if(!(e.contexts&&e.contexts.trace)&&t){const{traceId:r,spanId:s,parentSpanId:a,dsc:o}=t;e.contexts={trace:{trace_id:r,span_id:s,parent_span_id:a},...e.contexts};const i=o||mr(r,this,n);e.sdkProcessingMetadata={dynamicSamplingContext:i,...e.sdkProcessingMetadata}}return e}))}_captureEvent(e,t={},n){return this._processEvent(e,t,n).then((e=>e.event_id),(e=>{if(Un){const t=e;"log"===t.logLevel?Me.log(t.message):Me.warn(t)}}))}_processEvent(e,t,n){const r=this.getOptions(),{sampleRate:s}=r,a=Ns(e),o=Os(e),i=e.type||"error",c=`before send for type \`${i}\``;if(o&&"number"==typeof s&&Math.random()>s)return this.recordDroppedEvent("sample_rate","error",e),en(new $e(`Discarding event because it's not included in the random sample (sampling rate = ${s})`,"log"));const l="replay_event"===i?"replay":i,u=(e.sdkProcessingMetadata||{}).capturedSpanIsolationScope;return this._prepareEvent(e,t,n,u).then((n=>{if(null===n)throw this.recordDroppedEvent("event_processor",l,e),new $e("An event processor returned `null`, will not send event.","log");if(t.data&&!0===t.data.__sentry__)return n;const s=function(e,t,n){const{beforeSend:r,beforeSendTransaction:s}=e;if(Os(t)&&r)return r(t,n);if(Ns(t)&&s)return s(t,n);return t}(r,n,t);return function(e,t){const n=`${t} must return \`null\` or a valid event.`;if(le(e))return e.then((e=>{if(!ie(e)&&null!==e)throw new $e(n);return e}),(e=>{throw new $e(`${t} rejected with ${e}`)}));if(!ie(e)&&null!==e)throw new $e(n);return e}(s,c)})).then((r=>{if(null===r)throw this.recordDroppedEvent("before_send",l,e),new $e(`${c} returned \`null\`, will not send event.`,"log");const s=n&&n.getSession();!a&&s&&this._updateSessionFromEvent(s,r);const o=r.transaction_info;if(a&&o&&r.transaction!==e.transaction){const e="custom";r.transaction_info={...o,source:e}}return this.sendEvent(r,t),r})).then(null,(e=>{if(e instanceof $e)throw e;throw this.captureException(e,{data:{__sentry__:!0},originalException:e}),new $e(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ${e}`)}))}_process(e){this._numProcessing++,e.then((e=>(this._numProcessing--,e)),(e=>(this._numProcessing--,e)))}_sendEnvelope(e){if(this.emit("beforeEnvelope",e),this._isEnabled()&&this._transport)return this._transport.send(e).then(null,(e=>{Un&&Me.error("Error while sending event:",e)}));Un&&Me.error("Transport disabled")}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.keys(e).map((t=>{const[n,r]=t.split(":");return{reason:n,category:r,quantity:e[t]}}))}}function Os(e){return void 0===e.type}function Ns(e){return"transaction"===e.type}function Ds(e){const t=cr();t&&t.addEventProcessor&&t.addEventProcessor(e)}const Ps={c:class{constructor(e){this._value=e}get weight(){return 1}add(e){this._value+=e}toString(){return`${this._value}`}},g:class{constructor(e){this._last=e,this._min=e,this._max=e,this._sum=e,this._count=1}get weight(){return 5}add(e){this._last=e,e<this._min&&(this._min=e),e>this._max&&(this._max=e),this._sum+=e,this._count++}toString(){return`${this._last}:${this._min}:${this._max}:${this._sum}:${this._count}`}},d:class{constructor(e){this._value=[e]}get weight(){return this._value.length}add(e){this._value.push(e)}toString(){return this._value.join(":")}},s:class{constructor(e){this.first=e,this._value=new Set([e])}get weight(){return this._value.size}add(e){this._value.add(e)}toString(){return Array.from(this._value).map((e=>"string"==typeof e?function(e){let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t&=t;return t>>>0}(e):e)).join(":")}}};function Ms(e){const t=xr().getStackTop();t.client=e,t.scope.setClient(e)}const Fs=30;function Us(e,t,n=nn(e.bufferSize||Fs)){let r={};function s(s){const a=[];if(wn(s,((t,n)=>{const s=xn(n);if(Dn(r,s)){const r=Bs(t,n);e.recordDroppedEvent("ratelimit_backoff",s,r)}else a.push(t)})),0===a.length)return Qt();const o=En(s[0],a),i=t=>{wn(o,((n,r)=>{const s=Bs(n,r);e.recordDroppedEvent(t,xn(r),s)}))};return n.add((()=>t({body:kn(o,e.textEncoder)}).then((e=>(void 0!==e.statusCode&&(e.statusCode<200||e.statusCode>=300)&&Un&&Me.warn(`Sentry responded with status code ${e.statusCode} to sent event.`),r=Pn(r,e),e)),(e=>{throw i("network_error"),e})))).then((e=>e),(e=>{if(e instanceof $e)return Un&&Me.error("Skipped sending event because buffer is full."),i("queue_overflow"),Qt();throw e}))}return s.__sentry__baseTransport__=!0,{send:s,flush:e=>n.drain(e)}}function Bs(e,t){if("event"===t||"transaction"===t)return Array.isArray(e)?e[1]:void 0}const Gs=100,js=5e3,$s=36e5;function Ws(e,t){Un&&Me.info(`[Offline]: ${e}`,t)}function Hs(e){return t=>{const n=e(t),r=t.createStore?t.createStore(t):void 0;let s,a=js;function o(e,n,r){return s=["replay_event","replay_recording","client_report"],!wn(e,((e,t)=>s.includes(t)))&&(!t.shouldStore||t.shouldStore(e,n,r));var s}function i(e){r&&(s&&clearTimeout(s),s=setTimeout((async()=>{s=void 0;const e=await r.pop();e&&(Ws("Attempting to send previously queued event"),l(e).catch((e=>{Ws("Failed to retry sending",e)})))}),e),"number"!=typeof s&&s.unref&&s.unref())}function c(){s||(i(a),a=Math.min(2*a,$s))}async function l(e){try{const t=await n.send(e);let r=Gs;if(t)if(t.headers&&t.headers["retry-after"])r=Nn(t.headers["retry-after"]);else if((t.statusCode||0)>=400)return t;return i(r),a=js,t}catch(t){if(r&&await o(e,t,a))return await r.insert(e),c(),Ws("Error sending. Event queued",t),{};throw t}}return t.flushAtStartup&&c(),{send:l,flush:e=>n.flush(e)}}}function qs(e,t){let n;return wn(e,((e,r)=>(t.includes(r)&&(n=Array.isArray(e)?e[1]:void 0),!!n))),n}function Vs(e){return[{type:"span"},e]}function zs(e,t){const n=t&&function(e){return void 0!==e.getClient}(t)?t.getClient():t,r=n&&n.getDsn(),s=n&&n.getOptions().tunnel;return function(e,t){return!!t&&e.includes(t.host)}(e,r)||function(e,t){if(!t)return!1;return Ys(e)===Ys(t)}(e,s)}function Ys(e){return"/"===e[e.length-1]?e.slice(0,-1):e}const Ks=new Map,Xs=new Set;function Js(e,t){return function(e){if(Ee._sentryModuleMetadata)for(const t of Object.keys(Ee._sentryModuleMetadata)){const n=Ee._sentryModuleMetadata[t];if(Xs.has(t))continue;Xs.add(t);const r=e(t);for(const e of r.reverse())if(e.filename){Ks.set(e.filename,n);break}}}(e),Ks.get(t)}const Zs="ModuleMetadata",Qs=()=>({name:Zs,setupOnce(){},setup(e){"function"==typeof e.on&&e.on("beforeEnvelope",(e=>{wn(e,((e,t)=>{if("event"===t){const t=Array.isArray(e)?e[1]:void 0;t&&(!function(e){try{e.exception.values.forEach((e=>{if(e.stacktrace)for(const t of e.stacktrace.frames||[])delete t.module_metadata}))}catch(e){}}(t),e[1]=t)}}))}))},processEvent:(e,t,n)=>(function(e,t){try{t.exception.values.forEach((t=>{if(t.stacktrace)for(const n of t.stacktrace.frames||[]){if(!n.filename)continue;const t=Js(e,n.filename);t&&(n.module_metadata=t)}}))}catch(e){}}(n.getOptions().stackParser,e),e)}),ea=ks(Zs,Qs),ta=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/],na=[/^.*\/healthcheck$/,/^.*\/healthy$/,/^.*\/live$/,/^.*\/ready$/,/^.*\/heartbeat$/,/^.*\/health$/,/^.*\/healthz$/],ra="InboundFilters",sa=(e={})=>({name:ra,setupOnce(){},processEvent(t,n,r){const s=r.getOptions(),a=function(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:ta],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[],...e.disableTransactionDefaults?[]:na],ignoreInternal:void 0===e.ignoreInternal||e.ignoreInternal}}(e,s);return function(e,t){if(t.ignoreInternal&&function(e){try{return"SentryError"===e.exception.values[0].type}catch(e){}return!1}(e))return Un&&Me.warn(`Event dropped due to being internal Sentry Error.\nEvent: ${pt(e)}`),!0;if(function(e,t){if(e.type||!t||!t.length)return!1;return function(e){const t=[];e.message&&t.push(e.message);let n;try{n=e.exception.values[e.exception.values.length-1]}catch(e){}n&&n.value&&(t.push(n.value),n.type&&t.push(`${n.type}: ${n.value}`));Un&&0===t.length&&Me.error(`Could not extract message for event ${pt(e)}`);return t}(e).some((e=>fe(e,t)))}(e,t.ignoreErrors))return Un&&Me.warn(`Event dropped due to being matched by \`ignoreErrors\` option.\nEvent: ${pt(e)}`),!0;if(function(e,t){if("transaction"!==e.type||!t||!t.length)return!1;const n=e.transaction;return!!n&&fe(n,t)}(e,t.ignoreTransactions))return Un&&Me.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.\nEvent: ${pt(e)}`),!0;if(function(e,t){if(!t||!t.length)return!1;const n=oa(e);return!!n&&fe(n,t)}(e,t.denyUrls))return Un&&Me.warn(`Event dropped due to being matched by \`denyUrls\` option.\nEvent: ${pt(e)}.\nUrl: ${oa(e)}`),!0;if(!function(e,t){if(!t||!t.length)return!0;const n=oa(e);return!n||fe(n,t)}(e,t.allowUrls))return Un&&Me.warn(`Event dropped due to not being matched by \`allowUrls\` option.\nEvent: ${pt(e)}.\nUrl: ${oa(e)}`),!0;return!1}(t,a)?null:t}}),aa=ks(ra,sa);function oa(e){try{let t;try{t=e.exception.values[0].stacktrace.frames}catch(e){}return t?function(e=[]){for(let t=e.length-1;t>=0;t--){const n=e[t];if(n&&"<anonymous>"!==n.filename&&"[native code]"!==n.filename)return n.filename||null}return null}(t):null}catch(t){return Un&&Me.error(`Cannot extract url for event ${pt(e)}`),null}}let ia;const ca="FunctionToString",la=new WeakMap,ua=()=>({name:ca,setupOnce(){ia=Function.prototype.toString;try{Function.prototype.toString=function(...e){const t=Ve(this),n=la.has(cr())&&void 0!==t?t:this;return ia.apply(n,e)}}catch(e){}},setup(e){la.set(e,!0)}}),da=ks(ca,ua),pa="LinkedErrors",ha=ks(pa,((e={})=>{const t=e.limit||5,n=e.key||"cause";return{name:pa,setupOnce(){},preprocessEvent(e,r,s){const a=s.getOptions();_e(Mn,a.stackParser,a.maxValueLength,n,t,e,r)}}}));var ga=Object.freeze({__proto__:null,FunctionToString:da,InboundFilters:aa,LinkedErrors:ha});class ma{constructor(e){this._client=e,this._buckets=new Map,this._interval=setInterval((()=>this.flush()),5e3)}add(e,t,n,r="none",s={},a=ln()){const o=Math.floor(a),i=t.replace(Cs,"_"),c=function(e){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n.replace(Cs,"_")]=String(e[n]).replace(Rs,""));return t}(s),l=function(e,t,n,r){return`${e}${t}${n}${Object.entries(Xe(r)).sort(((e,t)=>e[0].localeCompare(t[0])))}`}(e,i,r,c);let u=this._buckets.get(l);const d=u&&"s"===e?u.metric.weight:0;u?(u.metric.add(n),u.timestamp<o&&(u.timestamp=o)):(u={metric:new Ps[e](n),timestamp:o,metricType:e,name:i,unit:r,tags:c},this._buckets.set(l,u));!function(e,t,n,r,s,a){const o=qr();if(o){const i=Jr(o)||new Map,c=`${e}:${t}@${r}`,l=i.get(a);if(l){const[,e]=l;i.set(a,[c,{min:Math.min(e.min,n),max:Math.max(e.max,n),count:e.count+=1,sum:e.sum+=n,tags:e.tags}])}else i.set(a,[c,{min:n,max:n,count:1,sum:n,tags:s}]);Xr||(Xr=new WeakMap),Xr.set(o,i)}}(e,i,"string"==typeof n?u.metric.weight-d:n,r,s,l)}flush(){if(0!==this._buckets.size){if(this._client.captureAggregateMetrics){const e=Array.from(this._buckets).map((([,e])=>e));this._client.captureAggregateMetrics(e)}this._buckets.clear()}}close(){clearInterval(this._interval),this.flush()}}const fa="MetricsAggregator",_a=()=>({name:fa,setupOnce(){},setup(e){e.metricsAggregator=new ma(e)}});function ya(e,t,n,r={}){const s=cr(),a=lr();if(s){if(!s.metricsAggregator)return void(Un&&Me.warn("No metrics aggregator enabled. Please add the MetricsAggregator integration to use metrics APIs"));const{unit:o,tags:i,timestamp:c}=r,{release:l,environment:u}=s.getOptions(),d=a.getTransaction(),p={};l&&(p.release=l),u&&(p.environment=u),d&&(p.transaction=Jn(d).description||""),Un&&Me.log(`Adding value of ${n} to ${e} metric ${t}`),s.metricsAggregator.add(e,t,n,o,{...p,...i},c)}}const Sa={increment:function(e,t=1,n){ya("c",e,t,n)},distribution:function(e,t,n){ya("d",e,t,n)},set:function(e,t,n){ya("s",e,t,n)},gauge:function(e,t,n){ya("g",e,t,n)},MetricsAggregator:ks(fa,_a),metricsAggregatorIntegration:_a},Ta=ga,ba="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,Ea=Ee;function va(){Ea&&Ea.document?Ea.document.addEventListener("visibilitychange",(()=>{const e=Dr();if(Ea.document.hidden&&e){const t="cancelled",{op:n,status:r}=Jn(e);ba&&Me.log(`[Tracing] Transaction: ${t} -> since tab moved to the background, op: ${n}`),r||e.setStatus(t),e.setTag("visibilitychange","document.hidden"),e.end()}})):ba&&Me.warn("[Tracing] Could not set up background tab detection due to lack of global document")}const wa=(e,t,n)=>{let r,s;return a=>{t.value>=0&&(a||n)&&(s=t.value-(r||0),(s||void 0===r)&&(r=t.value,t.delta=s,e(t)))}},Ia=()=>Ea.__WEB_VITALS_POLYFILL__?Ea.performance&&(performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]||(()=>{const e=Ea.performance.timing,t=Ea.performance.navigation.type,n={entryType:"navigation",startTime:0,type:2==t?"back_forward":1===t?"reload":"navigate"};for(const t in e)"navigationStart"!==t&&"toJSON"!==t&&(n[t]=Math.max(e[t]-e.navigationStart,0));return n})()):Ea.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0],ka=()=>{const e=Ia();return e&&e.activationStart||0},Ca=(e,t)=>{const n=Ia();let r="navigate";return n&&(r=Ea.document.prerendering||ka()>0?"prerender":n.type.replace(/_/g,"-")),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:`v3-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:r}},Ra=(e,t,n)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){const r=new PerformanceObserver((e=>{t(e.getEntries())}));return r.observe(Object.assign({type:e,buffered:!0},n||{})),r}}catch(e){}},xa=(e,t)=>{const n=r=>{"pagehide"!==r.type&&"hidden"!==Ea.document.visibilityState||(e(r),t&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))};addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0)},La=e=>{const t=Ca("CLS",0);let n,r=0,s=[];const a=e=>{e.forEach((e=>{if(!e.hadRecentInput){const a=s[0],o=s[s.length-1];r&&0!==s.length&&e.startTime-o.startTime<1e3&&e.startTime-a.startTime<5e3?(r+=e.value,s.push(e)):(r=e.value,s=[e]),r>t.value&&(t.value=r,t.entries=s,n&&n())}}))},o=Ra("layout-shift",a);if(o){n=wa(e,t);const r=()=>{a(o.takeRecords()),n(!0)};return xa(r),r}};let Aa=-1;const Oa=()=>(Aa<0&&(Aa="hidden"!==Ea.document.visibilityState||Ea.document.prerendering?1/0:0,xa((({timeStamp:e})=>{Aa=e}),!0)),{get firstHiddenTime(){return Aa}}),Na=e=>{const t=Oa(),n=Ca("FID");let r;const s=e=>{e.startTime<t.firstHiddenTime&&(n.value=e.processingStart-e.startTime,n.entries.push(e),r(!0))},a=e=>{e.forEach(s)},o=Ra("first-input",a);r=wa(e,n),o&&xa((()=>{a(o.takeRecords()),o.disconnect()}),!0)};let Da=0,Pa=1/0,Ma=0;const Fa=e=>{e.forEach((e=>{e.interactionId&&(Pa=Math.min(Pa,e.interactionId),Ma=Math.max(Ma,e.interactionId),Da=Ma?(Ma-Pa)/7+1:0)}))};let Ua;const Ba=()=>{"interactionCount"in performance||Ua||(Ua=Ra("event",Fa,{type:"event",buffered:!0,durationThreshold:0}))},Ga=()=>Ua?Da:performance.interactionCount||0,ja=[],$a={},Wa=e=>{const t=ja[ja.length-1],n=$a[e.interactionId];if(n||ja.length<10||e.duration>t.latency){if(n)n.entries.push(e),n.latency=Math.max(n.latency,e.duration);else{const t={id:e.interactionId,latency:e.duration,entries:[e]};$a[t.id]=t,ja.push(t)}ja.sort(((e,t)=>t.latency-e.latency)),ja.splice(10).forEach((e=>{delete $a[e.id]}))}},Ha=(e,t)=>{t=t||{},Ba();const n=Ca("INP");let r;const s=e=>{e.forEach((e=>{if(e.interactionId&&Wa(e),"first-input"===e.entryType){!ja.some((t=>t.entries.some((t=>e.duration===t.duration&&e.startTime===t.startTime))))&&Wa(e)}}));const t=(()=>{const e=Math.min(ja.length-1,Math.floor(Ga()/50));return ja[e]})();t&&t.latency!==n.value&&(n.value=t.latency,n.entries=t.entries,r())},a=Ra("event",s,{durationThreshold:t.durationThreshold||40});r=wa(e,n,t.reportAllChanges),a&&(a.observe({type:"first-input",buffered:!0}),xa((()=>{s(a.takeRecords()),n.value<0&&Ga()>0&&(n.value=0,n.entries=[]),r(!0)})))},qa={},Va=e=>{const t=Oa(),n=Ca("LCP");let r;const s=e=>{const s=e[e.length-1];if(s){const e=Math.max(s.startTime-ka(),0);e<t.firstHiddenTime&&(n.value=e,n.entries=[s],r())}},a=Ra("largest-contentful-paint",s);if(a){r=wa(e,n);const t=()=>{qa[n.id]||(s(a.takeRecords()),a.disconnect(),qa[n.id]=!0,r(!0))};return["keydown","click"].forEach((e=>{addEventListener(e,t,{once:!0,capture:!0})})),xa(t,!0),t}},za={},Ya={};let Ka,Xa,Ja,Za;function Qa(e,t=!1){return oo("lcp",e,so,Ja,t)}function eo(e,t){return io(e,t),Ya[e]||(!function(e){const t={};"event"===e&&(t.durationThreshold=0);Ra(e,(t=>{to(e,{entries:t})}),t)}(e),Ya[e]=!0),co(e,t)}function to(e,t){const n=za[e];if(n&&n.length)for(const r of n)try{r(t)}catch(t){ba&&Me.error(`Error while triggering instrumentation handler.\nType: ${e}\nName: ${rt(r)}\nError:`,t)}}function no(){return La((e=>{to("cls",{metric:e}),Ka=e}))}function ro(){return Na((e=>{to("fid",{metric:e}),Xa=e}))}function so(){return Va((e=>{to("lcp",{metric:e}),Ja=e}))}function ao(){return Ha((e=>{to("inp",{metric:e}),Za=e}))}function oo(e,t,n,r,s=!1){let a;return io(e,t),Ya[e]||(a=n(),Ya[e]=!0),r&&t({metric:r}),co(e,t,s?a:void 0)}function io(e,t){za[e]=za[e]||[],za[e].push(t)}function co(e,t,n){return()=>{n&&n();const r=za[e];if(!r)return;const s=r.indexOf(t);-1!==s&&r.splice(s,1)}}function lo(e){return"number"==typeof e&&isFinite(e)}function uo(e,{startTimestamp:t,...n}){return t&&e.startTimestamp>t&&(e.startTimestamp=t),e.startChild({startTimestamp:t,...n})}const po=2147483647;function ho(e){return e/1e3}function go(){return Ea&&Ea.addEventListener&&Ea.performance}let mo,fo,_o=0,yo={};function So(){const e=go();if(e&&un){e.mark&&Ea.performance.mark("sentry-tracing-init");const t=oo("fid",(({metric:e})=>{const t=e.entries[e.entries.length-1];if(!t)return;const n=ho(un),r=ho(t.startTime);ba&&Me.log("[Measurements] Adding FID"),yo.fid={value:e.value,unit:"millisecond"},yo["mark.fid"]={value:n+r,unit:"second"}}),ro,Xa),n=function(e,t=!1){return oo("cls",e,no,Ka,t)}((({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(ba&&Me.log("[Measurements] Adding CLS"),yo.cls={value:e.value,unit:""},fo=t)}),!0),r=Qa((({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(ba&&Me.log("[Measurements] Adding LCP"),yo.lcp={value:e.value,unit:"millisecond"},mo=t)}),!0);return()=>{t(),n(),r()}}return()=>{}}function To(){eo("longtask",(({entries:e})=>{for(const t of e){const e=Dr();if(!e)return;const n=ho(un+t.startTime),r=ho(t.duration);e.startChild({description:"Main UI thread blocked",op:"ui.long-task",origin:"auto.ui.browser.metrics",startTimestamp:n,endTimestamp:n+r})}}))}function bo(){eo("event",(({entries:e})=>{for(const t of e){const e=Dr();if(!e)return;if("click"===t.name){const n=ho(un+t.startTime),r=ho(t.duration),s={description:Ce(t.target),op:`ui.interaction.${t.name}`,origin:"auto.ui.browser.metrics",startTimestamp:n,endTimestamp:n+r},a=Ae(t.target);a&&(s.attributes={"ui.component_name":a}),e.startChild(s)}}}))}function Eo(e){if(go()&&un){const t=function(e){return t=({metric:t})=>{const n=t.entries.find((e=>"click"===e.name||"pointerdown"===e.name)),r=cr();if(!n||!r)return;const s=r.getOptions(),a=ho(un+n.startTime),o=ho(t.value),{routeName:i,parentContext:c,activeTransaction:l,user:u,replayId:d}=void 0!==n.interactionId?e[n.interactionId]:{routeName:void 0,parentContext:void 0,activeTransaction:void 0,user:void 0,replayId:void 0},p=void 0!==u?u.email||u.id||u.ip_address:void 0,h=void 0!==l?l.getProfileId():void 0,g=new ss({startTimestamp:a,endTimestamp:a+o,op:"ui.interaction.click",name:Ce(n.target),attributes:{release:s.release,environment:s.environment,transaction:i,...void 0!==p&&""!==p?{user:p}:{},...void 0!==h?{profile_id:h}:{},...void 0!==d?{replay_id:d}:{}},exclusiveTime:t.value,measurements:{inp:{value:t.value,unit:"millisecond"}}}),m=function(e,t){if(!Wr(t))return!1;let n;return n=void 0!==e&&"function"==typeof t.tracesSampler?t.tracesSampler({transactionContext:e,name:e.name,parentSampled:e.parentSampled,attributes:{...e.data,...e.attributes},location:Ea.location}):void 0!==e&&void 0!==e.sampled?e.sampled:void 0!==t.tracesSampleRate?t.tracesSampleRate:1,ds(n)?n:(ba&&Me.warn("[Tracing] Discarding transaction because of invalid sample rate."),!1)}(c,s);if(m&&Math.random()<m){const e=g?function(e,t){const n={sent_at:(new Date).toISOString()};return t&&(n.dsn=Ue(t)),En(n,e.map(Vs))}([g],r.getDsn()):void 0,t=r&&r.getTransport();t&&e&&t.send(e).then(null,(e=>{ba&&Me.error("Error while sending interaction:",e)}))}},oo("inp",t,ao,Za);var t}(e);return()=>{t()}}return()=>{}}function vo(e){const t=go();if(!t||!Ea.performance.getEntries||!un)return;ba&&Me.log("[Tracing] Adding & adjusting spans using Performance API");const n=ho(un),r=t.getEntries();let s,a;const{op:o,start_timestamp:i}=Jn(e);if(r.slice(_o).forEach((t=>{const r=ho(t.startTime),o=ho(t.duration);if(!("navigation"===e.op&&i&&n+r<i))switch(t.entryType){case"navigation":!function(e,t,n){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach((r=>{wo(e,t,r,n)})),wo(e,t,"secureConnection",n,"TLS/SSL","connectEnd"),wo(e,t,"fetch",n,"cache","domainLookupStart"),wo(e,t,"domainLookup",n,"DNS"),function(e,t,n){t.responseEnd&&(uo(e,{op:"browser",origin:"auto.browser.browser.metrics",description:"request",startTimestamp:n+ho(t.requestStart),endTimestamp:n+ho(t.responseEnd)}),uo(e,{op:"browser",origin:"auto.browser.browser.metrics",description:"response",startTimestamp:n+ho(t.responseStart),endTimestamp:n+ho(t.responseEnd)}))}(e,t,n)}(e,t,n),s=n+ho(t.responseStart),a=n+ho(t.requestStart);break;case"mark":case"paint":case"measure":{!function(e,t,n,r,s){const a=s+n,o=a+r;uo(e,{description:t.name,endTimestamp:o,op:t.entryType,origin:"auto.resource.browser.metrics",startTimestamp:a})}(e,t,r,o,n);const s=Oa(),a=t.startTime<s.firstHiddenTime;"first-paint"===t.name&&a&&(ba&&Me.log("[Measurements] Adding FP"),yo.fp={value:t.startTime,unit:"millisecond"}),"first-contentful-paint"===t.name&&a&&(ba&&Me.log("[Measurements] Adding FCP"),yo.fcp={value:t.startTime,unit:"millisecond"});break}case"resource":!function(e,t,n,r,s,a){if("xmlhttprequest"===t.initiatorType||"fetch"===t.initiatorType)return;const o=rn(n),i={};Io(i,t,"transferSize","http.response_transfer_size"),Io(i,t,"encodedBodySize","http.response_content_length"),Io(i,t,"decodedBodySize","http.decoded_response_content_length"),"renderBlockingStatus"in t&&(i["resource.render_blocking_status"]=t.renderBlockingStatus);o.protocol&&(i["url.scheme"]=o.protocol.split(":").pop());o.host&&(i["server.address"]=o.host);i["url.same_origin"]=n.includes(Ea.location.origin);const c=a+r,l=c+s;uo(e,{description:n.replace(Ea.location.origin,""),endTimestamp:l,op:t.initiatorType?`resource.${t.initiatorType}`:"resource.other",origin:"auto.resource.browser.metrics",startTimestamp:c,data:i})}(e,t,t.name,r,o,n)}})),_o=Math.max(r.length-1,0),function(e){const t=Ea.navigator;if(!t)return;const n=t.connection;n&&(n.effectiveType&&e.setTag("effectiveConnectionType",n.effectiveType),n.type&&e.setTag("connectionType",n.type),lo(n.rtt)&&(yo["connection.rtt"]={value:n.rtt,unit:"millisecond"}));lo(t.deviceMemory)&&e.setTag("deviceMemory",`${t.deviceMemory} GB`);lo(t.hardwareConcurrency)&&e.setTag("hardwareConcurrency",String(t.hardwareConcurrency))}(e),"pageload"===o){!function(e,t,n,r){"number"==typeof t&&r&&(ba&&Me.log("[Measurements] Adding TTFB"),e.ttfb={value:1e3*Math.max(t-r,0),unit:"millisecond"},"number"==typeof n&&n<=t&&(e["ttfb.requestTime"]={value:1e3*(t-n),unit:"millisecond"}))}(yo,s,a,i),["fcp","fp","lcp"].forEach((e=>{if(!yo[e]||!i||n>=i)return;const t=yo[e].value,r=n+ho(t),s=Math.abs(1e3*(r-i)),a=s-t;ba&&Me.log(`[Measurements] Normalized ${e} from ${t} to ${s} (${a})`),yo[e].value=s}));const t=yo["mark.fid"];t&&yo.fid&&(uo(e,{description:"first input delay",endTimestamp:t.value+ho(yo.fid.value),op:"ui.action",origin:"auto.ui.browser.metrics",startTimestamp:t.value}),delete yo["mark.fid"]),"fcp"in yo||delete yo.cls,Object.keys(yo).forEach((e=>{fs(e,yo[e].value,yo[e].unit)})),function(e){mo&&(ba&&Me.log("[Measurements] Adding LCP Data"),mo.element&&e.setTag("lcp.element",Ce(mo.element)),mo.id&&e.setTag("lcp.id",mo.id),mo.url&&e.setTag("lcp.url",mo.url.trim().slice(0,200)),e.setTag("lcp.size",mo.size));fo&&fo.sources&&(ba&&Me.log("[Measurements] Adding CLS Data"),fo.sources.forEach(((t,n)=>e.setTag(`cls.source.${n+1}`,Ce(t.node)))))}(e)}mo=void 0,fo=void 0,yo={}}function wo(e,t,n,r,s,a){const o=a?t[a]:t[`${n}End`],i=t[`${n}Start`];i&&o&&uo(e,{op:"browser",origin:"auto.browser.browser.metrics",description:s||n,startTimestamp:r+ho(i),endTimestamp:r+ho(o)})}function Io(e,t,n,r){const s=t[n];null!=s&&s<po&&(e[r]=s)}function ko(e,t,n,r,s="auto.http.browser"){if(!Wr()||!e.fetchData)return;const a=t(e.fetchData.url);if(e.endTimestamp&&a){const t=e.fetchData.__span;if(!t)return;const n=r[t];if(n){if(e.response){jr(n,e.response.status);const t=e.response&&e.response.headers&&e.response.headers.get("content-length");if(t){const e=parseInt(t);e>0&&n.setAttribute("http.response_content_length",e)}}else e.error&&n.setStatus("internal_error");n.end(),delete r[t]}return}const o=lr(),i=cr(),{method:c,url:l}=e.fetchData,u=a?Hr({name:`${c} ${l}`,onlyIfParent:!0,attributes:{url:l,type:"fetch","http.method":c,[ns]:s},op:"http.client"}):void 0;if(u&&(e.fetchData.__span=u.spanContext().spanId,r[u.spanContext().spanId]=u),n(e.fetchData.url)&&i){const t=e.args[0];e.args[1]=e.args[1]||{};const n=e.args[1];n.headers=function(e,t,n,r,s){const a=s||n.getSpan(),o=Lr(),{traceId:i,spanId:c,sampled:l,dsc:u}={...o.getPropagationContext(),...n.getPropagationContext()},d=a?Yn(a):bn(i,c,l),p=fn(u||(a?fr(a):mr(i,t,n))),h=r.headers||("undefined"!=typeof Request&&de(e,Request)?e.headers:void 0);if(h){if("undefined"!=typeof Headers&&de(h,Headers)){const e=new Headers(h);return e.append("sentry-trace",d),p&&e.append(dn,p),e}if(Array.isArray(h)){const e=[...h,["sentry-trace",d]];return p&&e.push([dn,p]),e}{const e="baggage"in h?h.baggage:void 0,t=[];return Array.isArray(e)?t.push(...e):e&&t.push(e),p&&t.push(p),{...h,"sentry-trace":d,baggage:t.length>0?t.join(","):void 0}}}return{"sentry-trace":d,baggage:p}}(t,i,o,n,u)}return u}const Co=["localhost",/^\/(?!\/)/],Ro={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,tracingOrigins:Co,tracePropagationTargets:Co};function xo(e){const{traceFetch:t,traceXHR:n,tracePropagationTargets:r,tracingOrigins:s,shouldCreateSpanForRequest:a,enableHTTPTimings:o}={traceFetch:Ro.traceFetch,traceXHR:Ro.traceXHR,...e},i="function"==typeof a?a:e=>!0,c=e=>function(e,t){return fe(e,t||Co)}(e,r||s),l={};t&&Rt((e=>{const t=ko(e,i,c,l);o&&t&&Lo(t)})),n&&qt((e=>{const t=function(e,t,n,r){const s=e.xhr,a=s&&s[Ht];if(!Wr()||!s||s.__sentry_own_request__||!a)return;const o=t(a.url);if(e.endTimestamp&&o){const e=s.__sentry_xhr_span_id__;if(!e)return;const t=r[e];return void(t&&void 0!==a.status_code&&(jr(t,a.status_code),t.end(),delete r[e]))}const i=lr(),c=Lr(),l=o?Hr({name:`${a.method} ${a.url}`,onlyIfParent:!0,attributes:{type:"xhr","http.method":a.method,url:a.url,[ns]:"auto.http.browser"},op:"http.client"}):void 0;l&&(s.__sentry_xhr_span_id__=l.spanContext().spanId,r[s.__sentry_xhr_span_id__]=l);const u=cr();if(s.setRequestHeader&&n(a.url)&&u){const{traceId:e,spanId:t,sampled:n,dsc:r}={...c.getPropagationContext(),...i.getPropagationContext()};!function(e,t,n){try{e.setRequestHeader("sentry-trace",t),n&&e.setRequestHeader(dn,n)}catch(e){}}(s,l?Yn(l):bn(e,t,n),fn(r||(l?fr(l):mr(e,u,i))))}return l}(e,i,c,l);o&&t&&Lo(t)}))}function Lo(e){const{url:t}=Jn(e).data||{};if(!t||"string"!=typeof t)return;const n=eo("resource",(({entries:r})=>{r.forEach((r=>{if(function(e){return"resource"===e.entryType&&"initiatorType"in e&&"string"==typeof e.nextHopProtocol&&("fetch"===e.initiatorType||"xmlhttprequest"===e.initiatorType)}(r)&&r.name.endsWith(t)){(function(e){const{name:t,version:n}=function(e){let t="unknown",n="unknown",r="";for(const s of e){if("/"===s){[t,n]=e.split("/");break}if(!isNaN(Number(s))){t="h"===r?"http":r,n=e.split(r)[1];break}r+=s}r===e&&(t=r);return{name:t,version:n}}(e.nextHopProtocol),r=[];if(r.push(["network.protocol.version",n],["network.protocol.name",t]),!un)return r;return[...r,["http.request.redirect_start",Ao(e.redirectStart)],["http.request.fetch_start",Ao(e.fetchStart)],["http.request.domain_lookup_start",Ao(e.domainLookupStart)],["http.request.domain_lookup_end",Ao(e.domainLookupEnd)],["http.request.connect_start",Ao(e.connectStart)],["http.request.secure_connection_start",Ao(e.secureConnectionStart)],["http.request.connection_end",Ao(e.connectEnd)],["http.request.request_start",Ao(e.requestStart)],["http.request.response_start",Ao(e.responseStart)],["http.request.response_end",Ao(e.responseEnd)]]})(r).forEach((t=>e.setAttribute(...t))),setTimeout(n)}}))}))}function Ao(e=0){return((un||performance.timeOrigin)+e)/1e3}const Oo={...os,markBackgroundTransactions:!0,routingInstrumentation:function(e,t=!0,n=!0){if(!Ea||!Ea.location)return void(ba&&Me.warn("Could not initialize routing instrumentation due to invalid location"));let r,s=Ea.location.href;t&&(r=e({name:Ea.location.pathname,startTimestamp:un?un/1e3:void 0,op:"pageload",origin:"auto.pageload.browser",metadata:{source:"url"}})),n&&jt((({to:t,from:n})=>{void 0===n&&s&&-1!==s.indexOf(t)?s=void 0:n!==t&&(s=void 0,r&&(ba&&Me.log(`[Tracing] Finishing current transaction with op: ${r.op}`),r.end()),r=e({name:Ea.location.pathname,op:"navigation",origin:"auto.navigation.browser",metadata:{source:"url"}}))}))},startTransactionOnLocationChange:!0,startTransactionOnPageLoad:!0,enableLongTask:!0,enableInp:!1,_experiments:{},...Ro};function No(e){const t=Le(`meta[name=${e}]`);return t?t.getAttribute("content"):void 0}function Do(e){const t=e.attributes&&e.attributes[Qr],n=e.data&&e.data[Qr],r=e.metadata&&e.metadata.source;return t||n||r}function Po(e){return"duration"in e}const Mo={...os,instrumentNavigation:!0,instrumentPageLoad:!0,markBackgroundSpan:!0,enableLongTask:!0,enableInp:!1,_experiments:{},...Ro};function Fo(e,t){if(!e.emit)return;e.emit("startPageLoadSpan",t);const n=qr();return"pageload"===(n&&Jn(n).op)?n:void 0}function Uo(e,t){if(!e.emit)return;e.emit("startNavigationSpan",t);const n=qr();return"navigation"===(n&&Jn(n).op)?n:void 0}function Bo(e){const t=Le(`meta[name=${e}]`);return t?t.getAttribute("content"):void 0}function Go(e){return"duration"in e}const jo=10;function $o(e){const t=e.attributes&&e.attributes[Qr],n=e.data&&e.data[Qr],r=e.metadata&&e.metadata.source;return t||n||r}const Wo=Ee;let Ho=0;function qo(){return Ho>0}function Vo(e,t={},n){if("function"!=typeof e)return e;try{const t=e.__sentry_wrapped__;if(t)return t;if(Ve(e))return e}catch(t){return e}const r=function(){const r=Array.prototype.slice.call(arguments);try{n&&"function"==typeof n&&n.apply(this,arguments);const s=r.map((e=>Vo(e,t)));return e.apply(this,s)}catch(e){throw Ho++,setTimeout((()=>{Ho--})),ir((n=>{n.addEventProcessor((e=>(t.mechanism&&(ht(e,void 0,void 0),gt(e,t.mechanism)),e.extra={...e.extra,arguments:r},e))),rr(e)})),e}};try{for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t])}catch(e){}qe(r,e),He(e,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get:()=>e.name})}catch(e){}return r}const zo="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function Yo(e,t){const n=Xo(e,t),r={type:t&&t.name,value:Zo(t)};return n.length&&(r.stacktrace={frames:n}),void 0===r.type&&""===r.value&&(r.value="Unrecoverable error caught"),r}function Ko(e,t){return{exception:{values:[Yo(e,t)]}}}function Xo(e,t){const n=t.stacktrace||t.stack||"",r=function(e){if(e){if("number"==typeof e.framesToPop)return e.framesToPop;if(Jo.test(e.message))return 1}return 0}(t);try{return e(n,r)}catch(e){}return[]}const Jo=/Minified React error #\d+;/i;function Zo(e){const t=e&&e.message;return t?t.error&&"string"==typeof t.error.message?t.error.message:t:"No error message"}function Qo(e,t,n,r){const s=ti(e,t,n&&n.syntheticException||void 0,r);return gt(s),s.level="error",n&&n.event_id&&(s.event_id=n.event_id),Qt(s)}function ei(e,t,n="info",r,s){const a=ni(e,t,r&&r.syntheticException||void 0,s);return a.level=n,r&&r.event_id&&(a.event_id=r.event_id),Qt(a)}function ti(e,t,n,r,s){let a;if(ne(t)&&t.error){return Ko(e,t.error)}if(re(t)||te(t,"DOMException")){const s=t;if("stack"in t)a=Ko(e,t);else{const t=s.name||(re(s)?"DOMError":"DOMException"),o=s.message?`${t}: ${s.message}`:t;a=ni(e,o,n,r),ht(a,o)}return"code"in s&&(a.tags={...a.tags,"DOMException.code":`${s.code}`}),a}if(ee(t))return Ko(e,t);if(ie(t)||ce(t)){return a=function(e,t,n,r){const s=cr(),a=s&&s.getOptions().normalizeDepth,o={exception:{values:[{type:ce(t)?t.constructor.name:r?"UnhandledRejection":"Error",value:ri(t,{isUnhandledRejection:r})}]},extra:{__serialized__:Xt(t,a)}};if(n){const t=Xo(e,n);t.length&&(o.exception.values[0].stacktrace={frames:t})}return o}(e,t,n,s),gt(a,{synthetic:!0}),a}return a=ni(e,t,n,r),ht(a,`${t}`,void 0),gt(a,{synthetic:!0}),a}function ni(e,t,n,r){const s={};if(r&&n){const r=Xo(e,n);r.length&&(s.exception={values:[{value:t,stacktrace:{frames:r}}]})}if(ae(t)){const{__sentry_template_string__:e,__sentry_template_values__:n}=t;return s.logentry={message:e,params:n},s}return s.message=t,s}function ri(e,{isUnhandledRejection:t}){const n=function(e,t=40){const n=Object.keys(ze(e));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=t)return he(n[0],t);for(let e=n.length;e>0;e--){const r=n.slice(0,e).join(", ");if(!(r.length>t))return e===n.length?r:he(r,t)}return""}(e),r=t?"promise rejection":"exception";if(ne(e))return`Event \`ErrorEvent\` captured as ${r} with message \`${e.message}\``;if(ce(e)){return`Event \`${function(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch(e){}}(e)}\` (type=${e.type}) captured as ${r}`}return`Object captured as ${r} with keys: ${n}`}function si(e,{metadata:t,tunnel:n,dsn:r}){const s={event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&t.sdk&&{sdk:{name:t.sdk.name,version:t.sdk.version}},...!!n&&!!r&&{dsn:Ue(r)}},a=function(e){return[{type:"user_report"},e]}(e);return En(s,[a])}class ai extends As{constructor(e){!function(e,t,n=[t],r="npm"){const s=e._metadata||{};s.sdk||(s.sdk={name:`sentry.javascript.${t}`,packages:n.map((e=>({name:`${r}:@sentry/${e}`,version:vr}))),version:vr}),e._metadata=s}(e,"browser",["browser"],Wo.SENTRY_SDK_SOURCE||"npm"),super(e),e.sendClientReports&&Wo.document&&Wo.document.addEventListener("visibilitychange",(()=>{"hidden"===Wo.document.visibilityState&&this._flushOutcomes()}))}eventFromException(e,t){return Qo(this._options.stackParser,e,t,this._options.attachStacktrace)}eventFromMessage(e,t="info",n){return ei(this._options.stackParser,e,t,n,this._options.attachStacktrace)}captureUserFeedback(e){if(!this._isEnabled())return void(zo&&Me.warn("SDK not enabled, will not capture user feedback."));const t=si(e,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this._sendEnvelope(t)}_prepareEvent(e,t,n){return e.platform=e.platform||"javascript",super._prepareEvent(e,t,n)}_flushOutcomes(){const e=this._clearOutcomes();if(0===e.length)return void(zo&&Me.log("No outcomes to send"));if(!this._dsn)return void(zo&&Me.log("No dsn provided, will not send outcomes"));zo&&Me.log("Sending outcomes:",e);const t=(n=e,En((r=this._options.tunnel&&Ue(this._dsn))?{dsn:r}:{},[[{type:"client_report"},{timestamp:s||cn(),discarded_events:n}]]));var n,r,s;this._sendEnvelope(t)}}let oi;function ii(e,t=function(){if(oi)return oi;if(Ct(Wo.fetch))return oi=Wo.fetch.bind(Wo);const e=Wo.document;let t=Wo.fetch;if(e&&"function"==typeof e.createElement)try{const n=e.createElement("iframe");n.hidden=!0,e.head.appendChild(n);const r=n.contentWindow;r&&r.fetch&&(t=r.fetch),e.head.removeChild(n)}catch(e){zo&&Me.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return oi=t.bind(Wo)}()){let n=0,r=0;return Us(e,(function(s){const a=s.body.length;n+=a,r++;const o={body:s.body,method:"POST",referrerPolicy:"origin",headers:e.headers,keepalive:n<=6e4&&r<15,...e.fetchOptions};try{return t(e.url,o).then((e=>(n-=a,r--,{statusCode:e.status,headers:{"x-sentry-rate-limits":e.headers.get("X-Sentry-Rate-Limits"),"retry-after":e.headers.get("Retry-After")}})))}catch(e){return oi=void 0,n-=a,r--,en(e)}}))}const ci=4;function li(e){return Us(e,(function(t){return new tn(((n,r)=>{const s=new XMLHttpRequest;s.onerror=r,s.onreadystatechange=()=>{s.readyState===ci&&n({statusCode:s.status,headers:{"x-sentry-rate-limits":s.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":s.getResponseHeader("Retry-After")}})},s.open("POST",e.url);for(const t in e.headers)Object.prototype.hasOwnProperty.call(e.headers,t)&&s.setRequestHeader(t,e.headers[t]);s.send(t.body)}))}))}const ui="?";function di(e,t,n,r){const s={filename:e,function:t,in_app:!0};return void 0!==n&&(s.lineno=n),void 0!==r&&(s.colno=r),s}const pi=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,hi=/\((\S*)(?::(\d+))(?::(\d+))\)/,gi=[30,e=>{const t=pi.exec(e);if(t){if(t[2]&&0===t[2].indexOf("eval")){const e=hi.exec(t[2]);e&&(t[2]=e[1],t[3]=e[2],t[4]=e[3])}const[e,n]=ki(t[1]||ui,t[2]);return di(n,e,t[3]?+t[3]:void 0,t[4]?+t[4]:void 0)}}],mi=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,fi=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,_i=[50,e=>{const t=mi.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const e=fi.exec(t[3]);e&&(t[1]=t[1]||"eval",t[3]=e[1],t[4]=e[2],t[5]="")}let e=t[3],n=t[1]||ui;return[n,e]=ki(n,e),di(e,n,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}}],yi=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,Si=[40,e=>{const t=yi.exec(e);return t?di(t[2],t[1]||ui,+t[3],t[4]?+t[4]:void 0):void 0}],Ti=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,bi=[10,e=>{const t=Ti.exec(e);return t?di(t[2],t[3]||ui,+t[1]):void 0}],Ei=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\(.*\))? in (.*):\s*$/i,vi=[20,e=>{const t=Ei.exec(e);return t?di(t[5],t[3]||t[4]||ui,+t[1],+t[2]):void 0}],wi=[gi,_i,Si],Ii=tt(...wi),ki=(e,t)=>{const n=-1!==e.indexOf("safari-extension"),r=-1!==e.indexOf("safari-web-extension");return n||r?[-1!==e.indexOf("@")?e.split("@")[0]:ui,n?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]},Ci=1024,Ri="Breadcrumbs",xi=(e={})=>{const t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:Ri,setupOnce(){},setup(e){t.console&&function(e){const t="console";ot(t,e),it(t,lt)}(function(e){return function(t){if(cr()!==e)return;const n={category:"console",data:{arguments:t.args,logger:"console"},level:an(t.level),message:ge(t.args," ")};if("assert"===t.level){if(!1!==t.args[0])return;n.message=`Assertion failed: ${ge(t.args.slice(1)," ")||"console.assert"}`,n.data.arguments=t.args.slice(1)}ar(n,{input:t.args,level:t.level})}}(e)),t.dom&&Et(function(e,t){return function(n){if(cr()!==e)return;let r,s,a="object"==typeof t?t.serializeAttribute:void 0,o="object"==typeof t&&"number"==typeof t.maxStringLength?t.maxStringLength:void 0;o&&o>Ci&&(zo&&Me.warn(`\`dom.maxStringLength\` cannot exceed 1024, but a value of ${o} was configured. Sentry will use 1024 instead.`),o=Ci),"string"==typeof a&&(a=[a]);try{const e=n.event,t=function(e){return!!e&&!!e.target}(e)?e.target:e;r=Ce(t,{keyAttrs:a,maxStringLength:o}),s=Ae(t)}catch(e){r="<unknown>"}if(0===r.length)return;const i={category:`ui.${n.name}`,message:r};s&&(i.data={"ui.component_name":s}),ar(i,{event:n.event,name:n.name,global:n.global})}}(e,t.dom)),t.xhr&&qt(function(e){return function(t){if(cr()!==e)return;const{startTimestamp:n,endTimestamp:r}=t,s=t.xhr[Ht];if(!n||!r||!s)return;const{method:a,url:o,status_code:i,body:c}=s;ar({category:"xhr",data:{method:a,url:o,status_code:i},type:"http"},{xhr:t.xhr,input:c,startTimestamp:n,endTimestamp:r})}}(e)),t.fetch&&Rt(function(e){return function(t){if(cr()!==e)return;const{startTimestamp:n,endTimestamp:r}=t;if(r&&(!t.fetchData.url.match(/sentry_key/)||"POST"!==t.fetchData.method))if(t.error){ar({category:"fetch",data:t.fetchData,level:"error",type:"http"},{data:t.error,input:t.args,startTimestamp:n,endTimestamp:r})}else{const e=t.response;ar({category:"fetch",data:{...t.fetchData,status_code:e&&e.status},type:"http"},{input:t.args,response:e,startTimestamp:n,endTimestamp:r})}}}(e)),t.history&&jt(function(e){return function(t){if(cr()!==e)return;let n=t.from,r=t.to;const s=rn(Wo.location.href);let a=n?rn(n):void 0;const o=rn(r);a&&a.path||(a=s),s.protocol===o.protocol&&s.host===o.host&&(r=o.relative),s.protocol===a.protocol&&s.host===a.host&&(n=a.relative),ar({category:"navigation",data:{from:n,to:r}})}}(e)),t.sentry&&e.on&&e.on("beforeSendEvent",function(e){return function(t){cr()===e&&ar({category:"sentry."+("transaction"===t.type?"transaction":"event"),event_id:t.event_id,level:t.level,message:pt(t)},{event:t})}}(e))}}},Li=ks(Ri,xi);const Ai="Dedupe",Oi=()=>{let e;return{name:Ai,setupOnce(){},processEvent(t){if(t.type)return t;try{if(function(e,t){if(!t)return!1;if(function(e,t){const n=e.message,r=t.message;if(!n&&!r)return!1;if(n&&!r||!n&&r)return!1;if(n!==r)return!1;if(!Pi(e,t))return!1;if(!Di(e,t))return!1;return!0}(e,t))return!0;if(function(e,t){const n=Mi(t),r=Mi(e);if(!n||!r)return!1;if(n.type!==r.type||n.value!==r.value)return!1;if(!Pi(e,t))return!1;if(!Di(e,t))return!1;return!0}(e,t))return!0;return!1}(t,e))return zo&&Me.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(e){}return e=t}}},Ni=ks(Ai,Oi);function Di(e,t){let n=Fi(e),r=Fi(t);if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;if(r.length!==n.length)return!1;for(let e=0;e<r.length;e++){const t=r[e],s=n[e];if(t.filename!==s.filename||t.lineno!==s.lineno||t.colno!==s.colno||t.function!==s.function)return!1}return!0}function Pi(e,t){let n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;try{return!(n.join("")!==r.join(""))}catch(e){return!1}}function Mi(e){return e.exception&&e.exception.values&&e.exception.values[0]}function Fi(e){const t=e.exception;if(t)try{return t.values[0].stacktrace.frames}catch(e){return}}const Ui="GlobalHandlers",Bi=(e={})=>{const t={onerror:!0,onunhandledrejection:!0,...e};return{name:Ui,setupOnce(){Error.stackTraceLimit=50},setup(e){t.onerror&&(!function(e){Nt((t=>{const{stackParser:n,attachStacktrace:r}=Wi();if(cr()!==e||qo())return;const{msg:s,url:a,line:o,column:i,error:c}=t,l=void 0===c&&se(s)?function(e,t,n,r){const s=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;let a=ne(e)?e.message:e,o="Error";const i=a.match(s);i&&(o=i[1],a=i[2]);const c={exception:{values:[{type:o,value:a}]}};return ji(c,t,n,r)}(s,a,o,i):ji(ti(n,c||s,void 0,r,!1),a,o,i);l.level="error",sr(l,{originalException:c,mechanism:{handled:!1,type:"onerror"}})}))}(e),$i("onerror")),t.onunhandledrejection&&(!function(e){Mt((t=>{const{stackParser:n,attachStacktrace:r}=Wi();if(cr()!==e||qo())return;const s=function(e){if(oe(e))return e;const t=e;try{if("reason"in t)return t.reason;if("detail"in t&&"reason"in t.detail)return t.detail.reason}catch(e){}return e}(t),a=oe(s)?{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(s)}`}]}}:ti(n,s,void 0,r,!0);a.level="error",sr(a,{originalException:s,mechanism:{handled:!1,type:"onunhandledrejection"}})}))}(e),$i("onunhandledrejection"))}}},Gi=ks(Ui,Bi);function ji(e,t,n,r){const s=e.exception=e.exception||{},a=s.values=s.values||[],o=a[0]=a[0]||{},i=o.stacktrace=o.stacktrace||{},c=i.frames=i.frames||[],l=isNaN(parseInt(r,10))?void 0:r,u=isNaN(parseInt(n,10))?void 0:n,d=se(t)&&t.length>0?t:xe();return 0===c.length&&c.push({colno:l,filename:d,function:"?",in_app:!0,lineno:u}),e}function $i(e){zo&&Me.log(`Global Handler attached: ${e}`)}function Wi(){const e=cr();return e&&e.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}const Hi="HttpContext",qi=()=>({name:Hi,setupOnce(){},preprocessEvent(e){if(!Wo.navigator&&!Wo.location&&!Wo.document)return;const t=e.request&&e.request.url||Wo.location&&Wo.location.href,{referrer:n}=Wo.document||{},{userAgent:r}=Wo.navigator||{},s={...e.request&&e.request.headers,...n&&{Referer:n},...r&&{"User-Agent":r}},a={...e.request,...t&&{url:t},headers:s};e.request=a}}),Vi=ks(Hi,qi),zi="LinkedErrors",Yi=(e={})=>{const t=e.limit||5,n=e.key||"cause";return{name:zi,setupOnce(){},preprocessEvent(e,r,s){const a=s.getOptions();_e(Yo,a.stackParser,a.maxValueLength,n,t,e,r)}}},Ki=ks(zi,Yi),Xi=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],Ji="TryCatch",Zi=(e={})=>{const t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...e};return{name:Ji,setupOnce(){t.setTimeout&&We(Wo,"setTimeout",ec),t.setInterval&&We(Wo,"setInterval",ec),t.requestAnimationFrame&&We(Wo,"requestAnimationFrame",tc),t.XMLHttpRequest&&"XMLHttpRequest"in Wo&&We(XMLHttpRequest.prototype,"send",nc);const e=t.eventTarget;if(e){(Array.isArray(e)?e:Xi).forEach(rc)}}}},Qi=ks(Ji,Zi);function ec(e){return function(...t){const n=t[0];return t[0]=Vo(n,{mechanism:{data:{function:rt(e)},handled:!1,type:"instrument"}}),e.apply(this,t)}}function tc(e){return function(t){return e.apply(this,[Vo(t,{mechanism:{data:{function:"requestAnimationFrame",handler:rt(e)},handled:!1,type:"instrument"}})])}}function nc(e){return function(...t){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach((e=>{e in n&&"function"==typeof n[e]&&We(n,e,(function(t){const n={mechanism:{data:{function:e,handler:rt(t)},handled:!1,type:"instrument"}},r=Ve(t);return r&&(n.mechanism.data.handler=rt(r)),Vo(t,n)}))})),e.apply(this,t)}}function rc(e){const t=Wo,n=t[e]&&t[e].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(We(n,"addEventListener",(function(t){return function(n,r,s){try{"function"==typeof r.handleEvent&&(r.handleEvent=Vo(r.handleEvent,{mechanism:{data:{function:"handleEvent",handler:rt(r),target:e},handled:!1,type:"instrument"}}))}catch(e){}return t.apply(this,[n,Vo(r,{mechanism:{data:{function:"addEventListener",handler:rt(r),target:e},handled:!1,type:"instrument"}}),s])}})),We(n,"removeEventListener",(function(e){return function(t,n,r){const s=n;try{const n=s&&s.__sentry_wrapped__;n&&e.call(this,t,n,r)}catch(e){}return e.call(this,t,s,r)}})))}const sc=[sa(),ua(),Zi(),xi(),Bi(),Yi(),Oi(),qi()];function ac(e){return[...sc]}function oc(e={}){void 0===e.defaultIntegrations&&(e.defaultIntegrations=ac()),void 0===e.release&&("string"==typeof __SENTRY_RELEASE__&&(e.release=__SENTRY_RELEASE__),Wo.SENTRY_RELEASE&&Wo.SENTRY_RELEASE.id&&(e.release=Wo.SENTRY_RELEASE.id)),void 0===e.autoSessionTracking&&(e.autoSessionTracking=!0),void 0===e.sendClientReports&&(e.sendClientReports=!0);const t={...e,stackParser:(n=e.stackParser||Ii,Array.isArray(n)?tt(...n):n),integrations:vs(e),transport:e.transport||(kt()?ii:li)};var n;!function(e,t){!0===t.debug&&(Un?Me.enable():Pe((()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")}))),lr().update(t.initialScope);const n=new e(t);Ms(n),function(e){e.init?e.init():e.setupIntegrations&&e.setupIntegrations()}(n)}(ai,t),e.autoSessionTracking&&function(){if(void 0===Wo.document)return void(zo&&Me.warn("Session tracking in non-browser environment with @sentry/browser is not supported."));ur({ignoreDuration:!0}),hr(),jt((({from:e,to:t})=>{void 0!==e&&e!==t&&(ur({ignoreDuration:!0}),hr())}))}()}var ic=Object.freeze({__proto__:null,GlobalHandlers:Gi,TryCatch:Qi,Breadcrumbs:Li,LinkedErrors:Ki,HttpContext:Vi,Dedupe:Ni});const cc=Ee,lc="sentryReplaySession",uc="replay_event",dc="Unable to send Replay",pc=15e4,hc=5e3,gc=2e7,mc=36e5;function fc(e){let t,n=e[0],r=1;for(;r<e.length;){const s=e[r],a=e[r+1];if(r+=2,("optionalAccess"===s||"optionalCall"===s)&&null==n)return;"access"===s||"optionalAccess"===s?(t=n,n=a(n)):"call"!==s&&"optionalCall"!==s||(n=a(((...e)=>n.call(t,...e))),t=void 0)}return n}var _c;function yc(e){const t=fc([e,"optionalAccess",e=>e.host]);return Boolean(fc([t,"optionalAccess",e=>e.shadowRoot])===e)}function Sc(e){return"[object ShadowRoot]"===Object.prototype.toString.call(e)}function Tc(e){try{const n=e.rules||e.cssRules;return n?((t=Array.from(n,bc).join("")).includes(" background-clip: text;")&&!t.includes(" -webkit-background-clip: text;")&&(t=t.replace(" background-clip: text;"," -webkit-background-clip: text; background-clip: text;")),t):null}catch(e){return null}var t}function bc(e){let t;if(function(e){return"styleSheet"in e}(e))try{t=Tc(e.styleSheet)||function(e){const{cssText:t}=e;if(t.split('"').length<3)return t;const n=["@import",`url(${JSON.stringify(e.href)})`];return""===e.layerName?n.push("layer"):e.layerName&&n.push(`layer(${e.layerName})`),e.supportsText&&n.push(`supports(${e.supportsText})`),e.media.length&&n.push(e.media.mediaText),n.join(" ")+";"}(e)}catch(e){}else if(function(e){return"selectorText"in e}(e)&&e.selectorText.includes(":"))return function(e){const t=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return e.replace(t,"$1\\$2")}(e.cssText);return t||e.cssText}!function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"}(_c||(_c={}));class Ec{constructor(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}getId(e){if(!e)return-1;const t=fc([this,"access",e=>e.getMeta,"call",t=>t(e),"optionalAccess",e=>e.id]);return r=()=>-1,null!=(n=t)?n:r();var n,r}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){const t=this.getId(e);this.idNodeMap.delete(t),e.childNodes&&e.childNodes.forEach((e=>this.removeNodeFromMap(e)))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,t){const n=t.id;this.idNodeMap.set(n,e),this.nodeMetaMap.set(e,t)}replace(e,t){const n=this.getNode(e);if(n){const e=this.nodeMetaMap.get(n);e&&this.nodeMetaMap.set(t,e)}this.idNodeMap.set(e,t)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function vc({maskInputOptions:e,tagName:t,type:n}){return"OPTION"===t&&(t="SELECT"),Boolean(e[t.toLowerCase()]||n&&e[n]||"password"===n||"INPUT"===t&&!n&&e.text)}function wc({isMasked:e,element:t,value:n,maskInputFn:r}){let s=n||"";return e?(r&&(s=r(s,t)),"*".repeat(s.length)):s}function Ic(e){return e.toLowerCase()}function kc(e){return e.toUpperCase()}const Cc="__rrweb_original__";function Rc(e){const t=e.type;return e.hasAttribute("data-rr-is-password")?"password":t?Ic(t):null}function xc(e,t,n){return"INPUT"!==t||"radio"!==n&&"checkbox"!==n?e.value:e.getAttribute("value")||""}let Lc=1;const Ac=new RegExp("[^a-z0-9-_:]"),Oc=-2;function Nc(){return Lc++}let Dc,Pc;const Mc=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,Fc=/^(?:[a-z+]+:)?\/\//i,Uc=/^www\..*/i,Bc=/^(data:)([^,]*),(.*)/i;function Gc(e,t){return(e||"").replace(Mc,((e,n,r,s,a,o)=>{const i=r||a||o,c=n||s||"";if(!i)return e;if(Fc.test(i)||Uc.test(i))return`url(${c}${i}${c})`;if(Bc.test(i))return`url(${c}${i}${c})`;if("/"===i[0])return`url(${c}${function(e){let t="";return t=e.indexOf("//")>-1?e.split("/").slice(0,3).join("/"):e.split("/")[0],t=t.split("?")[0],t}(t)+i}${c})`;const l=t.split("/"),u=i.split("/");l.pop();for(const e of u)"."!==e&&(".."===e?l.pop():l.push(e));return`url(${c}${l.join("/")}${c})`}))}const jc=/^[^ \t\n\r\u000c]+/,$c=/^[, \t\n\r\u000c]+/;function Wc(e,t){if(!t||""===t.trim())return t;const n=e.createElement("a");return n.href=t,n.href}function Hc(e){return Boolean("svg"===e.tagName||e.ownerSVGElement)}function qc(){const e=document.createElement("a");return e.href="",e.href}function Vc(e,t,n,r,s,a){return r?"src"===n||"href"===n&&("use"!==t||"#"!==r[0])||"xlink:href"===n&&"#"!==r[0]?Wc(e,r):"background"!==n||"table"!==t&&"td"!==t&&"th"!==t?"srcset"===n?function(e,t){if(""===t.trim())return t;let n=0;function r(e){let r;const s=e.exec(t.substring(n));return s?(r=s[0],n+=r.length,r):""}const s=[];for(;r($c),!(n>=t.length);){let a=r(jc);if(","===a.slice(-1))a=Wc(e,a.substring(0,a.length-1)),s.push(a);else{let r="";a=Wc(e,a);let o=!1;for(;;){const e=t.charAt(n);if(""===e){s.push((a+r).trim());break}if(o)")"===e&&(o=!1);else{if(","===e){n+=1,s.push((a+r).trim());break}"("===e&&(o=!0)}r+=e,n+=1}}}return s.join(", ")}(e,r):"style"===n?Gc(r,qc()):"object"===t&&"data"===n?Wc(e,r):"function"==typeof a?a(n,r,s):r:Wc(e,r):r}function zc(e,t,n){return("video"===e||"audio"===e)&&"autoplay"===t}function Yc(e,t,n=1/0,r=0){return e?e.nodeType!==e.ELEMENT_NODE||r>n?-1:t(e)?r:Yc(e.parentNode,t,n,r+1):-1}function Kc(e,t){return n=>{const r=n;if(null===r)return!1;try{if(e)if("string"==typeof e){if(r.matches(`.${e}`))return!0}else if(function(e,t){for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}return!1}(r,e))return!0;return!(!t||!r.matches(t))}catch(e){return!1}}}function Xc(e,t,n,r,s,a){try{const o=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(null===o)return!1;if("INPUT"===o.tagName){const e=o.getAttribute("autocomplete");if(["current-password","new-password","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc"].includes(e))return!0}let i=-1,c=-1;if(a){if(c=Yc(o,Kc(r,s)),c<0)return!0;i=Yc(o,Kc(t,n),c>=0?c:1/0)}else{if(i=Yc(o,Kc(t,n)),i<0)return!1;c=Yc(o,Kc(r,s),i>=0?i:1/0)}return i>=0?!(c>=0)||i<=c:!(c>=0)&&!!a}catch(e){}return!!a}function Jc(e,t){const{doc:n,mirror:r,blockClass:s,blockSelector:a,unblockSelector:o,maskAllText:i,maskAttributeFn:c,maskTextClass:l,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:p,inlineStylesheet:h,maskInputOptions:g={},maskTextFn:m,maskInputFn:f,dataURLOptions:_={},inlineImages:y,recordCanvas:S,keepIframeSrcFn:T,newlyAddedElement:b=!1}=t,E=function(e,t){if(!t.hasNode(e))return;const n=t.getId(e);return 1===n?void 0:n}(n,r);switch(e.nodeType){case e.DOCUMENT_NODE:return"CSS1Compat"!==e.compatMode?{type:_c.Document,childNodes:[],compatMode:e.compatMode}:{type:_c.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:_c.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:E};case e.ELEMENT_NODE:return function(e,t){const{doc:n,blockClass:r,blockSelector:s,unblockSelector:a,inlineStylesheet:o,maskInputOptions:i={},maskAttributeFn:c,maskInputFn:l,dataURLOptions:u={},inlineImages:d,recordCanvas:p,keepIframeSrcFn:h,newlyAddedElement:g=!1,rootId:m,maskAllText:f,maskTextClass:_,unmaskTextClass:y,maskTextSelector:S,unmaskTextSelector:T}=t,b=function(e,t,n,r){try{if(r&&e.matches(r))return!1;if("string"==typeof t){if(e.classList.contains(t))return!0}else for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}if(n)return e.matches(n)}catch(e){}return!1}(e,r,s,a),E=function(e){if(e instanceof HTMLFormElement)return"form";const t=Ic(e.tagName);return Ac.test(t)?"div":t}(e);let v={};const w=e.attributes.length;for(let t=0;t<w;t++){const r=e.attributes[t];r.name&&!zc(E,r.name,r.value)&&(v[r.name]=Vc(n,E,Ic(r.name),r.value,e,c))}if("link"===E&&o){const t=Array.from(n.styleSheets).find((t=>t.href===e.href));let r=null;t&&(r=Tc(t)),r&&(delete v.rel,delete v.href,v._cssText=Gc(r,t.href))}if("style"===E&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){const t=Tc(e.sheet);t&&(v._cssText=Gc(t,qc()))}if("input"===E||"textarea"===E||"select"===E||"option"===E){const t=e,n=Rc(t),r=xc(t,kc(E),n),s=t.checked;if("submit"!==n&&"button"!==n&&r){const e=Xc(t,_,S,y,T,vc({type:n,tagName:kc(E),maskInputOptions:i}));v.value=wc({isMasked:e,element:t,value:r,maskInputFn:l})}s&&(v.checked=s)}"option"===E&&(e.selected&&!i.select?v.selected=!0:delete v.selected);if("canvas"===E&&p)if("2d"===e.__context)(function(e){const t=e.getContext("2d");if(!t)return!0;for(let n=0;n<e.width;n+=50)for(let r=0;r<e.height;r+=50){const s=t.getImageData,a=Cc in s?s[Cc]:s;if(new Uint32Array(a.call(t,n,r,Math.min(50,e.width-n),Math.min(50,e.height-r)).data.buffer).some((e=>0!==e)))return!1}return!0})(e)||(v.rr_dataURL=e.toDataURL(u.type,u.quality));else if(!("__context"in e)){const t=e.toDataURL(u.type,u.quality),n=document.createElement("canvas");n.width=e.width,n.height=e.height;t!==n.toDataURL(u.type,u.quality)&&(v.rr_dataURL=t)}if("img"===E&&d){Dc||(Dc=n.createElement("canvas"),Pc=Dc.getContext("2d"));const t=e,r=t.crossOrigin;t.crossOrigin="anonymous";const s=()=>{t.removeEventListener("load",s);try{Dc.width=t.naturalWidth,Dc.height=t.naturalHeight,Pc.drawImage(t,0,0),v.rr_dataURL=Dc.toDataURL(u.type,u.quality)}catch(e){console.warn(`Cannot inline img src=${t.currentSrc}! Error: ${e}`)}r?v.crossOrigin=r:t.removeAttribute("crossorigin")};t.complete&&0!==t.naturalWidth?s():t.addEventListener("load",s)}"audio"!==E&&"video"!==E||(v.rr_mediaState=e.paused?"paused":"played",v.rr_mediaCurrentTime=e.currentTime);g||(e.scrollLeft&&(v.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(v.rr_scrollTop=e.scrollTop));if(b){const{width:t,height:n}=e.getBoundingClientRect();v={class:v.class,rr_width:`${t}px`,rr_height:`${n}px`}}"iframe"!==E||h(v.src)||(e.contentDocument||(v.rr_src=v.src),delete v.src);let I;try{customElements.get(E)&&(I=!0)}catch(e){}return{type:_c.Element,tagName:E,attributes:v,childNodes:[],isSVG:Hc(e)||void 0,needBlock:b,rootId:m,isCustom:I}}(e,{doc:n,blockClass:s,blockSelector:a,unblockSelector:o,inlineStylesheet:h,maskAttributeFn:c,maskInputOptions:g,maskInputFn:f,dataURLOptions:_,inlineImages:y,recordCanvas:S,keepIframeSrcFn:T,newlyAddedElement:b,rootId:E,maskAllText:i,maskTextClass:l,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:p});case e.TEXT_NODE:return function(e,t){const{maskAllText:n,maskTextClass:r,unmaskTextClass:s,maskTextSelector:a,unmaskTextSelector:o,maskTextFn:i,maskInputOptions:c,maskInputFn:l,rootId:u}=t,d=e.parentNode&&e.parentNode.tagName;let p=e.textContent;const h="STYLE"===d||void 0,g="SCRIPT"===d||void 0,m="TEXTAREA"===d||void 0;if(h&&p){try{e.nextSibling||e.previousSibling||fc([e,"access",e=>e.parentNode,"access",e=>e.sheet,"optionalAccess",e=>e.cssRules])&&(p=Tc(e.parentNode.sheet))}catch(t){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${t}`,e)}p=Gc(p,qc())}g&&(p="SCRIPT_PLACEHOLDER");const f=Xc(e,r,a,s,o,n);h||g||m||!p||!f||(p=i?i(p):p.replace(/[\S]/g,"*"));m&&p&&(c.textarea||f)&&(p=l?l(p,e.parentNode):p.replace(/[\S]/g,"*"));if("OPTION"===d&&p){p=wc({isMasked:Xc(e,r,a,s,o,vc({type:null,tagName:d,maskInputOptions:c})),element:e,value:p,maskInputFn:l})}return{type:_c.Text,textContent:p||"",isStyle:h,rootId:u}}(e,{maskAllText:i,maskTextClass:l,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:p,maskTextFn:m,maskInputOptions:g,maskInputFn:f,rootId:E});case e.CDATA_SECTION_NODE:return{type:_c.CDATA,textContent:"",rootId:E};case e.COMMENT_NODE:return{type:_c.Comment,textContent:e.textContent||"",rootId:E};default:return!1}}function Zc(e){return null==e?"":e.toLowerCase()}function Qc(e,t){const{doc:n,mirror:r,blockClass:s,blockSelector:a,unblockSelector:o,maskAllText:i,maskTextClass:c,unmaskTextClass:l,maskTextSelector:u,unmaskTextSelector:d,skipChild:p=!1,inlineStylesheet:h=!0,maskInputOptions:g={},maskAttributeFn:m,maskTextFn:f,maskInputFn:_,slimDOMOptions:y,dataURLOptions:S={},inlineImages:T=!1,recordCanvas:b=!1,onSerialize:E,onIframeLoad:v,iframeLoadTimeout:w=5e3,onStylesheetLoad:I,stylesheetLoadTimeout:k=5e3,keepIframeSrcFn:C=(()=>!1),newlyAddedElement:R=!1}=t;let{preserveWhiteSpace:x=!0}=t;const L=Jc(e,{doc:n,mirror:r,blockClass:s,blockSelector:a,maskAllText:i,unblockSelector:o,maskTextClass:c,unmaskTextClass:l,maskTextSelector:u,unmaskTextSelector:d,inlineStylesheet:h,maskInputOptions:g,maskAttributeFn:m,maskTextFn:f,maskInputFn:_,dataURLOptions:S,inlineImages:T,recordCanvas:b,keepIframeSrcFn:C,newlyAddedElement:R});if(!L)return console.warn(e,"not serialized"),null;let A;A=r.hasNode(e)?r.getId(e):!function(e,t){if(t.comment&&e.type===_c.Comment)return!0;if(e.type===_c.Element){if(t.script&&("script"===e.tagName||"link"===e.tagName&&("preload"===e.attributes.rel||"modulepreload"===e.attributes.rel)&&"script"===e.attributes.as||"link"===e.tagName&&"prefetch"===e.attributes.rel&&"string"==typeof e.attributes.href&&e.attributes.href.endsWith(".js")))return!0;if(t.headFavicon&&("link"===e.tagName&&"shortcut icon"===e.attributes.rel||"meta"===e.tagName&&(Zc(e.attributes.name).match(/^msapplication-tile(image|color)$/)||"application-name"===Zc(e.attributes.name)||"icon"===Zc(e.attributes.rel)||"apple-touch-icon"===Zc(e.attributes.rel)||"shortcut icon"===Zc(e.attributes.rel))))return!0;if("meta"===e.tagName){if(t.headMetaDescKeywords&&Zc(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(Zc(e.attributes.property).match(/^(og|twitter|fb):/)||Zc(e.attributes.name).match(/^(og|twitter):/)||"pinterest"===Zc(e.attributes.name)))return!0;if(t.headMetaRobots&&("robots"===Zc(e.attributes.name)||"googlebot"===Zc(e.attributes.name)||"bingbot"===Zc(e.attributes.name)))return!0;if(t.headMetaHttpEquiv&&void 0!==e.attributes["http-equiv"])return!0;if(t.headMetaAuthorship&&("author"===Zc(e.attributes.name)||"generator"===Zc(e.attributes.name)||"framework"===Zc(e.attributes.name)||"publisher"===Zc(e.attributes.name)||"progid"===Zc(e.attributes.name)||Zc(e.attributes.property).match(/^article:/)||Zc(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&("google-site-verification"===Zc(e.attributes.name)||"yandex-verification"===Zc(e.attributes.name)||"csrf-token"===Zc(e.attributes.name)||"p:domain_verify"===Zc(e.attributes.name)||"verify-v1"===Zc(e.attributes.name)||"verification"===Zc(e.attributes.name)||"shopify-checkout-api-token"===Zc(e.attributes.name)))return!0}}return!1}(L,y)&&(x||L.type!==_c.Text||L.isStyle||L.textContent.replace(/^\s+|\s+$/gm,"").length)?Nc():Oc;const O=Object.assign(L,{id:A});if(r.add(e,O),A===Oc)return null;E&&E(e);let N=!p;if(O.type===_c.Element){N=N&&!O.needBlock,delete O.needBlock;const t=e.shadowRoot;t&&Sc(t)&&(O.isShadowHost=!0)}if((O.type===_c.Document||O.type===_c.Element)&&N){y.headWhitespace&&O.type===_c.Element&&"head"===O.tagName&&(x=!1);const t={doc:n,mirror:r,blockClass:s,blockSelector:a,maskAllText:i,unblockSelector:o,maskTextClass:c,unmaskTextClass:l,maskTextSelector:u,unmaskTextSelector:d,skipChild:p,inlineStylesheet:h,maskInputOptions:g,maskAttributeFn:m,maskTextFn:f,maskInputFn:_,slimDOMOptions:y,dataURLOptions:S,inlineImages:T,recordCanvas:b,preserveWhiteSpace:x,onSerialize:E,onIframeLoad:v,iframeLoadTimeout:w,onStylesheetLoad:I,stylesheetLoadTimeout:k,keepIframeSrcFn:C};for(const n of Array.from(e.childNodes)){const e=Qc(n,t);e&&O.childNodes.push(e)}if(function(e){return e.nodeType===e.ELEMENT_NODE}(e)&&e.shadowRoot)for(const n of Array.from(e.shadowRoot.childNodes)){const r=Qc(n,t);r&&(Sc(e.shadowRoot)&&(r.isShadow=!0),O.childNodes.push(r))}}return e.parentNode&&yc(e.parentNode)&&Sc(e.parentNode)&&(O.isShadow=!0),O.type===_c.Element&&"iframe"===O.tagName&&function(e,t,n){const r=e.contentWindow;if(!r)return;let s,a=!1;try{s=r.document.readyState}catch(e){return}if("complete"!==s){const r=setTimeout((()=>{a||(t(),a=!0)}),n);return void e.addEventListener("load",(()=>{clearTimeout(r),a=!0,t()}))}const o="about:blank";if(r.location.href!==o||e.src===o||""===e.src)return setTimeout(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}(e,(()=>{const t=e.contentDocument;if(t&&v){const n=Qc(t,{doc:t,mirror:r,blockClass:s,blockSelector:a,unblockSelector:o,maskAllText:i,maskTextClass:c,unmaskTextClass:l,maskTextSelector:u,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:h,maskInputOptions:g,maskAttributeFn:m,maskTextFn:f,maskInputFn:_,slimDOMOptions:y,dataURLOptions:S,inlineImages:T,recordCanvas:b,preserveWhiteSpace:x,onSerialize:E,onIframeLoad:v,iframeLoadTimeout:w,onStylesheetLoad:I,stylesheetLoadTimeout:k,keepIframeSrcFn:C});n&&v(e,n)}}),w),O.type===_c.Element&&"link"===O.tagName&&"stylesheet"===O.attributes.rel&&function(e,t,n){let r,s=!1;try{r=e.sheet}catch(e){return}if(r)return;const a=setTimeout((()=>{s||(t(),s=!0)}),n);e.addEventListener("load",(()=>{clearTimeout(a),s=!0,t()}))}(e,(()=>{if(I){const t=Qc(e,{doc:n,mirror:r,blockClass:s,blockSelector:a,unblockSelector:o,maskAllText:i,maskTextClass:c,unmaskTextClass:l,maskTextSelector:u,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:h,maskInputOptions:g,maskAttributeFn:m,maskTextFn:f,maskInputFn:_,slimDOMOptions:y,dataURLOptions:S,inlineImages:T,recordCanvas:b,preserveWhiteSpace:x,onSerialize:E,onIframeLoad:v,iframeLoadTimeout:w,onStylesheetLoad:I,stylesheetLoadTimeout:k,keepIframeSrcFn:C});t&&I(e,t)}}),k),O}function el(e){let t,n=e[0],r=1;for(;r<e.length;){const s=e[r],a=e[r+1];if(r+=2,("optionalAccess"===s||"optionalCall"===s)&&null==n)return;"access"===s||"optionalAccess"===s?(t=n,n=a(n)):"call"!==s&&"optionalCall"!==s||(n=a(((...e)=>n.call(t,...e))),t=void 0)}return n}function tl(e,t,n=document){const r={capture:!0,passive:!0};return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t,r)}const nl="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.";let rl={map:{},getId:()=>(console.error(nl),-1),getNode:()=>(console.error(nl),null),removeNodeFromMap(){console.error(nl)},has:()=>(console.error(nl),!1),reset(){console.error(nl)}};function sl(e,t,n={}){let r=null,s=0;return function(...a){const o=Date.now();s||!1!==n.leading||(s=o);const i=t-(o-s),c=this;i<=0||i>t?(r&&(clearTimeout(r),r=null),s=o,e.apply(c,a)):r||!1===n.trailing||(r=setTimeout((()=>{s=!1===n.leading?0:Date.now(),r=null,e.apply(c,a)}),i))}}function al(e,t,n,r,s=window){const a=s.Object.getOwnPropertyDescriptor(e,t);return s.Object.defineProperty(e,t,r?n:{set(e){setTimeout((()=>{n.set.call(this,e)}),0),a&&a.set&&a.set.call(this,e)}}),()=>al(e,t,a||{},!0)}function ol(e,t,n){try{if(!(t in e))return()=>{};const r=e[t],s=n(r);return"function"==typeof s&&(s.prototype=s.prototype||{},Object.defineProperties(s,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=s,()=>{e[t]=r}}catch(e){return()=>{}}}"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(rl=new Proxy(rl,{get:(e,t,n)=>("map"===t&&console.error(nl),Reflect.get(e,t,n))}));let il,cl=Date.now;function ll(e){const t=e.document;return{left:t.scrollingElement?t.scrollingElement.scrollLeft:void 0!==e.pageXOffset?e.pageXOffset:el([t,"optionalAccess",e=>e.documentElement,"access",e=>e.scrollLeft])||el([t,"optionalAccess",e=>e.body,"optionalAccess",e=>e.parentElement,"optionalAccess",e=>e.scrollLeft])||el([t,"optionalAccess",e=>e.body,"optionalAccess",e=>e.scrollLeft])||0,top:t.scrollingElement?t.scrollingElement.scrollTop:void 0!==e.pageYOffset?e.pageYOffset:el([t,"optionalAccess",e=>e.documentElement,"access",e=>e.scrollTop])||el([t,"optionalAccess",e=>e.body,"optionalAccess",e=>e.parentElement,"optionalAccess",e=>e.scrollTop])||el([t,"optionalAccess",e=>e.body,"optionalAccess",e=>e.scrollTop])||0}}function ul(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function dl(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function pl(e,t,n,r,s){if(!e)return!1;const a=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(!a)return!1;const o=Kc(t,n);if(!s){const e=r&&a.matches(r);return o(a)&&!e}const i=Yc(a,o);let c=-1;return!(i<0)&&(r&&(c=Yc(a,Kc(null,r))),i>-1&&c<0||i<c)}function hl(e,t){return t.getId(e)===Oc}function gl(e,t){if(yc(e))return!1;const n=t.getId(e);return!t.has(n)||(!e.parentNode||e.parentNode.nodeType!==e.DOCUMENT_NODE)&&(!e.parentNode||gl(e.parentNode,t))}function ml(e){return Boolean(e.changedTouches)}function fl(e,t){return Boolean("IFRAME"===e.nodeName&&t.getMeta(e))}function _l(e,t){return Boolean("LINK"===e.nodeName&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&"stylesheet"===e.getAttribute("rel")&&t.getMeta(e))}function yl(e){return Boolean(el([e,"optionalAccess",e=>e.shadowRoot]))}/[1-9][0-9]{12}/.test(Date.now().toString())||(cl=()=>(new Date).getTime());class Sl{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(e){return t=this.styleIDMap.get(e),n=()=>-1,null!=t?t:n();var t,n}has(e){return this.styleIDMap.has(e)}add(e,t){if(this.has(e))return this.getId(e);let n;return n=void 0===t?this.id++:t,this.styleIDMap.set(e,n),this.idStyleMap.set(n,e),n}getStyle(e){return this.idStyleMap.get(e)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function Tl(e){let t=null;return el([e,"access",e=>e.getRootNode,"optionalCall",e=>e(),"optionalAccess",e=>e.nodeType])===Node.DOCUMENT_FRAGMENT_NODE&&e.getRootNode().host&&(t=e.getRootNode().host),t}function bl(e){const t=e.ownerDocument;if(!t)return!1;const n=function(e){let t,n=e;for(;t=Tl(n);)n=t;return n}(e);return t.contains(n)}function El(e){const t=e.ownerDocument;return!!t&&(t.contains(e)||bl(e))}function vl(...e){return function(){if(il)return il;const e=window.document;let t=window.requestAnimationFrame;if(e&&"function"==typeof e.createElement)try{const n=e.createElement("iframe");n.hidden=!0,e.head.appendChild(n);const r=n.contentWindow;r&&r.requestAnimationFrame&&(t=r.requestAnimationFrame),e.head.removeChild(n)}catch(e){}return il=t.bind(window)}()(...e)}var wl=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(wl||{}),Il=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e))(Il||{}),kl=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(kl||{}),Cl=(e=>(e[e.Mouse=0]="Mouse",e[e.Pen=1]="Pen",e[e.Touch=2]="Touch",e))(Cl||{});function Rl(e){let t,n=e[0],r=1;for(;r<e.length;){const s=e[r],a=e[r+1];if(r+=2,("optionalAccess"===s||"optionalCall"===s)&&null==n)return;"access"===s||"optionalAccess"===s?(t=n,n=a(n)):"call"!==s&&"optionalCall"!==s||(n=a(((...e)=>n.call(t,...e))),t=void 0)}return n}function xl(e){return"__ln"in e}class Ll{constructor(){this.length=0,this.head=null,this.tail=null}get(e){if(e>=this.length)throw new Error("Position outside of list range");let t=this.head;for(let n=0;n<e;n++)t=Rl([t,"optionalAccess",e=>e.next])||null;return t}addNode(e){const t={value:e,previous:null,next:null};if(e.__ln=t,e.previousSibling&&xl(e.previousSibling)){const n=e.previousSibling.__ln.next;t.next=n,t.previous=e.previousSibling.__ln,e.previousSibling.__ln.next=t,n&&(n.previous=t)}else if(e.nextSibling&&xl(e.nextSibling)&&e.nextSibling.__ln.previous){const n=e.nextSibling.__ln.previous;t.previous=n,t.next=e.nextSibling.__ln,e.nextSibling.__ln.previous=t,n&&(n.next=t)}else this.head&&(this.head.previous=t),t.next=this.head,this.head=t;null===t.next&&(this.tail=t),this.length++}removeNode(e){const t=e.__ln;this.head&&(t.previous?(t.previous.next=t.next,t.next?t.next.previous=t.previous:this.tail=t.previous):(this.head=t.next,this.head?this.head.previous=null:this.tail=null),e.__ln&&delete e.__ln,this.length--)}}const Al=(e,t)=>`${e}@${t}`;class Ol{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=e=>{e.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const e=[],t=new Set,n=new Ll,r=e=>{let t=e,n=Oc;for(;n===Oc;)t=t&&t.nextSibling,n=t&&this.mirror.getId(t);return n},s=s=>{if(!s.parentNode||!El(s))return;const a=yc(s.parentNode)?this.mirror.getId(Tl(s)):this.mirror.getId(s.parentNode),o=r(s);if(-1===a||-1===o)return n.addNode(s);const i=Qc(s,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskAllText:this.maskAllText,unblockSelector:this.unblockSelector,maskTextClass:this.maskTextClass,unmaskTextClass:this.unmaskTextClass,maskTextSelector:this.maskTextSelector,unmaskTextSelector:this.unmaskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskAttributeFn:this.maskAttributeFn,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:e=>{fl(e,this.mirror)&&this.iframeManager.addIframe(e),_l(e,this.mirror)&&this.stylesheetManager.trackLinkElement(e),yl(s)&&this.shadowDomManager.addShadowRoot(s.shadowRoot,this.doc)},onIframeLoad:(e,t)=>{this.iframeManager.attachIframe(e,t),this.shadowDomManager.observeAttachShadow(e)},onStylesheetLoad:(e,t)=>{this.stylesheetManager.attachLinkElement(e,t)}});i&&(e.push({parentId:a,nextId:o,node:i}),t.add(i.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const e of this.movedSet)Dl(this.removes,e,this.mirror)&&!this.movedSet.has(e.parentNode)||s(e);for(const e of this.addedSet)Ml(this.droppedSet,e)||Dl(this.removes,e,this.mirror)?Ml(this.movedSet,e)?s(e):this.droppedSet.add(e):s(e);let a=null;for(;n.length;){let e=null;if(a){const t=this.mirror.getId(a.value.parentNode),n=r(a.value);-1!==t&&-1!==n&&(e=a)}if(!e){let t=n.tail;for(;t;){const n=t;if(t=t.previous,n){const t=this.mirror.getId(n.value.parentNode);if(-1===r(n.value))continue;if(-1!==t){e=n;break}{const t=n.value;if(t.parentNode&&t.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const r=t.parentNode.host;if(-1!==this.mirror.getId(r)){e=n;break}}}}}}if(!e){for(;n.head;)n.removeNode(n.head.value);break}a=e.previous,n.removeNode(e.value),s(e.value)}const o={texts:this.texts.map((e=>({id:this.mirror.getId(e.node),value:e.value}))).filter((e=>!t.has(e.id))).filter((e=>this.mirror.has(e.id))),attributes:this.attributes.map((e=>{const{attributes:t}=e;if("string"==typeof t.style){const n=JSON.stringify(e.styleDiff),r=JSON.stringify(e._unchangedStyles);n.length<t.style.length&&(n+r).split("var(").length===t.style.split("var(").length&&(t.style=e.styleDiff)}return{id:this.mirror.getId(e.node),attributes:t}})).filter((e=>!t.has(e.id))).filter((e=>this.mirror.has(e.id))),removes:this.removes,adds:e};(o.texts.length||o.attributes.length||o.removes.length||o.adds.length)&&(this.texts=[],this.attributes=[],this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(o))},this.processMutation=e=>{if(hl(e.target,this.mirror))return;let t;try{t=document.implementation.createHTMLDocument()}catch(e){t=this.doc}switch(e.type){case"characterData":{const t=e.target.textContent;pl(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||t===e.oldValue||this.texts.push({value:Xc(e.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,this.maskAllText)&&t?this.maskTextFn?this.maskTextFn(t):t.replace(/[\S]/g,"*"):t,node:e.target});break}case"attributes":{const n=e.target;let r=e.attributeName,s=e.target.getAttribute(r);if("value"===r){const t=Rc(n),r=n.tagName;s=xc(n,r,t);const a=vc({maskInputOptions:this.maskInputOptions,tagName:r,type:t});s=wc({isMasked:Xc(e.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,a),element:n,value:s,maskInputFn:this.maskInputFn})}if(pl(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||s===e.oldValue)return;let a=this.attributes.find((t=>t.node===e.target));if("IFRAME"===n.tagName&&"src"===r&&!this.keepIframeSrcFn(s)){if(n.contentDocument)return;r="rr_src"}if(a||(a={node:e.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(a)),"type"===r&&"INPUT"===n.tagName&&"password"===(e.oldValue||"").toLowerCase()&&n.setAttribute("data-rr-is-password","true"),!zc(n.tagName,r)&&(a.attributes[r]=Vc(this.doc,Ic(n.tagName),Ic(r),s,n,this.maskAttributeFn),"style"===r)){const r=t.createElement("span");e.oldValue&&r.setAttribute("style",e.oldValue);for(const e of Array.from(n.style)){const t=n.style.getPropertyValue(e),s=n.style.getPropertyPriority(e);t!==r.style.getPropertyValue(e)||s!==r.style.getPropertyPriority(e)?a.styleDiff[e]=""===s?t:[t,s]:a._unchangedStyles[e]=[t,s]}for(const e of Array.from(r.style))""===n.style.getPropertyValue(e)&&(a.styleDiff[e]=!1)}break}case"childList":if(pl(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!0))return;e.addedNodes.forEach((t=>this.genAdds(t,e.target))),e.removedNodes.forEach((t=>{const n=this.mirror.getId(t),r=yc(e.target)?this.mirror.getId(e.target.host):this.mirror.getId(e.target);pl(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||hl(t,this.mirror)||!function(e,t){return-1!==t.getId(e)}(t,this.mirror)||(this.addedSet.has(t)?(Nl(this.addedSet,t),this.droppedSet.add(t)):this.addedSet.has(e.target)&&-1===n||gl(e.target,this.mirror)||(this.movedSet.has(t)&&this.movedMap[Al(n,r)]?Nl(this.movedSet,t):this.removes.push({parentId:r,id:n,isShadow:!(!yc(e.target)||!Sc(e.target))||void 0})),this.mapRemoves.push(t))}))}},this.genAdds=(e,t)=>{if(!this.processedNodeManager.inOtherBuffer(e,this)&&!this.addedSet.has(e)&&!this.movedSet.has(e)){if(this.mirror.hasNode(e)){if(hl(e,this.mirror))return;this.movedSet.add(e);let n=null;t&&this.mirror.hasNode(t)&&(n=this.mirror.getId(t)),n&&-1!==n&&(this.movedMap[Al(this.mirror.getId(e),n)]=!0)}else this.addedSet.add(e),this.droppedSet.delete(e);pl(e,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(e.childNodes.forEach((e=>this.genAdds(e))),yl(e)&&e.shadowRoot.childNodes.forEach((t=>{this.processedNodeManager.add(t,this),this.genAdds(t,e)})))}}}init(e){["mutationCb","blockClass","blockSelector","unblockSelector","maskAllText","maskTextClass","unmaskTextClass","maskTextSelector","unmaskTextSelector","inlineStylesheet","maskInputOptions","maskAttributeFn","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach((t=>{this[t]=e[t]}))}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function Nl(e,t){e.delete(t),t.childNodes.forEach((t=>Nl(e,t)))}function Dl(e,t,n){return 0!==e.length&&Pl(e,t,n)}function Pl(e,t,n){const{parentNode:r}=t;if(!r)return!1;const s=n.getId(r);return!!e.some((e=>e.id===s))||Pl(e,r,n)}function Ml(e,t){return 0!==e.size&&Fl(e,t)}function Fl(e,t){const{parentNode:n}=t;return!!n&&(!!e.has(n)||Fl(e,n))}let Ul;const Bl=e=>{if(!Ul)return e;return(...t)=>{try{return e(...t)}catch(e){if(Ul&&!0===Ul(e))return()=>{};throw e}}};function Gl(e){let t,n=e[0],r=1;for(;r<e.length;){const s=e[r],a=e[r+1];if(r+=2,("optionalAccess"===s||"optionalCall"===s)&&null==n)return;"access"===s||"optionalAccess"===s?(t=n,n=a(n)):"call"!==s&&"optionalCall"!==s||(n=a(((...e)=>n.call(t,...e))),t=void 0)}return n}const jl=[];function $l(e){try{if("composedPath"in e){const t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0]}catch(e){}return e&&e.target}function Wl(e,t){const n=new Ol;jl.push(n),n.init(e);let r=window.MutationObserver||window.__rrMutationObserver;const s=Gl([window,"optionalAccess",e=>e.Zone,"optionalAccess",e=>e.__symbol__,"optionalCall",e=>e("MutationObserver")]);s&&window[s]&&(r=window[s]);const a=new r(Bl((t=>{e.onMutation&&!1===e.onMutation(t)||n.processMutations.bind(n)(t)})));return a.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),a}function Hl({mouseInteractionCb:e,doc:t,mirror:n,blockClass:r,blockSelector:s,unblockSelector:a,sampling:o}){if(!1===o.mouseInteraction)return()=>{};const i=!0===o.mouseInteraction||void 0===o.mouseInteraction?{}:o.mouseInteraction,c=[];let l=null;return Object.keys(kl).filter((e=>Number.isNaN(Number(e))&&!e.endsWith("_Departed")&&!1!==i[e])).forEach((o=>{let i=Ic(o);const u=(t=>o=>{const i=$l(o);if(pl(i,r,s,a,!0))return;let c=null,u=t;if("pointerType"in o){switch(o.pointerType){case"mouse":c=Cl.Mouse;break;case"touch":c=Cl.Touch;break;case"pen":c=Cl.Pen}c===Cl.Touch?kl[t]===kl.MouseDown?u="TouchStart":kl[t]===kl.MouseUp&&(u="TouchEnd"):Cl.Pen}else ml(o)&&(c=Cl.Touch);null!==c?(l=c,(u.startsWith("Touch")&&c===Cl.Touch||u.startsWith("Mouse")&&c===Cl.Mouse)&&(c=null)):kl[t]===kl.Click&&(c=l,l=null);const d=ml(o)?o.changedTouches[0]:o;if(!d)return;const p=n.getId(i),{clientX:h,clientY:g}=d;Bl(e)({type:kl[u],id:p,x:h,y:g,...null!==c&&{pointerType:c}})})(o);if(window.PointerEvent)switch(kl[o]){case kl.MouseDown:case kl.MouseUp:i=i.replace("mouse","pointer");break;case kl.TouchStart:case kl.TouchEnd:return}c.push(tl(i,u,t))})),Bl((()=>{c.forEach((e=>e()))}))}function ql({scrollCb:e,doc:t,mirror:n,blockClass:r,blockSelector:s,unblockSelector:a,sampling:o}){return tl("scroll",Bl(sl(Bl((o=>{const i=$l(o);if(!i||pl(i,r,s,a,!0))return;const c=n.getId(i);if(i===t&&t.defaultView){const n=ll(t.defaultView);e({id:c,x:n.left,y:n.top})}else e({id:c,x:i.scrollLeft,y:i.scrollTop})})),o.scroll||100)),t)}const Vl=["INPUT","TEXTAREA","SELECT"],zl=new WeakMap;function Yl({inputCb:e,doc:t,mirror:n,blockClass:r,blockSelector:s,unblockSelector:a,ignoreClass:o,ignoreSelector:i,maskInputOptions:c,maskInputFn:l,sampling:u,userTriggeredOnInput:d,maskTextClass:p,unmaskTextClass:h,maskTextSelector:g,unmaskTextSelector:m}){function f(e){let n=$l(e);const u=e.isTrusted,f=n&&kc(n.tagName);if("OPTION"===f&&(n=n.parentElement),!n||!f||Vl.indexOf(f)<0||pl(n,r,s,a,!0))return;const y=n;if(y.classList.contains(o)||i&&y.matches(i))return;const S=Rc(n);let T=xc(y,f,S),b=!1;const E=vc({maskInputOptions:c,tagName:f,type:S}),v=Xc(n,p,g,h,m,E);"radio"!==S&&"checkbox"!==S||(b=n.checked),T=wc({isMasked:v,element:n,value:T,maskInputFn:l}),_(n,d?{text:T,isChecked:b,userTriggered:u}:{text:T,isChecked:b});const w=n.name;"radio"===S&&w&&b&&t.querySelectorAll(`input[type="radio"][name="${w}"]`).forEach((e=>{if(e!==n){const t=wc({isMasked:v,element:e,value:xc(e,f,S),maskInputFn:l});_(e,d?{text:t,isChecked:!b,userTriggered:!1}:{text:t,isChecked:!b})}}))}function _(t,r){const s=zl.get(t);if(!s||s.text!==r.text||s.isChecked!==r.isChecked){zl.set(t,r);const s=n.getId(t);Bl(e)({...r,id:s})}}const y=("last"===u.input?["change"]:["input","change"]).map((e=>tl(e,Bl(f),t))),S=t.defaultView;if(!S)return()=>{y.forEach((e=>e()))};const T=S.Object.getOwnPropertyDescriptor(S.HTMLInputElement.prototype,"value"),b=[[S.HTMLInputElement.prototype,"value"],[S.HTMLInputElement.prototype,"checked"],[S.HTMLSelectElement.prototype,"value"],[S.HTMLTextAreaElement.prototype,"value"],[S.HTMLSelectElement.prototype,"selectedIndex"],[S.HTMLOptionElement.prototype,"selected"]];return T&&T.set&&y.push(...b.map((e=>al(e[0],e[1],{set(){Bl(f)({target:this,isTrusted:!1})}},!1,S)))),Bl((()=>{y.forEach((e=>e()))}))}function Kl(e){return function(e,t){if(Ql("CSSGroupingRule")&&e.parentRule instanceof CSSGroupingRule||Ql("CSSMediaRule")&&e.parentRule instanceof CSSMediaRule||Ql("CSSSupportsRule")&&e.parentRule instanceof CSSSupportsRule||Ql("CSSConditionRule")&&e.parentRule instanceof CSSConditionRule){const n=Array.from(e.parentRule.cssRules).indexOf(e);t.unshift(n)}else if(e.parentStyleSheet){const n=Array.from(e.parentStyleSheet.cssRules).indexOf(e);t.unshift(n)}return t}(e,[])}function Xl(e,t,n){let r,s;return e?(e.ownerNode?r=t.getId(e.ownerNode):s=n.getId(e),{styleId:s,id:r}):{}}function Jl({mirror:e,stylesheetManager:t},n){let r=null;r="#document"===n.nodeName?e.getId(n):e.getId(n.host);const s="#document"===n.nodeName?Gl([n,"access",e=>e.defaultView,"optionalAccess",e=>e.Document]):Gl([n,"access",e=>e.ownerDocument,"optionalAccess",e=>e.defaultView,"optionalAccess",e=>e.ShadowRoot]),a=Gl([s,"optionalAccess",e=>e.prototype])?Object.getOwnPropertyDescriptor(Gl([s,"optionalAccess",e=>e.prototype]),"adoptedStyleSheets"):void 0;return null!==r&&-1!==r&&s&&a?(Object.defineProperty(n,"adoptedStyleSheets",{configurable:a.configurable,enumerable:a.enumerable,get(){return Gl([a,"access",e=>e.get,"optionalAccess",e=>e.call,"call",e=>e(this)])},set(e){const n=Gl([a,"access",e=>e.set,"optionalAccess",e=>e.call,"call",t=>t(this,e)]);if(null!==r&&-1!==r)try{t.adoptStyleSheets(e,r)}catch(e){}return n}}),Bl((()=>{Object.defineProperty(n,"adoptedStyleSheets",{configurable:a.configurable,enumerable:a.enumerable,get:a.get,set:a.set})}))):()=>{}}function Zl(e,t={}){const n=e.doc.defaultView;if(!n)return()=>{};const r=Wl(e,e.doc),s=function({mousemoveCb:e,sampling:t,doc:n,mirror:r}){if(!1===t.mousemove)return()=>{};const s="number"==typeof t.mousemove?t.mousemove:50,a="number"==typeof t.mousemoveCallback?t.mousemoveCallback:500;let o,i=[];const c=sl(Bl((t=>{const n=Date.now()-o;e(i.map((e=>(e.timeOffset-=n,e))),t),i=[],o=null})),a),l=Bl(sl(Bl((e=>{const t=$l(e),{clientX:n,clientY:s}=ml(e)?e.changedTouches[0]:e;o||(o=cl()),i.push({x:n,y:s,id:r.getId(t),timeOffset:cl()-o}),c("undefined"!=typeof DragEvent&&e instanceof DragEvent?Il.Drag:e instanceof MouseEvent?Il.MouseMove:Il.TouchMove)})),s,{trailing:!1})),u=[tl("mousemove",l,n),tl("touchmove",l,n),tl("drag",l,n)];return Bl((()=>{u.forEach((e=>e()))}))}(e),a=Hl(e),o=ql(e),i=function({viewportResizeCb:e},{win:t}){let n=-1,r=-1;return tl("resize",Bl(sl(Bl((()=>{const t=ul(),s=dl();n===t&&r===s||(e({width:Number(s),height:Number(t)}),n=t,r=s)})),200)),t)}(e,{win:n}),c=Yl(e),l=function({mediaInteractionCb:e,blockClass:t,blockSelector:n,unblockSelector:r,mirror:s,sampling:a,doc:o}){const i=Bl((o=>sl(Bl((a=>{const i=$l(a);if(!i||pl(i,t,n,r,!0))return;const{currentTime:c,volume:l,muted:u,playbackRate:d}=i;e({type:o,id:s.getId(i),currentTime:c,volume:l,muted:u,playbackRate:d})})),a.media||500))),c=[tl("play",i(0),o),tl("pause",i(1),o),tl("seeked",i(2),o),tl("volumechange",i(3),o),tl("ratechange",i(4),o)];return Bl((()=>{c.forEach((e=>e()))}))}(e),u=function({styleSheetRuleCb:e,mirror:t,stylesheetManager:n},{win:r}){if(!r.CSSStyleSheet||!r.CSSStyleSheet.prototype)return()=>{};const s=r.CSSStyleSheet.prototype.insertRule;r.CSSStyleSheet.prototype.insertRule=new Proxy(s,{apply:Bl(((r,s,a)=>{const[o,i]=a,{id:c,styleId:l}=Xl(s,t,n.styleMirror);return(c&&-1!==c||l&&-1!==l)&&e({id:c,styleId:l,adds:[{rule:o,index:i}]}),r.apply(s,a)}))});const a=r.CSSStyleSheet.prototype.deleteRule;let o,i;r.CSSStyleSheet.prototype.deleteRule=new Proxy(a,{apply:Bl(((r,s,a)=>{const[o]=a,{id:i,styleId:c}=Xl(s,t,n.styleMirror);return(i&&-1!==i||c&&-1!==c)&&e({id:i,styleId:c,removes:[{index:o}]}),r.apply(s,a)}))}),r.CSSStyleSheet.prototype.replace&&(o=r.CSSStyleSheet.prototype.replace,r.CSSStyleSheet.prototype.replace=new Proxy(o,{apply:Bl(((r,s,a)=>{const[o]=a,{id:i,styleId:c}=Xl(s,t,n.styleMirror);return(i&&-1!==i||c&&-1!==c)&&e({id:i,styleId:c,replace:o}),r.apply(s,a)}))})),r.CSSStyleSheet.prototype.replaceSync&&(i=r.CSSStyleSheet.prototype.replaceSync,r.CSSStyleSheet.prototype.replaceSync=new Proxy(i,{apply:Bl(((r,s,a)=>{const[o]=a,{id:i,styleId:c}=Xl(s,t,n.styleMirror);return(i&&-1!==i||c&&-1!==c)&&e({id:i,styleId:c,replaceSync:o}),r.apply(s,a)}))}));const c={};eu("CSSGroupingRule")?c.CSSGroupingRule=r.CSSGroupingRule:(eu("CSSMediaRule")&&(c.CSSMediaRule=r.CSSMediaRule),eu("CSSConditionRule")&&(c.CSSConditionRule=r.CSSConditionRule),eu("CSSSupportsRule")&&(c.CSSSupportsRule=r.CSSSupportsRule));const l={};return Object.entries(c).forEach((([r,s])=>{l[r]={insertRule:s.prototype.insertRule,deleteRule:s.prototype.deleteRule},s.prototype.insertRule=new Proxy(l[r].insertRule,{apply:Bl(((r,s,a)=>{const[o,i]=a,{id:c,styleId:l}=Xl(s.parentStyleSheet,t,n.styleMirror);return(c&&-1!==c||l&&-1!==l)&&e({id:c,styleId:l,adds:[{rule:o,index:[...Kl(s),i||0]}]}),r.apply(s,a)}))}),s.prototype.deleteRule=new Proxy(l[r].deleteRule,{apply:Bl(((r,s,a)=>{const[o]=a,{id:i,styleId:c}=Xl(s.parentStyleSheet,t,n.styleMirror);return(i&&-1!==i||c&&-1!==c)&&e({id:i,styleId:c,removes:[{index:[...Kl(s),o]}]}),r.apply(s,a)}))})})),Bl((()=>{r.CSSStyleSheet.prototype.insertRule=s,r.CSSStyleSheet.prototype.deleteRule=a,o&&(r.CSSStyleSheet.prototype.replace=o),i&&(r.CSSStyleSheet.prototype.replaceSync=i),Object.entries(c).forEach((([e,t])=>{t.prototype.insertRule=l[e].insertRule,t.prototype.deleteRule=l[e].deleteRule}))}))}(e,{win:n}),d=Jl(e,e.doc),p=function({styleDeclarationCb:e,mirror:t,ignoreCSSAttributes:n,stylesheetManager:r},{win:s}){const a=s.CSSStyleDeclaration.prototype.setProperty;s.CSSStyleDeclaration.prototype.setProperty=new Proxy(a,{apply:Bl(((s,o,i)=>{const[c,l,u]=i;if(n.has(c))return a.apply(o,[c,l,u]);const{id:d,styleId:p}=Xl(Gl([o,"access",e=>e.parentRule,"optionalAccess",e=>e.parentStyleSheet]),t,r.styleMirror);return(d&&-1!==d||p&&-1!==p)&&e({id:d,styleId:p,set:{property:c,value:l,priority:u},index:Kl(o.parentRule)}),s.apply(o,i)}))});const o=s.CSSStyleDeclaration.prototype.removeProperty;return s.CSSStyleDeclaration.prototype.removeProperty=new Proxy(o,{apply:Bl(((s,a,i)=>{const[c]=i;if(n.has(c))return o.apply(a,[c]);const{id:l,styleId:u}=Xl(Gl([a,"access",e=>e.parentRule,"optionalAccess",e=>e.parentStyleSheet]),t,r.styleMirror);return(l&&-1!==l||u&&-1!==u)&&e({id:l,styleId:u,remove:{property:c},index:Kl(a.parentRule)}),s.apply(a,i)}))}),Bl((()=>{s.CSSStyleDeclaration.prototype.setProperty=a,s.CSSStyleDeclaration.prototype.removeProperty=o}))}(e,{win:n}),h=e.collectFonts?function({fontCb:e,doc:t}){const n=t.defaultView;if(!n)return()=>{};const r=[],s=new WeakMap,a=n.FontFace;n.FontFace=function(e,t,n){const r=new a(e,t,n);return s.set(r,{family:e,buffer:"string"!=typeof t,descriptors:n,fontSource:"string"==typeof t?t:JSON.stringify(Array.from(new Uint8Array(t)))}),r};const o=ol(t.fonts,"add",(function(t){return function(n){return setTimeout(Bl((()=>{const t=s.get(n);t&&(e(t),s.delete(n))})),0),t.apply(this,[n])}}));return r.push((()=>{n.FontFace=a})),r.push(o),Bl((()=>{r.forEach((e=>e()))}))}(e):()=>{},g=function(e){const{doc:t,mirror:n,blockClass:r,blockSelector:s,unblockSelector:a,selectionCb:o}=e;let i=!0;const c=Bl((()=>{const e=t.getSelection();if(!e||i&&Gl([e,"optionalAccess",e=>e.isCollapsed]))return;i=e.isCollapsed||!1;const c=[],l=e.rangeCount||0;for(let t=0;t<l;t++){const o=e.getRangeAt(t),{startContainer:i,startOffset:l,endContainer:u,endOffset:d}=o;pl(i,r,s,a,!0)||pl(u,r,s,a,!0)||c.push({start:n.getId(i),startOffset:l,end:n.getId(u),endOffset:d})}o({ranges:c})}));return c(),tl("selectionchange",c)}(e),m=function({doc:e,customElementCb:t}){const n=e.defaultView;return n&&n.customElements?ol(n.customElements,"define",(function(e){return function(n,r,s){try{t({define:{name:n}})}catch(e){}return e.apply(this,[n,r,s])}})):()=>{}}(e),f=[];for(const t of e.plugins)f.push(t.observer(t.callback,n,t.options));return Bl((()=>{jl.forEach((e=>e.reset())),r.disconnect(),s(),a(),o(),i(),c(),l(),u(),d(),p(),h(),g(),m(),f.forEach((e=>e()))}))}function Ql(e){return void 0!==window[e]}function eu(e){return Boolean(void 0!==window[e]&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}class tu{constructor(e){this.generateIdFn=e,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(e,t,n,r){const s=n||this.getIdToRemoteIdMap(e),a=r||this.getRemoteIdToIdMap(e);let o=s.get(t);return o||(o=this.generateIdFn(),s.set(t,o),a.set(o,t)),o}getIds(e,t){const n=this.getIdToRemoteIdMap(e),r=this.getRemoteIdToIdMap(e);return t.map((t=>this.getId(e,t,n,r)))}getRemoteId(e,t,n){const r=n||this.getRemoteIdToIdMap(e);if("number"!=typeof t)return t;const s=r.get(t);return s||-1}getRemoteIds(e,t){const n=this.getRemoteIdToIdMap(e);return t.map((t=>this.getRemoteId(e,t,n)))}reset(e){if(!e)return this.iframeIdToRemoteIdMap=new WeakMap,void(this.iframeRemoteIdToIdMap=new WeakMap);this.iframeIdToRemoteIdMap.delete(e),this.iframeRemoteIdToIdMap.delete(e)}getIdToRemoteIdMap(e){let t=this.iframeIdToRemoteIdMap.get(e);return t||(t=new Map,this.iframeIdToRemoteIdMap.set(e,t)),t}getRemoteIdToIdMap(e){let t=this.iframeRemoteIdToIdMap.get(e);return t||(t=new Map,this.iframeRemoteIdToIdMap.set(e,t)),t}}function nu(e){let t,n=e[0],r=1;for(;r<e.length;){const s=e[r],a=e[r+1];if(r+=2,("optionalAccess"===s||"optionalCall"===s)&&null==n)return;"access"===s||"optionalAccess"===s?(t=n,n=a(n)):"call"!==s&&"optionalCall"!==s||(n=a(((...e)=>n.call(t,...e))),t=void 0)}return n}class ru{constructor(){this.crossOriginIframeMirror=new tu(Nc),this.crossOriginIframeRootIdMap=new WeakMap}addIframe(){}addLoadListener(){}attachIframe(){}}class su{constructor(e){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new tu(Nc),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=e.mutationCb,this.wrappedEmit=e.wrappedEmit,this.stylesheetManager=e.stylesheetManager,this.recordCrossOriginIframes=e.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new tu(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=e.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(e){this.iframes.set(e,!0),e.contentWindow&&this.crossOriginIframeMap.set(e.contentWindow,e)}addLoadListener(e){this.loadListener=e}attachIframe(e,t){this.mutationCb({adds:[{parentId:this.mirror.getId(e),nextId:null,node:t}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),nu([this,"access",e=>e.loadListener,"optionalCall",t=>t(e)]),e.contentDocument&&e.contentDocument.adoptedStyleSheets&&e.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(e.contentDocument.adoptedStyleSheets,this.mirror.getId(e.contentDocument))}handleMessage(e){const t=e;if("rrweb"!==t.data.type||t.origin!==t.data.origin)return;if(!e.source)return;const n=this.crossOriginIframeMap.get(e.source);if(!n)return;const r=this.transformCrossOriginEvent(n,t.data.event);r&&this.wrappedEmit(r,t.data.isCheckout)}transformCrossOriginEvent(e,t){switch(t.type){case wl.FullSnapshot:{this.crossOriginIframeMirror.reset(e),this.crossOriginIframeStyleMirror.reset(e),this.replaceIdOnNode(t.data.node,e);const n=t.data.node.id;return this.crossOriginIframeRootIdMap.set(e,n),this.patchRootIdOnNode(t.data.node,n),{timestamp:t.timestamp,type:wl.IncrementalSnapshot,data:{source:Il.Mutation,adds:[{parentId:this.mirror.getId(e),nextId:null,node:t.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case wl.Meta:case wl.Load:case wl.DomContentLoaded:return!1;case wl.Plugin:return t;case wl.Custom:return this.replaceIds(t.data.payload,e,["id","parentId","previousId","nextId"]),t;case wl.IncrementalSnapshot:switch(t.data.source){case Il.Mutation:return t.data.adds.forEach((t=>{this.replaceIds(t,e,["parentId","nextId","previousId"]),this.replaceIdOnNode(t.node,e);const n=this.crossOriginIframeRootIdMap.get(e);n&&this.patchRootIdOnNode(t.node,n)})),t.data.removes.forEach((t=>{this.replaceIds(t,e,["parentId","id"])})),t.data.attributes.forEach((t=>{this.replaceIds(t,e,["id"])})),t.data.texts.forEach((t=>{this.replaceIds(t,e,["id"])})),t;case Il.Drag:case Il.TouchMove:case Il.MouseMove:return t.data.positions.forEach((t=>{this.replaceIds(t,e,["id"])})),t;case Il.ViewportResize:return!1;case Il.MediaInteraction:case Il.MouseInteraction:case Il.Scroll:case Il.CanvasMutation:case Il.Input:return this.replaceIds(t.data,e,["id"]),t;case Il.StyleSheetRule:case Il.StyleDeclaration:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleId"]),t;case Il.Font:return t;case Il.Selection:return t.data.ranges.forEach((t=>{this.replaceIds(t,e,["start","end"])})),t;case Il.AdoptedStyleSheet:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleIds"]),nu([t,"access",e=>e.data,"access",e=>e.styles,"optionalAccess",e=>e.forEach,"call",t=>t((t=>{this.replaceStyleIds(t,e,["styleId"])}))]),t}}return!1}replace(e,t,n,r){for(const s of r)(Array.isArray(t[s])||"number"==typeof t[s])&&(Array.isArray(t[s])?t[s]=e.getIds(n,t[s]):t[s]=e.getId(n,t[s]));return t}replaceIds(e,t,n){return this.replace(this.crossOriginIframeMirror,e,t,n)}replaceStyleIds(e,t,n){return this.replace(this.crossOriginIframeStyleMirror,e,t,n)}replaceIdOnNode(e,t){this.replaceIds(e,t,["id","rootId"]),"childNodes"in e&&e.childNodes.forEach((e=>{this.replaceIdOnNode(e,t)}))}patchRootIdOnNode(e,t){e.type===_c.Document||e.rootId||(e.rootId=t),"childNodes"in e&&e.childNodes.forEach((e=>{this.patchRootIdOnNode(e,t)}))}}class au{init(){}addShadowRoot(){}observeAttachShadow(){}reset(){}}class ou{constructor(e){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=e.mutationCb,this.scrollCb=e.scrollCb,this.bypassOptions=e.bypassOptions,this.mirror=e.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(e,t){if(!Sc(e))return;if(this.shadowDoms.has(e))return;this.shadowDoms.add(e);const n=Wl({...this.bypassOptions,doc:t,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},e);this.restoreHandlers.push((()=>n.disconnect())),this.restoreHandlers.push(ql({...this.bypassOptions,scrollCb:this.scrollCb,doc:e,mirror:this.mirror})),setTimeout((()=>{e.adoptedStyleSheets&&e.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(e.adoptedStyleSheets,this.mirror.getId(e.host)),this.restoreHandlers.push(Jl({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},e))}),0)}observeAttachShadow(e){e.contentWindow&&e.contentDocument&&this.patchAttachShadow(e.contentWindow.Element,e.contentDocument)}patchAttachShadow(e,t){const n=this;this.restoreHandlers.push(ol(e.prototype,"attachShadow",(function(e){return function(r){const s=e.call(this,r);return this.shadowRoot&&El(this)&&n.addShadowRoot(this.shadowRoot,t),s}})))}reset(){this.restoreHandlers.forEach((e=>{try{e()}catch(e){}})),this.restoreHandlers=[],this.shadowDoms=new WeakSet}}class iu{reset(){}freeze(){}unfreeze(){}lock(){}unlock(){}snapshot(){}}class cu{constructor(e){this.trackedLinkElements=new WeakSet,this.styleMirror=new Sl,this.mutationCb=e.mutationCb,this.adoptedStyleSheetCb=e.adoptedStyleSheetCb}attachLinkElement(e,t){"_cssText"in t.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:t.id,attributes:t.attributes}]}),this.trackLinkElement(e)}trackLinkElement(e){this.trackedLinkElements.has(e)||(this.trackedLinkElements.add(e),this.trackStylesheetInLinkElement(e))}adoptStyleSheets(e,t){if(0===e.length)return;const n={id:t,styleIds:[]},r=[];for(const t of e){let e;this.styleMirror.has(t)?e=this.styleMirror.getId(t):(e=this.styleMirror.add(t),r.push({styleId:e,rules:Array.from(t.rules||CSSRule,((e,t)=>({rule:bc(e),index:t})))})),n.styleIds.push(e)}r.length>0&&(n.styles=r),this.adoptedStyleSheetCb(n)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(e){}}class lu{constructor(){this.nodeMap=new WeakMap,this.loop=!0,this.periodicallyClear()}periodicallyClear(){vl((()=>{this.clear(),this.loop&&this.periodicallyClear()}))}inOtherBuffer(e,t){const n=this.nodeMap.get(e);return n&&Array.from(n).some((e=>e!==t))}add(e,t){this.nodeMap.set(e,(this.nodeMap.get(e)||new Set).add(t))}clear(){this.nodeMap=new WeakMap}destroy(){this.loop=!1}}function uu(e){const t=e;return t.timestamp=cl(),t}let du;const pu=new Ec;function hu(e={}){const{emit:t,checkoutEveryNms:n,checkoutEveryNth:r,blockClass:s="rr-block",blockSelector:a=null,unblockSelector:o=null,ignoreClass:i="rr-ignore",ignoreSelector:c=null,maskAllText:l=!1,maskTextClass:u="rr-mask",unmaskTextClass:d=null,maskTextSelector:p=null,unmaskTextSelector:h=null,inlineStylesheet:g=!0,maskAllInputs:m,maskInputOptions:f,slimDOMOptions:_,maskAttributeFn:y,maskInputFn:S,maskTextFn:T,packFn:b,sampling:E={},dataURLOptions:v={},mousemoveWait:w,recordCanvas:I=!1,recordCrossOriginIframes:k=!1,recordAfter:C=("DOMContentLoaded"===e.recordAfter?e.recordAfter:"load"),userTriggeredOnInput:R=!1,collectFonts:x=!1,inlineImages:L=!1,plugins:A,keepIframeSrcFn:O=(()=>!1),ignoreCSSAttributes:N=new Set([]),errorHandler:D,onMutation:P,getCanvasManager:M}=e;Ul=D;const F=!k||window.parent===window;let U=!1;if(!F)try{window.parent.document&&(U=!1)}catch(e){U=!0}if(F&&!t)throw new Error("emit function is required");void 0!==w&&void 0===E.mousemove&&(E.mousemove=w),pu.reset();const B=!0===m?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:void 0!==f?f:{},G=!0===_||"all"===_?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:"all"===_,headMetaDescKeywords:"all"===_}:_||{};let j;!function(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...e)=>{let t=e[0];if(!(0 in e))throw new TypeError("1 argument is required");do{if(this===t)return!0}while(t=t&&t.parentNode);return!1})}();let $=0;const W=e=>{for(const t of A||[])t.eventProcessor&&(e=t.eventProcessor(e));return b&&!U&&(e=b(e)),e},H=(e,s)=>{if(!Fn([jl,"access",e=>e[0],"optionalAccess",e=>e.isFrozen,"call",e=>e()])||e.type===wl.FullSnapshot||e.type===wl.IncrementalSnapshot&&e.data.source===Il.Mutation||jl.forEach((e=>e.unfreeze())),F)Fn([t,"optionalCall",t=>t(W(e),s)]);else if(U){const t={type:"rrweb",event:W(e),origin:window.location.origin,isCheckout:s};window.parent.postMessage(t,"*")}if(e.type===wl.FullSnapshot)j=e,$=0;else if(e.type===wl.IncrementalSnapshot){if(e.data.source===Il.Mutation&&e.data.isAttachIframe)return;$++;const t=r&&$>=r,s=n&&e.timestamp-j.timestamp>n;(t||s)&&Q(!0)}},q=e=>{H(uu({type:wl.IncrementalSnapshot,data:{source:Il.Mutation,...e}}))},V=e=>H(uu({type:wl.IncrementalSnapshot,data:{source:Il.Scroll,...e}})),z=e=>H(uu({type:wl.IncrementalSnapshot,data:{source:Il.CanvasMutation,...e}})),Y=new cu({mutationCb:q,adoptedStyleSheetCb:e=>H(uu({type:wl.IncrementalSnapshot,data:{source:Il.AdoptedStyleSheet,...e}}))}),K="boolean"==typeof __RRWEB_EXCLUDE_IFRAME__&&__RRWEB_EXCLUDE_IFRAME__?new ru:new su({mirror:pu,mutationCb:q,stylesheetManager:Y,recordCrossOriginIframes:k,wrappedEmit:H});for(const e of A||[])e.getMirror&&e.getMirror({nodeMirror:pu,crossOriginIframeMirror:K.crossOriginIframeMirror,crossOriginIframeStyleMirror:K.crossOriginIframeStyleMirror});const X=new lu,J=function(e,t){try{return e?e(t):new iu}catch(e){return console.warn("Unable to initialize CanvasManager"),new iu}}(M,{mirror:pu,win:window,mutationCb:e=>H(uu({type:wl.IncrementalSnapshot,data:{source:Il.CanvasMutation,...e}})),recordCanvas:I,blockClass:s,blockSelector:a,unblockSelector:o,sampling:E.canvas,dataURLOptions:v,errorHandler:D}),Z="boolean"==typeof __RRWEB_EXCLUDE_SHADOW_DOM__&&__RRWEB_EXCLUDE_SHADOW_DOM__?new au:new ou({mutationCb:q,scrollCb:V,bypassOptions:{onMutation:P,blockClass:s,blockSelector:a,unblockSelector:o,maskAllText:l,maskTextClass:u,unmaskTextClass:d,maskTextSelector:p,unmaskTextSelector:h,inlineStylesheet:g,maskInputOptions:B,dataURLOptions:v,maskAttributeFn:y,maskTextFn:T,maskInputFn:S,recordCanvas:I,inlineImages:L,sampling:E,slimDOMOptions:G,iframeManager:K,stylesheetManager:Y,canvasManager:J,keepIframeSrcFn:O,processedNodeManager:X},mirror:pu}),Q=(e=!1)=>{H(uu({type:wl.Meta,data:{href:window.location.href,width:dl(),height:ul()}}),e),Y.reset(),Z.init(),jl.forEach((e=>e.lock()));const t=function(e,t){const{mirror:n=new Ec,blockClass:r="rr-block",blockSelector:s=null,unblockSelector:a=null,maskAllText:o=!1,maskTextClass:i="rr-mask",unmaskTextClass:c=null,maskTextSelector:l=null,unmaskTextSelector:u=null,inlineStylesheet:d=!0,inlineImages:p=!1,recordCanvas:h=!1,maskAllInputs:g=!1,maskAttributeFn:m,maskTextFn:f,maskInputFn:_,slimDOM:y=!1,dataURLOptions:S,preserveWhiteSpace:T,onSerialize:b,onIframeLoad:E,iframeLoadTimeout:v,onStylesheetLoad:w,stylesheetLoadTimeout:I,keepIframeSrcFn:k=(()=>!1)}=t||{};return Qc(e,{doc:e,mirror:n,blockClass:r,blockSelector:s,unblockSelector:a,maskAllText:o,maskTextClass:i,unmaskTextClass:c,maskTextSelector:l,unmaskTextSelector:u,skipChild:!1,inlineStylesheet:d,maskInputOptions:!0===g?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:!1===g?{}:g,maskAttributeFn:m,maskTextFn:f,maskInputFn:_,slimDOMOptions:!0===y||"all"===y?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:"all"===y,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:!1===y?{}:y,dataURLOptions:S,inlineImages:p,recordCanvas:h,preserveWhiteSpace:T,onSerialize:b,onIframeLoad:E,iframeLoadTimeout:v,onStylesheetLoad:w,stylesheetLoadTimeout:I,keepIframeSrcFn:k,newlyAddedElement:!1})}(document,{mirror:pu,blockClass:s,blockSelector:a,unblockSelector:o,maskAllText:l,maskTextClass:u,unmaskTextClass:d,maskTextSelector:p,unmaskTextSelector:h,inlineStylesheet:g,maskAllInputs:B,maskAttributeFn:y,maskInputFn:S,maskTextFn:T,slimDOM:G,dataURLOptions:v,recordCanvas:I,inlineImages:L,onSerialize:e=>{fl(e,pu)&&K.addIframe(e),_l(e,pu)&&Y.trackLinkElement(e),yl(e)&&Z.addShadowRoot(e.shadowRoot,document)},onIframeLoad:(e,t)=>{K.attachIframe(e,t),Z.observeAttachShadow(e)},onStylesheetLoad:(e,t)=>{Y.attachLinkElement(e,t)},keepIframeSrcFn:O});if(!t)return console.warn("Failed to snapshot the document");H(uu({type:wl.FullSnapshot,data:{node:t,initialOffset:ll(window)}})),jl.forEach((e=>e.unlock())),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&Y.adoptStyleSheets(document.adoptedStyleSheets,pu.getId(document))};du=Q;try{const e=[],t=e=>Bl(Zl)({onMutation:P,mutationCb:q,mousemoveCb:(e,t)=>H(uu({type:wl.IncrementalSnapshot,data:{source:t,positions:e}})),mouseInteractionCb:e=>H(uu({type:wl.IncrementalSnapshot,data:{source:Il.MouseInteraction,...e}})),scrollCb:V,viewportResizeCb:e=>H(uu({type:wl.IncrementalSnapshot,data:{source:Il.ViewportResize,...e}})),inputCb:e=>H(uu({type:wl.IncrementalSnapshot,data:{source:Il.Input,...e}})),mediaInteractionCb:e=>H(uu({type:wl.IncrementalSnapshot,data:{source:Il.MediaInteraction,...e}})),styleSheetRuleCb:e=>H(uu({type:wl.IncrementalSnapshot,data:{source:Il.StyleSheetRule,...e}})),styleDeclarationCb:e=>H(uu({type:wl.IncrementalSnapshot,data:{source:Il.StyleDeclaration,...e}})),canvasMutationCb:z,fontCb:e=>H(uu({type:wl.IncrementalSnapshot,data:{source:Il.Font,...e}})),selectionCb:e=>{H(uu({type:wl.IncrementalSnapshot,data:{source:Il.Selection,...e}}))},customElementCb:e=>{H(uu({type:wl.IncrementalSnapshot,data:{source:Il.CustomElement,...e}}))},blockClass:s,ignoreClass:i,ignoreSelector:c,maskAllText:l,maskTextClass:u,unmaskTextClass:d,maskTextSelector:p,unmaskTextSelector:h,maskInputOptions:B,inlineStylesheet:g,sampling:E,recordCanvas:I,inlineImages:L,userTriggeredOnInput:R,collectFonts:x,doc:e,maskAttributeFn:y,maskInputFn:S,maskTextFn:T,keepIframeSrcFn:O,blockSelector:a,unblockSelector:o,slimDOMOptions:G,dataURLOptions:v,mirror:pu,iframeManager:K,stylesheetManager:Y,shadowDomManager:Z,processedNodeManager:X,canvasManager:J,ignoreCSSAttributes:N,plugins:Fn([A,"optionalAccess",e=>e.filter,"call",e=>e((e=>e.observer)),"optionalAccess",e=>e.map,"call",e=>e((e=>({observer:e.observer,options:e.options,callback:t=>H(uu({type:wl.Plugin,data:{plugin:e.name,payload:t}}))})))])||[]},{});K.addLoadListener((n=>{try{e.push(t(n.contentDocument))}catch(e){console.warn(e)}}));const n=()=>{Q(),e.push(t(document))};return"interactive"===document.readyState||"complete"===document.readyState?n():(e.push(tl("DOMContentLoaded",(()=>{H(uu({type:wl.DomContentLoaded,data:{}})),"DOMContentLoaded"===C&&n()}))),e.push(tl("load",(()=>{H(uu({type:wl.Load,data:{}})),"load"===C&&n()}),window))),()=>{e.forEach((e=>e())),X.destroy(),du=void 0,Ul=void 0}}catch(e){console.warn(e)}}hu.mirror=pu,hu.takeFullSnapshot=function(e){if(!du)throw new Error("please take full snapshot after start recording");du(e)};const gu=3;function mu(e){return e>9999999999?e:1e3*e}function fu(e){return e>9999999999?e/1e3:e}function _u(e,t){"sentry.transaction"!==t.category&&(["ui.click","ui.input"].includes(t.category)?e.triggerUserActivity():e.checkAndHandleExpiredSession(),e.addUpdate((()=>(e.throttledAddEvent({type:wl.Custom,timestamp:1e3*(t.timestamp||0),data:{tag:"breadcrumb",payload:Kt(t,10,1e3)}}),"console"===t.category))))}const yu="button,a";function Su(e){return e.closest(yu)||e}function Tu(e){const t=bu(e);return t&&t instanceof Element?Su(t):t}function bu(e){return function(e){return"object"==typeof e&&!!e&&"target"in e}(e)?e.target:e}let Eu;function vu(e){return Eu||(Eu=[],We(cc,"open",(function(e){return function(...t){if(Eu)try{Eu.forEach((e=>e()))}catch(e){}return e.apply(cc,t)}}))),Eu.push(e),()=>{const t=Eu?Eu.indexOf(e):-1;t>-1&&Eu.splice(t,1)}}class wu{constructor(e,t,n=_u){this._lastMutation=0,this._lastScroll=0,this._clicks=[],this._timeout=t.timeout/1e3,this._threshold=t.threshold/1e3,this._scollTimeout=t.scrollTimeout/1e3,this._replay=e,this._ignoreSelector=t.ignoreSelector,this._addBreadcrumbEvent=n}addListeners(){const e=vu((()=>{this._lastMutation=ku()}));this._teardown=()=>{e(),this._clicks=[],this._lastMutation=0,this._lastScroll=0}}removeListeners(){this._teardown&&this._teardown(),this._checkClickTimeout&&clearTimeout(this._checkClickTimeout)}handleClick(e,t){if(function(e,t){if(!Iu.includes(e.tagName))return!0;if("INPUT"===e.tagName&&!["submit","button"].includes(e.getAttribute("type")||""))return!0;if("A"===e.tagName&&(e.hasAttribute("download")||e.hasAttribute("target")&&"_self"!==e.getAttribute("target")))return!0;if(t&&e.matches(t))return!0;return!1}(t,this._ignoreSelector)||!function(e){return!(!e.data||"number"!=typeof e.data.nodeId||!e.timestamp)}(e))return;const n={timestamp:fu(e.timestamp),clickBreadcrumb:e,clickCount:0,node:t};this._clicks.some((e=>e.node===n.node&&Math.abs(e.timestamp-n.timestamp)<1))||(this._clicks.push(n),1===this._clicks.length&&this._scheduleCheckClicks())}registerMutation(e=Date.now()){this._lastMutation=fu(e)}registerScroll(e=Date.now()){this._lastScroll=fu(e)}registerClick(e){const t=Su(e);this._handleMultiClick(t)}_handleMultiClick(e){this._getClicks(e).forEach((e=>{e.clickCount++}))}_getClicks(e){return this._clicks.filter((t=>t.node===e))}_checkClicks(){const e=[],t=ku();this._clicks.forEach((n=>{!n.mutationAfter&&this._lastMutation&&(n.mutationAfter=n.timestamp<=this._lastMutation?this._lastMutation-n.timestamp:void 0),!n.scrollAfter&&this._lastScroll&&(n.scrollAfter=n.timestamp<=this._lastScroll?this._lastScroll-n.timestamp:void 0),n.timestamp+this._timeout<=t&&e.push(n)}));for(const t of e){const e=this._clicks.indexOf(t);e>-1&&(this._generateBreadcrumbs(t),this._clicks.splice(e,1))}this._clicks.length&&this._scheduleCheckClicks()}_generateBreadcrumbs(e){const t=this._replay,n=e.scrollAfter&&e.scrollAfter<=this._scollTimeout,r=e.mutationAfter&&e.mutationAfter<=this._threshold,s=!n&&!r,{clickCount:a,clickBreadcrumb:o}=e;if(s){const n=1e3*Math.min(e.mutationAfter||this._timeout,this._timeout),r=n<1e3*this._timeout?"mutation":"timeout",s={type:"default",message:o.message,timestamp:o.timestamp,category:"ui.slowClickDetected",data:{...o.data,url:cc.location.href,route:t.getCurrentRoute(),timeAfterClickMs:n,endReason:r,clickCount:a||1}};this._addBreadcrumbEvent(t,s)}else if(a>1){const e={type:"default",message:o.message,timestamp:o.timestamp,category:"ui.multiClick",data:{...o.data,url:cc.location.href,route:t.getCurrentRoute(),clickCount:a,metric:!0}};this._addBreadcrumbEvent(t,e)}}_scheduleCheckClicks(){this._checkClickTimeout&&clearTimeout(this._checkClickTimeout),this._checkClickTimeout=setTimeout((()=>this._checkClicks()),1e3)}}const Iu=["A","BUTTON","INPUT"];function ku(){return Date.now()/1e3}function Cu(e,t){try{if(!function(e){return e.type===gu}(t))return;const{source:n}=t.data;if(n===Il.Mutation&&e.registerMutation(t.timestamp),n===Il.Scroll&&e.registerScroll(t.timestamp),function(e){return e.data.source===Il.MouseInteraction}(t)){const{type:n,id:r}=t.data,s=hu.mirror.getNode(r);s instanceof HTMLElement&&n===kl.Click&&e.registerClick(s)}}catch(e){}}function Ru(e){return{timestamp:Date.now()/1e3,type:"default",...e}}var xu;!function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"}(xu||(xu={}));const Lu=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid","disabled","aria-disabled","data-sentry-component"]);function Au(e){const t={};for(const n in e)if(Lu.has(n)){let r=n;"data-testid"!==n&&"data-test-id"!==n||(r="testId"),t[r]=e[n]}return t}const Ou=e=>t=>{if(!e.isEnabled())return;const n=function(e){const{target:t,message:n}=function(e){const t="click"===e.name;let n,r=null;try{r=t?Tu(e.event):bu(e.event),n=Ce(r,{maxStringLength:200})||"<unknown>"}catch(e){n="<unknown>"}return{target:r,message:n}}(e);return Ru({category:`ui.${e.name}`,...Nu(t,n)})}(t);if(!n)return;const r="click"===t.name,s=r?t.event:void 0;var a,o,i;!(r&&e.clickDetector&&s&&s.target)||s.altKey||s.metaKey||s.ctrlKey||s.shiftKey||(a=e.clickDetector,o=n,i=Tu(t.event),a.handleClick(o,i)),_u(e,n)};function Nu(e,t){const n=hu.mirror.getId(e),r=n&&hu.mirror.getNode(n),s=r&&hu.mirror.getMeta(r),a=s&&function(e){return e.type===xu.Element}(s)?s:null;return{message:t,data:a?{nodeId:n,node:{id:n,tagName:a.tagName,textContent:Array.from(a.childNodes).map((e=>e.type===xu.Text&&e.textContent)).filter(Boolean).map((e=>e.trim())).join(""),attributes:Au(a.attributes)}}:{}}}function Du(e,t){if(!e.isEnabled())return;e.updateUserActivity();const n=function(e){const{metaKey:t,shiftKey:n,ctrlKey:r,altKey:s,key:a,target:o}=e;if(!o||function(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName||e.isContentEditable}(o)||!a)return null;const i=t||r||s,c=1===a.length;if(!i&&c)return null;const l=Ce(o,{maxStringLength:200})||"<unknown>",u=Nu(o,l);return Ru({category:"ui.keyDown",message:l,data:{...u.data,metaKey:t,shiftKey:n,ctrlKey:r,altKey:s,key:a}})}(t);n&&_u(e,n)}const Pu={resource:function(e){const{entryType:t,initiatorType:n,name:r,responseEnd:s,startTime:a,decodedBodySize:o,encodedBodySize:i,responseStatus:c,transferSize:l}=e;if(["fetch","xmlhttprequest"].includes(n))return null;return{type:`${t}.${n}`,start:Fu(a),end:Fu(s),name:r,data:{size:l,statusCode:c,decodedBodySize:o,encodedBodySize:i}}},paint:function(e){const{duration:t,entryType:n,name:r,startTime:s}=e,a=Fu(s);return{type:n,name:r,start:a,end:a+t,data:void 0}},navigation:function(e){const{entryType:t,name:n,decodedBodySize:r,duration:s,domComplete:a,encodedBodySize:o,domContentLoadedEventStart:i,domContentLoadedEventEnd:c,domInteractive:l,loadEventStart:u,loadEventEnd:d,redirectCount:p,startTime:h,transferSize:g,type:m}=e;if(0===s)return null;return{type:`${t}.${m}`,start:Fu(h),end:Fu(a),name:n,data:{size:g,decodedBodySize:r,encodedBodySize:o,duration:s,domInteractive:l,domContentLoadedEventStart:i,domContentLoadedEventEnd:c,loadEventStart:u,loadEventEnd:d,domComplete:a,redirectCount:p}}}};function Mu(e){return Pu[e.entryType]?Pu[e.entryType](e):null}function Fu(e){return((un||cc.performance.timeOrigin)+e)/1e3}function Uu(e){function t(t){e.performanceEntries.includes(t)||e.performanceEntries.push(t)}function n({entries:e}){e.forEach(t)}const r=[];return["navigation","paint","resource"].forEach((e=>{r.push(eo(e,n))})),r.push(Qa((({metric:t})=>{e.replayPerformanceEntries.push(function(e){const t=e.entries,n=t[t.length-1],r=n?n.element:void 0,s=e.value,a=Fu(s);return{type:"largest-contentful-paint",name:"largest-contentful-paint",start:a,end:a,data:{value:s,size:s,nodeId:r?hu.mirror.getId(r):void 0}}}(t))}))),()=>{r.forEach((e=>e()))}}const Bu="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,Gu='var t=Uint8Array,n=Uint16Array,r=Int32Array,e=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=function(t,e){for(var i=new n(31),a=0;a<31;++a)i[a]=e+=1<<t[a-1];var s=new r(i[30]);for(a=1;a<30;++a)for(var o=i[a];o<i[a+1];++o)s[o]=o-i[a]<<5|a;return{b:i,r:s}},o=s(e,2),f=o.b,h=o.r;f[28]=258,h[258]=28;for(var l=s(i,0).r,u=new n(32768),c=0;c<32768;++c){var v=(43690&c)>>1|(21845&c)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,u[c]=((65280&v)>>8|(255&v)<<8)>>1}var d=function(t,r,e){for(var i=t.length,a=0,s=new n(r);a<i;++a)t[a]&&++s[t[a]-1];var o,f=new n(r);for(a=1;a<r;++a)f[a]=f[a-1]+s[a-1]<<1;if(e){o=new n(1<<r);var h=15-r;for(a=0;a<i;++a)if(t[a])for(var l=a<<4|t[a],c=r-t[a],v=f[t[a]-1]++<<c,d=v|(1<<c)-1;v<=d;++v)o[u[v]>>h]=l}else for(o=new n(i),a=0;a<i;++a)t[a]&&(o[a]=u[f[t[a]-1]++]>>15-t[a]);return o},g=new t(288);for(c=0;c<144;++c)g[c]=8;for(c=144;c<256;++c)g[c]=9;for(c=256;c<280;++c)g[c]=7;for(c=280;c<288;++c)g[c]=8;var w=new t(32);for(c=0;c<32;++c)w[c]=5;var p=d(g,9,0),y=d(w,5,0),m=function(t){return(t+7)/8|0},b=function(n,r,e){return(null==r||r<0)&&(r=0),(null==e||e>n.length)&&(e=n.length),new t(n.subarray(r,e))},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(t,n,r){var e=new Error(n||M[t]);if(e.code=t,Error.captureStackTrace&&Error.captureStackTrace(e,E),!r)throw e;return e},z=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8},A=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8,t[e+2]|=r>>16},_=function(r,e){for(var i=[],a=0;a<r.length;++a)r[a]&&i.push({s:a,f:r[a]});var s=i.length,o=i.slice();if(!s)return{t:F,l:0};if(1==s){var f=new t(i[0].s+1);return f[i[0].s]=1,{t:f,l:1}}i.sort((function(t,n){return t.f-n.f})),i.push({s:-1,f:25001});var h=i[0],l=i[1],u=0,c=1,v=2;for(i[0]={s:-1,f:h.f+l.f,l:h,r:l};c!=s-1;)h=i[i[u].f<i[v].f?u++:v++],l=i[u!=c&&i[u].f<i[v].f?u++:v++],i[c++]={s:-1,f:h.f+l.f,l:h,r:l};var d=o[0].s;for(a=1;a<s;++a)o[a].s>d&&(d=o[a].s);var g=new n(d+1),w=x(i[c-1],g,0);if(w>e){a=0;var p=0,y=w-e,m=1<<y;for(o.sort((function(t,n){return g[n.s]-g[t.s]||t.f-n.f}));a<s;++a){var b=o[a].s;if(!(g[b]>e))break;p+=m-(1<<w-g[b]),g[b]=e}for(p>>=y;p>0;){var M=o[a].s;g[M]<e?p-=1<<e-g[M]++-1:++a}for(;a>=0&&p;--a){var E=o[a].s;g[E]==e&&(--g[E],++p)}w=e}return{t:new t(g),l:w}},x=function(t,n,r){return-1==t.s?Math.max(x(t.l,n,r+1),x(t.r,n,r+1)):n[t.s]=r},D=function(t){for(var r=t.length;r&&!t[--r];);for(var e=new n(++r),i=0,a=t[0],s=1,o=function(t){e[i++]=t},f=1;f<=r;++f)if(t[f]==a&&f!=r)++s;else{if(!a&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(a),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(a);s=1,a=t[f]}return{c:e.subarray(0,i),n:r}},T=function(t,n){for(var r=0,e=0;e<n.length;++e)r+=t[e]*n[e];return r},k=function(t,n,r){var e=r.length,i=m(n+2);t[i]=255&e,t[i+1]=e>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var a=0;a<e;++a)t[i+a+4]=r[a];return 8*(i+4+e)},C=function(t,r,s,o,f,h,l,u,c,v,m){z(r,m++,s),++f[256];for(var b=_(f,15),M=b.t,E=b.l,x=_(h,15),C=x.t,U=x.l,F=D(M),I=F.c,S=F.n,L=D(C),O=L.c,j=L.n,q=new n(19),B=0;B<I.length;++B)++q[31&I[B]];for(B=0;B<O.length;++B)++q[31&O[B]];for(var G=_(q,7),H=G.t,J=G.l,K=19;K>4&&!H[a[K-1]];--K);var N,P,Q,R,V=v+5<<3,W=T(f,g)+T(h,w)+l,X=T(f,M)+T(h,C)+l+14+3*K+T(q,H)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&V<=W&&V<=X)return k(r,m,t.subarray(c,c+v));if(z(r,m,1+(X<W)),m+=2,X<W){N=d(M,E,0),P=M,Q=d(C,U,0),R=C;var Y=d(H,J,0);z(r,m,S-257),z(r,m+5,j-1),z(r,m+10,K-4),m+=14;for(B=0;B<K;++B)z(r,m+3*B,H[a[B]]);m+=3*K;for(var Z=[I,O],$=0;$<2;++$){var tt=Z[$];for(B=0;B<tt.length;++B){var nt=31&tt[B];z(r,m,Y[nt]),m+=H[nt],nt>15&&(z(r,m,tt[B]>>5&127),m+=tt[B]>>12)}}}else N=p,P=g,Q=y,R=w;for(B=0;B<u;++B){var rt=o[B];if(rt>255){A(r,m,N[(nt=rt>>18&31)+257]),m+=P[nt+257],nt>7&&(z(r,m,rt>>23&31),m+=e[nt]);var et=31&rt;A(r,m,Q[et]),m+=R[et],et>3&&(A(r,m,rt>>5&8191),m+=i[et])}else A(r,m,N[rt]),m+=P[rt]}return A(r,m,N[256]),m+P[256]},U=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F=new t(0),I=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var r=n,e=9;--e;)r=(1&r&&-306674912)^r>>>1;t[n]=r}return t}(),S=function(){var t=1,n=0;return{p:function(r){for(var e=t,i=n,a=0|r.length,s=0;s!=a;){for(var o=Math.min(s+2655,a);s<o;++s)i+=e+=r[s];e=(65535&e)+15*(e>>16),i=(65535&i)+15*(i>>16)}t=e,n=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},L=function(a,s,o,f,u){if(!u&&(u={l:1},s.dictionary)){var c=s.dictionary.subarray(-32768),v=new t(c.length+a.length);v.set(c),v.set(a,c.length),a=v,u.w=c.length}return function(a,s,o,f,u,c){var v=c.z||a.length,d=new t(f+v+5*(1+Math.ceil(v/7e3))+u),g=d.subarray(f,d.length-u),w=c.l,p=7&(c.r||0);if(s){p&&(g[0]=c.r>>3);for(var y=U[s-1],M=y>>13,E=8191&y,z=(1<<o)-1,A=c.p||new n(32768),_=c.h||new n(z+1),x=Math.ceil(o/3),D=2*x,T=function(t){return(a[t]^a[t+1]<<x^a[t+2]<<D)&z},F=new r(25e3),I=new n(288),S=new n(32),L=0,O=0,j=c.i||0,q=0,B=c.w||0,G=0;j+2<v;++j){var H=T(j),J=32767&j,K=_[H];if(A[J]=K,_[H]=J,B<=j){var N=v-j;if((L>7e3||q>24576)&&(N>423||!w)){p=C(a,g,0,F,I,S,O,q,G,j-G,p),q=L=O=0,G=j;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)S[P]=0}var Q=2,R=0,V=E,W=J-K&32767;if(N>2&&H==T(j-W))for(var X=Math.min(M,N)-1,Y=Math.min(32767,j),Z=Math.min(258,N);W<=Y&&--V&&J!=K;){if(a[j+Q]==a[j+Q-W]){for(var $=0;$<Z&&a[j+$]==a[j+$-W];++$);if($>Q){if(Q=$,R=W,$>X)break;var tt=Math.min(W,$-2),nt=0;for(P=0;P<tt;++P){var rt=j-W+P&32767,et=rt-A[rt]&32767;et>nt&&(nt=et,K=rt)}}}W+=(J=K)-(K=A[J])&32767}if(R){F[q++]=268435456|h[Q]<<18|l[R];var it=31&h[Q],at=31&l[R];O+=e[it]+i[at],++I[257+it],++S[at],B=j+Q,++L}else F[q++]=a[j],++I[a[j]]}}for(j=Math.max(j,B);j<v;++j)F[q++]=a[j],++I[a[j]];p=C(a,g,w,F,I,S,O,q,G,j-G,p),w||(c.r=7&p|g[p/8|0]<<3,p-=7,c.h=_,c.p=A,c.i=j,c.w=B)}else{for(j=c.w||0;j<v+w;j+=65535){var st=j+65535;st>=v&&(g[p/8|0]=w,st=v),p=k(g,p+1,a.subarray(j,st))}c.i=v}return b(d,0,f+m(p)+u)}(a,null==s.level?6:s.level,null==s.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(a.length)))):12+s.mem,o,f,u)},O=function(t,n,r){for(;r;++n)t[n]=r,r>>>=8},j=function(){function n(n,r){if("function"==typeof n&&(r=n,n={}),this.ondata=r,this.o=n||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new t(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return n.prototype.p=function(t,n){this.ondata(L(t,this.o,0,0,this.s),n)},n.prototype.push=function(n,r){this.ondata||E(5),this.s.l&&E(4);var e=n.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var i=new t(-32768&e);i.set(this.b.subarray(0,this.s.z)),this.b=i}var a=this.b.length-this.s.z;a&&(this.b.set(n.subarray(0,a),this.s.z),this.s.z=this.b.length,this.p(this.b,!1)),this.b.set(this.b.subarray(-32768)),this.b.set(n.subarray(a),32768),this.s.z=n.length-a+32768,this.s.i=32766,this.s.w=32768}else this.b.set(n,this.s.z),this.s.z+=n.length;this.s.l=1&r,(this.s.z>this.s.w+8191||r)&&(this.p(this.b,r||!1),this.s.w=this.s.i,this.s.i-=2)},n}();function q(t,n){n||(n={});var r=function(){var t=-1;return{p:function(n){for(var r=t,e=0;e<n.length;++e)r=I[255&r^n[e]]^r>>>8;t=r},d:function(){return~t}}}(),e=t.length;r.p(t);var i,a=L(t,n,10+((i=n).filename?i.filename.length+1:0),8),s=a.length;return function(t,n){var r=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&O(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){t[3]=8;for(var e=0;e<=r.length;++e)t[e+10]=r.charCodeAt(e)}}(a,n),O(a,s-8,r.d()),O(a,s-4,e),a}var B=function(){function t(t,n){this.c=S(),this.v=1,j.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),j.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=L(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(function(t,n){var r=n.level,e=0==r?0:r<6?1:9==r?3:2;if(t[0]=120,t[1]=e<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=S();i.p(n.dictionary),O(t,2,i.d())}}(r,this.o),this.v=0),n&&O(r,r.length-4,this.c.d()),this.ondata(r,n)},t}(),G="undefined"!=typeof TextEncoder&&new TextEncoder,H="undefined"!=typeof TextDecoder&&new TextDecoder;try{H.decode(F,{stream:!0})}catch(t){}var J=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,n){this.ondata||E(5),this.d&&E(4),this.ondata(K(t),this.d=n||!1)},t}();function K(n,r){if(r){for(var e=new t(n.length),i=0;i<n.length;++i)e[i]=n.charCodeAt(i);return e}if(G)return G.encode(n);var a=n.length,s=new t(n.length+(n.length>>1)),o=0,f=function(t){s[o++]=t};for(i=0;i<a;++i){if(o+5>s.length){var h=new t(o+8+(a-i<<1));h.set(s),s=h}var l=n.charCodeAt(i);l<128||r?f(l):l<2048?(f(192|l>>6),f(128|63&l)):l>55295&&l<57344?(f(240|(l=65536+(1047552&l)|1023&n.charCodeAt(++i))>>18),f(128|l>>12&63),f(128|l>>6&63),f(128|63&l)):(f(224|l>>12),f(128|l>>6&63),f(128|63&l))}return b(s,0,o)}const N=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const n=this._hasEvents?",":"";this.stream.push(n+t),this._hasEvents=!0}finish(){this.stream.push("]",!0);const t=function(t){let n=0;for(let r=0,e=t.length;r<e;r++)n+=t[r].length;const r=new Uint8Array(n);for(let n=0,e=0,i=t.length;n<i;n++){const i=t[n];r.set(i,e),e+=i.length}return r}(this._deflatedData);return this._init(),t}_init(){this._hasEvents=!1,this._deflatedData=[],this.deflate=new B,this.deflate.ondata=(t,n)=>{this._deflatedData.push(t)},this.stream=new J(((t,n)=>{this.deflate.push(t,n)})),this.stream.push("[")}},P={clear:()=>{N.clear()},addEvent:t=>N.addEvent(t),finish:()=>N.finish(),compress:t=>function(t){return q(K(t))}(t)};addEventListener("message",(function(t){const n=t.data.method,r=t.data.id,e=t.data.arg;if(n in P&&"function"==typeof P[n])try{const t=P[n](e);postMessage({id:r,method:n,success:!0,response:t})}catch(t){postMessage({id:r,method:n,success:!1,response:t.message}),console.error(t)}})),postMessage({id:void 0,method:"init",success:!0,response:void 0});';function ju(e,t){Bu&&(Me.info(e),t&&Wu(e))}function $u(e,t){Bu&&(Me.info(e),t&&setTimeout((()=>{Wu(e)}),0))}function Wu(e){ar({category:"console",data:{logger:"replay"},level:"info",message:e},{level:"info"})}class Hu extends Error{constructor(){super("Event buffer exceeded maximum size of 20000000.")}}class qu{constructor(){this.events=[],this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return this.events.length>0}get type(){return"sync"}destroy(){this.events=[]}async addEvent(e){const t=JSON.stringify(e).length;if(this._totalSize+=t,this._totalSize>gc)throw new Hu;this.events.push(e)}finish(){return new Promise((e=>{const t=this.events;this.clear(),e(JSON.stringify(t))}))}clear(){this.events=[],this._totalSize=0,this.hasCheckout=!1}getEarliestTimestamp(){const e=this.events.map((e=>e.timestamp)).sort()[0];return e?mu(e):null}}class Vu{constructor(e){this._worker=e,this._id=0}ensureReady(){return this._ensureReadyPromise||(this._ensureReadyPromise=new Promise(((e,t)=>{this._worker.addEventListener("message",(({data:n})=>{n.success?e():t()}),{once:!0}),this._worker.addEventListener("error",(e=>{t(e)}),{once:!0})}))),this._ensureReadyPromise}destroy(){ju("[Replay] Destroying compression worker"),this._worker.terminate()}postMessage(e,t){const n=this._getAndIncrementId();return new Promise(((r,s)=>{const a=({data:t})=>{const o=t;if(o.method===e&&o.id===n){if(this._worker.removeEventListener("message",a),!o.success)return Bu&&Me.error("[Replay]",o.response),void s(new Error("Error in compression worker"));r(o.response)}};this._worker.addEventListener("message",a),this._worker.postMessage({id:n,method:e,arg:t})}))}_getAndIncrementId(){return this._id++}}class zu{constructor(e){this._worker=new Vu(e),this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return!!this._earliestTimestamp}get type(){return"worker"}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}addEvent(e){const t=mu(e.timestamp);(!this._earliestTimestamp||t<this._earliestTimestamp)&&(this._earliestTimestamp=t);const n=JSON.stringify(e);return this._totalSize+=n.length,this._totalSize>gc?Promise.reject(new Hu):this._sendEventToWorker(n)}finish(){return this._finishRequest()}clear(){this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this._worker.postMessage("clear").then(null,(e=>{Bu&&Me.warn('[Replay] Sending "clear" message to worker failed',e)}))}getEarliestTimestamp(){return this._earliestTimestamp}_sendEventToWorker(e){return this._worker.postMessage("addEvent",e)}async _finishRequest(){const e=await this._worker.postMessage("finish");return this._earliestTimestamp=null,this._totalSize=0,e}}class Yu{constructor(e){this._fallback=new qu,this._compression=new zu(e),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}get type(){return this._used.type}get hasEvents(){return this._used.hasEvents}get hasCheckout(){return this._used.hasCheckout}set hasCheckout(e){this._used.hasCheckout=e}destroy(){this._fallback.destroy(),this._compression.destroy()}clear(){return this._used.clear()}getEarliestTimestamp(){return this._used.getEarliestTimestamp()}addEvent(e){return this._used.addEvent(e)}async finish(){return await this.ensureWorkerIsLoaded(),this._used.finish()}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}async _ensureWorkerIsLoaded(){try{await this._compression.ensureReady()}catch(e){return void ju("[Replay] Failed to load the compression worker, falling back to simple buffer")}await this._switchToCompressionWorker()}async _switchToCompressionWorker(){const{events:e,hasCheckout:t}=this._fallback,n=[];for(const t of e)n.push(this._compression.addEvent(t));this._compression.hasCheckout=t,this._used=this._compression;try{await Promise.all(n)}catch(e){Bu&&Me.warn("[Replay] Failed to add events when switching buffers.",e)}}}function Ku({useCompression:e,workerUrl:t}){if(e&&window.Worker){const e=function(e){try{const t=e||function(){if("undefined"==typeof __SENTRY_EXCLUDE_REPLAY_WORKER__||!__SENTRY_EXCLUDE_REPLAY_WORKER__)return function(){const e=new Blob([Gu]);return URL.createObjectURL(e)}();return""}();if(!t)return;ju("[Replay] Using compression worker"+(e?` from ${e}`:""));const n=new Worker(t);return new Yu(n)}catch(e){ju("[Replay] Failed to create compression worker")}}(t);if(e)return e}return ju("[Replay] Using simple buffer"),new qu}function Xu(){try{return"sessionStorage"in cc&&!!cc.sessionStorage}catch(e){return!1}}function Ju(e){!function(){if(!Xu())return;try{cc.sessionStorage.removeItem(lc)}catch(e){}}(),e.session=void 0}function Zu(e){return void 0!==e&&Math.random()<e}function Qu(e){const t=Date.now();return{id:e.id||ut(),started:e.started||t,lastActivity:e.lastActivity||t,segmentId:e.segmentId||0,sampled:e.sampled,previousSessionId:e.previousSessionId}}function ed(e){if(Xu())try{cc.sessionStorage.setItem(lc,JSON.stringify(e))}catch(e){}}function td({sessionSampleRate:e,allowBuffering:t,stickySession:n=!1},{previousSessionId:r}={}){const s=function(e,t){return Zu(e)?"session":!!t&&"buffer"}(e,t),a=Qu({sampled:s,previousSessionId:r});return n&&ed(a),a}function nd(e,t,n=+new Date){return null===e||void 0===t||t<0||0!==t&&e+t<=n}function rd(e,{maxReplayDuration:t,sessionIdleExpire:n,targetTime:r=Date.now()}){return nd(e.started,t,r)||nd(e.lastActivity,n,r)}function sd(e,{sessionIdleExpire:t,maxReplayDuration:n}){return!!rd(e,{sessionIdleExpire:t,maxReplayDuration:n})&&("buffer"!==e.sampled||0!==e.segmentId)}function ad({traceInternals:e,sessionIdleExpire:t,maxReplayDuration:n,previousSessionId:r},s){const a=s.stickySession&&function(e){if(!Xu())return null;try{const t=cc.sessionStorage.getItem(lc);if(!t)return null;const n=JSON.parse(t);return $u("[Replay] Loading existing session",e),Qu(n)}catch(e){return null}}(e);return a?sd(a,{sessionIdleExpire:t,maxReplayDuration:n})?($u("[Replay] Session in sessionStorage is expired, creating new one..."),td(s,{previousSessionId:a.id})):a:($u("[Replay] Creating new session",e),td(s,{previousSessionId:r}))}function od(e,t,n){return!!cd(e,t)&&(id(e,t,n),!0)}async function id(e,t,n){if(!e.eventBuffer)return null;try{n&&"buffer"===e.recordingMode&&e.eventBuffer.clear(),n&&(e.eventBuffer.hasCheckout=!0);const r=function(e,t){try{if("function"==typeof t&&function(e){return e.type===wl.Custom}(e))return t(e)}catch(e){return Bu&&Me.error("[Replay] An error occured in the `beforeAddRecordingEvent` callback, skipping the event...",e),null}return e}(t,e.getOptions().beforeAddRecordingEvent);if(!r)return;return await e.eventBuffer.addEvent(r)}catch(t){const n=t&&t instanceof Hu?"addEventSizeExceeded":"addEvent";Bu&&Me.error(t),await e.stop({reason:n});const r=cr();r&&r.recordDroppedEvent("internal_sdk_error","replay")}}function cd(e,t){if(!e.eventBuffer||e.isPaused()||!e.isEnabled())return!1;const n=mu(t.timestamp);return!(n+e.timeouts.sessionIdlePause<Date.now())&&(!(n>e.getContext().initialTimestamp+e.getOptions().maxReplayDuration)||(ju(`[Replay] Skipping event with timestamp ${n} because it is after maxReplayDuration`,e.getOptions()._experiments.traceInternals),!1))}function ld(e){return!e.type}function ud(e){return"transaction"===e.type}function dd(e){return"feedback"===e.type}function pd(e){const t=function(){const e=cr();if(!e)return!1;const t=e.getTransport();if(!t)return!1;return t.send.__sentry__baseTransport__||!1}();return(n,r)=>{if(!e.isEnabled()||!ld(n)&&!ud(n))return;const s=r&&r.statusCode;t&&(!s||s<200||s>=300)||(ud(n)?function(e,t){const n=e.getContext();t.contexts&&t.contexts.trace&&t.contexts.trace.trace_id&&n.traceIds.size<100&&n.traceIds.add(t.contexts.trace.trace_id)}(e,n):function(e,t){const n=e.getContext();t.event_id&&n.errorIds.size<100&&n.errorIds.add(t.event_id);if("buffer"!==e.recordingMode||!t.tags||!t.tags.replayId)return;const{beforeErrorSampling:r}=e.getOptions();if("function"==typeof r&&!r(t))return;setTimeout((()=>{e.sendBufferedReplayOrFlush()}))}(e,n))}}function hd(e){return t=>{e.isEnabled()&&ld(t)&&function(e,t){const n=t.exception&&t.exception.values&&t.exception.values[0].value;if("string"!=typeof n)return;if(n.match(/reactjs\.org\/docs\/error-decoder\.html\?invariant=(418|419|422|423|425)/)||n.match(/(does not match server-rendered HTML|Hydration failed because)/i)){_u(e,Ru({category:"replay.hydrate-error"}))}}(e,t)}}function gd(e,t=!1){const n=t?pd(e):void 0;return Object.assign(((t,r)=>{if(!e.isEnabled())return t;if(function(e){return"replay_event"===e.type}(t))return delete t.breadcrumbs,t;if(!ld(t)&&!ud(t)&&!dd(t))return t;if(!e.checkAndHandleExpiredSession())return t;if(dd(t))return e.flush(),t.contexts.feedback.replay_id=e.getSessionId(),function(e,t){e.triggerUserActivity(),e.addUpdate((()=>!t.timestamp||(e.throttledAddEvent({type:wl.Custom,timestamp:1e3*t.timestamp,data:{tag:"breadcrumb",payload:{timestamp:t.timestamp,type:"default",category:"sentry.feedback",data:{feedbackId:t.event_id}}}}),!1)))}(e,t),t;if(function(e,t){return!(e.type||!e.exception||!e.exception.values||!e.exception.values.length||!t.originalException||!t.originalException.__rrweb__)}(t,r)&&!e.getOptions()._experiments.captureExceptions)return Bu&&Me.log("[Replay] Ignoring error from rrweb internals",t),null;const s=function(e,t){return"buffer"===e.recordingMode&&t.message!==dc&&!(!t.exception||t.type)&&Zu(e.getOptions().errorSampleRate)}(e,t);return(s||"session"===e.recordingMode)&&(t.tags={...t.tags,replayId:e.getSessionId()}),n&&n(t,{statusCode:200}),t}),{id:"Replay"})}function md(e,t){return t.map((({type:t,start:n,end:r,name:s,data:a})=>{const o=e.throttledAddEvent({type:wl.Custom,timestamp:n,data:{tag:"performanceSpan",payload:{op:t,description:s,startTimestamp:n,endTimestamp:r,data:a}}});return"string"==typeof o?Promise.resolve(null):o}))}function fd(e){return t=>{if(!e.isEnabled())return;const n=function(e){const{from:t,to:n}=e,r=Date.now()/1e3;return{type:"navigation.push",start:r,end:r,name:n,data:{previous:t}}}(t);null!==n&&(e.getContext().urls.push(n.name),e.triggerUserActivity(),e.addUpdate((()=>(md(e,[n]),!1))))}}function _d(e,t){e.isEnabled()&&null!==t&&(function(e,t){return(!Bu||!e.getOptions()._experiments.traceInternals)&&zs(t,cr())}(e,t.name)||e.addUpdate((()=>(md(e,[t]),!0))))}function yd(e){return t=>{if(!e.isEnabled())return;const n=function(e){const{startTimestamp:t,endTimestamp:n,xhr:r}=e,s=r[Ht];if(!t||!n||!s)return null;const{method:a,url:o,status_code:i}=s;return void 0===o?null:{type:"resource.xhr",name:o,start:t/1e3,end:n/1e3,data:{method:a,statusCode:i}}}(t);_d(e,n)}}function Sd(e,t){if(e)try{if("string"==typeof e)return t.encode(e).length;if(e instanceof URLSearchParams)return t.encode(e.toString()).length;if(e instanceof FormData){const n=Cd(e);return t.encode(n).length}if(e instanceof Blob)return e.size;if(e instanceof ArrayBuffer)return e.byteLength}catch(e){}}function Td(e){if(!e)return;const t=parseInt(e,10);return isNaN(t)?void 0:t}function bd(e){try{if("string"==typeof e)return[e];if(e instanceof URLSearchParams)return[e.toString()];if(e instanceof FormData)return[Cd(e)];if(!e)return[void 0]}catch(t){return Bu&&Me.warn("[Replay] Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return Bu&&Me.info("[Replay] Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}function Ed(e,t){if(!e)return{headers:{},size:void 0,_meta:{warnings:[t]}};const n={...e._meta},r=n.warnings||[];return n.warnings=[...r,t],e._meta=n,e}function vd(e,t){if(!t)return null;const{startTimestamp:n,endTimestamp:r,url:s,method:a,statusCode:o,request:i,response:c}=t;return{type:e,start:n/1e3,end:r/1e3,name:s,data:Xe({method:a,statusCode:o,request:i,response:c})}}function wd(e){return{headers:{},size:e,_meta:{warnings:["URL_SKIPPED"]}}}function Id(e,t,n){if(!t&&0===Object.keys(e).length)return;if(!t)return{headers:e};if(!n)return{headers:e,size:t};const r={headers:e,size:t},{body:s,warnings:a}=function(e){if(!e||"string"!=typeof e)return{body:e};const t=e.length>pc,n=function(e){const t=e[0],n=e[e.length-1];return"["===t&&"]"===n||"{"===t&&"}"===n}(e);if(t){const t=e.slice(0,pc);return n?{body:t,warnings:["MAYBE_JSON_TRUNCATED"]}:{body:`${t}â¦`,warnings:["TEXT_TRUNCATED"]}}if(n)try{return{body:JSON.parse(e)}}catch(e){}return{body:e}}(n);return r.body=s,a&&a.length>0&&(r._meta={warnings:a}),r}function kd(e,t){return Object.keys(e).reduce(((n,r)=>{const s=r.toLowerCase();return t.includes(s)&&e[r]&&(n[s]=e[r]),n}),{})}function Cd(e){return new URLSearchParams(e).toString()}function Rd(e,t){const n=function(e,t=cc.document.baseURI){if(e.startsWith("http://")||e.startsWith("https://")||e.startsWith(cc.location.origin))return e;const n=new URL(e,t);if(n.origin!==new URL(t).origin)return e;const r=n.href;if(!e.endsWith("/")&&r.endsWith("/"))return r.slice(0,-1);return r}(e);return fe(n,t)}async function xd(e,t,n){try{const r=await async function(e,t,n){const r=Date.now(),{startTimestamp:s=r,endTimestamp:a=r}=t,{url:o,method:i,status_code:c=0,request_body_size:l,response_body_size:u}=e.data,d=Rd(o,n.networkDetailAllowUrls)&&!Rd(o,n.networkDetailDenyUrls),p=d?function({networkCaptureBodies:e,networkRequestHeaders:t},n,r){const s=n?function(e,t){if(1===e.length&&"string"!=typeof e[0])return Od(e[0],t);if(2===e.length)return Od(e[1],t);return{}}(n,t):{};if(!e)return Id(s,r,void 0);const a=Ld(n),[o,i]=bd(a),c=Id(s,r,o);if(i)return Ed(c,i);return c}(n,t.input,l):wd(l),h=await async function(e,{networkCaptureBodies:t,textEncoder:n,networkResponseHeaders:r},s,a){if(!e&&void 0!==a)return wd(a);const o=s?Ad(s.headers,r):{};if(!s||!t&&void 0!==a)return Id(o,a,void 0);const[i,c]=await async function(e){const t=function(e){try{return e.clone()}catch(e){Bu&&Me.warn("[Replay] Failed to clone response body",e)}}(e);if(!t)return[void 0,"BODY_PARSE_ERROR"];try{const e=await function(e){return new Promise(((t,n)=>{const r=setTimeout((()=>n(new Error("Timeout while trying to read response body"))),500);(async function(e){return await e.text()})(e).then((e=>t(e)),(e=>n(e))).finally((()=>clearTimeout(r)))}))}(t);return[e]}catch(e){return Bu&&Me.warn("[Replay] Failed to get text body from response",e),[void 0,"BODY_PARSE_ERROR"]}}(s),l=function(e,{networkCaptureBodies:t,textEncoder:n,responseBodySize:r,captureDetails:s,headers:a}){try{const o=e&&e.length&&void 0===r?Sd(e,n):r;return s?Id(a,o,t?e:void 0):wd(o)}catch(e){return Bu&&Me.warn("[Replay] Failed to serialize response body",e),Id(a,r,void 0)}}(i,{networkCaptureBodies:t,textEncoder:n,responseBodySize:a,captureDetails:e,headers:o});if(c)return Ed(l,c);return l}(d,n,t.response,u);return{startTimestamp:s,endTimestamp:a,url:o,method:i,statusCode:c,request:p,response:h}}(e,t,n),s=vd("resource.fetch",r);_d(n.replay,s)}catch(e){Bu&&Me.error("[Replay] Failed to capture fetch breadcrumb",e)}}function Ld(e=[]){if(2===e.length&&"object"==typeof e[1])return e[1].body}function Ad(e,t){const n={};return t.forEach((t=>{e.get(t)&&(n[t]=e.get(t))})),n}function Od(e,t){if(!e)return{};const n=e.headers;return n?n instanceof Headers?Ad(n,t):Array.isArray(n)?{}:kd(n,t):{}}async function Nd(e,t,n){try{const r=function(e,t,n){const r=Date.now(),{startTimestamp:s=r,endTimestamp:a=r,input:o,xhr:i}=t,{url:c,method:l,status_code:u=0,request_body_size:d,response_body_size:p}=e.data;if(!c)return null;if(!i||!Rd(c,n.networkDetailAllowUrls)||Rd(c,n.networkDetailDenyUrls)){return{startTimestamp:s,endTimestamp:a,url:c,method:l,statusCode:u,request:wd(d),response:wd(p)}}const h=i[Ht],g=h?kd(h.request_headers,n.networkRequestHeaders):{},m=kd(function(e){const t=e.getAllResponseHeaders();if(!t)return{};return t.split("\r\n").reduce(((e,t)=>{const[n,r]=t.split(": ");return e[n.toLowerCase()]=r,e}),{})}(i),n.networkResponseHeaders),[f,_]=n.networkCaptureBodies?bd(o):[void 0],[y,S]=n.networkCaptureBodies?function(e){const t=[];try{return[e.responseText]}catch(e){t.push(e)}try{return function(e,t){try{if("string"==typeof e)return[e];if(e instanceof Document)return[e.body.outerHTML];if("json"===t&&e&&"object"==typeof e)return[JSON.stringify(e)];if(!e)return[void 0]}catch(t){return Bu&&Me.warn("[Replay] Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return Bu&&Me.info("[Replay] Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}(e.response,e.responseType)}catch(e){t.push(e)}return Bu&&Me.warn("[Replay] Failed to get xhr response body",...t),[void 0]}(i):[void 0],T=Id(g,d,f),b=Id(m,p,y);return{startTimestamp:s,endTimestamp:a,url:c,method:l,statusCode:u,request:_?Ed(T,_):T,response:S?Ed(b,S):b}}(e,t,n),s=vd("resource.xhr",r);_d(n.replay,s)}catch(e){Bu&&Me.error("[Replay] Failed to capture xhr breadcrumb",e)}}function Dd(e,t,n){const{xhr:r,input:s}=t;if(!r)return;const a=Sd(s,n.textEncoder),o=r.getResponseHeader("content-length")?Td(r.getResponseHeader("content-length")):function(e,t,n){try{return Sd("json"===t&&e&&"object"==typeof e?JSON.stringify(e):e,n)}catch(e){return}}(r.response,r.responseType,n.textEncoder);void 0!==a&&(e.data.request_body_size=a),void 0!==o&&(e.data.response_body_size=o)}function Pd(e){const t=cr();try{const n=new TextEncoder,{networkDetailAllowUrls:r,networkDetailDenyUrls:s,networkCaptureBodies:a,networkRequestHeaders:o,networkResponseHeaders:i}=e.getOptions(),c={replay:e,textEncoder:n,networkDetailAllowUrls:r,networkDetailDenyUrls:s,networkCaptureBodies:a,networkRequestHeaders:o,networkResponseHeaders:i};t&&t.on?t.on("beforeAddBreadcrumb",((e,t)=>function(e,t,n){if(!t.data)return;try{(function(e){return"xhr"===e.category})(t)&&function(e){return e&&e.xhr}(n)&&(Dd(t,n,e),Nd(t,n,e)),function(e){return"fetch"===e.category}(t)&&function(e){return e&&e.response}(n)&&(!function(e,t,n){const{input:r,response:s}=t,a=Sd(r?Ld(r):void 0,n.textEncoder),o=s?Td(s.headers.get("content-length")):void 0;void 0!==a&&(e.data.request_body_size=a),void 0!==o&&(e.data.response_body_size=o)}(t,n,e),xd(t,n,e))}catch(e){Bu&&Me.warn("Error when enriching network breadcrumb")}}(c,e,t))):(Rt(function(e){return t=>{if(!e.isEnabled())return;const n=function(e){const{startTimestamp:t,endTimestamp:n,fetchData:r,response:s}=e;if(!n)return null;const{method:a,url:o}=r;return{type:"resource.fetch",start:t/1e3,end:n/1e3,name:o,data:{method:a,statusCode:s?s.status:void 0}}}(t);_d(e,n)}}(e)),qt(yd(e)))}catch(e){}}let Md=null;const Fd=e=>t=>{if(!e.isEnabled())return;const n=function(e){const t=e.getLastBreadcrumb&&e.getLastBreadcrumb();if(Md===t||!t)return null;if(Md=t,!function(e){return!!e.category}(t)||["fetch","xhr","sentry.event","sentry.transaction"].includes(t.category)||t.category.startsWith("ui."))return null;if("console"===t.category)return function(e){const t=e.data&&e.data.arguments;if(!Array.isArray(t)||0===t.length)return Ru(e);let n=!1;const r=t.map((e=>{if(!e)return e;if("string"==typeof e)return e.length>hc?(n=!0,`${e.slice(0,hc)}â¦`):e;if("object"==typeof e)try{const t=Kt(e,7);return JSON.stringify(t).length>hc?(n=!0,`${JSON.stringify(t,null,2).slice(0,hc)}â¦`):t}catch(e){}return e}));return Ru({...e,data:{...e.data,arguments:r,...n?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{}}})}(t);return Ru(t)}(t);n&&_u(e,n)};function Ud(e){return!(!e||!e.on)}function Bd(e){const{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}=e,s=Date.now()/1e3;return{type:"memory",name:"memory",start:s,end:s,data:{memory:{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}}}}function Gd(e){let t=!1;return(n,r)=>{if(!e.checkAndHandleExpiredSession())return void(Bu&&Me.warn("[Replay] Received replay event after session expired."));const s=r||!t;t=!0,e.clickDetector&&Cu(e.clickDetector,n),e.addUpdate((()=>{if("buffer"===e.recordingMode&&s&&e.setInitialState(),!od(e,n,s))return!0;if(!s)return!1;if(function(e,t){if(!t||!e.session||0!==e.session.segmentId)return;od(e,function(e){const t=e.getOptions();return{type:wl.Custom,timestamp:Date.now(),data:{tag:"options",payload:{shouldRecordCanvas:e.isRecordingCanvas(),sessionSampleRate:t.sessionSampleRate,errorSampleRate:t.errorSampleRate,useCompressionOption:t.useCompression,blockAllMedia:t.blockAllMedia,maskAllText:t.maskAllText,maskAllInputs:t.maskAllInputs,useCompression:!!e.eventBuffer&&"worker"===e.eventBuffer.type,networkDetailHasUrls:t.networkDetailAllowUrls.length>0,networkCaptureBodies:t.networkCaptureBodies,networkRequestHasHeaders:t.networkRequestHeaders.length>0,networkResponseHasHeaders:t.networkResponseHeaders.length>0}}}}(e),!1)}(e,s),e.session&&e.session.previousSessionId)return!0;if("buffer"===e.recordingMode&&e.session&&e.eventBuffer){const t=e.eventBuffer.getEarliestTimestamp();t&&(ju(`[Replay] Updating session start time to earliest event in buffer to ${new Date(t)}`,e.getOptions()._experiments.traceInternals),e.session.started=t,e.getOptions().stickySession&&ed(e.session))}return"session"===e.recordingMode&&e.flush(),!0}))}}async function jd({recordingData:e,replayId:t,segmentId:n,eventContext:r,timestamp:s,session:a}){const o=function({recordingData:e,headers:t}){let n;const r=`${JSON.stringify(t)}\n`;if("string"==typeof e)n=`${r}${e}`;else{const t=(new TextEncoder).encode(r);n=new Uint8Array(t.length+e.length),n.set(t),n.set(e,t.length)}return n}({recordingData:e,headers:{segment_id:n}}),{urls:i,errorIds:c,traceIds:l,initialTimestamp:u}=r,d=cr(),p=lr(),h=d&&d.getTransport(),g=d&&d.getDsn();if(!(d&&h&&g&&a.sampled))return;const m={type:uc,replay_start_timestamp:u/1e3,timestamp:s/1e3,error_ids:c,trace_ids:l,urls:i,replay_id:t,segment_id:n,replay_type:a.sampled},f=await async function({client:e,scope:t,replayId:n,event:r}){const s={event_id:n,integrations:"object"!=typeof e._integrations||null===e._integrations||Array.isArray(e._integrations)?void 0:Object.keys(e._integrations)};e.emit&&e.emit("preprocessEvent",r,s);const a=await Qn(e.getOptions(),r,s,t,e,Lr());if(!a)return null;a.platform=a.platform||"javascript";const o=e.getSdkMetadata&&e.getSdkMetadata(),{name:i,version:c}=o&&o.sdk||{};return a.sdk={...a.sdk,name:i||"sentry.javascript.unknown",version:c||"0.0.0"},a}({scope:p,client:d,replayId:t,event:m});if(!f)return d.recordDroppedEvent("event_processor","replay",m),void ju("An event processor returned `null`, will not send event.");delete f.sdkProcessingMetadata;const _=function(e,t,n,r){return En(An(e,Ln(e),r,n),[[{type:"replay_event"},e],[{type:"replay_recording",length:"string"==typeof t?(new TextEncoder).encode(t).length:t.length},t]])}(f,o,g,d.getOptions().tunnel);let y;try{y=await h.send(_)}catch(e){const t=new Error(dc);try{t.cause=e}catch(e){}throw t}if(!y)return y;if("number"==typeof y.statusCode&&(y.statusCode<200||y.statusCode>=300))throw new $d(y.statusCode);const S=Pn({},y);if(Dn(S,"replay"))throw new Wd(S);return y}class $d extends Error{constructor(e){super(`Transport returned status code ${e}`)}}class Wd extends Error{constructor(e){super("Rate limit hit"),this.rateLimits=e}}async function Hd(e,t={count:0,interval:5e3}){const{recordingData:n,options:r}=e;if(n.length)try{return await jd(e),!0}catch(n){if(n instanceof $d||n instanceof Wd)throw n;if(or("Replays",{_retryCount:t.count}),Bu&&r._experiments&&r._experiments.captureExceptions&&rr(n),t.count>=3){const e=new Error(`${dc} - max retries exceeded`);try{e.cause=n}catch(e){}throw e}return t.interval*=++t.count,new Promise(((n,r)=>{setTimeout((async()=>{try{await Hd(e,t),n(!0)}catch(e){r(e)}}),t.interval)}))}}const qd="__THROTTLED";function Vd(e,t,n){const r=new Map;let s=!1;return(...a)=>{const o=Math.floor(Date.now()/1e3);if((e=>{const t=e-n;r.forEach(((e,n)=>{n<t&&r.delete(n)}))})(o),[...r.values()].reduce(((e,t)=>e+t),0)>=t){const e=s;return s=!0,e?"__SKIPPED":qd}s=!1;const i=r.get(o)||0;return r.set(o,i+1),e(...a)}}class zd{constructor({options:e,recordingOptions:t}){zd.prototype.__init.call(this),zd.prototype.__init2.call(this),zd.prototype.__init3.call(this),zd.prototype.__init4.call(this),zd.prototype.__init5.call(this),zd.prototype.__init6.call(this),this.eventBuffer=null,this.performanceEntries=[],this.replayPerformanceEntries=[],this.recordingMode="session",this.timeouts={sessionIdlePause:3e5,sessionIdleExpire:9e5},this._lastActivity=Date.now(),this._isEnabled=!1,this._isPaused=!1,this._hasInitializedCoreListeners=!1,this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""},this._recordingOptions=t,this._options=e,this._debouncedFlush=function(e,t,n){let r,s,a;const o=n&&n.maxWait?Math.max(n.maxWait,t):0;function i(){return c(),r=e(),r}function c(){void 0!==s&&clearTimeout(s),void 0!==a&&clearTimeout(a),s=a=void 0}function l(){return s&&clearTimeout(s),s=setTimeout(i,t),o&&void 0===a&&(a=setTimeout(i,o)),r}return l.cancel=c,l.flush=function(){return void 0!==s||void 0!==a?i():r},l}((()=>this._flush()),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay}),this._throttledAddEvent=Vd(((e,t)=>function(e,t,n){return cd(e,t)?id(e,t,n):Promise.resolve(null)}(this,e,t)),300,5);const{slowClickTimeout:n,slowClickIgnoreSelectors:r}=this.getOptions(),s=n?{threshold:Math.min(3e3,n),timeout:n,scrollTimeout:300,ignoreSelector:r?r.join(","):""}:void 0;s&&(this.clickDetector=new wu(this,s))}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}isRecordingCanvas(){return Boolean(this._canvas)}getOptions(){return this._options}initializeSampling(e){const{errorSampleRate:t,sessionSampleRate:n}=this._options;t<=0&&n<=0||(this._initializeSessionForSampling(e),this.session?!1!==this.session.sampled&&(this.recordingMode="buffer"===this.session.sampled&&0===this.session.segmentId?"buffer":"session",$u(`[Replay] Starting replay in ${this.recordingMode} mode`,this._options._experiments.traceInternals),this._initializeRecording()):this._handleException(new Error("Unable to initialize and create session")))}start(){if(this._isEnabled&&"session"===this.recordingMode)throw new Error("Replay recording is already in progress");if(this._isEnabled&&"buffer"===this.recordingMode)throw new Error("Replay buffering is in progress, call `flush()` to save the replay");$u("[Replay] Starting replay in session mode",this._options._experiments.traceInternals);const e=ad({maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire,traceInternals:this._options._experiments.traceInternals},{stickySession:this._options.stickySession,sessionSampleRate:1,allowBuffering:!1});this.session=e,this._initializeRecording()}startBuffering(){if(this._isEnabled)throw new Error("Replay recording is already in progress");$u("[Replay] Starting replay in buffer mode",this._options._experiments.traceInternals);const e=ad({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,traceInternals:this._options._experiments.traceInternals},{stickySession:this._options.stickySession,sessionSampleRate:0,allowBuffering:!0});this.session=e,this.recordingMode="buffer",this._initializeRecording()}startRecording(){try{const e=this._canvas;this._stopRecording=hu({...this._recordingOptions,..."buffer"===this.recordingMode&&{checkoutEveryNms:6e4},emit:Gd(this),onMutation:this._onMutationHandler,...e?{recordCanvas:e.recordCanvas,getCanvasManager:e.getCanvasManager,sampling:e.sampling,dataURLOptions:e.dataURLOptions}:{}})}catch(e){this._handleException(e)}}stopRecording(){try{return this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0),!0}catch(e){return this._handleException(e),!1}}async stop({forceFlush:e=!1,reason:t}={}){if(this._isEnabled){this._isEnabled=!1;try{ju("[Replay] Stopping Replay"+(t?` triggered by ${t}`:""),this._options._experiments.traceInternals),this._removeListeners(),this.stopRecording(),this._debouncedFlush.cancel(),e&&await this._flush({force:!0}),this.eventBuffer&&this.eventBuffer.destroy(),this.eventBuffer=null,Ju(this)}catch(e){this._handleException(e)}}}pause(){this._isPaused||(this._isPaused=!0,this.stopRecording(),ju("[Replay] Pausing replay",this._options._experiments.traceInternals))}resume(){this._isPaused&&this._checkSession()&&(this._isPaused=!1,this.startRecording(),ju("[Replay] Resuming replay",this._options._experiments.traceInternals))}async sendBufferedReplayOrFlush({continueRecording:e=!0}={}){if("session"===this.recordingMode)return this.flushImmediate();const t=Date.now();ju("[Replay] Converting buffer to session",this._options._experiments.traceInternals),await this.flushImmediate();const n=this.stopRecording();e&&n&&"session"!==this.recordingMode&&(this.recordingMode="session",this.session&&(this._updateUserActivity(t),this._updateSessionActivity(t),this._maybeSaveSession()),this.startRecording())}addUpdate(e){const t=e();"buffer"!==this.recordingMode&&!0!==t&&this._debouncedFlush()}triggerUserActivity(){if(this._updateUserActivity(),this._stopRecording)this.checkAndHandleExpiredSession(),this._updateSessionActivity();else{if(!this._checkSession())return;this.resume()}}updateUserActivity(){this._updateUserActivity(),this._updateSessionActivity()}conditionalFlush(){return"buffer"===this.recordingMode?Promise.resolve():this.flushImmediate()}flush(){return this._debouncedFlush()}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}cancelFlush(){this._debouncedFlush.cancel()}getSessionId(){return this.session&&this.session.id}checkAndHandleExpiredSession(){if(!(this._lastActivity&&nd(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&"session"===this.session.sampled))return!!this._checkSession();this.pause()}setInitialState(){const e=`${cc.location.pathname}${cc.location.hash}${cc.location.search}`,t=`${cc.location.origin}${e}`;this.performanceEntries=[],this.replayPerformanceEntries=[],this._clearContext(),this._context.initialUrl=t,this._context.initialTimestamp=Date.now(),this._context.urls.push(t)}throttledAddEvent(e,t){const n=this._throttledAddEvent(e,t);if(n===qd){const e=Ru({category:"replay.throttled"});this.addUpdate((()=>!od(this,{type:5,timestamp:e.timestamp||0,data:{tag:"breadcrumb",payload:e,metric:!0}})))}return n}getCurrentRoute(){const e=this.lastTransaction||lr().getTransaction(),t=(e&&Jn(e).data||{})[Qr];if(e&&t&&["route","custom"].includes(t))return Jn(e).description}_initializeRecording(){this.setInitialState(),this._updateSessionActivity(),this.eventBuffer=Ku({useCompression:this._options.useCompression,workerUrl:this._options.workerUrl}),this._removeListeners(),this._addListeners(),this._isEnabled=!0,this._isPaused=!1,this.startRecording()}_handleException(e){Bu&&Me.error("[Replay]",e),Bu&&this._options._experiments&&this._options._experiments.captureExceptions&&rr(e)}_initializeSessionForSampling(e){const t=this._options.errorSampleRate>0,n=ad({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,traceInternals:this._options._experiments.traceInternals,previousSessionId:e},{stickySession:this._options.stickySession,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:t});this.session=n}_checkSession(){if(!this.session)return!1;const e=this.session;return!sd(e,{sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration})||(this._refreshSession(e),!1)}async _refreshSession(e){this._isEnabled&&(await this.stop({reason:"refresh session"}),this.initializeSampling(e.id))}_addListeners(){try{cc.document.addEventListener("visibilitychange",this._handleVisibilityChange),cc.addEventListener("blur",this._handleWindowBlur),cc.addEventListener("focus",this._handleWindowFocus),cc.addEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.addListeners(),this._hasInitializedCoreListeners||(!function(e){const t=lr(),n=cr();t.addScopeListener(Fd(e)),Et(Ou(e)),jt(fd(e)),Pd(e);const r=gd(e,!Ud(n));n&&n.addEventProcessor?n.addEventProcessor(r):Ds(r),Ud(n)&&(n.on("beforeSendEvent",hd(e)),n.on("afterSendEvent",pd(e)),n.on("createDsc",(t=>{const n=e.getSessionId();n&&e.isEnabled()&&"session"===e.recordingMode&&e.checkAndHandleExpiredSession()&&(t.replay_id=n)})),n.on("startTransaction",(t=>{e.lastTransaction=t})),n.on("finishTransaction",(t=>{e.lastTransaction=t})),n.on("beforeSendFeedback",((t,n)=>{const r=e.getSessionId();n&&n.includeReplay&&e.isEnabled()&&r&&t.contexts&&t.contexts.feedback&&(t.contexts.feedback.replay_id=r)})))}(this),this._hasInitializedCoreListeners=!0)}catch(e){this._handleException(e)}this._performanceCleanupCallback=Uu(this)}_removeListeners(){try{cc.document.removeEventListener("visibilitychange",this._handleVisibilityChange),cc.removeEventListener("blur",this._handleWindowBlur),cc.removeEventListener("focus",this._handleWindowFocus),cc.removeEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.removeListeners(),this._performanceCleanupCallback&&this._performanceCleanupCallback()}catch(e){this._handleException(e)}}__init(){this._handleVisibilityChange=()=>{"visible"===cc.document.visibilityState?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()}}__init2(){this._handleWindowBlur=()=>{const e=Ru({category:"ui.blur"});this._doChangeToBackgroundTasks(e)}}__init3(){this._handleWindowFocus=()=>{const e=Ru({category:"ui.focus"});this._doChangeToForegroundTasks(e)}}__init4(){this._handleKeyboardEvent=e=>{Du(this,e)}}_doChangeToBackgroundTasks(e){if(!this.session)return;rd(this.session,{maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire})||(e&&this._createCustomBreadcrumb(e),this.conditionalFlush())}_doChangeToForegroundTasks(e){if(!this.session)return;this.checkAndHandleExpiredSession()?e&&this._createCustomBreadcrumb(e):ju("[Replay] Document has become active, but session has expired")}_updateUserActivity(e=Date.now()){this._lastActivity=e}_updateSessionActivity(e=Date.now()){this.session&&(this.session.lastActivity=e,this._maybeSaveSession())}_createCustomBreadcrumb(e){this.addUpdate((()=>{this.throttledAddEvent({type:wl.Custom,timestamp:e.timestamp||0,data:{tag:"breadcrumb",payload:e}})}))}_addPerformanceEntries(){const e=(t=this.performanceEntries,t.map(Mu).filter(Boolean)).concat(this.replayPerformanceEntries);var t;return this.performanceEntries=[],this.replayPerformanceEntries=[],Promise.all(md(this,e))}_clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[]}_updateInitialTimestampFromEventBuffer(){const{session:e,eventBuffer:t}=this;if(!e||!t)return;if(e.segmentId)return;const n=t.getEarliestTimestamp();n&&n<this._context.initialTimestamp&&(this._context.initialTimestamp=n)}_popEventContext(){const e={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};return this._clearContext(),e}async _runFlush(){const e=this.getSessionId();if(this.session&&this.eventBuffer&&e){if(await this._addPerformanceEntries(),this.eventBuffer&&this.eventBuffer.hasEvents&&(await async function(e){try{return Promise.all(md(e,[Bd(cc.performance.memory)]))}catch(e){return[]}}(this),this.eventBuffer&&e===this.getSessionId()))try{this._updateInitialTimestampFromEventBuffer();const t=Date.now();if(t-this._context.initialTimestamp>this._options.maxReplayDuration+3e4)throw new Error("Session is too long, not sending replay");const n=this._popEventContext(),r=this.session.segmentId++;this._maybeSaveSession();const s=await this.eventBuffer.finish();await Hd({replayId:e,recordingData:s,segmentId:r,eventContext:n,session:this.session,options:this.getOptions(),timestamp:t})}catch(e){this._handleException(e),this.stop({reason:"sendReplay"});const t=cr();t&&t.recordDroppedEvent("send_error","replay")}}else Bu&&Me.error("[Replay] No session or eventBuffer found to flush.")}__init5(){this._flush=async({force:e=!1}={})=>{if(!this._isEnabled&&!e)return;if(!this.checkAndHandleExpiredSession())return void(Bu&&Me.error("[Replay] Attempting to finish replay event after session expired."));if(!this.session)return;const t=this.session.started,n=Date.now()-t;this._debouncedFlush.cancel();const r=n<this._options.minReplayDuration,s=n>this._options.maxReplayDuration+5e3;if(r||s)return ju(`[Replay] Session duration (${Math.floor(n/1e3)}s) is too ${r?"short":"long"}, not sending replay.`,this._options._experiments.traceInternals),void(r&&this._debouncedFlush());const a=this.eventBuffer;if(a&&0===this.session.segmentId&&!a.hasCheckout&&ju("[Replay] Flushing initial segment without checkout.",this._options._experiments.traceInternals),!this._flushLock)return this._flushLock=this._runFlush(),await this._flushLock,void(this._flushLock=void 0);try{await this._flushLock}catch(e){Bu&&Me.error(e)}finally{this._debouncedFlush()}}}_maybeSaveSession(){this.session&&this._options.stickySession&&ed(this.session)}__init6(){this._onMutationHandler=e=>{const t=e.length,n=this._options.mutationLimit,r=n&&t>n;if(t>this._options.mutationBreadcrumbLimit||r){const e=Ru({category:"replay.mutations",data:{count:t,limit:r}});this._createCustomBreadcrumb(e)}return!r||(this.stop({reason:"mutationLimit",forceFlush:"session"===this.recordingMode}),!1)}}}function Yd(e,t,n,r){const s=[...e,..."string"==typeof r?r.split(","):[],...t];return void 0!==n&&("string"==typeof n&&s.push(`.${n}`),Pe((()=>{console.warn("[Replay] You are using a deprecated configuration item for privacy. Read the documentation on how to use the new privacy configuration.")}))),s.join(",")}const Kd='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',Xd=["content-length","content-type","accept"];let Jd=!1;class Zd{static __initStatic(){this.id="Replay"}constructor({flushMinDelay:e=5e3,flushMaxDelay:t=5500,minReplayDuration:n=4999,maxReplayDuration:r=36e5,stickySession:s=!0,useCompression:a=!0,workerUrl:o,_experiments:i={},sessionSampleRate:c,errorSampleRate:l,maskAllText:u=!0,maskAllInputs:d=!0,blockAllMedia:p=!0,mutationBreadcrumbLimit:h=750,mutationLimit:g=1e4,slowClickTimeout:m=7e3,slowClickIgnoreSelectors:f=[],networkDetailAllowUrls:_=[],networkDetailDenyUrls:y=[],networkCaptureBodies:S=!0,networkRequestHeaders:T=[],networkResponseHeaders:b=[],mask:E=[],maskAttributes:v=["title","placeholder"],unmask:w=[],block:I=[],unblock:k=[],ignore:C=[],maskFn:R,beforeAddRecordingEvent:x,beforeErrorSampling:L,blockClass:A,blockSelector:O,maskInputOptions:N,maskTextClass:D,maskTextSelector:P,ignoreClass:M}={}){this.name=Zd.id;const F=function({mask:e,unmask:t,block:n,unblock:r,ignore:s,blockClass:a,blockSelector:o,maskTextClass:i,maskTextSelector:c,ignoreClass:l}){const u={maskTextSelector:Yd(e,[".sentry-mask","[data-sentry-mask]"],i,c),unmaskTextSelector:Yd(t,[".sentry-unmask","[data-sentry-unmask]"]),blockSelector:Yd(n,[".sentry-block","[data-sentry-block]",'base[href="/"]'],a,o),unblockSelector:Yd(r,[".sentry-unblock","[data-sentry-unblock]"]),ignoreSelector:Yd(s,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'],l)};return a instanceof RegExp&&(u.blockClass=a),i instanceof RegExp&&(u.maskTextClass=i),u}({mask:E,unmask:w,block:I,unblock:k,ignore:C,blockClass:A,blockSelector:O,maskTextClass:D,maskTextSelector:P,ignoreClass:M});if(this._recordingOptions={maskAllInputs:d,maskAllText:u,maskInputOptions:{...N||{},password:!0},maskTextFn:R,maskInputFn:R,maskAttributeFn:(e,t,n)=>function({el:e,key:t,maskAttributes:n,maskAllText:r,privacyOptions:s,value:a}){return r?s.unmaskTextSelector&&e.matches(s.unmaskTextSelector)?a:n.includes(t)||"value"===t&&"INPUT"===e.tagName&&["submit","button"].includes(e.getAttribute("type")||"")?a.replace(/[\S]/g,"*"):a:a}({maskAttributes:v,maskAllText:u,privacyOptions:F,key:e,value:t,el:n}),...F,slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0,errorHandler:e=>{try{e.__rrweb__=!0}catch(e){}}},this._initialOptions={flushMinDelay:e,flushMaxDelay:t,minReplayDuration:Math.min(n,15e3),maxReplayDuration:Math.min(r,mc),stickySession:s,sessionSampleRate:c,errorSampleRate:l,useCompression:a,workerUrl:o,blockAllMedia:p,maskAllInputs:d,maskAllText:u,mutationBreadcrumbLimit:h,mutationLimit:g,slowClickTimeout:m,slowClickIgnoreSelectors:f,networkDetailAllowUrls:_,networkDetailDenyUrls:y,networkCaptureBodies:S,networkRequestHeaders:Qd(T),networkResponseHeaders:Qd(b),beforeAddRecordingEvent:x,beforeErrorSampling:L,_experiments:i},"number"==typeof c&&(console.warn(`[Replay] You are passing \`sessionSampleRate\` to the Replay integration.\nThis option is deprecated and will be removed soon.\nInstead, configure \`replaysSessionSampleRate\` directly in the SDK init options, e.g.:\nSentry.init({ replaysSessionSampleRate: ${c} })`),this._initialOptions.sessionSampleRate=c),"number"==typeof l&&(console.warn(`[Replay] You are passing \`errorSampleRate\` to the Replay integration.\nThis option is deprecated and will be removed soon.\nInstead, configure \`replaysOnErrorSampleRate\` directly in the SDK init options, e.g.:\nSentry.init({ replaysOnErrorSampleRate: ${l} })`),this._initialOptions.errorSampleRate=l),this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?`${this._recordingOptions.blockSelector},${Kd}`:Kd),this._isInitialized&&Yt())throw new Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}get _isInitialized(){return Jd}set _isInitialized(e){Jd=e}setupOnce(){Yt()&&(this._setup(),setTimeout((()=>this._initialize())))}start(){this._replay&&this._replay.start()}startBuffering(){this._replay&&this._replay.startBuffering()}stop(){return this._replay?this._replay.stop({forceFlush:"session"===this._replay.recordingMode}):Promise.resolve()}flush(e){return this._replay&&this._replay.isEnabled()?this._replay.sendBufferedReplayOrFlush(e):Promise.resolve()}getReplayId(){if(this._replay&&this._replay.isEnabled())return this._replay.getSessionId()}_initialize(){this._replay&&(this._maybeLoadFromReplayCanvasIntegration(),this._replay.initializeSampling())}_setup(){const e=function(e){const t=cr(),n=t&&t.getOptions(),r={sessionSampleRate:0,errorSampleRate:0,...Xe(e)};if(!n)return Pe((()=>{console.warn("SDK client is not available.")})),r;null==e.sessionSampleRate&&null==e.errorSampleRate&&null==n.replaysSessionSampleRate&&null==n.replaysOnErrorSampleRate&&Pe((()=>{console.warn("Replay is disabled because neither `replaysSessionSampleRate` nor `replaysOnErrorSampleRate` are set.")}));"number"==typeof n.replaysSessionSampleRate&&(r.sessionSampleRate=n.replaysSessionSampleRate);"number"==typeof n.replaysOnErrorSampleRate&&(r.errorSampleRate=n.replaysOnErrorSampleRate);return r}(this._initialOptions);this._replay=new zd({options:e,recordingOptions:this._recordingOptions})}_maybeLoadFromReplayCanvasIntegration(){try{const e=cr().getIntegrationByName("ReplayCanvas");if(!e)return;this._replay._canvas=e.getOptions()}catch(e){}}}function Qd(e){return[...Xd,...e.map((e=>e.toLowerCase()))]}var ep;function tp(e,t,n=1/0,r=0){return e?e.nodeType!==e.ELEMENT_NODE||r>n?-1:t(e)?r:tp(e.parentNode,t,n,r+1):-1}function np(e,t){return n=>{const r=n;if(null===r)return!1;try{if(e)if("string"==typeof e){if(r.matches(`.${e}`))return!0}else if(function(e,t){for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}return!1}(r,e))return!0;return!(!t||!r.matches(t))}catch(e){return!1}}}Zd.__initStatic(),function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"}(ep||(ep={}));const rp="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.";let sp,ap={map:{},getId:()=>(console.error(rp),-1),getNode:()=>(console.error(rp),null),removeNodeFromMap(){console.error(rp)},has:()=>(console.error(rp),!1),reset(){console.error(rp)}};function op(e,t,n,r,s=window){const a=s.Object.getOwnPropertyDescriptor(e,t);return s.Object.defineProperty(e,t,r?n:{set(e){setTimeout((()=>{n.set.call(this,e)}),0),a&&a.set&&a.set.call(this,e)}}),()=>op(e,t,a||{},!0)}function ip(e,t,n){try{if(!(t in e))return()=>{};const r=e[t],s=n(r);return"function"==typeof s&&(s.prototype=s.prototype||{},Object.defineProperties(s,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=s,()=>{e[t]=r}}catch(e){return()=>{}}}function cp(e,t,n,r,s){if(!e)return!1;const a=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(!a)return!1;const o=np(t,n);if(!s){const e=r&&a.matches(r);return o(a)&&!e}const i=tp(a,o);let c=-1;return!(i<0)&&(r&&(c=tp(a,np(null,r))),i>-1&&c<0||i<c)}function lp(...e){return function(){if(sp)return sp;const e=window.document;let t=window.requestAnimationFrame;if(e&&"function"==typeof e.createElement)try{const n=e.createElement("iframe");n.hidden=!0,e.head.appendChild(n);const r=n.contentWindow;r&&r.requestAnimationFrame&&(t=r.requestAnimationFrame),e.head.removeChild(n)}catch(e){}return sp=t.bind(window)}()(...e)}"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(ap=new Proxy(ap,{get:(e,t,n)=>("map"===t&&console.error(rp),Reflect.get(e,t,n))})),/[1-9][0-9]{12}/.test(Date.now().toString());var up=(e=>(e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2",e))(up||{});let dp;function pp(e){dp=e}const hp=e=>{if(!dp)return e;return(...t)=>{try{return e(...t)}catch(e){if(dp&&!0===dp(e))return()=>{};throw e}}};for(var gp="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",mp="undefined"==typeof Uint8Array?[]:new Uint8Array(256),fp=0;fp<64;fp++)mp[gp.charCodeAt(fp)]=fp;const _p=new Map;const yp=(e,t,n)=>{if(!e||!bp(e,t)&&"object"!=typeof e)return;const r=function(e,t){let n=_p.get(e);return n||(n=new Map,_p.set(e,n)),n.has(t)||n.set(t,[]),n.get(t)}(n,e.constructor.name);let s=r.indexOf(e);return-1===s&&(s=r.length,r.push(e)),s};function Sp(e,t,n){if(e instanceof Array)return e.map((e=>Sp(e,t,n)));if(null===e)return e;if(e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray){return{rr_type:e.constructor.name,args:[Object.values(e)]}}if(e instanceof ArrayBuffer){const t=e.constructor.name,n=function(e){var t,n=new Uint8Array(e),r=n.length,s="";for(t=0;t<r;t+=3)s+=gp[n[t]>>2],s+=gp[(3&n[t])<<4|n[t+1]>>4],s+=gp[(15&n[t+1])<<2|n[t+2]>>6],s+=gp[63&n[t+2]];return r%3==2?s=s.substring(0,s.length-1)+"=":r%3==1&&(s=s.substring(0,s.length-2)+"=="),s}(e);return{rr_type:t,base64:n}}if(e instanceof DataView){return{rr_type:e.constructor.name,args:[Sp(e.buffer,t,n),e.byteOffset,e.byteLength]}}if(e instanceof HTMLImageElement){const t=e.constructor.name,{src:n}=e;return{rr_type:t,src:n}}if(e instanceof HTMLCanvasElement){return{rr_type:"HTMLImageElement",src:e.toDataURL()}}if(e instanceof ImageData){return{rr_type:e.constructor.name,args:[Sp(e.data,t,n),e.width,e.height]}}if(bp(e,t)||"object"==typeof e){return{rr_type:e.constructor.name,index:yp(e,t,n)}}return e}const Tp=(e,t,n)=>e.map((e=>Sp(e,t,n))),bp=(e,t)=>{const n=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter((e=>"function"==typeof t[e]));return Boolean(n.find((n=>e instanceof t[n])))};function Ep(e,t,n,r,s){const a=[];try{const o=ip(e.HTMLCanvasElement.prototype,"getContext",(function(e){return function(a,...o){if(!cp(this,t,n,r,!0)){const e=function(e){return"experimental-webgl"===e?"webgl":e}(a);if("__context"in this||(this.__context=e),s&&["webgl","webgl2"].includes(e))if(o[0]&&"object"==typeof o[0]){const e=o[0];e.preserveDrawingBuffer||(e.preserveDrawingBuffer=!0)}else o.splice(0,1,{preserveDrawingBuffer:!0})}return e.apply(this,[a,...o])}}));a.push(o)}catch(e){console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{a.forEach((e=>e()))}}function vp(e,t,n,r,s,a,o,i){const c=[],l=Object.getOwnPropertyNames(e);for(const o of l)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(o))try{if("function"!=typeof e[o])continue;const l=ip(e,o,(function(e){return function(...c){const l=e.apply(this,c);if(yp(l,i,this),"tagName"in this.canvas&&!cp(this.canvas,r,s,a,!0)){const e=Tp(c,i,this),r={type:t,property:o,args:e};n(this.canvas,r)}return l}}));c.push(l)}catch(r){const s=op(e,o,{set(e){n(this.canvas,{type:t,property:o,args:[e],setter:!0})}});c.push(s)}return c}class wp{reset(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}constructor(e){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.frozen=!1,this.locked=!1,this.processMutation=(e,t)=>{!(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId)&&this.rafStamps.invokeId||(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(e)||this.pendingCanvasMutations.set(e,[]),this.pendingCanvasMutations.get(e).push(t)};const{sampling:t="all",win:n,blockClass:r,blockSelector:s,unblockSelector:a,recordCanvas:o,dataURLOptions:i,errorHandler:c}=e;this.mutationCb=e.mutationCb,this.mirror=e.mirror,this.options=e,c&&pp(c),e.enableManualSnapshot||hp((()=>{o&&"all"===t&&this.initCanvasMutationObserver(n,r,s,a),o&&"number"==typeof t&&this.initCanvasFPSObserver(t,n,r,s,a,{dataURLOptions:i})}))()}initCanvasFPSObserver(e,t,n,r,s,a){const o=Ep(t,n,r,s,!0),i=this.takeSnapshot(!1,e,t,n,r,s,a.dataURLOptions);this.resetObservers=()=>{o(),cancelAnimationFrame(i)}}initCanvasMutationObserver(e,t,n,r){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();const s=Ep(e,t,n,r,!1),a=function(e,t,n,r,s){const a=[],o=Object.getOwnPropertyNames(t.CanvasRenderingContext2D.prototype);for(const i of o)try{if("function"!=typeof t.CanvasRenderingContext2D.prototype[i])continue;const o=ip(t.CanvasRenderingContext2D.prototype,i,(function(a){return function(...o){return cp(this.canvas,n,r,s,!0)||setTimeout((()=>{const n=Tp(o,t,this);e(this.canvas,{type:up["2D"],property:i,args:n})}),0),a.apply(this,o)}}));a.push(o)}catch(n){const r=op(t.CanvasRenderingContext2D.prototype,i,{set(t){e(this.canvas,{type:up["2D"],property:i,args:[t],setter:!0})}});a.push(r)}return()=>{a.forEach((e=>e()))}}(this.processMutation.bind(this),e,t,n,r),o=function(e,t,n,r,s,a){const o=[];return o.push(...vp(t.WebGLRenderingContext.prototype,up.WebGL,e,n,r,s,0,t)),void 0!==t.WebGL2RenderingContext&&o.push(...vp(t.WebGL2RenderingContext.prototype,up.WebGL2,e,n,r,s,0,t)),()=>{o.forEach((e=>e()))}}(this.processMutation.bind(this),e,t,n,r,this.mirror);this.resetObservers=()=>{s(),a(),o()}}snapshot(e){const{options:t}=this,n=this.takeSnapshot(!0,"all"===t.sampling?2:t.sampling||2,t.win,t.blockClass,t.blockSelector,t.unblockSelector,t.dataURLOptions,e);this.resetObservers=()=>{cancelAnimationFrame(n)}}takeSnapshot(e,t,n,r,s,a,o,i){const c=new Map,l=new Worker(function(){const e=new Blob(['for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e="undefined"==typeof Uint8Array?[]:new Uint8Array(256),n=0;n<64;n++)e[t.charCodeAt(n)]=n;var a=function(e){var n,a=new Uint8Array(e),s=a.length,r="";for(n=0;n<s;n+=3)r+=t[a[n]>>2],r+=t[(3&a[n])<<4|a[n+1]>>4],r+=t[(15&a[n+1])<<2|a[n+2]>>6],r+=t[63&a[n+2]];return s%3==2?r=r.substring(0,r.length-1)+"=":s%3==1&&(r=r.substring(0,r.length-2)+"=="),r};const s=new Map,r=new Map;const i=self;i.onmessage=async function(t){if(!("OffscreenCanvas"in globalThis))return i.postMessage({id:t.data.id});{const{id:e,bitmap:n,width:o,height:f,dataURLOptions:c}=t.data,g=async function(t,e,n){const s=t+"-"+e;if("OffscreenCanvas"in globalThis){if(r.has(s))return r.get(s);const i=new OffscreenCanvas(t,e);i.getContext("2d");const o=await i.convertToBlob(n),f=await o.arrayBuffer(),c=a(f);return r.set(s,c),c}return""}(o,f,c),d=new OffscreenCanvas(o,f);d.getContext("2d").drawImage(n,0,0),n.close();const u=await d.convertToBlob(c),h=u.type,w=await u.arrayBuffer(),l=a(w);if(!s.has(e)&&await g===l)return s.set(e,l),i.postMessage({id:e});if(s.get(e)===l)return i.postMessage({id:e});i.postMessage({id:e,type:h,base64:l,width:o,height:f}),s.set(e,l)}};']);return URL.createObjectURL(e)}());l.onmessage=e=>{const t=e.data,{id:n}=t;if(c.set(n,!1),!("base64"in t))return;const{base64:r,type:s,width:a,height:o}=t;this.mutationCb({id:n,type:up["2D"],commands:[{property:"clearRect",args:[0,0,a,o]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:r}],type:s}]},0,0]}]})};const u=1e3/t;let d,p=0;const h=t=>{p&&t-p<u||(p=t,(e=>{if(e)return[e];const t=[];return n.document.querySelectorAll("canvas").forEach((e=>{cp(e,r,s,a,!0)||t.push(e)})),t})(i).forEach((t=>{const n=this.mirror.getId(t);if(!c.get(n)){if(c.set(n,!0),!e&&["webgl","webgl2"].includes(t.__context)){const e=t.getContext(t.__context);!1===Fn([e,"optionalAccess",e=>e.getContextAttributes,"call",e=>e(),"optionalAccess",e=>e.preserveDrawingBuffer])&&e.clear(e.COLOR_BUFFER_BIT)}createImageBitmap(t).then((e=>{l.postMessage({id:n,bitmap:e,width:t.width,height:t.height,dataURLOptions:o},[e])})).catch((e=>{hp((()=>{throw e}))()}))}}))),d=lp(h)};return d=lp(h),d}startPendingCanvasMutationFlusher(){lp((()=>this.flushPendingCanvasMutations()))}startRAFTimestamping(){const e=t=>{this.rafStamps.latestId=t,lp(e)};lp(e)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach(((e,t)=>{const n=this.mirror.getId(t);this.flushPendingCanvasMutationFor(t,n)})),lp((()=>this.flushPendingCanvasMutations()))}flushPendingCanvasMutationFor(e,t){if(this.frozen||this.locked)return;const n=this.pendingCanvasMutations.get(e);if(!n||-1===t)return;const r=n.map((e=>{const{type:t,...n}=e;return n})),{type:s}=n[0];this.mutationCb({id:t,type:s,commands:r}),this.pendingCanvasMutations.delete(e)}}const Ip={low:{sampling:{canvas:1},dataURLOptions:{type:"image/webp",quality:.25}},medium:{sampling:{canvas:2},dataURLOptions:{type:"image/webp",quality:.4}},high:{sampling:{canvas:4},dataURLOptions:{type:"image/webp",quality:.5}}},kp="ReplayCanvas",Cp=(e={})=>{const t={quality:e.quality||"medium",enableManualSnapshot:e.enableManualSnapshot};let n;const r=new Promise((e=>n=e));return{name:kp,setupOnce(){},getOptions(){const{quality:e,enableManualSnapshot:r}=t;return{enableManualSnapshot:r,recordCanvas:!0,getCanvasManager:e=>{const t=new wp({...e,enableManualSnapshot:r,errorHandler:e=>{try{"object"==typeof e&&(e.__rrweb__=!0)}catch(e){}}});return n(t),t},...Ip[e||"medium"]||Ip.medium}},async snapshot(e){(await r).snapshot(e)}}},Rp=ks(kp,Cp),xp=Ee,Lp="#ffffff",Ap="inherit",Op="rgba(108, 95, 199, 1)",Np={fontFamily:"system-ui, 'Helvetica Neue', Arial, sans-serif",fontSize:"14px",background:Lp,backgroundHover:"#f6f6f7",foreground:"#2b2233",border:"1.5px solid rgba(41, 35, 47, 0.13)",borderRadius:"12px",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",success:"#268d75",error:"#df3338",submitBackground:"rgba(88, 74, 192, 1)",submitBackgroundHover:Op,submitBorder:Op,submitOutlineFocus:"#29232f",submitForeground:Lp,submitForegroundHover:Lp,cancelBackground:"transparent",cancelBackgroundHover:"var(--background-hover)",cancelBorder:"var(--border)",cancelOutlineFocus:"var(--input-outline-focus)",cancelForeground:"var(--foreground)",cancelForegroundHover:"var(--foreground)",inputBackground:Ap,inputForeground:Ap,inputBorder:"var(--border)",inputOutlineFocus:Op,formBorderRadius:"20px",formContentBorderRadius:"6px"},Dp=Np,Pp={...Np,background:"#29232f",backgroundHover:"#352f3b",foreground:"#ebe6ef",border:"1.5px solid rgba(235, 230, 239, 0.15)",success:"#2da98c",error:"#f55459"},Mp="widget",Fp="api";async function Up({feedback:{message:e,email:t,name:n,source:r,url:s}},{includeReplay:a=!0}={}){const o=cr(),i=o&&o.getTransport(),c=o&&o.getDsn();if(!o||!i||!c)return;const l={contexts:{feedback:{contact_email:t,name:n,message:e,url:s,source:r}},type:"feedback"};return ir((async e=>{e.clearBreadcrumbs(),[Fp,Mp].includes(String(r))&&e.setLevel("info");const t=await async function({client:e,scope:t,event:n}){const r={};e.emit&&e.emit("preprocessEvent",n,r);const s=await Qn(e.getOptions(),n,r,t,e,Lr());return null===s?(e.recordDroppedEvent("event_processor","feedback",n),null):(s.platform=s.platform||"javascript",s)}({scope:e,client:o,event:l});if(!t)return;o.emit&&o.emit("beforeSendFeedback",t,{includeReplay:Boolean(a)});const n=_s(t,c,o.getOptions()._metadata,o.getOptions().tunnel);let s;try{s=await i.send(n)}catch(e){const t=new Error("Unable to send Feedback");try{t.cause=e}catch(e){}throw t}if(s){if("number"==typeof s.statusCode&&(s.statusCode<200||s.statusCode>=300))throw new Error("Unable to send Feedback");return s}}))}function Bp({name:e,email:t,message:n,source:r=Fp,url:s=xe()},a={}){if(!n)throw new Error("Unable to submit feedback with empty message");return Up({feedback:{name:e,email:t,message:n,url:s,source:r}},a)}const Gp="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function jp(e,t){return{...e,...t,themeDark:{...e.themeDark,...t.themeDark},themeLight:{...e.themeLight,...t.themeLight}}}function $p(e){return`\n  --background: ${e.background};\n  --background-hover: ${e.backgroundHover};\n  --foreground: ${e.foreground};\n  --error: ${e.error};\n  --success: ${e.success};\n  --border: ${e.border};\n  --border-radius: ${e.borderRadius};\n  --box-shadow: ${e.boxShadow};\n\n  --submit-background: ${e.submitBackground};\n  --submit-background-hover: ${e.submitBackgroundHover};\n  --submit-border: ${e.submitBorder};\n  --submit-outline-focus: ${e.submitOutlineFocus};\n  --submit-foreground: ${e.submitForeground};\n  --submit-foreground-hover: ${e.submitForegroundHover};\n\n  --cancel-background: ${e.cancelBackground};\n  --cancel-background-hover: ${e.cancelBackgroundHover};\n  --cancel-border: ${e.cancelBorder};\n  --cancel-outline-focus: ${e.cancelOutlineFocus};\n  --cancel-foreground: ${e.cancelForeground};\n  --cancel-foreground-hover: ${e.cancelForegroundHover};\n\n  --input-background: ${e.inputBackground};\n  --input-foreground: ${e.inputForeground};\n  --input-border: ${e.inputBorder};\n  --input-outline-focus: ${e.inputOutlineFocus};\n\n  --form-border-radius: ${e.formBorderRadius};\n  --form-content-border-radius: ${e.formContentBorderRadius};\n  `}function Wp({id:e,colorScheme:t,themeDark:n,themeLight:r}){try{const s=xp.document,a=s.createElement("div");a.id=e;const o=a.attachShadow({mode:"open"});return o.appendChild(function(e,t,n){const r=e.createElement("style");return r.textContent=`\n:host {\n  --bottom: 1rem;\n  --right: 1rem;\n  --top: auto;\n  --left: auto;\n  --z-index: 100000;\n  --font-family: ${n.light.fontFamily};\n  --font-size: ${n.light.fontSize};\n\n  position: fixed;\n  left: var(--left);\n  right: var(--right);\n  bottom: var(--bottom);\n  top: var(--top);\n  z-index: var(--z-index);\n\n  font-family: var(--font-family);\n  font-size: var(--font-size);\n\n  ${$p("dark"===t?n.dark:n.light)}\n}\n\n${"system"===t?`\n@media (prefers-color-scheme: dark) {\n  :host {\n    ${$p(n.dark)}\n  }\n}`:""}\n}`,r}(s,t,{dark:n,light:r})),o.appendChild(function(e){const t=e.createElement("style");return t.textContent="\n.dialog {\n  line-height: 25px;\n  background-color: rgba(0, 0, 0, 0.05);\n  border: none;\n  position: fixed;\n  inset: 0;\n  z-index: 10000;\n  width: 100vw;\n  height: 100vh;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  opacity: 1;\n  transition: opacity 0.2s ease-in-out;\n}\n\n.dialog:not([open]) {\n  opacity: 0;\n  pointer-events: none;\n  visibility: hidden;\n}\n.dialog:not([open]) .dialog__content {\n  transform: translate(0, -16px) scale(0.98);\n}\n\n.dialog__content {\n  position: fixed;\n  left: var(--left);\n  right: var(--right);\n  bottom: var(--bottom);\n  top: var(--top);\n\n  border: var(--border);\n  border-radius: var(--form-border-radius);\n  background-color: var(--background);\n  color: var(--foreground);\n\n  width: 320px;\n  max-width: 100%;\n  max-height: calc(100% - 2rem);\n  display: flex;\n  flex-direction: column;\n  box-shadow: var(--box-shadow);\n  transition: transform 0.2s ease-in-out;\n  transform: translate(0, 0) scale(1);\n}\n\n.dialog__header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  font-size: 20px;\n  font-weight: 600;\n  padding: 24px 24px 0 24px;\n  margin: 0;\n  margin-bottom: 16px;\n}\n\n.brand-link {\n  display: inline-flex;\n}\n\n.error {\n  color: var(--error);\n  margin-bottom: 16px;\n}\n\n.form {\n  display: grid;\n  overflow: auto;\n  flex-direction: column;\n  gap: 16px;\n  padding: 0 24px 24px;\n}\n\n.form__error-container {\n  color: var(--error);\n}\n\n.form__error-container--hidden {\n  display: none;\n}\n\n.form__label {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n  margin: 0px;\n}\n\n.form__label__text {\n  display: grid;\n  gap: 4px;\n  align-items: center;\n  grid-auto-flow: column;\n  grid-auto-columns: max-content;\n}\n\n.form__label__text--required {\n  font-size: 0.85em;\n}\n\n.form__input {\n  font-family: inherit;\n  line-height: inherit;\n  background-color: var(--input-background);\n  box-sizing: border-box;\n  border: var(--input-border);\n  border-radius: var(--form-content-border-radius);\n  color: var(--input-foreground);\n  font-size: 14px;\n  font-weight: 500;\n  padding: 6px 12px;\n}\n\n.form__input:focus-visible {\n  outline: 1px auto var(--input-outline-focus);\n}\n\n.form__input--textarea {\n  font-family: inherit;\n  resize: vertical;\n}\n\n.btn-group {\n  display: grid;\n  gap: 8px;\n  margin-top: 8px;\n}\n\n.btn {\n  line-height: inherit;\n  border: var(--cancel-border);\n  border-radius: var(--form-content-border-radius);\n  cursor: pointer;\n  font-size: 14px;\n  font-weight: 600;\n  padding: 6px 16px;\n}\n.btn[disabled] {\n  opacity: 0.6;\n  pointer-events: none;\n}\n\n.btn--primary {\n  background-color: var(--submit-background);\n  border-color: var(--submit-border);\n  color: var(--submit-foreground);\n}\n.btn--primary:hover {\n  background-color: var(--submit-background-hover);\n  color: var(--submit-foreground-hover);\n}\n.btn--primary:focus-visible {\n  outline: 1px auto var(--submit-outline-focus);\n}\n\n.btn--default {\n  background-color: var(--cancel-background);\n  color: var(--cancel-foreground);\n  font-weight: 500;\n}\n.btn--default:hover {\n  background-color: var(--cancel-background-hover);\n  color: var(--cancel-foreground-hover);\n}\n.btn--default:focus-visible {\n  outline: 1px auto var(--cancel-outline-focus);\n}\n\n.success-message {\n  background-color: var(--background);\n  border: var(--border);\n  border-radius: var(--border-radius);\n  box-shadow: var(--box-shadow);\n  font-weight: 600;\n  color: var(--success);\n  padding: 12px 24px;\n  line-height: 25px;\n  display: grid;\n  align-items: center;\n  grid-auto-flow: column;\n  gap: 6px;\n  cursor: default;\n}\n\n.success-icon path {\n  fill: var(--success);\n}\n",t}(s)),{shadow:o,host:a}}catch(e){throw Me.warn("[Feedback] Browser does not support shadow DOM API"),new Error("Browser does not support shadow DOM API.")}}async function Hp(e,t,n){if(!e)return;e.hideError();try{return await Bp({...t,source:Mp},n)}catch(t){Gp&&Me.error(t),e&&e.showError("There was a problem submitting feedback, please wait and try again.")}}function qp(e,t){return Object.entries(t).forEach((([t,n])=>{e.setAttributeNS(null,t,n)})),e}const Vp=20,zp="http://www.w3.org/2000/svg";function Yp(e,t,...n){const r=xp.document.createElement(e);t&&Object.entries(t).forEach((([e,t])=>{"className"===e&&"string"==typeof t?r.setAttribute("class",t):"boolean"==typeof t&&t?r.setAttribute(e,""):"string"==typeof t?r.setAttribute(e,t):e.startsWith("on")&&"function"==typeof t&&r.addEventListener(e.substring(2).toLowerCase(),t)}));for(const e of n)Kp(r,e);return r}function Kp(e,t){const n=xp.document;if(null!=t)if(Array.isArray(t))for(const n of t)Kp(e,n);else!1===t||("string"==typeof t?e.appendChild(n.createTextNode(t)):t instanceof Node?e.appendChild(t):e.appendChild(n.createTextNode(String(t))))}function Xp({buttonLabel:e,onClick:t}){const n=Yp("button",{type:"button",className:"widget__actor","aria-label":e,"aria-hidden":"false"},function(){const e=e=>xp.document.createElementNS(zp,e),t=qp(e("svg"),{class:"feedback-icon",width:`${Vp}`,height:`${Vp}`,viewBox:`0 0 ${Vp} ${Vp}`,fill:"none"}),n=qp(e("g"),{clipPath:"url(#clip0_57_80)"}),r=qp(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.6622 15H12.3997C12.2129 14.9959 12.031 14.9396 11.8747 14.8375L8.04965 12.2H7.49956V19.1C7.4875 19.3348 7.3888 19.5568 7.22256 19.723C7.05632 19.8892 6.83435 19.9879 6.59956 20H2.04956C1.80193 19.9968 1.56535 19.8969 1.39023 19.7218C1.21511 19.5467 1.1153 19.3101 1.11206 19.0625V12.2H0.949652C0.824431 12.2017 0.700142 12.1783 0.584123 12.1311C0.468104 12.084 0.362708 12.014 0.274155 11.9255C0.185602 11.8369 0.115689 11.7315 0.0685419 11.6155C0.0213952 11.4995 -0.00202913 11.3752 -0.00034808 11.25V3.75C-0.00900498 3.62067 0.0092504 3.49095 0.0532651 3.36904C0.0972798 3.24712 0.166097 3.13566 0.255372 3.04168C0.344646 2.94771 0.452437 2.87327 0.571937 2.82307C0.691437 2.77286 0.82005 2.74798 0.949652 2.75H8.04965L11.8747 0.1625C12.031 0.0603649 12.2129 0.00407221 12.3997 0H15.6622C15.9098 0.00323746 16.1464 0.103049 16.3215 0.278167C16.4966 0.453286 16.5964 0.689866 16.5997 0.9375V3.25269C17.3969 3.42959 18.1345 3.83026 18.7211 4.41679C19.5322 5.22788 19.9878 6.32796 19.9878 7.47502C19.9878 8.62209 19.5322 9.72217 18.7211 10.5333C18.1345 11.1198 17.3969 11.5205 16.5997 11.6974V14.0125C16.6047 14.1393 16.5842 14.2659 16.5395 14.3847C16.4948 14.5035 16.4268 14.6121 16.3394 14.7042C16.252 14.7962 16.147 14.8698 16.0307 14.9206C15.9144 14.9714 15.7891 14.9984 15.6622 15ZM1.89695 10.325H1.88715V4.625H8.33715C8.52423 4.62301 8.70666 4.56654 8.86215 4.4625L12.6872 1.875H14.7247V13.125H12.6872L8.86215 10.4875C8.70666 10.3835 8.52423 10.327 8.33715 10.325H2.20217C2.15205 10.3167 2.10102 10.3125 2.04956 10.3125C1.9981 10.3125 1.94708 10.3167 1.89695 10.325ZM2.98706 12.2V18.1625H5.66206V12.2H2.98706ZM16.5997 9.93612V5.01393C16.6536 5.02355 16.7072 5.03495 16.7605 5.04814C17.1202 5.13709 17.4556 5.30487 17.7425 5.53934C18.0293 5.77381 18.2605 6.06912 18.4192 6.40389C18.578 6.73866 18.6603 7.10452 18.6603 7.47502C18.6603 7.84552 18.578 8.21139 18.4192 8.54616C18.2605 8.88093 18.0293 9.17624 17.7425 9.41071C17.4556 9.64518 17.1202 9.81296 16.7605 9.90191C16.7072 9.91509 16.6536 9.9265 16.5997 9.93612Z"});t.appendChild(n).appendChild(r);const s=e("defs"),a=qp(e("clipPath"),{id:"clip0_57_80"}),o=qp(e("rect"),{width:`${Vp}`,height:`${Vp}`,fill:"white"});return a.appendChild(o),s.appendChild(a),t.appendChild(s).appendChild(a).appendChild(o),{get el(){return t}}}().el,e?Yp("span",{className:"widget__actor__text"},e):null);return n.addEventListener("click",(function(e){t&&t(e)})),{get el(){return n},show:()=>{n.classList.remove("widget__actor--hidden"),n.setAttribute("aria-hidden","false")},hide:()=>{n.classList.add("widget__actor--hidden"),n.setAttribute("aria-hidden","true")}}}function Jp(e,t){const n=e.get(t);return"string"==typeof n?n.trim():""}function Zp({nameLabel:e,namePlaceholder:t,emailLabel:n,emailPlaceholder:r,messageLabel:s,messagePlaceholder:a,cancelButtonLabel:o,submitButtonLabel:i,showName:c,showEmail:l,isNameRequired:u,isEmailRequired:d,defaultName:p,defaultEmail:h,onCancel:g,onSubmit:m}){const{el:f}=function({label:e}){return{el:Yp("button",{type:"submit",className:"btn btn--primary","aria-label":e},e)}}({label:i});const _=Yp("div",{className:"form__error-container form__error-container--hidden","aria-hidden":"true"});const y=Yp("input",{id:"name",type:c?"text":"hidden","aria-hidden":c?"false":"true",name:"name",required:u,className:"form__input",placeholder:t,value:p}),S=Yp("input",{id:"email",type:l?"text":"hidden","aria-hidden":l?"false":"true",name:"email",required:d,className:"form__input",placeholder:r,value:h}),T=Yp("textarea",{id:"message",autoFocus:"true",rows:"5",name:"message",required:!0,className:"form__input form__input--textarea",placeholder:a}),b=Yp("button",{type:"button",className:"btn btn--default","aria-label":o,onClick:e=>{g&&g(e)}},o),E=Yp("form",{className:"form",onSubmit:function(e){if(e.preventDefault(),e.target instanceof HTMLFormElement)try{if(m){const t=new FormData(e.target),n={name:Jp(t,"name"),email:Jp(t,"email"),message:Jp(t,"message")};m(n)}}catch(e){}}},[_,c&&Yp("label",{htmlFor:"name",className:"form__label"},[Yp("span",{className:"form__label__text"},e,u&&Yp("span",{className:"form__label__text--required"}," (required)")),y]),!c&&y,l&&Yp("label",{htmlFor:"email",className:"form__label"},[Yp("span",{className:"form__label__text"},n,d&&Yp("span",{className:"form__label__text--required"}," (required)")),S]),!l&&S,Yp("label",{htmlFor:"message",className:"form__label"},[Yp("span",{className:"form__label__text"},s,Yp("span",{className:"form__label__text--required"}," (required)")),T]),Yp("div",{className:"btn-group"},[f,b])]);return{get el(){return E},showError:function(e){_.textContent=e,_.classList.remove("form__error-container--hidden"),_.setAttribute("aria-hidden","false")},hideError:function(){_.textContent="",_.classList.add("form__error-container--hidden"),_.setAttribute("aria-hidden","true")}}}const Qp="http://www.w3.org/2000/svg";function eh({formTitle:e,showBranding:t,showName:n,showEmail:r,isNameRequired:s,isEmailRequired:a,colorScheme:o,defaultName:i,defaultEmail:c,onClosed:l,onCancel:u,onSubmit:d,...p}){let h=null;function g(){h&&(h.open=!1)}const{el:m,showError:f,hideError:_}=Zp({showEmail:r,showName:n,isEmailRequired:a,isNameRequired:s,defaultName:i,defaultEmail:c,onSubmit:d,onCancel:u,...p});return h=Yp("dialog",{className:"dialog",open:!0,onClick:function(){g(),l&&l()}},Yp("div",{className:"dialog__content",onClick:e=>{e.stopPropagation()}},Yp("h2",{className:"dialog__header"},e,t&&Yp("a",{className:"brand-link",target:"_blank",href:"https://sentry.io/welcome/",title:"Powered by Sentry",rel:"noopener noreferrer"},function({colorScheme:e}){const t=e=>xp.document.createElementNS(Qp,e),n=qp(t("svg"),{class:"sentry-logo",width:"32",height:"30",viewBox:"0 0 72 66",fill:"none"}),r=qp(t("path"),{transform:"translate(11, 11)",d:"M29,2.26a4.67,4.67,0,0,0-8,0L14.42,13.53A32.21,32.21,0,0,1,32.17,40.19H27.55A27.68,27.68,0,0,0,12.09,17.47L6,28a15.92,15.92,0,0,1,9.23,12.17H4.62A.76.76,0,0,1,4,39.06l2.94-5a10.74,10.74,0,0,0-3.36-1.9l-2.91,5a4.54,4.54,0,0,0,1.69,6.24A4.66,4.66,0,0,0,4.62,44H19.15a19.4,19.4,0,0,0-8-17.31l2.31-4A23.87,23.87,0,0,1,23.76,44H36.07a35.88,35.88,0,0,0-16.41-31.8l4.67-8a.77.77,0,0,1,1.05-.27c.53.29,20.29,34.77,20.66,35.17a.76.76,0,0,1-.68,1.13H40.6q.09,1.91,0,3.81h4.78A4.59,4.59,0,0,0,50,39.43a4.49,4.49,0,0,0-.62-2.28Z"});n.append(r);const s=t("defs"),a=t("style");return a.textContent=`\n    path {\n      fill: ${"dark"===e?"#fff":"#362d59"};\n    }`,"system"===e&&(a.textContent+="\n    @media (prefers-color-scheme: dark) {\n      path: {\n        fill: '#fff';\n      }\n    }\n    "),s.append(a),n.append(s),{get el(){return n}}}({colorScheme:o}).el)),m)),{get el(){return h},showError:f,hideError:_,open:function(){h&&(h.open=!0)},close:g,checkIsOpen:function(){return h&&!0===h.open||!1}}}const th=16,nh=17,rh="http://www.w3.org/2000/svg";function sh({message:e,onRemove:t}){function n(){r&&(r.remove(),t&&t())}const r=Yp("div",{className:"success-message",onClick:n},function(){const e=e=>xp.document.createElementNS(rh,e),t=qp(e("svg"),{class:"success-icon",width:`${th}`,height:`${nh}`,viewBox:`0 0 ${th} ${nh}`,fill:"none"}),n=qp(e("g"),{clipPath:"url(#clip0_57_156)"}),r=qp(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.55544 15.1518C4.87103 16.0308 6.41775 16.5 8 16.5C10.1217 16.5 12.1566 15.6571 13.6569 14.1569C15.1571 12.6566 16 10.6217 16 8.5C16 6.91775 15.5308 5.37103 14.6518 4.05544C13.7727 2.73985 12.5233 1.71447 11.0615 1.10897C9.59966 0.503466 7.99113 0.34504 6.43928 0.653721C4.88743 0.962403 3.46197 1.72433 2.34315 2.84315C1.22433 3.96197 0.462403 5.38743 0.153721 6.93928C-0.15496 8.49113 0.00346625 10.0997 0.608967 11.5615C1.21447 13.0233 2.23985 14.2727 3.55544 15.1518ZM4.40546 3.1204C5.46945 2.40946 6.72036 2.03 8 2.03C9.71595 2.03 11.3616 2.71166 12.575 3.92502C13.7883 5.13838 14.47 6.78405 14.47 8.5C14.47 9.77965 14.0905 11.0306 13.3796 12.0945C12.6687 13.1585 11.6582 13.9878 10.476 14.4775C9.29373 14.9672 7.99283 15.0953 6.73777 14.8457C5.48271 14.596 4.32987 13.9798 3.42502 13.075C2.52018 12.1701 1.90397 11.0173 1.65432 9.76224C1.40468 8.50718 1.5328 7.20628 2.0225 6.02404C2.5122 4.8418 3.34148 3.83133 4.40546 3.1204Z"}),s=qp(e("path"),{d:"M6.68775 12.4297C6.78586 12.4745 6.89218 12.4984 7 12.5C7.11275 12.4955 7.22315 12.4664 7.32337 12.4145C7.4236 12.3627 7.51121 12.2894 7.58 12.2L12 5.63999C12.0848 5.47724 12.1071 5.28902 12.0625 5.11098C12.0178 4.93294 11.9095 4.77744 11.7579 4.67392C11.6064 4.57041 11.4221 4.52608 11.24 4.54931C11.0579 4.57254 10.8907 4.66173 10.77 4.79999L6.88 10.57L5.13 8.56999C5.06508 8.49566 4.98613 8.43488 4.89768 8.39111C4.80922 8.34735 4.713 8.32148 4.61453 8.31498C4.51605 8.30847 4.41727 8.32147 4.32382 8.35322C4.23038 8.38497 4.14413 8.43484 4.07 8.49999C3.92511 8.63217 3.83692 8.81523 3.82387 9.01092C3.81083 9.2066 3.87393 9.39976 4 9.54999L6.43 12.24C6.50187 12.3204 6.58964 12.385 6.68775 12.4297Z"});t.appendChild(n).append(s,r);const a=e("defs"),o=qp(e("clipPath"),{id:"clip0_57_156"}),i=qp(e("rect"),{width:`${th}`,height:`${th}`,fill:"white",transform:"translate(0 0.5)"});return o.appendChild(i),a.appendChild(o),t.appendChild(a).appendChild(o).appendChild(i),{get el(){return t}}}().el,e);return{el:r,remove:n}}function ah({shadow:e,options:{shouldCreateActor:t=!0,...n},attachTo:r}){let s,a,o=!1;async function i(t){if(!a)return;const r=[];if(n.isNameRequired&&!t.name&&r.push(n.nameLabel),n.isEmailRequired&&!t.email&&r.push(n.emailLabel),t.message||r.push(n.messageLabel),r.length>0)return void a.showError(`Please enter in the following required fields: ${r.join(", ")}`);await Hp(a,t)?(h(),function(){if(e)try{const t=sh({message:n.successMessageText,onRemove:()=>{r&&clearTimeout(r),l()}});if(!t.el)throw new Error("Unable to show success message");e.appendChild(t.el);const r=setTimeout((()=>{t&&t.remove()}),5e3)}catch(e){Me.error(e)}}(),n.onSubmitSuccess&&n.onSubmitSuccess()):n.onSubmitError&&n.onSubmitError()}function c(){const e=cr(),t=e&&e.getIntegrationByName&&e.getIntegrationByName("Replay");t&&t.flush().catch((e=>{Gp&&Me.error(e)}))}function l(){s&&s.show()}function u(){s&&s.hide()}function d(){try{if(a)return a.open(),o=!0,n.onFormOpen&&n.onFormOpen(),void c();const t=n.useSentryUser,r=lr(),s=r&&r.getUser();if(a=eh({colorScheme:n.colorScheme,showBranding:n.showBranding,showName:n.showName||n.isNameRequired,showEmail:n.showEmail||n.isEmailRequired,isNameRequired:n.isNameRequired,isEmailRequired:n.isEmailRequired,formTitle:n.formTitle,cancelButtonLabel:n.cancelButtonLabel,submitButtonLabel:n.submitButtonLabel,emailLabel:n.emailLabel,emailPlaceholder:n.emailPlaceholder,messageLabel:n.messageLabel,messagePlaceholder:n.messagePlaceholder,nameLabel:n.nameLabel,namePlaceholder:n.namePlaceholder,defaultName:t&&s&&s[t.name]||"",defaultEmail:t&&s&&s[t.email]||"",onClosed:()=>{l(),o=!1,n.onFormClose&&n.onFormClose()},onCancel:()=>{p(),l()},onSubmit:i}),!a.el)throw new Error("Unable to open Feedback dialog");e.appendChild(a.el),u(),n.onFormOpen&&n.onFormOpen(),c()}catch(e){Me.error(e)}}function p(){a&&(a.close(),o=!1,n.onFormClose&&n.onFormClose())}function h(){if(a){p();const e=a.el;e&&e.remove(),a=void 0}}function g(){o||d(),u()}return r?r.addEventListener("click",g):t&&(s=Xp({buttonLabel:n.buttonLabel,onClick:g}),s.el&&e.appendChild(s.el)),{get actor(){return s},get dialog(){return a},showActor:l,hideActor:u,removeActor:function(){s&&s.el&&s.el.remove()},openDialog:d,closeDialog:p,removeDialog:h}}const oh=xp.document;class ih{static __initStatic(){this.id="Feedback"}constructor({autoInject:e=!0,id:t="sentry-feedback",isEmailRequired:n=!1,isNameRequired:r=!1,showBranding:s=!0,showEmail:a=!0,showName:o=!0,useSentryUser:i={email:"email",name:"username"},themeDark:c,themeLight:l,colorScheme:u="system",buttonLabel:d="Report a Bug",cancelButtonLabel:p="Cancel",submitButtonLabel:h="Send Bug Report",formTitle:g="Report a Bug",emailPlaceholder:m="your.email@example.org",emailLabel:f="Email",messagePlaceholder:_="What's the bug? What did you expect?",messageLabel:y="Description",namePlaceholder:S="Your Name",nameLabel:T="Name",successMessageText:b="Thank you for your report!",onFormClose:E,onFormOpen:v,onSubmitError:w,onSubmitSuccess:I}={}){this.name=ih.id,this._host=null,this._shadow=null,this._widget=null,this._widgets=new Set,this._hasInsertedActorStyles=!1,this.options={autoInject:e,showBranding:s,id:t,isEmailRequired:n,isNameRequired:r,showEmail:a,showName:o,useSentryUser:i,colorScheme:u,themeDark:{...Pp,...c},themeLight:{...Dp,...l},buttonLabel:d,cancelButtonLabel:p,submitButtonLabel:h,formTitle:g,emailLabel:f,emailPlaceholder:m,messageLabel:y,messagePlaceholder:_,nameLabel:T,namePlaceholder:S,successMessageText:b,onFormClose:E,onFormOpen:v,onSubmitError:w,onSubmitSuccess:I}}setupOnce(){if(Yt())try{this._cleanupWidgetIfExists();const{autoInject:e}=this.options;if(!e)return;this._createWidget(this.options)}catch(e){Gp&&Me.error(e)}}openDialog(){this._widget||this._createWidget({...this.options,shouldCreateActor:!1}),this._widget&&this._widget.openDialog()}closeDialog(){this._widget&&this._widget.closeDialog()}attachTo(e,t){try{const n=jp(this.options,t||{});return this._ensureShadowHost(n,(({shadow:t})=>{const r="string"==typeof e?oh.querySelector(e):"function"==typeof e.addEventListener?e:null;if(!r)return Gp&&Me.error("[Feedback] Unable to attach to target element"),null;const s=ah({shadow:t,options:n,attachTo:r});return this._widgets.add(s),this._widget||(this._widget=s),s}))}catch(e){return Gp&&Me.error(e),null}}createWidget(e){try{return this._createWidget(jp(this.options,e||{}))}catch(e){return Gp&&Me.error(e),null}}removeWidget(e){if(!e)return!1;try{if(this._widgets.has(e))return e.removeActor(),e.removeDialog(),this._widgets.delete(e),this._widget===e&&(this._widget=null),!0}catch(e){Gp&&Me.error(e)}return!1}getWidget(){return this._widget}remove(){this._host&&this._host.remove(),this._initialize()}_initialize(){this._host=null,this._shadow=null,this._widget=null,this._widgets=new Set,this._hasInsertedActorStyles=!1}_cleanupWidgetIfExists(){this._host&&this.remove();const e=oh.querySelector(`#${this.options.id}`);e&&e.remove()}_createWidget(e){return this._ensureShadowHost(e,(({shadow:t})=>{const n=ah({shadow:t,options:e});return!this._hasInsertedActorStyles&&n.actor&&(t.appendChild(function(e){const t=e.createElement("style");return t.textContent="\n.widget__actor {\n  line-height: 25px;\n\n  display: flex;\n  align-items: center;\n  gap: 8px;\n\n  border-radius: var(--border-radius);\n  cursor: pointer;\n  font-size: 14px;\n  font-weight: 600;\n  padding: 12px 16px;\n  text-decoration: none;\n  z-index: 9000;\n\n  color: var(--foreground);\n  background-color: var(--background);\n  border: var(--border);\n  box-shadow: var(--box-shadow);\n  opacity: 1;\n  transition: opacity 0.1s ease-in-out;\n}\n\n.widget__actor:hover {\n  background-color: var(--background-hover);\n}\n\n.widget__actor svg {\n  width: 16px;\n  height: 16px;\n}\n\n.widget__actor--hidden {\n  opacity: 0;\n  pointer-events: none;\n  visibility: hidden;\n}\n\n.widget__actor__text {\n}\n\n.feedback-icon path {\n  fill: var(--foreground);\n}\n",t}(oh)),this._hasInsertedActorStyles=!0),this._widgets.add(n),this._widget||(this._widget=n),n}))}_ensureShadowHost(e,t){let n=!1;if(!this._shadow||!this._host){const{id:t,colorScheme:r,themeLight:s,themeDark:a}=e,{shadow:o,host:i}=Wp({id:t,colorScheme:r,themeLight:s,themeDark:a});this._shadow=o,this._host=i,n=!0}this._host.dataset.sentryFeedbackColorscheme=e.colorScheme;const r=t({shadow:this._shadow,host:this._host});return n&&oh.body.appendChild(this._host),r}}function ch(e){return new Promise(((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)}))}function lh(e){return ch(e.getAllKeys())}function uh(e){let t;function n(){return null==t&&(t=function(e,t){const n=indexedDB.open(e);n.onupgradeneeded=()=>n.result.createObjectStore(t);const r=ch(n);return e=>r.then((n=>e(n.transaction(t,"readwrite").objectStore(t))))}(e.dbName||"sentry-offline",e.storeName||"queue")),t}return{insert:async t=>{try{const r=await kn(t,e.textEncoder);await function(e,t,n){return e((e=>lh(e).then((r=>{if(!(r.length>=n))return e.put(t,Math.max(...r,0)+1),ch(e.transaction)}))))}(n(),r,e.maxQueueSize||30)}catch(e){}},pop:async()=>{try{const t=await function(e){return e((e=>lh(e).then((t=>{if(0!==t.length)return ch(e.get(t[0])).then((n=>(e.delete(t[0]),ch(e.transaction).then((()=>n)))))}))))}(n());if(t)return function(e,t,n){let r="string"==typeof e?t.encode(e):e;function s(e){const t=r.subarray(0,e);return r=r.subarray(e+1),t}function a(){let e=r.indexOf(10);return e<0&&(e=r.length),JSON.parse(n.decode(s(e)))}const o=a(),i=[];for(;r.length;){const e=a(),t="number"==typeof e.length?e.length:void 0;i.push([e,t?s(t):a()])}return[o,i]}(t,e.textEncoder||new TextEncoder,e.textDecoder||new TextDecoder)}catch(e){}}}}ih.__initStatic();const dh=1e6,ph=String(0),hh="main";let gh="",mh="",fh="",_h=Wo.navigator&&Wo.navigator.userAgent||"",yh="";const Sh=Wo.navigator&&Wo.navigator.language||Wo.navigator&&Wo.navigator.languages&&Wo.navigator.languages[0]||"";const Th=Wo.navigator&&Wo.navigator.userAgentData;var bh;function Eh(e){return function(e){return!("thread_metadata"in e)}(e)?function(e){let t,n=0;const r={samples:[],stacks:[],frames:[],thread_metadata:{[ph]:{name:hh}}};if(!e.samples.length)return r;const s=e.samples[0].timestamp,a="number"==typeof performance.timeOrigin?performance.timeOrigin:un||0,o=a-(un||a);for(let a=0;a<e.samples.length;a++){const i=e.samples[a];if(void 0===i.stackId){void 0===t&&(t=n,r.stacks[t]=[],n++),r.samples[a]={elapsed_since_start_ns:((i.timestamp+o-s)*dh).toFixed(0),stack_id:t,thread_id:ph};continue}let c=e.stacks[i.stackId];const l=[];for(;c;){l.push(c.frameId);const t=e.frames[c.frameId];void 0===r.frames[c.frameId]&&(r.frames[c.frameId]={function:t.name,abs_path:"number"==typeof t.resourceId?e.resources[t.resourceId]:void 0,lineno:t.line,colno:t.column}),c=void 0===c.parentId?void 0:e.stacks[c.parentId]}const u={elapsed_since_start_ns:((i.timestamp+o-s)*dh).toFixed(0),stack_id:n,thread_id:ph};r.stacks[n]=l,r.samples[a]=u,n++}return r}(e):e}function vh(e,t,n,r){if("transaction"!==r.type)throw new TypeError("Profiling events may only be attached to transactions, this should never occur.");if(null==n)throw new TypeError(`Cannot construct profiling event envelope without a valid profile. Got ${n} instead.`);const s=function(e){const t=e&&e.contexts&&e.contexts.trace&&e.contexts.trace.trace_id;return"string"==typeof t&&32!==t.length&&zo&&Me.log(`[Profiling] Invalid traceId: ${t} on profiled event`),"string"!=typeof t?"":t}(r),a=Eh(n),o=t||("number"==typeof r.start_timestamp?1e3*r.start_timestamp:Date.now()),i="number"==typeof r.timestamp?1e3*r.timestamp:Date.now();return{event_id:e,timestamp:new Date(o).toISOString(),platform:"javascript",version:"1",release:r.release||"",environment:r.environment||Bn,runtime:{name:"javascript",version:Wo.navigator.userAgent},os:{name:gh,version:mh,build_number:_h},device:{locale:Sh,model:yh,manufacturer:_h,architecture:fh,is_emulator:!1},debug_meta:{images:kh(n.resources)},profile:a,transactions:[{name:r.transaction||"",id:r.event_id||ut(),trace_id:s,active_thread_id:ph,relative_start_ns:"0",relative_end_ns:(1e6*(i-o)).toFixed(0)}]}}function wh(e){return"pageload"===e.op}"object"==typeof(bh=Th)&&null!==bh&&"getHighEntropyValues"in bh&&Th.getHighEntropyValues(["architecture","model","platform","platformVersion","fullVersionList"]).then((e=>{if(gh=e.platform||"",fh=e.architecture||"",yh=e.model||"",mh=e.platformVersion||"",e.fullVersionList&&e.fullVersionList.length>0){const t=e.fullVersionList[e.fullVersionList.length-1];_h=`${t.brand} ${t.version}`}})).catch((e=>{}));const Ih=new WeakMap;function kh(e){const t=Ee._sentryDebugIds;if(!t)return[];const n=cr(),r=n&&n.getOptions(),s=r&&r.stackParser;if(!s)return[];let a;const o=Ih.get(s);o?a=o:(a=new Map,Ih.set(s,a));const i=Object.keys(t).reduce(((e,n)=>{let r;const o=a.get(n);o?r=o:(r=s(n),a.set(n,r));for(let s=r.length-1;s>=0;s--){const a=r[s],o=a&&a.filename;if(a&&o){e[o]=t[n];break}}return e}),{}),c=[];for(const t of e)t&&i[t]&&c.push({type:"sourcemap",code_file:t,debug_id:i[t]});return c}let Ch=!1;const Rh=3e4;function xh(e){if(Ch)return zo&&Me.log("[Profiling] Profiling has been disabled for the duration of the current user session."),!1;if(!e.isRecording())return zo&&Me.log("[Profiling] Discarding profile because transaction was not sampled."),!1;const t=cr(),n=t&&t.getOptions();if(!n)return zo&&Me.log("[Profiling] Profiling disabled, no options found."),!1;const r=n.profilesSampleRate;if(!("number"!=typeof(s=r)&&"boolean"!=typeof s||"number"==typeof s&&isNaN(s)?(zo&&Me.warn(`[Profiling] Invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(s)} of type ${JSON.stringify(typeof s)}.`),0):!0===s||!1===s||!(s<0||s>1)||(zo&&Me.warn(`[Profiling] Invalid sample rate. Sample rate must be between 0 and 1. Got ${s}.`),0)))return zo&&Me.warn("[Profiling] Discarding profile because of invalid sample rate."),!1;var s;if(!r)return zo&&Me.log("[Profiling] Discarding profile because a negative sampling decision was inherited or profileSampleRate is set to 0"),!1;return!!(!0===r||Math.random()<r)||(zo&&Me.log(`[Profiling] Discarding profile because it's not included in the random sample (sampling rate = ${Number(r)})`),!1)}function Lh(e,t,n,r){return function(e){return e.samples.length<2?(zo&&Me.log("[Profiling] Discarding profile because it contains less than 2 samples"),!1):!!e.frames.length||(zo&&Me.log("[Profiling] Discarding profile because it contains no frames"),!1)}(n)?vh(e,t,n,r):null}const Ah=new Map;function Oh(e){const t=Ah.get(e);return t&&Ah.delete(e),t}function Nh(e){let t;wh(e)&&(t=1e3*ln());const n=function(){const e=Wo.Profiler;if("function"!=typeof e)return void(zo&&Me.log("[Profiling] Profiling is not supported by this browser, Profiler interface missing on window object."));const t=Math.floor(Rh/10);try{return new e({sampleInterval:10,maxBufferSize:t})}catch(e){zo&&(Me.log("[Profiling] Failed to initialize the Profiling constructor, this is likely due to a missing 'Document-Policy': 'js-profiling' header."),Me.log("[Profiling] Disabling profiling for current user session.")),Ch=!0}}();if(!n)return e;zo&&Me.log(`[Profiling] started profiling transaction: ${Jn(e).description}`);const r=ut();async function s(){return e&&n?n.stop().then((t=>(a&&(Wo.clearTimeout(a),a=void 0),zo&&Me.log(`[Profiling] stopped profiling of transaction: ${Jn(e).description}`),t?(function(e,t){if(Ah.set(e,t),Ah.size>30){const e=Ah.keys().next().value;Ah.delete(e)}}(r,t),null):(zo&&Me.log(`[Profiling] profiler returned null profile for: ${Jn(e).description}`,"this may indicate an overlapping transaction or a call to stopProfiling with a profile title that was never started"),null)))).catch((e=>(zo&&Me.log("[Profiling] error while stopping profiler:",e),null))):null}let a=Wo.setTimeout((()=>{zo&&Me.log("[Profiling] max profile duration elapsed, stopping profiling for:",Jn(e).description),s()}),Rh);const o=e.end.bind(e);return e.end=function(){return e?(s().then((()=>{e.setContext("profile",{profile_id:r,start_timestamp:t}),o()}),(()=>{o()})),e):o()},e}const Dh="BrowserProfiling",Ph=()=>({name:Dh,setupOnce(){},setup(e){const t=lr().getTransaction();t&&wh(t)&&xh(t)&&Nh(t),"function"==typeof e.on?(e.on("startTransaction",(e=>{xh(e)&&Nh(e)})),e.on("beforeEnvelope",(e=>{if(!Ah.size)return;const t=function(e){const t=[];return wn(e,((e,n)=>{if("transaction"===n)for(let n=1;n<e.length;n++){const r=e[n];r&&r.contexts&&r.contexts.profile&&r.contexts.profile.profile_id&&t.push(e[n])}})),t}(e);if(!t.length)return;const n=[];for(const e of t){const t=e&&e.contexts,r=t&&t.profile&&t.profile.profile_id,s=t&&t.profile&&t.profile.start_timestamp;if("string"!=typeof r){zo&&Me.log("[Profiling] cannot find profile for a transaction without a profile context");continue}if(!r){zo&&Me.log("[Profiling] cannot find profile for a transaction without a profile context");continue}t&&t.profile&&delete t.profile;const a=Oh(r);if(!a){zo&&Me.log(`[Profiling] Could not retrieve profile for transaction: ${r}`);continue}const o=Lh(r,s,a,e);o&&n.push(o)}!function(e,t){if(!t.length)return e;for(const n of t)e[1].push([{type:"profile"},n])}(e,n)}))):Me.warn("[Profiling] Client does not support hooks, profiling will be disabled")}}),Mh=ks(Dh,Ph);let Fh={};Wo.Sentry&&Wo.Sentry.Integrations&&(Fh=Wo.Sentry.Integrations);const Uh={...Fh,...Ta,...ic};var Bh=Object.freeze({__proto__:null,Integrations:Uh,FunctionToString:da,Hub:kr,InboundFilters:aa,ModuleMetadata:ea,SDK_VERSION:vr,SEMANTIC_ATTRIBUTE_SENTRY_OP:ts,SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN:ns,SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE:es,SEMANTIC_ATTRIBUTE_SENTRY_SOURCE:Qr,Scope:br,addBreadcrumb:ar,addEventProcessor:Ds,addGlobalEventProcessor:jn,addIntegration:function(e){const t=cr();t&&t.addIntegration?t.addIntegration(e):Un&&Me.warn(`Cannot add integration "${e.name}" because no SDK Client is available.`)},addTracingExtensions:ms,captureEvent:sr,captureException:rr,captureMessage:function(e,t){const n="string"==typeof t?t:void 0,r="string"!=typeof t?{captureContext:t}:void 0;return xr().captureMessage(e,n,r)},captureSession:hr,close:async function(e){const t=cr();return t?t.close(e):(Un&&Me.warn("Cannot flush events and disable SDK. No client defined."),Promise.resolve(!1))},configureScope:function(e){xr().configureScope(e)},continueTrace:({sentryTrace:e,baggage:t},n)=>{const r=lr(),{traceparentData:s,dynamicSamplingContext:a,propagationContext:o}=function(e,t){const n=Sn(e),r=mn(t),{traceId:s,parentSpanId:a,parentSampled:o}=n||{};return n?{traceparentData:n,dynamicSamplingContext:r||{},propagationContext:{traceId:s||ut(),parentSpanId:a||ut().substring(16),spanId:ut().substring(16),sampled:o,dsc:r||{}}}:{traceparentData:n,dynamicSamplingContext:void 0,propagationContext:{traceId:s||ut(),spanId:ut().substring(16)}}}(e,t);r.setPropagationContext(o),Un&&s&&Me.log(`[Tracing] Continuing trace ${s.traceId}.`);const i={...s,metadata:Xe({dynamicSamplingContext:a})};return n?Ar((()=>n(i))):i},createTransport:Us,endSession:dr,extractTraceparentData:Pr,flush:async function(e){const t=cr();return t?t.flush(e):(Un&&Me.warn("Cannot flush events. No client defined."),Promise.resolve(!1))},functionToStringIntegration:ua,getActiveSpan:qr,getActiveTransaction:Dr,getClient:cr,getCurrentHub:xr,getCurrentScope:lr,getHubFromCarrier:Or,getSpanStatusFromHttpCode:Br,inboundFiltersIntegration:sa,isInitialized:function(){return!!cr()},lastEventId:function(){return xr().lastEventId()},makeMain:Rr,makeMultiplexedTransport:function(e,t){return n=>{const r=e(n),s={};function a(t,r){const a=r?`${t}:${r}`:t;if(!s[a]){const o=Be(t);if(!o)return;const i=bs(o);s[a]=r?function(e,t){return n=>{const r=e(n);return{send:async e=>{const n=qs(e,["event","transaction","profile","replay_event"]);return n&&(n.release=t),r.send(e)},flush:e=>r.flush(e)}}}(e,r)({...n,url:i}):e({...n,url:i})}return s[a]}return{send:async function(e){const n=t({envelope:e,getEvent:function(t){const n=t&&t.length?t:["event"];return qs(e,n)}}).map((e=>"string"==typeof e?a(e,void 0):a(e.dsn,e.release))).filter((e=>!!e));return 0===n.length&&n.push(r),(await Promise.all(n.map((t=>t.send(e)))))[0]},flush:async function(e){const t=[...Object.keys(s).map((e=>s[e])),r];return(await Promise.all(t.map((t=>t.flush(e))))).every((e=>e))}}}},metrics:Sa,moduleMetadataIntegration:Qs,parameterize:function(e,...t){const n=new String(String.raw(e,...t));return n.__sentry_template_string__=e.join("\0").replace(/%/g,"%%").replace(/\0/g,"%s"),n.__sentry_template_values__=t,n},setContext:or,setCurrentClient:Ms,setExtra:function(e,t){xr().setExtra(e,t)},setExtras:function(e){xr().setExtras(e)},setHttpStatus:jr,setMeasurement:fs,setTag:function(e,t){xr().setTag(e,t)},setTags:function(e){xr().setTags(e)},setUser:function(e){xr().setUser(e)},spanStatusfromHttpCode:Gr,startInactiveSpan:Hr,startSession:ur,startSpan:function(e,t){const n=zr(e);return Ar((()=>ir(e.scope,(r=>{const s=xr(),a=r.getSpan(),o=e.onlyIfParent&&!a?void 0:Vr(s,{parentSpan:a,spanContext:n,forceTransaction:e.forceTransaction,scope:r});return $r((()=>t(o)),(()=>{if(o){const{status:e}=Jn(o);e&&"ok"!==e||o.setStatus("internal_error")}}),(()=>o&&o.end()))}))))},startSpanManual:function(e,t){const n=zr(e);return Ar((()=>ir(e.scope,(r=>{const s=xr(),a=r.getSpan(),o=e.onlyIfParent&&!a?void 0:Vr(s,{parentSpan:a,spanContext:n,forceTransaction:e.forceTransaction,scope:r});function i(){o&&o.end()}return $r((()=>t(o,i)),(()=>{if(o&&o.isRecording()){const{status:e}=Jn(o);e&&"ok"!==e||o.setStatus("internal_error")}}))}))))},startTransaction:function(e,t){return xr().startTransaction({...e},t)},trace:function(e,t,n=(()=>{}),r=(()=>{})){const s=xr(),a=lr(),o=a.getSpan(),i=zr(e),c=Vr(s,{parentSpan:o,spanContext:i,forceTransaction:!1,scope:a});return a.setSpan(c),$r((()=>t(c)),(e=>{c&&c.setStatus("internal_error"),n(e,c)}),(()=>{c&&c.end(),a.setSpan(o),r()}))},withActiveSpan:function(e,t){return ir((n=>(n.setSpan(e),t(n))))},withIsolationScope:function(e){return Ar((()=>e(Lr())))},withScope:ir,WINDOW:Wo,BrowserClient:ai,makeFetchTransport:ii,makeXHRTransport:li,chromeStackLineParser:gi,defaultStackLineParsers:wi,defaultStackParser:Ii,geckoStackLineParser:_i,opera10StackLineParser:bi,opera11StackLineParser:vi,winjsStackLineParser:Si,eventFromException:Qo,eventFromMessage:ei,exceptionFromError:Yo,createUserFeedbackEnvelope:si,captureUserFeedback:function(e){const t=cr();t&&t.captureUserFeedback(e)},defaultIntegrations:sc,forceLoad:function(){},getDefaultIntegrations:ac,init:oc,onLoad:function(e){e()},showReportDialog:(e={},t=xr())=>{if(!Wo.document)return void(zo&&Me.error("Global document not defined in showReportDialog call"));const{client:n,scope:r}=t.getStackTop(),s=e.dsn||n&&n.getDsn();if(!s)return void(zo&&Me.error("DSN not configured for showReportDialog call"));r&&(e.user={...r.getUser(),...e.user}),e.eventId||(e.eventId=t.lastEventId());const a=Wo.document.createElement("script");a.async=!0,a.crossOrigin="anonymous",a.src=function(e,t){const n=je(e);if(!n)return"";const r=`${Ss(n)}embed/error-page/`;let s=`dsn=${Ue(n)}`;for(const e in t)if("dsn"!==e&&"onClose"!==e)if("user"===e){const e=t.user;if(!e)continue;e.name&&(s+=`&name=${encodeURIComponent(e.name)}`),e.email&&(s+=`&email=${encodeURIComponent(e.email)}`)}else s+=`&${encodeURIComponent(e)}=${encodeURIComponent(t[e])}`;return`${r}?${s}`}(s,e),e.onLoad&&(a.onload=e.onLoad);const{onClose:o}=e;if(o){const e=t=>{if("__sentry_reportdialog_closed__"===t.data)try{o()}finally{Wo.removeEventListener("message",e)}};Wo.addEventListener("message",e)}const i=Wo.document.head||Wo.document.body;i?i.appendChild(a):zo&&Me.error("Not injecting report dialog. No injection point found in HTML")},wrap:function(e){return Vo(e)()},Breadcrumbs:Li,breadcrumbsIntegration:xi,Dedupe:Ni,dedupeIntegration:Oi,GlobalHandlers:Gi,globalHandlersIntegration:Bi,HttpContext:Vi,httpContextIntegration:qi,LinkedErrors:Ki,linkedErrorsIntegration:Yi,TryCatch:Qi,browserApiErrorsIntegration:Zi,Replay:Zd,getReplay:function(){const e=cr();return e&&e.getIntegrationByName&&e.getIntegrationByName("Replay")},replayIntegration:e=>new Zd(e),ReplayCanvas:Rp,replayCanvasIntegration:Cp,Feedback:ih,feedbackIntegration:e=>new ih(e),sendFeedback:Bp,BrowserTracing:class{constructor(e){this.name="BrowserTracing",this._hasSetTracePropagationTargets=!1,ms(),ba&&(this._hasSetTracePropagationTargets=!(!e||!e.tracePropagationTargets&&!e.tracingOrigins)),this.options={...Oo,...e},void 0!==this.options._experiments.enableLongTask&&(this.options.enableLongTask=this.options._experiments.enableLongTask),e&&!e.tracePropagationTargets&&e.tracingOrigins&&(this.options.tracePropagationTargets=e.tracingOrigins),this._collectWebVitals=So(),this._interactionIdtoRouteNameMapping={},this.options.enableInp&&Eo(this._interactionIdtoRouteNameMapping),this.options.enableLongTask&&To(),this.options._experiments.enableInteractions&&bo(),this._latestRoute={name:void 0,context:void 0}}setupOnce(e,t){this._getCurrentHub=t;const n=t().getClient(),r=n&&n.getOptions(),{routingInstrumentation:s,startTransactionOnLocationChange:a,startTransactionOnPageLoad:o,markBackgroundTransactions:i,traceFetch:c,traceXHR:l,shouldCreateSpanForRequest:u,enableHTTPTimings:d,_experiments:p}=this.options,h=r&&r.tracePropagationTargets,g=h||this.options.tracePropagationTargets;ba&&this._hasSetTracePropagationTargets&&h&&Me.warn("[Tracing] The `tracePropagationTargets` option was set in the BrowserTracing integration and top level `Sentry.init`. The top level `Sentry.init` value is being used."),s((e=>{const n=this._createRouteTransaction(e);return this.options._experiments.onStartRouteTransaction&&this.options._experiments.onStartRouteTransaction(n,e,t),n}),o,a),i&&va(),p.enableInteractions&&this._registerInteractionListener(),this.options.enableInp&&this._registerInpInteractionListener(),xo({traceFetch:c,traceXHR:l,tracePropagationTargets:g,shouldCreateSpanForRequest:u,enableHTTPTimings:d})}_createRouteTransaction(e){if(!this._getCurrentHub)return void(ba&&Me.warn(`[Tracing] Did not create ${e.op} transaction because _getCurrentHub is invalid.`));const t=this._getCurrentHub(),{beforeNavigate:n,idleTimeout:r,finalTimeout:s,heartbeatInterval:a}=this.options,o="pageload"===e.op;let i;if(o){const t=o?No("sentry-trace"):"",n=o?No("baggage"):void 0,{traceId:r,dsc:s,parentSpanId:a,sampled:c}=Tn(t,n);i={traceId:r,parentSpanId:a,parentSampled:c,...e,metadata:{...e.metadata,dynamicSamplingContext:s},trimEnd:!0}}else i={trimEnd:!0,...e};const c="function"==typeof n?n(i):i,l=void 0===c?{...i,sampled:!1}:c;l.metadata=l.name!==i.name?{...l.metadata,source:"custom"}:l.metadata,this._latestRoute.name=l.name,this._latestRoute.context=l,!1===l.sampled&&ba&&Me.log(`[Tracing] Will not send ${l.op} transaction because of beforeNavigate.`),ba&&Me.log(`[Tracing] Starting ${l.op} transaction on scope`);const{location:u}=Ea,d=gs(t,l,r,s,!0,{location:u},a,o);return o&&(Ea.document.addEventListener("readystatechange",(()=>{["interactive","complete"].includes(Ea.document.readyState)&&d.sendAutoFinishSignal()})),["interactive","complete"].includes(Ea.document.readyState)&&d.sendAutoFinishSignal()),d.registerBeforeFinishCallback((e=>{this._collectWebVitals(),vo(e)})),d}_registerInteractionListener(){let e;const t=()=>{const{idleTimeout:t,finalTimeout:n,heartbeatInterval:r}=this.options,s="ui.action.click",a=Dr();if(a&&a.op&&["navigation","pageload"].includes(a.op))return void(ba&&Me.warn(`[Tracing] Did not create ${s} transaction because a pageload or navigation transaction is in progress.`));if(e&&(e.setFinishReason("interactionInterrupted"),e.end(),e=void 0),!this._getCurrentHub)return void(ba&&Me.warn(`[Tracing] Did not create ${s} transaction because _getCurrentHub is invalid.`));if(!this._latestRoute.name)return void(ba&&Me.warn(`[Tracing] Did not create ${s} transaction because _latestRouteName is missing.`));const o=this._getCurrentHub(),{location:i}=Ea,c={name:this._latestRoute.name,op:s,trimEnd:!0,data:{[Qr]:this._latestRoute.context?Do(this._latestRoute.context):"url"}};e=gs(o,c,t,n,!0,{location:i},r)};["click"].forEach((e=>{addEventListener(e,t,{once:!1,capture:!0})}))}_registerInpInteractionListener(){eo("event",(({entries:e})=>{const t=cr(),n=void 0!==t&&void 0!==t.getIntegrationByName?t.getIntegrationByName("Replay"):void 0,r=void 0!==n?n.getReplayId():void 0,s=Dr(),a=lr(),o=void 0!==a?a.getUser():void 0;for(const t of e)if(Po(t)){const e=t.duration,n=Object.keys(this._interactionIdtoRouteNameMapping),a=n.length>0?n.reduce(((e,t)=>this._interactionIdtoRouteNameMapping[e].duration<this._interactionIdtoRouteNameMapping[t].duration?e:t)):void 0;if(void 0===a||e>this._interactionIdtoRouteNameMapping[a].duration){const n=t.interactionId,i=this._latestRoute.name,c=this._latestRoute.context;n&&i&&c&&(a&&Object.keys(this._interactionIdtoRouteNameMapping).length>=10&&delete this._interactionIdtoRouteNameMapping[a],this._interactionIdtoRouteNameMapping[n]={routeName:i,duration:e,parentContext:c,user:o,activeTransaction:s,replayId:r})}}}))}},browserTracingIntegration:(e={})=>{const t=!!ba&&!(!e.tracePropagationTargets&&!e.tracingOrigins);ms(),!e.tracePropagationTargets&&e.tracingOrigins&&(e.tracePropagationTargets=e.tracingOrigins);const n={...Mo,...e},r=So(),s={};n.enableInp&&Eo(s),n.enableLongTask&&To(),n._experiments.enableInteractions&&bo();const a={name:void 0,context:void 0};function o(e){const t=xr(),{beforeStartSpan:s,idleTimeout:o,finalTimeout:i,heartbeatInterval:c}=n,l="pageload"===e.op;let u;if(l){const t=l?Bo("sentry-trace"):"",n=l?Bo("baggage"):void 0,{traceId:r,dsc:s,parentSpanId:a,sampled:o}=Tn(t,n);u={traceId:r,parentSpanId:a,parentSampled:o,...e,metadata:{...e.metadata,dynamicSamplingContext:s},trimEnd:!0}}else u={trimEnd:!0,...e};const d=s?s(u):u;d.metadata=d.name!==u.name?{...d.metadata,source:"custom"}:d.metadata,a.name=d.name,a.context=d,!1===d.sampled&&ba&&Me.log(`[Tracing] Will not send ${d.op} transaction because of beforeNavigate.`),ba&&Me.log(`[Tracing] Starting ${d.op} transaction on scope`);const{location:p}=Ea,h=gs(t,d,o,i,!0,{location:p},c,l);return l&&Ea.document&&(Ea.document.addEventListener("readystatechange",(()=>{["interactive","complete"].includes(Ea.document.readyState)&&h.sendAutoFinishSignal()})),["interactive","complete"].includes(Ea.document.readyState)&&h.sendAutoFinishSignal()),h.registerBeforeFinishCallback((e=>{r(),vo(e)})),h}return{name:"BrowserTracing",setupOnce:()=>{},afterAllSetup(e){const r=e.getOptions(),{markBackgroundSpan:i,traceFetch:c,traceXHR:l,shouldCreateSpanForRequest:u,enableHTTPTimings:d,_experiments:p}=n,h=r&&r.tracePropagationTargets,g=h||n.tracePropagationTargets;let m;ba&&t&&h&&Me.warn("[Tracing] The `tracePropagationTargets` option was set in the BrowserTracing integration and top level `Sentry.init`. The top level `Sentry.init` value is being used.");let f=Ea.location&&Ea.location.href;if(e.on&&(e.on("startNavigationSpan",(e=>{m&&(ba&&Me.log(`[Tracing] Finishing current transaction with op: ${Jn(m).op}`),m.end()),m=o({op:"navigation",...e})})),e.on("startPageLoadSpan",(e=>{m&&(ba&&Me.log(`[Tracing] Finishing current transaction with op: ${Jn(m).op}`),m.end()),m=o({op:"pageload",...e})}))),n.instrumentPageLoad&&e.emit&&Ea.location){const t={name:Ea.location.pathname,startTimestamp:un?un/1e3:void 0,origin:"auto.pageload.browser",attributes:{[Qr]:"url"}};Fo(e,t)}n.instrumentNavigation&&e.emit&&Ea.location&&jt((({to:t,from:n})=>{if(void 0===n&&f&&-1!==f.indexOf(t))f=void 0;else if(n!==t){f=void 0;const t={name:Ea.location.pathname,origin:"auto.navigation.browser",attributes:{[Qr]:"url"}};Uo(e,t)}})),i&&va(),p.enableInteractions&&function(e,t){let n;const r=()=>{const{idleTimeout:r,finalTimeout:s,heartbeatInterval:a}=e,o="ui.action.click",i=Dr();if(i&&i.op&&["navigation","pageload"].includes(i.op))return void(ba&&Me.warn(`[Tracing] Did not create ${o} transaction because a pageload or navigation transaction is in progress.`));if(n&&(n.setFinishReason("interactionInterrupted"),n.end(),n=void 0),!t.name)return void(ba&&Me.warn(`[Tracing] Did not create ${o} transaction because _latestRouteName is missing.`));const{location:c}=Ea,l={name:t.name,op:o,trimEnd:!0,data:{[Qr]:t.context?$o(t.context):"url"}};n=gs(xr(),l,r,s,!0,{location:c},a)};["click"].forEach((e=>{addEventListener(e,r,{once:!1,capture:!0})}))}(n,a),n.enableInp&&function(e,t){eo("event",(({entries:n})=>{const r=cr(),s=void 0!==r&&void 0!==r.getIntegrationByName?r.getIntegrationByName("Replay"):void 0,a=void 0!==s?s.getReplayId():void 0,o=Dr(),i=lr(),c=void 0!==i?i.getUser():void 0;for(const r of n)if(Go(r)){const n=r.duration,s=Object.keys(e),i=s.length>0?s.reduce(((t,n)=>e[t].duration<e[n].duration?t:n)):void 0;if(void 0===i||n>e[i].duration){const s=r.interactionId,l=t.name,u=t.context;s&&l&&u&&(i&&Object.keys(e).length>=jo&&delete e[i],e[s]={routeName:l,duration:n,parentContext:u,user:c,activeTransaction:o,replayId:a})}}}))}(s,a),xo({traceFetch:c,traceXHR:l,tracePropagationTargets:g,shouldCreateSpanForRequest:u,enableHTTPTimings:d})},options:n}},defaultRequestInstrumentationOptions:Ro,instrumentOutgoingRequests:xo,startBrowserTracingNavigationSpan:Uo,startBrowserTracingPageLoadSpan:Fo,makeBrowserOfflineTransport:function(e){return function(e){return t=>e({...t,createStore:uh})}(Hs(e))},onProfilingStartRouteTransaction:function(e){return e?xh(e)?Nh(e):e:(zo&&Me.log("[Profiling] Transaction is undefined, skipping profiling"),e)},BrowserProfilingIntegration:Mh,browserProfilingIntegration:Ph});const Gh=()=>{let e=navigator.languages?navigator.languages[0].substr(0,2).toUpperCase():"EN";var t;e="EN"===(t=e)?"EN-GB":"PT"===t?"PT-PT":t;return a.map((e=>e.langCode)).includes(e)?e:"EN"},jh=()=>{const e={};return a.forEach((t=>{let n=t.langCode;["EN-GB","EN-US"].includes(n)&&(n="EN"),["PT-PT","PT-BR"].includes(n)&&(n="PT"),e[n]=0})),e},$h=e=>e.substring(0,2).toUpperCase();const Wh=e=>{let t=a.find((t=>t.langCode.toUpperCase()===e.toUpperCase()));return t||(t=a.find((t=>t.langCode.substring(0,2).toUpperCase()===e.substring(0,2).toUpperCase())),t)};const Hh=()=>({settingSchemeVersion:37,blacklistDomains:[],blacklistDomainsForReading:[],blacklistDomainsForWriting:[],languagesForTranslation:a.reduce(((e,t)=>({...e,[t.langCode]:i})),{}),selectedTargetLanguage:Gh(),isTargetLanguageConfirmed:!1,deepLProApiKey:{IS_PROD:!0,BASE_URLS:{dapApi:"https://s.deepl.com/chrome/statistics",toolingApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.20.1",toolingApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.20.1",toolingWriteApiPro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.20.1",toolingWriteApi:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.20.1",classicApi:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.20.1",classicApiPro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.20.1",classicApiWrite:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.20.1",classicApiWritePro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.20.1",classicApiGlossary:"https://api.deepl.com/termbases/jsonrpc?client=chrome-extension,1.20.1",login:"https://www.deepl.com/auth/login",token:"https://w.deepl.com/oidc/token",logout:"https://www.deepl.com/auth/logout",feedbackSurvey:"https://deepl.typeform.com/to/MkMfP2Y6",newFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_cMvbeX0WZGvkKGi",firefoxFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eyfDZqQmXuNTFOK",uninstallSurvey:"https://deepl.qualtrics.com/jfe/form/SV_eJxAD8c7J5hqSRU",gslidesFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_9XBLSAbDmLq5emO",deeplPro:"https://www.deepl.com/pro",deeplProWrite:"https://www.deepl.com/pro-write",deeplTranslator:"https://www.deepl.com/translator",deeplDoctrans:"https://www.deepl.com/translator/files",deeplTermsOfServiceFree:"https://www.deepl.com/en/pro-license?tab=free",deeplCreateAccount:"https://www.deepl.com/signup",extensionStorePage:"https://bit.ly/DeepL-Chrome",supportArticle:"https://support.deepl.com/hc/articles/4407580229522",deeplSupport:"https://support.deepl.com/hc",chromeWebstore:"https://chrome.google.com/webstore/detail/deepl-translate-reading-w/cofdbpoegempjloogbagkncekinflcnj",edgeWebstore:"https://microsoftedge.microsoft.com/addons/detail/deepl-translate-reading-/fancfknaplihpclbhbpclnmmjcjanbaf",firefoxWebstore:"https://addons.mozilla.org/en-US/firefox/addon/deepl-translate",firefoxShortcutDocs:"https://support.mozilla.org/kb/manage-extension-shortcuts-firefox",clientStateApi:"https://w.deepl.com/web",experimentsEndpoint:"https://s.deepl.com/chrome/experiments",gmailFeedbackSurvey:"https://deepl.qualtrics.com/jfe/form/SV_db8ItFTmYBcZjYW",customerSegmentationSurveyFree:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2071",customerSegmentationSurveyPro:"https://deepl.qualtrics.com/jfe/form/SV_3LbBcdg4mjQuCCq?desc=TG-2070",arabicSurvey:"https://deepl.qualtrics.com/jfe/form/SV_ekTrC2ePp0wn7xQ"},APP_VERSION:"1.20.1",FEATURE_FLAGS:{TRANSLATE_INPUT:!0,PAGE_TRANSLATION:!0,IMPROVE_WRITING:!0,DOCUMENT_TRANSLATION:!0,RECOMMEND_TO_A_FRIEND:!0,PRO_LOGIN:!0,WEBPAGE_CUSTOMIZER:!0,GDOCS_INTEGRATION:!0,ZENDESK_INTEGRATION:!0,GMAIL_INTEGRATION:!0,GSLIDES_INTEGRATION:!0,ON_INSTALL_ONBOARDING:!0,WHATSAPP_TRANSLATE_ALL_CHAT:!1,DEEPL_WRITE_GENERAL:!1,DEEPL_WRITE_GDOCS:!0,SHOW_CUSTOMER_SEGMENTATION_SURVEY:!1,ARABIC_SURVEY:!0}}.DEEPL_PRO_API_KEY,installationId:n(),enableFullPageTranslation:!0,enableInputTranslation:!0,enableInlineTranslation:!0,languagePreferenceForWriting:jh(),languagePreferenceForReading:jh(),languagePreferenceForDeeplWrite:"EN-US",blacklistedPopupWidgets:[],successfulTranslations:0,successfulArabicTranslations:0,isReviewPopupShown:!1,shouldDisplayFeedbackPopup:!1,isInputHighlighterShown:!1,isInlineHighlighterShown:!1,regionalVariant:void 0,isSurveyLinkHidden:!1,isGlossaryEnabled:!1,activeTermbaseId:null,isZendeskOnboarded:!1,isZendeskEnabled:!0,isZendeskOnboardingShown:!1,zendeskFormality:"auto",zendeskSuccessfulTranslations:0,zendeskActiveTermbase:null,isGDocsEnabled:!0,isGDocsOnboardingShown:!1,gDocsSegmentation:j.SENTENCE,isGmailEnabled:!0,wasGmailOnboardingShown:!1,successfulTranslationsGmail:0,wasGmailFeedbackPopupShown:!1,isGSlidesEnabled:!0,isGSlidesOnboardingShown:!1,wasGSlidesFeedbackPopupShown:!1,successfulTranslationsGSlides:0,isWhatsAppWebEnabled:!0,isTwitterEnabled:!0,customizationsActiveStates:{[C.linkedIn]:!0},hasUserSeenAccountCreationNudge:!1,hasUserSeenPostAccountCreationOnboarding:!1,hasUserSeenProCustomerSegmentationSurvey:!1}),qh={prod:"production",dev:"development",test:"testing"};function Vh(){return qh.prod}function zh(){return Vh()===qh.dev}const Yh={dsn:"https://f7c23f019d154c319e91e8de004727dc@errortracking.deepl.com/12",release:"deepl-browser-extension@1.20.1",environment:Vh(),tracesSampleRate:Vh()===qh.prod?.9:1};function Kh(e,t){t.captureException(e)}const Xh={PROTOCOL_ERROR:"PROTOCOL_ERROR",NETWORK_ERROR:"NETWORK_ERROR",FULL_PAGE_SERVER_ERROR:"FULL_PAGE_SERVER_ERROR",USER_UNAUTHORIZED:"-32003",USER_BLOCKED:"429",FORBIDDEN_REQUEST:"403",QUOTA_HAS_BEEN_REACHED:"1045601",TOO_MANY_REQUESTS:"1042902"},Jh={ENTRY_NOT_FOUND:"ENTRY_NOT_FOUND",SERVER_ERROR:"SERVER_ERROR"},Zh="INSTALLATION_ERROR",Qh="TRANSLATED_INPUT_NOT_SET",eg="TRANSLATOR_FREE_ACCOUNT_LIMIT_EXCEEDED",tg="TRANSLATOR_ANONYMOUS_LIMIT_EXCEEDED",ng="TRANSLATOR_FREE_ANON_WITH_WRITE_PRO",rg="WRITE_ANON_OR_FREE_LIMIT_EXCEEDED",sg="WRITE_WITH_PRO_TRANSLATOR_LIMIT_EXCEEDED";class ag extends Error{constructor(e){super(e),this.name=Xh.PROTOCOL_ERROR,this.message=e}}class og extends Error{constructor(e){super(e),this.name=Xh.FULL_PAGE_SERVER_ERROR,this.message=e}}class ig extends Error{constructor(e,t){super(t),this.name=e,this.message=t}}class cg extends Error{constructor(e,t){super(t),this.name=eg,this.limit=e,this.message=t}}class lg extends Error{constructor(e,t){super(t),this.name=tg,this.limit=e,this.message=t}}class ug extends Error{constructor(e,t){super(t),this.name=rg,this.limit=e,this.message=t}}class dg extends Error{constructor(e,t){super(t),this.name=sg,this.limit=e,this.message=t}}class pg extends Error{constructor(e,t){super(t),this.name=ng,this.limit=e,this.message=t}}class hg extends Error{constructor(e,t){super(t),this.name=e,this.message=t}}function gg(e,t){try{Kh(e,t),console.error(e)}catch(e){console.error(e)}return{error:e.name}}function mg(){return{url:"https://s.deepl.com/chrome/statistics"}}function fg(e){switch(e){case c.manual:return 1;case c.automatic:return 2;case c.inline:return 3;case c.input:return 4;default:return 0}}function _g(e){switch(e){case Jh.ENTRY_NOT_FOUND:return 1;case Jh.SERVER_ERROR:return 2}}function yg(e){switch(e){case p.defaultPopup:return h.extensionIcon;case p.fptInjectedPopup:return h.fptAutoInject;default:return 0}}function Sg(e){switch(e){case p.defaultPopup:return g.defaultPopup;case p.fptInjectedPopup:return g.injectedFptPopup;case p.inlineTooltipPopup:return g.inlinePopup;default:return 0}}function Tg(e){return e===m.hintKeyboardShortcut?1:0}function bg(e){switch(e){case f.inputTranslationTriggerIcon:return 1;case f.inlineTranslationTriggerIcon:return 2;case f.inlineTranslationSettingPopup:return 3;case f.inputTranslationSettingPopup:return 4;case f.settingsPageFPT:return 5;case f.settingsPageReading:return 6;case f.settingsPageWriting:return 7;case f.fptHideModal:return 8;case f.inputTranslationSettingsIcon:return 9;case f.inlineTranslationSettingsIcon:return 10;case f.inputTranslationReadMoreLink:return 11;case f.inlineTranslationReadMoreLink:return 12;case f.fptTranslationReadMoreLink:return 13;case f.extensionHubToggleSwitch:return 14;case f.hubCustomizeShortcut:return 15;case f.hubLoginButton:return 16;case f.hubUpgradeToProLink:return 17;case f.hubTryProLink:return 18;case f.settingsPageCustomizeShortcutButton:return 19;case f.hubFPTEnableCheckbox:return 20;case f.hubFPTDisableCheckbox:return 21;case f.deeplWriteIcon:return 22;case f.hubViewIntegrations:return 23;case f.hubCloseCustomizationsWidget:return 24;case f.gmailOnboardingPopup:return 25;case f.gmailOnboardingIcon:return 26;case f.gmailCharLimitLogin:return 27;case f.gmailFeedbackSurvey:return 28;case f.gslidesFeedbackSurvey:return 29;case f.gslidesCharLimitLogin:return 30;case f.zendeskTryProLink:return 31;case f.settingsPageIntegrations:return 32;case f.onboardingSignUp:return 33;case f.onboardingSkipSignUp:return 34;case f.onboardingLoginLink:return 35;case f.onboardingSeeAllIntegrations:return 36;case f.inputImproveTriggerIcon:return 37;case f.iconToggleInHubTranslator:return 38;case f.iconToggleInHubWrite:return 39;case f.manageIconSettings:return 40;case f.writeLanguageSwitchedInHub:return 41;case f.writeLanguageSwitchedInSettings:return 42;default:return 0}}function Eg(e){return e===_.triggerTranslation?1:0}function vg(e){switch(e){case y.clickOnShortcutNotifiction:return 60011;case y.clickOnInlineTranslationShowAlternatives:return 60026;case y.clickOnInlineTranslationCloseIcon:return 60027;case y.clickOnLogoutMenuEntry:return 60028;default:return 0}}function wg(e){switch(e){case T.inputTranslation:return 1;case T.inlineTranslation:return 2;case T.fullPageTranslation:return 3;default:return 0}}function Ig(e){switch(e){case S.disableEverywhere:return 1;case S.disablePerSite:return 2;case S.enableEverywhere:return 3;case S.enablePerSite:return 4;default:return 0}}function kg(e){switch(e){case"top":return b.top;case"right":return b.right;case"bottom":return b.bottom;case"left":return b.left;default:return 0}}function Cg(e){switch(e){case Y.shortcut_settings:return K.SHORTCUT_SETTINGS;case Y.support_article:return K.SUPPORT_ARTICLE;case Y.external.whatsapp:return K.EXTERNAL.WHATSAPP;case Y.external.twitter:return K.EXTERNAL.TWITTER;case Y.external.youtube:return K.EXTERNAL.YOUTUBE;case Y.external.facebook:return K.EXTERNAL.FACEBOOK;case Y.external.github:return K.EXTERNAL.GITHUB;case Y.external.discord:return K.EXTERNAL.DISCORD;case Y.external.telegram:return K.EXTERNAL.TELEGRAM;case Y.external.reddit:return K.EXTERNAL.REDDIT;case Y.external.gmail:return K.EXTERNAL.GMAIL;case Y.external.gdocs:return K.EXTERNAL.GDOCS;case Y.external.gslides:return K.EXTERNAL.GSLIDES;case Y.external.msOffice:return K.EXTERNAL.MSOFFICE;default:return""}}function Rg(e){switch(e){case E.openPage:return 1;case E.backButton:return 2;case E.nextButton:return 3;case E.navigation:return 4;default:return 0}}function xg(e){switch(e){case w.chrome:return v.chrome;case w.edge:return v.edge;case w.firefox:return v.firefox;case w.local:return v.local;default:return v.unspecified}}function Lg(e){return I[e]||0}function Ag(e){switch(e){case C.default:return 1;case C.gdocs:return 2;case C.whatsappWeb:return 3;case C.twitter:return 4;case C.zendesk:return 5;case C.gmail:return 6;case C.gslides:return 7;case C.linkedIn:return 8;default:return 0}}function Og(e){switch(e){case 60026:case 60027:return!0;default:return!1}}function Ng(e){switch(e){case x.user:return 1;case x.extension:return 2;default:return 0}}function Dg(e){switch(e){case A.translation:return 1;case A.login:return 2;default:return 0}}function Pg(e){switch(e){case O.message:return 1;case O.chat:return 2;default:return 0}}function Mg(e){switch(e){case D.free:return 1;case D.pro:return 2;case D.none:return 3;default:return 0}}function Fg(e){switch(e){case U.READING_VIEW_TRANSLATE:return 1;case U.COMPOSE_VIEW_TRANSLATE:return 2;case U.COMPOSE_VIEW_IMPROVE:return 3;default:return 0}}function Ug(e){switch(e){case B.ANONYMOUS_USER_LIMIT_EXCEEDED:return 1;case B.FREE_ACCOUNT_LIMIT_EXCEEDED:return 2;case B.WRITE_ANONYMOUS_USER_LIMIT_EXCEEDED:return 3;case B.WRITE_FREE_ACCOUNT_LIMIT_EXCEEDED:return 4;default:return 0}}function Bg(e){switch(e){case R.translate:return 1;case R.write:return 2;default:return 0}}function Gg(e){switch(e){case G.LOGIN:return 1;case G.SIGNUP:return 2;case G.PRO_TRIAL:return 3;default:return 0}}function jg(e){switch(e){case j.WORD:return 1;case j.SENTENCE:return 2;default:return 0}}function $g(e){switch(e){case $.none:return 1;case $.pro:return 2;case $.free:return 3;default:return 0}}async function Wg(e){let t,n,r,s,a,o,i,c,u,d=!1;try{const e=await gf(["session","installationId"]);n=e.session.id,t=e.installationId}catch(e){console.error(`DAP: Failed to fetch settings. Error: ${e.message}`)}try{const e=await Rf();d=!!e.accountId,r=Mg(e.translatorServiceType),s=Mg(e.apiServiceType),a=Mg(e.docTranslatorServiceType),u=Mg(e.writeServiceType),i=d?2===r||2===s||2===u||2===a?l.loggedInPro:l.loggedInFree:l.notLoggedIn,c=e.sessionType?$g(e.sessionType):$g($.none)}catch(e){console.error(`DAP: Failed to fetch user information. Error: ${e.message}`)}try{o=await Lf()}catch(e){console.error(e)}const p=V(),h=await Of(),g={eventId:void 0,extensionVersion:"1.20.1",sessionId:n,sessionType:c,installationId:t,browserInstanceId:o,originStore:xg(chrome.runtime.id),userInfos:{userType:i,translatorServiceType:r,apiServiceType:s,docTranslatorServiceType:a,writeServiceType:u},userAgent:p.userAgent,platform:p.platform,browser:p.browser,browserVersion:p.browserVersion,browserLang:p.browserLang,clientExperiments:h},m=e?e(g):g;return fetch("https://s.deepl.com/chrome/statistics",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(m),credentials:"omit"}).then((e=>{e.ok||console.log(`DAP ${m.eventId} request failed: ${e}`)}))}async function Hg(e){return Wg((t=>({...t,eventId:60001,translationRequestData:{extensionVersion:"1.20.1",domainName:e.domainName,userId:e.installationId,translationTrigger:fg(e.trigger),translationData:{sourceLang:e.websiteLanguage,targetLang:e.targetLanguage,sourceLength:e.characterCount},...e.translationPerformance&&{translationPerformance:e.translationPerformance},nicheIntegration:Ag(e.nicheIntegration||C.default),...e.glossaryTrackingInfo&&{isGlossaryEnabled:e.glossaryTrackingInfo.isGlossaryEnabled,isGlossaryShared:e.glossaryTrackingInfo.isGlossaryShared,didGlossaryChangeTranslation:e.glossaryTrackingInfo.didGlossaryChangeTranslation}}})))}async function qg(e){return Wg((t=>({...t,eventId:60002,errorData:{extensionVersion:"1.20.1",errorCode:e.errorCode,errorMessage:e.errorMessage}})))}async function Vg(e){return Wg((t=>({...t,eventId:60003,translationErrorData:{errorData:{extensionVersion:"1.20.1",errorCode:e.errorCode,errorMessage:e.errorMessage},targetLang:e.targetLang,domainName:e.domainName,websiteLanguage:e.websiteLanguage,sourceLength:e.characterCount,translationTrigger:fg(e.trigger),nicheIntegration:Ag(e.nicheIntegration||C.default)}})))}async function zg(e){return Wg((t=>({...t,eventId:60004,contentScriptErrorData:{errorData:{extensionVersion:"1.20.1",errorCode:e.errorCode,errorMessage:e.errorMessage},domainName:e.domainName}})))}async function Yg(e){return Wg((t=>({...t,eventId:60005,inputInjectionData:{extensionVersion:"1.20.1",domainName:e.domainName}})))}async function Kg(e){return Wg((t=>({...t,eventId:60007,extensionOpenedData:{extensionVersion:"1.20.1",domainName:e.domainName,extensionOpenedFrom:e.extensionOpenedFrom}})))}async function Xg(e){return Wg((t=>({...t,eventId:60008,logoClickedData:{extensionVersion:"1.20.1",logoClickedFrom:e.logoClickedFrom}})))}async function Jg(e){return Wg((t=>({...t,eventId:60009,notificationViewedData:{extensionVersion:"1.20.1",notificationType:Tg(e.notificationType)}})))}async function Zg(e){return Wg((t=>({...t,eventId:60010,shortcutUsedData:{shortcutType:Eg(e.shortcutType),uiLocation:bg(e.location),shortcut:e.shortcut,nicheIntegration:Ag(e.nicheIntegration||C.default)}})))}async function Qg(e){const t={eventId:vg(e.uiAction)};return Og(t.eventId)&&(t.payload={nicheIntegration:Ag(e.nicheIntegration||C.default)}),Wg((e=>({...e,...t})))}async function em(){return Wg((e=>({...e,eventId:60012})))}async function tm(){return Wg((e=>({...e,eventId:60013})))}async function nm(e){return Wg((t=>({...t,eventId:60014,inlineSettingOpenedData:{uiFunction:wg(e.uiFunction),uiLocation:bg(e.uiLocation),nicheIntegration:Ag(e.nicheIntegration)}})))}async function rm(e){return Wg((t=>({...t,eventId:60015,settingChangedData:{settingType:Ig(e.settingType),uiFunction:wg(e.uiFunction),uiLocation:bg(e.uiLocation),domainName:e.domainName}})))}async function sm(e){return Wg((t=>({...t,eventId:60016,detectLanguageData:{domainName:e.domainName,language:e.language}})))}async function am(e){return Wg((t=>({...t,eventId:60017,rightClickData:{domainName:e.domainName,translationType:e.translationType}})))}async function om(e){return Wg((t=>({...t,eventId:60018,inlinePositionChangeData:{newPosition:kg(e.newPosition)}})))}async function im(e){return Wg((t=>({...t,eventId:60019,inlineDragStartData:{nicheIntegration:Ag(e?.nicheIntegration||C.default)}})))}async function cm(e){return Wg((t=>({...t,eventId:60020,whatsAppMessageTranslatedData:{messageLang:e.messageLang,targetLang:e.targetLang,messageLength:e.messageLength,translator:Pg(e.translator),numberOfLanguages:e.numberOfLanguages,numberOfMessages:e.numberOfMessages}})))}async function lm(e){return Wg((t=>({...t,eventId:60021,whatsAppMessageTranslationFailedData:{errorCode:e.errorCode,domainName:e.domainName,translationConfig:{messageLength:e.messageLength,targetLang:e.targetLang,messageLang:e.messageLang,translator:Pg(e.translator),numberOfLanguages:e.numberOfLanguages,numberOfMessages:e.numberOfMessages}}})))}async function um(e){return Wg((t=>({...t,eventId:60057,twitterTweetTranslationFailedData:{errorCode:e.errorCode,domainName:e.domainName,translationConfig:{messageLength:e.messageLength,targetLang:e.targetLang,messageLang:e.messageLang}}})))}async function dm(e){return Wg((t=>({...t,eventId:60022,fptHideData:{hideOption:e.hideOption,sourceLang:e.sourceLang,domainName:e.domainName,uiLocation:bg(e.uiLocation)}})))}async function pm(e){return Wg((t=>({...t,eventId:60023,inlineCopyData:{targetLang:e.targetLang,targetLength:e.targetLength,nicheIntegration:Ag(e.nicheIntegration||C.default)}})))}async function hm(e){return Wg((t=>({...t,eventId:60024,inlineListenData:{targetLang:e.targetLang,targetLength:e.targetLength,actionType:e.actionType,nicheIntegration:Ag(e.nicheIntegration||C.default)}})))}async function gm(e){return Wg((t=>({...t,eventId:60025,iconHoverData:{uiLocation:bg(e.uiLocation),domainName:e.domainName,nicheIntegration:Ag(e.nicheIntegration||C.default)}})))}async function mm(e){return Wg((t=>({...t,eventId:60029,onboardingStepChangeData:{previousStep:e.previousStep,newStep:e.newStep,trigger:Rg(e.trigger),secondsOnOnboarding:e.secondsOnOnboarding,secondsOnPreviousStep:e.secondsOnPreviousStep}})))}async function fm(e){return Wg((t=>({...t,eventId:60030,onboardingOpenExternalPageData:{url:Cg(e.url)}})))}async function _m(e){return Wg((t=>({...t,eventId:60031,readMoreClickedData:{uiLocation:bg(e.uiLocation)}})))}async function ym(e){return Wg((t=>({...t,eventId:60032,landOnWebsiteData:{website:Lg(e.website)}})))}async function Sm(e){return Wg((t=>({...t,eventId:60033,inlineListenData:{targetLang:e.targetLang,targetLength:e.targetLength,triggerType:e.triggerType,nicheIntegration:Ag(e.nicheIntegration||C.default)}})))}async function Tm(e){return Wg((t=>({...t,eventId:60034,openInputHighlighterData:{domainName:e.domainName}})))}async function bm(e){return Wg((t=>({...t,eventId:60035,closeInputHighlighterData:{trigger:e.trigger}})))}async function Em(e){return Wg((t=>({...t,eventId:60036,gdocsReplaceTextData:{sourceLang:e.sourceLang,targetLang:e.targetLang,sourceLength:e.sourceLength,targetLength:e.targetLength}})))}async function vm(){return Wg((e=>({...e,eventId:60037})))}async function wm(e){return Wg((t=>({...t,eventId:60038,openInputHighlighterData:{domainName:e.domainName}})))}async function Im(e){return Wg((t=>({...t,eventId:60039,closeInputHighlighterData:{trigger:e.trigger}})))}async function km(e){return Wg((t=>({...t,eventId:60040,dictionaryStatus:{status:e.status,langPair:e.langPair}})))}async function Cm(){return Wg((e=>({...e,eventId:60041})))}async function Rm(){return Wg((e=>({...e,eventId:60042})))}async function xm(e){return Wg((t=>({...t,eventId:60043,errorData:{lingueeError:_g(e.error)}})))}async function Lm(e,t){let n;switch(e){case L.OPEN_TICKET:n=60044;break;case L.DETECT_TICKET_LANGUAGE:n=60045;break;case L.SWITCH_TICKET_LANGUAGE:n=60046;break;case L.ENABLE_AUTOTRANSLATE:n=60047;break;case L.DISABLE_AUTOTRANSLATE:n=60048;break;case L.TRANSLATE_MESSAGE:n=60049;break;case L.TRANSLATE_INPUT:n=60050;break;case L.ERROR:n=60051;break;default:return}return Wg((e=>({...e,eventId:n,zendeskMetaData:{agentLanguage:t.agentLanguage,ticketLanguage:t.ticketLanguage,isTicketLanguageAutodetected:t.isTicketLanguageAutodetected,isTicketLanguageSupported:t.isTicketLanguageSupported,isAutoTranslateEnabled:t.isAutoTranslateEnabled,sourceTextLength:t.sourceTextLength,targetTextLength:t.targetTextLength,inputHasSelection:t.inputHasSelection,error:t.error}})))}async function Am(e){let t;if(e.glossaryConfigOpenedWithoutGlossaryPermissions?t=60084:e.glossaryConfigOpenedWithNoGlossariesFound&&(t=60085),t)return Wg((e=>({...e,eventId:t})))}async function Om(){return Wg((e=>({...e,eventId:60054})))}async function Nm(e){const t=Math.round(await kf()/60);return Wg((n=>({...n,eventId:60055,logoutData:{trigger:Ng(e.trigger),minutesSinceLastLogin:t,reason:e.reason}})))}async function Dm(e){return Wg((t=>({...t,eventId:60052,gdocsMaxCharExceededData:{sourceLang:e.sourceLang,targetLang:e.targetLang,sourceLength:e.sourceLength}})))}async function Pm(e){return Wg((t=>({...t,eventId:60053,gdocsMaxCharExceededData:{sourceLang:e.sourceLang,targetLang:e.targetLang,sourceLength:e.sourceLength}})))}async function Mm(e){return Wg((t=>({...t,eventId:60056,sessionTypeData:{sessionType:e.sessionType,trigger:Dg(e.trigger)}})))}async function Fm(e){let t="";try{t=await Ef()}catch(e){console.log(`DAP: Failed to fetch session type. Error: ${e.message}`)}return Wg((n=>({...n,eventId:60058,onboardingModalShownData:{nicheIntegration:Ag(e.nicheIntegration||C.default),sessionType:t}})))}async function Um(e){return Wg((t=>({...t,eventId:60059,UILocationClickedData:{uiLocation:bg(e)}})))}async function Bm(){return Wg((e=>({...e,eventId:60060})))}async function Gm(){return Wg((e=>({...e,eventId:60061})))}async function jm(e,t){let n;switch(e){case P.TEXT_REFINEMENT_REQUEST:n=60062;break;case P.GDOCS_INSERT_COPY:n=60063;break;case P.GDOCS_DISCARD_COPY:n=60064;break;case P.GDOCS_CHAR_LIMIT_REACHED:n=60065;break;case P.ERROR:n=60066;break;case P.RESULT_ACCEPTED:n=60071;break;case P.RESULT_REVERTED:n=60072;break;default:return}return Wg((e=>({...e,eventId:n,deeplWriteMetaData:{lang:t.lang,sourceLength:t.sourceLength,targetLength:t.targetLength,nicheIntegration:Ag(t.nicheIntegration||C.default),error:t.error}})))}async function $m(){if(!await bf())return;const e=await Af();return Wg((t=>({...t,eventId:60067,accountData:{accountUuid:e}})))}async function Wm(){const e=await Af();return Wg((t=>({...t,eventId:60068,accountData:{accountUuid:e}})))}async function Hm(){const e=await Af();return Wg((t=>({...t,eventId:60069,accountData:{accountUuid:e}})))}async function qm(e,t){let n;switch(e){case M.RESULT_ACCEPTED:n=60073;break;case M.RESULT_REVERTED:n=60074;break;default:return}return Wg((e=>({...e,eventId:n,translationResultActionData:{sourceLang:t.sourceLang,sourceLength:t.sourceLength,targetLength:t.targetLength,nicheIntegration:Ag(t.nicheIntegration||C.default),error:t.error}})))}async function Vm(e){return Wg((t=>({...t,eventId:60070,customizationOnOffData:{nicheIntegration:Ag(e.nicheIntegration||C.default),uiLocation:bg(e.location),customizationEnabled:e.customizationEnabled}})))}async function zm(e){return Wg((t=>({...t,eventId:60075,gmailCharLimitReachedData:{gmailActionType:Fg(e.type)}})))}async function Ym(e){return Wg((t=>({...t,eventId:60076,upgradeNotificationDisplayedData:{type:Ug(e)}})))}async function Km(e){return Wg((t=>({...t,eventId:60077,upgradeNotificationClosedData:{type:Ug(e)}})))}async function Xm(e,t){return Wg((n=>({...n,eventId:60078,upgradeNotificationActionData:{type:Ug(e),action:Gg(t)}})))}async function Jm(e,t){let n;switch(e){case F.ALTERNATIVES_OPENED:n=60079;break;case F.SEGMENTATION_SELECTED:n=60080;break;case F.ALTERNATIVE_SELECTED:n=80081;break;default:return}return Wg((e=>({...e,eventId:n,alternativesMetaData:{sourceLang:t.sourceLang,targetLang:t.targetLang,nicheIntegration:Ag(t.nicheIntegration||C.default),contentProcessingMode:Bg(t.contentProcessingMode),...t.alternativesSegmentation&&{alternativesSegmentation:jg(t.alternativesSegmentation)}}})))}async function Zm(e,t){const n=e?60082:60083;return Wg((e=>({...e,eventId:n,glossaryMetadata:{nicheIntegration:Ag(t.nicheIntegration||C.default)}})))}async function Qm(e){return Wg((t=>({...t,eventId:60086,languageDetectionTextProcessingData:{detectedLanguageCode:e.lang,textLength:e.textLength,domainName:e.domainName,isReliable:e.isReliable,translationTrigger:fg(e.trigger),nicheIntegration:Ag(e.nicheIntegration||C.default)}})))}let ef;const tf="dlBrowserExtension",nf="dlCache";function rf(){return new Promise(((e,t)=>{let n=indexedDB.open(tf,1);n.onerror=function(){t("Error creating database.")},n.onsuccess=function(t){ef=t.target.result,e()},n.onupgradeneeded=function(t){ef=t.target.result,ef.objectStoreNames.contains(nf)||ef.createObjectStore(nf,{keyPath:"id"}),e()}}))}async function sf(e,t,n){return ef||await rf(),new Promise(((r,s)=>{let a=ef.transaction(n,"readwrite").objectStore(n).put({id:e,data:t,meta:{createdAt:Date.now()}});a.onsuccess=function(){r()},a.onerror=function(e){s(e)}}))}async function af(e,t){return ef||await rf(),new Promise(((n,r)=>{let s=ef.transaction(t,"readonly").objectStore(t).get(e);s.onerror=function(e){r(e)},s.onsuccess=function(){s.result?n(s.result):n(null)}}))}function of(e){return sf("dlclientstate",e,nf)}async function cf(){const e=await af("dlclientstate",nf);if(!e||!e.meta)return;return(Date.now()-e.meta.createdAt)/6e4>20?void 0:e.data}function lf(e){return sf("dlexperiments",e,nf)}async function uf(){try{const e=await af("dlexperiments",nf);return e&&e.meta&&e.data?e.data:[]}catch(e){return[]}}async function df(){const e=await af("dlexperiments",nf);if(!e||!e.meta)return;return(Date.now()-e.meta.createdAt)/6e4>9||!e.data||0===e.data.length?void 0:e.data}const pf=(e,t)=>((e,t)=>{if(!e)throw new Error("No settings supplied to getServiceType");if(!Object.keys(N).includes(t))throw new Error("Unidentified service name supplied to getServiceType");if(!e.isLoggedIn)return D.free;switch(t){case N.TRANSLATOR:return e.translatorServiceType;case N.WRITE:return e.writeServiceType;case N.API:return e.apiServiceType;case N.DOC_TRANSLATOR:return e.docTranslatorServiceType}})(e,t)===D.pro,hf=e=>e.isLoggedIn&&e.hasTermbaseService;async function gf(e){if(e.includes("session")){const e=await chrome.storage.sync.get(["session"]);e&&!e.session&&await mf()}return new Promise(((t,n)=>{chrome.storage.sync.get(e,(r=>{r?t(r):n(`Can not get ${e}`)}))}))}async function mf(){const e=n();await chrome.storage.sync.set({session:{id:e,timestamp:Date.now()}});try{await $m()}catch(e){console.error(e)}}async function ff(){const{session:e}=await gf(["session"]);!e||(Date.now()-e.timestamp)/6e4>30?await mf():await chrome.storage.sync.set({session:{...e,timestamp:Date.now()}})}async function _f(e,t,n){const r=s(e);return await chrome.storage.local.set({a_t:e,r_t:t,i_t:n,isLoggedIn:!(!e||!t),isProUser:!(!r||"Pro"!==r.sessionType),sessionType:r?.sessionType}),r?.sessionType}async function yf(){await chrome.storage.local.remove(["a_t","r_t","i_t"]),await chrome.storage.local.set({isLoggedIn:!1,isProUser:!1,sessionType:""})}async function Sf(){await chrome.storage.sync.remove(["activeTermbaseId","isGlossaryEnabled"]),await chrome.storage.sync.set({activeTermbaseId:"",isGlossaryEnabled:!1})}async function Tf(){const e=await chrome.storage.local.get(["a_t","r_t","i_t"]);return{access_token:e?e.a_t:void 0,refresh_token:e?e.r_t:void 0,id_token:e?e.i_t:void 0}}async function bf(){const e=await chrome.storage.local.get(["isLoggedIn"]);return!(!e||!e.isLoggedIn)}async function Ef(){const e=await chrome.storage.local.get(["sessionType"]);return e?.sessionType}async function vf(){return(await chrome.storage.sync.get(["installationId"])).installationId}async function wf(){await chrome.storage.local.set({last_login:Date.now()})}async function If(){await chrome.storage.local.remove(["last_login"])}async function kf(){const e=await chrome.storage.local.get(["last_login"]);return e&&e.last_login?(Date.now()-e.last_login)/1e3:0}async function Cf(e){const t=e.featureSet.translator.service,n=e.featureSet.write.service,r=e.featureSet.api.service,s=e.featureSet.documentTranslation.service,a=e.featureSet.glossary.termbaseService,o=e.featureSet.glossary.maxGlossaries;let i,c;e.loginState?.accountId&&(i=e.loginState.accountId),e.featureSet?.integrations?.browserExtension&&(c=e.featureSet?.integrations?.browserExtension),await chrome.storage.local.set({translatorServiceType:t,writeServiceType:n,apiServiceType:r,docTranslatorServiceType:s,accountId:i||"",featureSet:c,hasTermbaseService:a&&o>0})}async function Rf(){return await chrome.storage.local.get(["isLoggedIn","isProUser","sessionType","translatorServiceType","writeServiceType","apiServiceType","docTranslatorServiceType","accountId","hasTermbaseService"])}async function xf(){await chrome.storage.local.set({browserInstanceId:n()})}async function Lf(){return(await chrome.storage.local.get(["browserInstanceId"])).browserInstanceId}async function Af(){const e=await chrome.storage.local.get(["accountId","a_t","i_t"]);if(e&&e.accountId)return e.accountId;if(e&&e.a_t){const t=s(e.a_t),n=s(e.i_t);return t.sub||n.sub}}async function Of(){let e=[];try{e=await uf()}catch(e){}if(!e||0===e.length)return[];const t=e.map((e=>({id:e.id,variant:e.variant,breakout:e.breakout})));return t}async function Nf(e="translatorServiceType"){const t=await Rf(),n=!!t.accountId,r=t[e];return n?r===D.pro?l.loggedInPro:l.loggedInFree:l.notLoggedIn}async function Df(e="translatorServiceType"){const t=await Nf(e);let n;switch(e){case"translatorServiceType":default:n=u;break;case"writeServiceType":n=d}switch(t){case l.notLoggedIn:return n.notLoggedIn;case l.loggedInFree:return n.loggedInFree;case l.loggedInPro:return;default:n.notLoggedIn}}async function Pf(e){const t=await chrome.storage.local.get(["translatorServiceType","writeServiceType","apiServiceType","docTranslatorServiceType","isLoggedIn"]);return pf(t,e)}async function Mf(){return await chrome.storage.local.get(["translatorServiceType","writeServiceType","apiServiceType","docTranslatorServiceType","isLoggedIn"])}async function Ff(e=!1){if(!e){let e;try{e=await df()}catch(e){}if(e)return e}const t=await vf();if(!t)throw new Error("Installtion ID is not valid");let n=[];try{n=await uf()}catch(e){}const r=`https://s.deepl.com/chrome/experiments/${t}`;let s;try{const e=await fetch(r,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:JSON.stringify(n),credentials:"omit"});if(s=(await e.json()).client_experiments,!s)return n;try{lf(s)}catch(e){}return s}catch(e){return n}}const Uf={ACCESS_DENIED:"ACCESS_DENIED",INVALID_REQUEST:"INVALID_REQUEST",INVALID_GRANT:"INVALID_GRANT",GET_TOKEN_ERROR:"GET_TOKEN_ERROR",INVALID_NONCE:"INVALID_NONCE"};class Bf extends Error{constructor(e,t){super(e),this.name=Uf.ACCESS_DENIED,this.message=e,this.httpStatusCode=t}}class Gf extends Error{constructor(e,t){super(e),this.name=Uf.INVALID_REQUEST,this.message=e,this.httpStatusCode=t}}class jf extends Error{constructor(e,t){super(e),this.name=Uf.INVALID_GRANT,this.message=e,this.httpStatusCode=t}}class $f extends Error{constructor(e,t){super(e),this.name=Uf.GET_TOKEN_ERROR,this.message=e,this.httpStatusCode=t}}class Wf extends Error{constructor(e){super(e),this.name=Uf.INVALID_NONCE,this.message=e}}function Hf(e,t){const n=e.split("?")[1];if(n){var r=n.split("&");for(let e=0;e<r.length;e++){const n=r[e].split("=");if(decodeURIComponent(n[0])===t)return decodeURIComponent(n[1])}}}async function qf(e,t,n="https://test.deepl.com/oidc-login"){const s=r(),a=r(),o=await async function(e){const t=await crypto.subtle.digest("SHA-256",(new TextEncoder).encode(e));return btoa(String.fromCharCode(...new Uint8Array(t))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}(a);return{url:n+"?"+new URLSearchParams([["client_id",e],["redirect_uri",t],["code_challenge",o],["code_challenge_method","S256"],["nonce",s]]),nonce:s,codeVerifier:a}}function Vf(e,t){if(200!==e){if("invalid_request"===t.error)throw new Gf(`dl-oidc (get tokens): invalid request - http status: ${e}`,e);if("invalid_grant"===t.error)throw new jf(`dl-oidc (get tokens): invalid grant - http status: ${e}`,e);throw new $f(`dl-oidc (get tokens): http status: ${e}`,e)}}async function zf(e,t="https://deepl.com/oidc/token"){const n=await fetch(t,{method:"POST",credentials:"omit",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({grant_type:"refresh_token",refresh_token:e})}),r=await n.json();return Vf(n.status,r),r.access_token}async function Yf(e,t,n=!1){let r=t.access_token;async function s(){return await fetch(e,{...t,headers:{...t.headers,Authorization:r?`Bearer ${r}`:"None"},...t.omitCookies&&{credentials:"omit"}})}n&&r&&(r=await zf(t.refresh_token,t.token_url));let a=await s();return 401!==a.status&&403!==a.status||(r=await zf(t.refresh_token,t.token_url),a=await s()),{response:a,accessToken:r}}function Kf(e,t,n){return{jsonrpc:"2.0",method:e,params:t,id:n}}async function Xf(e=!1,n=!0){if(!e){const e=await cf();if(e)return e}const r=Kf("getClientState",{v:"20180814"},t()),a=await Tf(),o=n||function(e){try{const t=s(e);if(t.exp&&Date.now()/1e3<t.exp-5)return!1}catch(e){console.error("Error decoding token:",e)}return!0}(a.access_token),{response:i,accessToken:c}=await Yf("https://w.deepl.com/web",{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(r),access_token:a.access_token,refresh_token:a.refresh_token,token_url:"https://w.deepl.com/oidc/token",credentials:"omit"},o);await _f(c,a.refresh_token,a.id_token);const l=(await i.json()).result;return l&&(of(l),Cf(l)),l}async function Jf(e=!1){const t=async()=>{const t=await qf("chromeExtension",chrome.identity.getRedirectURL(),"https://www.deepl.com/auth/login");return new Promise(((n,r)=>{chrome.identity.launchWebAuthFlow({interactive:!0,url:e?`${t.url}#error_loginfailed`:t.url},(async e=>{if(!e){const e=chrome.runtime.lastError.message;return console.error("response url undefined",e),Kh(`login - response url undefined. ${e}`,Bh),/The user did not approve access/gm.test(e)||/User cancelled or denied access/gm.test(e)?n():r()}try{const r=await async function(e,t,n,r,a,o="https://deepl.com/oidc/token"){const i=Hf(n,"code");if(!i){const e=Hf(n,"error");if("access_denied"===e)throw new Bf("dl-oidc (get tokens): access denied - undefined code");if("invalid_request"===e)throw new Gf("dl-oidc (get tokens): invalid request - undefined code")}const c=await fetch(`${o}`,{method:"POST",credentials:"omit",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({client_id:e,code_verifier:a,code:i,grant_type:"authorization_code",redirect_uri:t})}),l=await c.json();if(Vf(c.status,l),s(l.id_token).nonce!==r)throw new Wf("dl-oidc (get tokens): invalid nonce");return l}("chromeExtension",chrome.identity.getRedirectURL(),e,t.nonce,t.codeVerifier,"https://w.deepl.com/oidc/token"),a=await _f(r.access_token,r.refresh_token,r.id_token);try{await Xf(!0,!1),Om(),Wm(),a&&await Mm({sessionType:a,trigger:"LOGIN"})}catch(e){console.error(e)}await wf(),n()}catch(e){console.error(e);try{qg({errorCode:e.name,errorMessage:e.message})}catch(e){console.error(e)}r(e)}}))}))};try{await t()}catch(e){Jf(!0)}}async function Zf(e){const t=await Tf(),n=new URLSearchParams([["id_token_hint",t.id_token],["post_logout_redirect_uri",chrome.identity.getRedirectURL()]]),r=async()=>{await If();try{await Hm()}catch(e){console.error(e)}await yf();try{await Nm({trigger:e.trigger,reason:e.reason})}catch(e){console.error(e)}await Xf(!0),Sf(),e.showAlert&&chrome.tabs.query({active:!0,currentWindow:!0},(function(t){chrome.tabs.sendMessage(t[0].id,{action:"dlShowAlert",payload:{error:e.reason}})}))};if(!t.id_token)return void await r();const s=`https://www.deepl.com/auth/logout?${n}`;chrome.identity.launchWebAuthFlow({url:s,interactive:!0},(()=>{r()}))}async function Qf(e,t,n,r){const s=await Tf(),a=await Pf(N.TRANSLATOR),o=await Pf(N.WRITE);let i=s&&s.access_token&&a?"https://api.deepl.com/jsonrpc?client=chrome-extension,1.20.1":"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.20.1";r&&(i=s&&s.access_token&&o?"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.20.1":"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.20.1");try{const{response:r,accessToken:a}=await Yf(i,{method:"POST",headers:{"Content-Type":t},body:e,access_token:s.access_token,refresh_token:s.refresh_token,token_url:"https://w.deepl.com/oidc/token",omitCookies:!0}),o=await _f(a,s.refresh_token,s.id_token);if(o)try{await Mm({sessionType:o,trigger:"TRANSLATION"})}catch(e){console.log(e)}try{await Xf(!1,!1)}catch(e){console.error(`Failed to get the client state ${e.message}`)}let c=function(e,t,n){let r;try{r=JSON.parse(e)}catch(e){throw 200===t?new ag("JSON_RPC: Parsing of response object failed"):t>=500&&n?new og(`FPT failed: Http status code ${t}`):new ig(t.toString(),403===t?`Translation failed: Http status code ${t} forbidden request. re-authenticating makes no difference.`:`Translation failed: Http status code ${t}`)}if("2.0"!==r.jsonrpc||void 0!==r.result&&200!==t||void 0===r.result&&void 0===r.error)throw new ag("JSON_RPC: missing field, wrong id, proper result without 200 status, or missing data");if(r.error){const e=r.error;if(void 0===e.code)throw new ag('JSON_RPC: Missing field "code" in error response');throw new ig(e.code.toString(),e.message)}if(200!==t)throw new ig(t.toString(),`Http status code ${t}`);return r}(await r.text(),r.status,n);return{data:c,status:r.status}}catch(e){throw e.name!==Uf.ACCESS_DENIED&&e.name!==Uf.INVALID_REQUEST&&e.name!==Uf.INVALID_GRANT&&e.name!==Xh.USER_UNAUTHORIZED&&e.name!==Xh.FORBIDDEN_REQUEST||setTimeout((()=>{Zf({trigger:x.extension,reason:e.name})}),5e3),e}}async function e_(e,t,n=(e=>e),r,s,a){const o=function(e,t,n){return{jsonrpc:"2.0",method:e,params:t,id:n}}(e,t,r),i=n(JSON.stringify(o),o);return(await Qf(i,"application/json; charset=utf-8",s,a)).data.result}async function t_(e){let t,n={};for(const t in e.weights)e.weights[t]>0&&(n[t]=e.weights[t]);try{t=await Nf()}catch(e){t=l.notLoggedIn,console.log(e)}const r=e.nicheIntegration===C.default||e.nicheIntegration===C.gmail||e.nicheIntegration===C.gslides||!e.nicheIntegration,s=await Pf(N.TRANSLATOR),a=await Pf(N.WRITE);if((!s||!a)&&r){const n=e.sourceTexts.reduce(((e,t)=>e+t.length),0),r=e.isWriteRequest?"writeServiceType":"translatorServiceType",o=await Df(r);if(e.isWriteRequest){if(s&&!a&&n>o)throw new dg(o,"Char limit exceeded (Translator Pro, Write Free)");if(!a&&n>o)throw new ug(o,"Char limit exceeded (Write Free Or Anonymous)")}else{if(t===l.loggedInFree&&a&&n>o)throw new pg(o,"Char limit exceeded (Free or Anon Translator, Write Pro)");if(t===l.loggedInFree&&n>o)throw new cg(o,"Char limit exceeded (Translator Free)");if(t===l.notLoggedIn&&n>o)throw new lg(o,"Char limit exceeded (Translator Anon)")}}let o=e.sourceTexts;const i=["EN-US","EN-GB","PT-PT","PT-BR"].includes(e.targetLangCode?.toUpperCase());let c=e.targetLangCode?.toUpperCase();i&&(c=e.targetLangCode?.toUpperCase().slice(0,2));const u=e.isWriteRequest?e.sourceTexts.map((e=>({text:e,requestAlternatives:4}))):o.map((e=>({text:e}))),d={texts:u,...e.isHtml&&{html:"enabled"},...!e.isHtml&&{splitting:e.splitting?e.splitting:"paragraphs"},lang:{target_lang:c,source_lang_user_selected:"auto"===e.sourceLang?"auto":e.sourceLang.toUpperCase(),preference:{weight:n}},commonJobParams:{regionalVariant:e.regionalVariant&&i?e.regionalVariant:void 0,...e.isWriteRequest&&{mode:"write"},...e.formality&&{formality:e.formality}}};let p=1;const h=Date.now();o.forEach((e=>p+=(e.match(/[i]/g)||[]).length)),d.timestamp=h-h%p+p;const g=await e_("LMT_handle_texts",d,((e,t)=>e=(t.id+3)%13==0||(t.id+5)%29==0?e.replace('"method":"','"method" : "'):e.replace('"method":"','"method": "')),e.id,e.isHtml,e.isWriteRequest);return{texts:g.texts.map((e=>e.text)),sourceLang:g.lang.toUpperCase(),detectedLanguages:g.detectedLanguages}}const n_=new Map([["ZH_EN","chinese-english"],["EN_ZH","english-chinese"],["NL_EN","dutch-english"],["EN_NL","english-dutch"],["FR_EN","french-english"],["EN_FR","english-french"],["FR_DE","french-german"],["DE_FR","german-french"],["FR_PT","french-portuguese"],["PT_FR","portuguese-french"],["FR_ES","french-spanish"],["ES_FR","spanish-french"],["DE_EN","german-english"],["EN_DE","english-german"],["DE_PT","german-portuguese"],["PT_DE","portuguese-german"],["DE_ES","german-spanish"],["ES_DE","spanish-german"],["IT_EN","italian-english"],["EN_IT","english-italian"],["JA_EN","japanese-english"],["EN_JA","english-japanese"],["PL_EN","polish-english"],["EN_PL","english-polish"],["PT_EN","portuguese-english"],["EN_PT","english-portuguese"],["PT_ES","portuguese-spanish"],["ES_PT","spanish-portuguese"],["RU_EN","russian-english"],["EN_RU","english-russian"],["ES_EN","spanish-english"],["EN_ES","english-spanish"]]);async function r_(e){const t=function(e,t){const n=`${e.toUpperCase()}_${t.toUpperCase()}`;return n_.get(n)}(s_(e.sourceLang),s_(e.targetLang)),n=encodeURIComponent(e.text),r=`https://www-app.linguee.com/${t}/search?dlApp=BrowserExtension&il=${e.interfaceLang}&query=${n}`;let s=async function(e){let t;if(200!==e.status)throw 404===e.status?(console.error("Dictionary Entry not found: 404"),new hg(Jh.ENTRY_NOT_FOUND)):(console.error("Dictionary Server Error"),new hg(Jh.SERVER_ERROR));{try{t=await e.text()}catch(e){throw new hg(Jh.SERVER_ERROR)}const n=/href=["']([^"']*)["']/g;t=t.replace(n,"")}return t}(await fetch(r));return s}function s_(e){return["EN-US","EN-GB","PT-PT","PT-BR"].includes(e)?["EN-US","EN-GB"].includes(e)?"EN":["PT-PT","PT-BR"].includes(e)?"PT":e:e}function a_(e,t){const n=1e-5;return n*Math.floor((.97*e+t)/n)}const o_="PROTOCOL_ERROR",i_="FULL_PAGE_SERVER_ERROR",c_="-32003",l_="403";class u_ extends Error{constructor(e){super(e),this.name=o_,this.message=e}}class d_ extends Error{constructor(e,t){super(t),this.name=e,this.message=t}}class p_ extends Error{constructor(e){super(e),this.name=i_,this.message=e}}function h_(){let e=new Uint32Array(1);return crypto.getRandomValues(e),e[0]}function g_(e,t){return{jsonrpc:"2.0",method:e,params:t,id:h_()}}const m_={TRANSLATE:"translate",WRITE:"write"},f_="pro",__="LMT_split_text",y_="LMT_handle_jobs",S_="getTermbases";const T_=async({mode:e,texts:t,config:n,sourceLang:r="auto",queryParameter:s,textType:a})=>{const o=await v_(n,e),i=s?`${o}&method=${__}&${s}`:`${o}&method=${__}`,c=g_(__,{commonJobParams:{mode:e},lang:{lang_user_selected:r},texts:t,textType:a});return await E_(i,{method:"POST",headers:{"Content-Type":"application/json"},body:I_(c)},n)},b_=async({mode:e,jobs:t,sourceLang:n,targetLang:r,config:s,textType:a,formality:o,termbase:i,queryParameter:c,regionalVariant:l})=>{const u=await v_(s,e),d=c?`${u}&method=${y_}&${c}`:`${u}&method=${y_}`,p=g_(y_,{commonJobParams:{mode:e,...a&&{textType:a},...o&&{formality:o},...i&&{termbase:i},...l&&{regionalVariant:l}},lang:{source_lang_computed:n,target_lang:r},jobs:t,priority:1,timestamp:w_(t)});return await E_(d,{method:"POST",headers:{"Content-Type":"application/json"},body:I_(p)},s)},E_=async(e,t,n)=>{const r=await n.auth.getAuthTokens(),s=r?{access_token:r.access_token,refresh_token:r.refresh_token,token_url:n.auth.tokenUrl}:{},{response:a,accessToken:o}=await Yf(e,{...t,...s,omitCookies:n.omitCookies});return await n.auth.setAuthTokens(o,r.refresh_token,r.id_token),await k_({response:a,isHtml:!1})},v_=async({auth:e,baseUrls:t,isTermbase:n},r)=>{const s=await e.getAuthTokens(),a=r===m_.WRITE?t.write:t.translate;if(n)return t.glossary;if(!s||!s.access_token)return a.free;if(!e.getServiceLevels){const e=(e=>{try{return JSON.parse(atob(e.split(".")[1]))}catch(e){return null}})(s.access_token),t=e&&"Pro"===e.sessionType;return s.access_token&&t?a.pro:a.free}{const t=await e.getServiceLevels();switch(r){case m_.WRITE:return t.write===f_?a.pro:a.free;case m_.TRANSLATE:return t.translator===f_?a.pro:a.free;default:return a.free}}},w_=e=>{const t=e.reduce(((e,t)=>[...e,...t.sentences.map((e=>e.text))]),[]);let n=1;const r=Date.now();return t.forEach((e=>n+=(e.match(/[i]/g)||[]).length)),r-r%n+n},I_=e=>{let t=JSON.stringify(e);return t=(e.id+3)%13==0||(e.id+5)%29==0?t.replace('"method":"','"method" : "'):t.replace('"method":"','"method": "'),t},k_=async({response:e,isHtml:t})=>{let n;try{if(403===e.status)throw new d_(e.status.toString(),`Translation failed: Http status code ${e.status} forbidden request. re-authenticating makes no difference.`);n=JSON.parse(await e.text())}catch(n){throw 200===e.status?new u_("JSON_RPC: Parsing of response object failed"):e.status>=500&&t?new p_(`FPT failed: Http status code ${e.status}`):new d_(e.status.toString(),`Translation failed: Http status code ${e.status}`)}if("2.0"!==n.jsonrpc||void 0!==n.result&&200!==e.status||void 0===n.result&&void 0===n.error)throw new u_("JSON_RPC: missing field, wrong id, proper result without 200 status, or missing data");if(n.error){if(void 0===n.error.code)throw new u_('JSON_RPC: Missing field "code" in error response');throw new d_(n.error.code.toString(),n.error.message)}if(200!==e.status)throw new d_(e.status.toString(),`Http status code ${e.status}`);return n},C_=m_;async function R_({texts:e,mode:t=m_.TRANSLATE,targetLang:n}){return O_((async r=>await async function({texts:e,mode:t=m_.TRANSLATE,targetLang:n,config:r}){const s=await T_({mode:t,texts:e,config:r}),a=s.result.texts[0].chunks.map(((e,n,r)=>({kind:"default",preferred_num_beams:4,raw_en_context_after:n<r.length-1&&r.length>1?[r[n+1].sentences[0].text]:[],raw_en_context_before:n>0?[r[n-1].sentences[0].text]:[],sentences:[{...e.sentences[0],id:n}],...t===m_.WRITE&&{write_variant_requests:["main","variants"]}})));return await b_({mode:t,jobs:a,sourceLang:s.result.lang.detected,targetLang:t===m_.WRITE?s.result.lang.detected:n,config:r})}({texts:e,mode:t,targetLang:n,config:r})))}const x_=async({mode:e,texts:t,sourceLang:n="auto",textType:r="plaintext"})=>O_((async s=>await T_({mode:e,texts:t,sourceLang:n,config:s,textType:r}))),L_=async({mode:e,jobs:t,sourceLang:n,targetLang:r,textType:s,formality:a,termbase:o,regionalVariant:i})=>O_((async c=>await b_({mode:e,jobs:t,sourceLang:n,targetLang:r,config:c,textType:s,formality:a,termbase:o,regionalVariant:i}))),A_=async()=>O_((async e=>await(async({config:e})=>{const t=`${await v_({...e,isTermbase:!0})}&method=${S_}`,n=g_(S_);return await E_(t,{method:"POST",headers:{"Content-Type":"application/json"},body:I_(n)},e)})({config:e}))),O_=async e=>{try{return await e(N_())}catch(e){throw e.name!==Uf.ACCESS_DENIED&&e.name!==Uf.INVALID_REQUEST&&e.name!==Uf.INVALID_GRANT&&e.name!==c_&&e.name!==l_||setTimeout((()=>{Zf({trigger:x.extension,reason:e.name})}),5e3),e}},N_=()=>({baseUrls:{translate:{free:"https://www2.deepl.com/jsonrpc?client=chrome-extension,1.20.1",pro:"https://api.deepl.com/jsonrpc?client=chrome-extension,1.20.1"},write:{free:"https://write-free.www.deepl.com/jsonrpc?client=chrome-extension,1.20.1",pro:"https://write-pro.www.deepl.com/jsonrpc?client=chrome-extension,1.20.1"},glossary:"https://api.deepl.com/termbases/jsonrpc?client=chrome-extension,1.20.1"},auth:{getAuthTokens:Tf,setAuthTokens:_f,getServiceLevels:async()=>{const e=await Mf();return{translator:e.translatorServiceType,write:e.writeServiceType}},tokenUrl:"https://w.deepl.com/oidc/token"},omitCookies:!0}),D_=async e=>{let t;try{t=await Nf()}catch(e){t=l.notLoggedIn,console.log(e)}const n=e.nicheIntegration===C.default||e.nicheIntegration===C.gmail||e.nicheIntegration===C.gslides||!e.nicheIntegration,r=await Pf(N.TRANSLATOR),s=await Pf(N.WRITE);if((!r||!s)&&n){const n=e.sourceTexts.reduce(((e,t)=>e+t.length),0),a=e.isWriteRequest?"writeServiceType":"translatorServiceType",o=await Df(a);if(e.isWriteRequest){if(r&&!s&&n>o)throw new dg(o,"Char limit exceeded (Translator Pro, Write Free)");if(!s&&n>o)throw new ug(o,"Char limit exceeded (Write Free Or Anonymous)")}else{if(t===l.loggedInFree&&s&&n>o)throw new pg(o,"Char limit exceeded (Free or Anon Translator, Write Pro)");if(t===l.loggedInFree&&n>o)throw new cg(o,"Char limit exceeded (Translator Free)");if(t===l.notLoggedIn&&n>o)throw new lg(o,"Char limit exceeded (Translator Anon)")}}},P_=(e,t=[])=>{if(!e||0===t.length)return null;if(t.map((e=>e.id)).includes(e)){return t.find((t=>t.id===e))}return null},M_=async e=>{await D_(e);const{activeTermbaseId:t,isLoggedIn:n,isGlossaryEnabled:r,hasTermbaseService:s}=await gf(["activeTermbaseId","isLoggedIn","isGlossaryEnabled","hasTermbaseService"]),a=function(e,t){const n=["EN-US","EN-GB","PT-PT","PT-BR"].includes(e?.toUpperCase());let r,s=e?.toUpperCase();return n&&(s=e?.toUpperCase().slice(0,2),r=t),{langCode:s,regionalVariant:r}}(e.targetLangCode,e.regionalVariant),i=[],c=[],l=e.isWriteRequest?C_.WRITE:C_.TRANSLATE,u=await x_({texts:e.sourceTexts,mode:l});let d,p=u.result.lang.detected,h=!1,g=!1,m=!1;if(hf({isLoggedIn:n,hasTermbaseService:s})&&t&&!e.isWriteRequest&&r)try{const[e]=await Q_(),n=P_(t,e);if(n)for(let e of n.termDictionaries)if(e.languagePair===`${p.substr(0,2)}>${a.langCode.substr(0,2)}`.toLowerCase()){d={id:n.id,dictionaryId:e.id},h=!0,g=n.shared;break}}catch(e){console.log({e:e,message:"fetching glossaries failed"})}for(const e of u.result.texts){const t=[];for(const n of e.chunks)for(const e of n.sentences)c.push(e),t.push(c.length-1);i.push(t)}const f=c.map(((e,t)=>({kind:"default",preferred_num_beams:4,raw_en_context_after:t<c.length-1?[c[t+1].text]:[],raw_en_context_before:t>0?[c[t-1].text]:[],sentences:[{...e,id:t+1}]}))),_={mode:l,jobs:f,sourceLang:p,targetLang:e.isWriteRequest?p:a.langCode,textType:e.textType,...e.formality&&{formality:e.formality},...d&&{termbase:d},...a.regionalVariant&&{regionalVariant:a.regionalVariant}};let y=(await L_(_)).result;if(m=y.translations[0].beams.map((e=>e.sentences[0])).some((e=>e.glossary_highlights&&e.glossary_highlights.length>0)),e.autoImproveForTranslate&&l===C_.TRANSLATE){const t=e.targetLangCode.substring(0,2).toUpperCase(),n=4;if(y.source_lang.substring(0,2).toUpperCase()===t&&function(e){try{return e.replace(/[^\p{L}]/gu,"").length}catch(t){return e.replace(/[^a-zA-Z]/g,"").length}}(e.sourceTexts.join(""))>n&&o.includes(t)){y=(await L_({..._,mode:C_.WRITE})).result}}const S=y.translations.map(((e,t)=>`${c[t].prefix}${e.beams[0].sentences[0].text}`)),T=i.map((e=>e.map((e=>S[e]))));return{processedText:T,result:y,...h&&{glossaryTrackingInfo:{isGlossaryEnabled:!!d,isGlossaryShared:g,didGlossaryChangeTranslation:m}}}};async function F_(e){const t=await gf(["selectedTargetLanguage"]);chrome.tabs.sendMessage(e,{action:"dlTranslateInline",targetLang:t.selectedTargetLanguage})}async function U_(e){await ff();const n=await gf(["selectedTargetLanguage","session","installationId","regionalVariant"]),r=new Date,s={sourceLang:"auto",targetLangCode:n.selectedTargetLanguage,sessionId:n.session.id,id:t(),isHtml:!0,sourceTexts:e.payload.texts,regionalVariant:n.regionalVariant};let a,o;try{const e=await M_(s);a=e.processedText,o=e.glossaryTrackingInfo}catch(t){try{Vg({errorCode:t.name,errorMessage:t.message,domainName:e.payload.domainName,targetLang:n.selectedTargetLanguage,websiteLanguage:e.payload.sourceLang,trigger:e.payload.trigger,characterCount:e.payload.texts.reduce(((e,t)=>e+t.length),0)})}catch(e){console.log(e)}throw t}Ay(e?.payload?.sourceLang,n?.selectedTargetLanguage);const i={isFirstTime:e.payload.isFirstTime,processingTimeInMs:new Date-r};try{Hg({installationId:n.installationId,trigger:e.payload.trigger,websiteLanguage:e.payload.sourceLang,targetLanguage:n.selectedTargetLanguage,characterCount:e.payload.texts.reduce(((e,t)=>e+t.length),0),translationPerformance:i,domainName:e.payload.domainName,glossaryTrackingInfo:o})}catch(e){console.error(e)}const c=a.map((e=>e.join("")));return c}async function B_(e){await ff();const n=await gf(["selectedTargetLanguage","session","installationId","languagePreferenceForReading","regionalVariant"]),r=e.payload.nicheIntegration||C.default,s={sourceLang:e.payload.sourceLang||"auto",targetLangCode:n.selectedTargetLanguage,sessionId:n.session.id,id:t(),sourceTexts:e.payload.requests.map((e=>e.text)),weights:n.languagePreferenceForReading,splitting:"newlines",regionalVariant:n.regionalVariant,nicheIntegration:r,isWriteRequest:e.payload.isWriteRequest};let a,o,i;try{const e=await M_(s);a=e.result,o=e.processedText,i=e.glossaryTrackingInfo}catch(t){try{e.payload.isWriteRequest?jm(P.ERROR,{lang:e.payload.websiteLanguage,sourceLength:e.payload.requests.reduce(((e,t)=>e+t.text.length),0),targetLength:0,nicheIntegration:r,error:t.name}):Vg({errorCode:t.name,errorMessage:t.message,domainName:e.payload.domainName,targetLang:n.selectedTargetLanguage,websiteLanguage:e.payload.websiteLanguage,trigger:e.payload.trigger,characterCount:e.payload.requests.reduce(((e,t)=>e+t.text.length),0)})}catch(e){console.log(e)}throw t}Ay(a?.source_lang,n?.selectedTargetLanguage),e.payload.platformBehavior===C.gslides&&tS();try{if(a.detectedLanguages){for(const e in a.detectedLanguages)(n.languagePreferenceForReading[e]||0===n.languagePreferenceForReading[e])&&(n.languagePreferenceForReading[e]=a_(n.languagePreferenceForReading[e],a.detectedLanguages[e]));chrome.storage.sync.set({languagePreferenceForReading:n.languagePreferenceForReading})}}catch(e){console.error(e)}try{e.payload.isWriteRequest?jm(P.TEXT_REFINEMENT_REQUEST,{lang:e.payload.sourceLang,sourceLength:e.payload.requests.reduce(((e,t)=>e+t.text.length),0),targetLength:o.flat().reduce(((e,t)=>e+t.length),0),nicheIntegration:r}):Hg({installationId:n.installationId,trigger:e.payload.trigger,websiteLanguage:a.source_lang,targetLanguage:n.selectedTargetLanguage,characterCount:e.payload.requests.reduce(((e,t)=>e+t.text.length),0),domainName:e.payload.domainName,nicheIntegration:r,glossaryTrackingInfo:i})}catch(e){console.error(e)}return o.map((e=>({text:e.join(""),detected_source_language:a.source_lang})))}async function G_(e){await ff();const n=await gf(["targetLanguageUserInput","session","installationId","languagePreferenceForWriting","regionalVariant"]),r=e.payload.requests,s=e.payload.targetLang||n.targetLanguageUserInput,a=e.payload.platformBehavior||C.default,o={sourceLang:"auto",targetLangCode:s,sessionId:n.session.id,id:t(),sourceTexts:r.map((e=>e.text))||[],weights:n.languagePreferenceForWriting,splitting:"paragraphs",textType:"richtext",regionalVariant:n.regionalVariant,nicheIntegration:a,...e.payload.isHtml&&{isHtml:e.payload.isHtml},...e.payload.formality&&{formality:e.payload.formality},...e.payload.isWriteRequest&&{isWriteRequest:e.payload.isWriteRequest}};let i,l,u;try{const e=await M_(o);i=e.result,l=e.processedText,u=e.glossaryTrackingInfo}catch(t){try{e.payload.isWriteRequest?jm(P.ERROR,{lang:e.payload.source_lang,sourceLength:r.reduce(((e,t)=>e+t.text.length),0),targetLength:0,nicheIntegration:a,error:t.name}):Vg({errorCode:t.name,errorMessage:t.message,domainName:e.payload.domainName,targetLang:s,websiteLanguage:e.payload.websiteLanguage,trigger:c.input,characterCount:r.reduce(((e,t)=>e+t.text.length),0)})}catch(e){console.log(e)}throw t}Ay(i?.source_lang,s),e.payload.platformBehavior===C.gmail?Qy():e.payload.platformBehavior===C.gslides&&tS();try{if(i.detectedLanguages){for(const e in i.detectedLanguages)(n.languagePreferenceForWriting[e]||0===n.languagePreferenceForWriting[e])&&(n.languagePreferenceForWriting[e]=a_(n.languagePreferenceForWriting[e],i.detectedLanguages[e]));chrome.storage.sync.set({languagePreferenceForWriting:n.languagePreferenceForWriting})}}catch(e){console.error(e)}if(!0!==e.payload.skipDapReporting)try{e.payload.isWriteRequest?jm(P.TEXT_REFINEMENT_REQUEST,{lang:e.payload.source_lang,sourceLength:r.reduce(((e,t)=>e+t.text.length),0),targetLength:l.flat().reduce(((e,t)=>e+t.length),0),nicheIntegration:a}):Hg({installationId:n.installationId,trigger:c.input,websiteLanguage:i.sourceLang,targetLanguage:s,characterCount:r.reduce(((e,t)=>e+t.text.length),0),domainName:e.payload.domainName,nicheIntegration:a,glossaryTrackingInfo:u})}catch(e){console.error(e)}return[{detected_source_language:i.source_lang,text:l.flat().join(""),texts:l.map((e=>e.join("")))}]}async function j_(e){await ff();const t=await gf(["session","installationId","languagePreferenceForWriting","regionalVariant","zendeskActiveTermbase"]),n=e.payload.texts,r=e.payload.targetLang,s=C.zendesk,a=C_.TRANSLATE,o=e.payload.formality;let i,l;const u=[],d=[];let p;try{const e=await x_({texts:n,mode:a});let s;if(l=e.result.lang.detected,t.zendeskActiveTermbase&&t.zendeskActiveTermbase.termDictionaries)for(let e of t.zendeskActiveTermbase.termDictionaries)if(e.languagePair===`${l.substr(0,2)}>${r.substr(0,2)}`.toLowerCase()){s={id:t.zendeskActiveTermbase.id,dictionaryId:e.id},p=!0;break}for(const t of e.result.texts){const e=[];for(const n of t.chunks)for(const t of n.sentences)d.push(t),e.push(d.length-1);u.push(e)}const c=d.map(((e,t)=>({kind:"default",preferred_num_beams:4,raw_en_context_after:t<d.length-1?[d[t+1].text]:[],raw_en_context_before:t>0?[d[t-1].text]:[],sentences:[{...e,id:t+1}]})));i=await L_({mode:a,jobs:c,sourceLang:l,targetLang:r.substr(0,2),textType:"plaintext",...o&&{formality:o},...s&&{termbase:s}})}catch(t){try{Vg({errorCode:t.name,errorMessage:t.message,domainName:e.payload.domainName,targetLang:r,websiteLanguage:e.payload.websiteLanguage,trigger:c.input,characterCount:n.reduce(((e,t)=>e+t.text.length),0)})}catch(e){console.log(e)}throw t}const h=i.result.translations.map(((e,t)=>`${d[t].prefix}${e.beams[0].sentences[0].text}`)),g=u.map((e=>e.map((e=>h[e]))));if(Ay(l,r),Ly(),!0!==e.payload.skipDapReporting)try{Hg({installationId:t.installationId,trigger:c.input,websiteLanguage:l,targetLanguage:r,characterCount:n.reduce(((e,t)=>e+t.length),0),domainName:e.payload.domainName,nicheIntegration:s,isGlossaryEnabled:p})}catch(e){console.error(e)}return[{detected_source_language:l,text:g[0],texts:g}]}async function $_(e){await ff();const n=await gf(["targetLanguage","session","installationId","regionalVariant"]),r=e.payload.requests,s=e.payload.sourceLang,a=e.payload.targetLang||n.targetLanguage,o=C.gmail,i={sourceLang:s||"auto",targetLangCode:a,sessionId:n.session.id,id:t(),sourceTexts:r.map((e=>e.text))||[],splitting:"newlines",regionalVariant:n.regionalVariant};let l,u,d;try{const e=await M_(i);l=e.result,u=e.processedText,d=e.glossaryTrackingInfo}catch(t){try{Vg({errorCode:t.name,errorMessage:t.message,domainName:e.payload.domainName,targetLang:a,trigger:c.input,characterCount:r.reduce(((e,t)=>e+t.text.length),0)})}catch(e){console.log(e)}throw t}Ay(l?.source_lang,a),Qy();try{Hg({installationId:n.installationId,trigger:c.manual,websiteLanguage:l.source_lang,targetLanguage:a,characterCount:r.reduce(((e,t)=>e+t.text.length),0),domainName:e.payload.domainName,nicheIntegration:o,glossaryTrackingInfo:d})}catch(e){console.error(e)}return[{detected_source_language:l.source_lang,text:u.flat().join(""),texts:u.map((e=>e.join("")))}]}async function W_(e){await ff();const n=await gf(["selectedTargetLanguage","session","installationId","regionalVariant"]),r=e.payload.message,s={sourceLang:"auto",targetLangCode:n.selectedTargetLanguage,sessionId:n.session.id,id:t(),sourceTexts:[r],splitting:"paragraphs",regionalVariant:n.regionalVariant};let a,o,i;try{const e=await M_(s);a=e.result,o=e.processedText,i=e.glossaryTrackingInfo}catch(t){try{um({errorCode:t.name,errorMessage:t.message,domainName:e.payload.domainName,targetLang:n.selectedTargetLanguage,messageLang:e.payload.messageLang,messageLength:r.length})}catch(e){console.log(e)}throw t}Ay(a?.source_lang,n?.selectedTargetLanguage);try{Hg({installationId:n.installationId,trigger:e.payload.trigger,websiteLanguage:e.payload.messageLang,targetLanguage:n.selectedTargetLanguage,characterCount:r.length,domainName:e.payload.domainName,nicheIntegration:C.twitter,glossaryTrackingInfo:i})}catch(e){console.error(e)}return o.map((e=>({text:e.join(""),detected_source_language:a.source_lang})))}async function H_(e){await ff();const n=await gf(["selectedTargetLanguage","session","installationId","regionalVariant"]),r=e.payload.message,s={sourceLang:"auto",targetLangCode:n.selectedTargetLanguage,sessionId:n.session.id,id:t(),sourceTexts:[r],splitting:"paragraphs",regionalVariant:n.regionalVariant};let a,o,i;try{const e=await M_(s);a=e.result,o=e.processedText,i=e.glossaryTrackingInfo}catch(t){try{Vg({errorCode:t.name,errorMessage:t.message,domainName:e.payload.domainName,targetLang:n.selectedTargetLanguage,websiteLanguage:e.payload.messageLang,characterCount:r.length,trigger:e.payload.trigger,nicheIntegration:C.linkedIn})}catch(e){console.log(e)}throw t}Ay(a?.source_lang,n?.selectedTargetLanguage);try{Hg({installationId:n.installationId,trigger:e.payload.trigger,websiteLanguage:e.payload.messageLang,targetLanguage:n.selectedTargetLanguage,characterCount:r.length,domainName:e.payload.domainName,nicheIntegration:C.linkedIn,glossaryTrackingInfo:i})}catch(e){console.error(e)}return o.map((e=>({text:e.join(""),detected_source_language:a.source_lang})))}async function q_(e){await ff();const n=await gf(["selectedTargetLanguage","session","installationId","regionalVariant"]),r=e.payload.message,s={sourceLang:"auto",targetLangCode:n.selectedTargetLanguage,sessionId:n.session.id,id:t(),sourceTexts:[r],splitting:"paragraphs",regionalVariant:n.regionalVariant};let a,o,i;try{const e=await M_(s);a=e.result,o=e.processedText,i=e.glossaryTrackingInfo}catch(t){try{lm({errorCode:t.name,errorMessage:t.message,domainName:e.payload.domainName,targetLang:n.selectedTargetLanguage,messageLang:e.payload.messageLang,messageLength:r.length,numberOfLanguages:1,numberOfMessages:1,translator:O.message})}catch(e){console.log(e)}throw t}Ay(a?.sourceLang,n?.selectedTargetLanguage);try{cm({messageLang:e.payload.messageLang,targetLang:n.selectedTargetLanguage,messageLength:r.length,numberOfLanguages:1,numberOfMessages:1,translator:O.message}),Hg({installationId:n.installationId,trigger:e.payload.trigger,websiteLanguage:e.payload.messageLang,targetLanguage:n.selectedTargetLanguage,characterCount:r.length,domainName:e.payload.domainName,nicheIntegration:C.whatsappWeb,glossaryTrackingInfo:i})}catch(e){console.error(e)}return o.map((e=>({text:e.join(""),detected_source_language:a.source_lang})))}async function V_(e){await ff();const n=await gf(["selectedTargetLanguage","session","installationId","regionalVariant"]),r=e.payload.messages,s={sourceLang:"auto",targetLangCode:n.selectedTargetLanguage,sessionId:n.session.id,id:t(),sourceTexts:r,splitting:"paragraphs",regionalVariant:n.regionalVariant};let a;try{a=await t_(s)}catch(t){try{lm({errorCode:t.name,errorMessage:t.message,domainName:e.payload.domainName,targetLang:n.selectedTargetLanguage,messageLang:e.payload.messageLang,messageLength:r.reduce(((e,t)=>e+t.length),0),numberOfLanguages:e.payload.detectedLanguages?.length,numberOfMessages:r.length,translator:O.chat})}catch(e){console.log(e)}throw t}Ay(a?.sourceLang,n?.selectedTargetLanguage);try{cm({messageLang:e.payload.messageLang,targetLang:n.selectedTargetLanguage,messageLength:r.reduce(((e,t)=>e+t.length),0),numberOfLanguages:e.payload.detectedLanguages?.length,numberOfMessages:r.length,translator:O.chat}),Hg({installationId:n.installationId,trigger:e.payload.trigger,websiteLanguage:e.payload.messageLang,targetLanguage:n.selectedTargetLanguage,characterCount:r.reduce(((e,t)=>e+t.length),0),domainName:e.payload.domainName,nicheIntegration:C.whatsappWeb})}catch(e){console.error(e)}return[{detected_source_language:a.sourceLang,texts:a.texts}]}async function z_(e){const{texts:t,mode:n}=e.payload;return await x_({texts:t,mode:n})}async function Y_(e){await ff();const t=await gf(["session","installationId","regionalVariant","activeTermbaseId","isGlossaryEnabled","isLoggedIn","hasTermbaseService"]),{mode:n,sentences:r,sourceLang:s,targetLang:a,domain:o}=e.payload;let i;try{i=await hS({isLoggedIn:t.isLoggedIn,activeTermbaseId:t.activeTermbaseId,isGlossaryEnabled:t.isGlossaryEnabled,hasTermbaseService:t.hasTermbaseService,sourceLang:s,targetLang:a,mode:n})}catch(e){console.error(e)}const c=r.map(((e,t)=>({kind:"default",preferred_num_beams:4,raw_en_context_after:t<r.length-1?[r[t+1].text]:[],raw_en_context_before:t>0?[r[t-1].text]:[],sentences:[{...e,id:t+1}],...n===C_.WRITE&&{write_variant_requests:["main"]}}))),l=new Date,u=await L_({mode:n,jobs:c,sourceLang:s,targetLang:a,...i&&{termbase:i}});try{n===C_.TRANSLATE&&Hg({installationId:t.installationId,trigger:e.payload.trigger,websiteLanguage:e.payload.sourceLang,targetLanguage:a,characterCount:r.map((e=>e.text)).reduce(((e,t)=>e+t.length),0),translationPerformance:{isFirstTime:!1,processingTimeInMs:new Date-l},domainName:o,nicheIntegration:C.gdocs})}catch(e){console.error(e)}return u}async function K_(e){const{mode:t,sourceLang:n,targetLang:r,sentence:s,contextBefore:a,contextAfter:o}=e.payload,i=[{kind:"default",preferred_num_beams:4,raw_en_context_after:o?[o]:[],raw_en_context_before:a?[a]:[],sentences:[{...s,partial_translation:"",id:0}],...t===C_.WRITE&&{write_variant_requests:["main","variants"]}}];return await L_({mode:t,jobs:i,sourceLang:n,targetLang:r})}async function X_(e){const{mode:t,sourceLang:n,targetLang:r,sentence:s,contextBefore:a,contextAfter:o,partialTranslation:i}=e.payload,c=[{kind:"alternatives_at_position",raw_en_context_after:o?[o]:[],raw_en_context_before:a?[a]:[],sentences:[{...s,partial_translation:i,id:0}],...t===C_.WRITE&&{write_variant_requests:["main"]}}];return await L_({mode:t,jobs:c,sourceLang:n,targetLang:r})}async function J_(e){const{mode:t,sourceLang:n,targetLang:r,sentence:s,contextBefore:a,contextAfter:o,partialTranslation:i}=e.payload,c=[{kind:"default",raw_en_context_after:o?[o]:[],raw_en_context_before:a?[a]:[],sentences:[{...s,partial_translation:i,id:0}],...t===C_.WRITE&&{write_variant_requests:["main"]}}];return await L_({mode:t,jobs:c,sourceLang:n,targetLang:r})}async function Z_(e){await ff();const t=await gf(["session","installationId","regionalVariant","zendeskActiveTermbase"]),n=C_.TRANSLATE,r=C.zendesk,{targetLang:s}=e.payload,a=[e.payload.text],o=a.map((e=>e.replaceAll("\n","<br>"))),i=[],l=[];let u,d,p,h;try{const e=await x_({texts:o,mode:n,textType:"richtext"});if(h=e.result.lang.detected,t.zendeskActiveTermbase&&t.zendeskActiveTermbase.termDictionaries)for(let e of t.zendeskActiveTermbase.termDictionaries)if(e.languagePair===`${h.substr(0,2)}>${s.substr(0,2)}`.toLowerCase()){u={id:t.zendeskActiveTermbase.id,dictionaryId:e.id},d=!0;break}for(const t of e.result.texts){const e=[];for(const n of t.chunks)for(const t of n.sentences)l.push(t),e.push(l.length-1);i.push(e)}const r=l.map(((e,t)=>({kind:"default",preferred_num_beams:4,raw_en_context_after:t<l.length-1?[l[t+1].text]:[],raw_en_context_before:t>0?[l[t-1].text]:[],sentences:[{...e,id:t+1}]})));p=await L_({mode:n,jobs:r,sourceLang:h,targetLang:s.substr(0,2),textType:"richtext",...u&&{termbase:u}})}catch(t){try{Vg({errorCode:t.name,errorMessage:t.message,domainName:e.payload.domainName,targetLang:s,websiteLanguage:e.payload.websiteLanguage,trigger:c.inline,characterCount:a.reduce(((e,t)=>e+t.text.length),0)})}catch(e){console.log(e)}throw t}Ay(h,s),Ly();const g=p.result.translations.map(((e,t)=>`${l[t].prefix}${e.beams[0].sentences[0].text}`)),m=i.map((e=>e.map((e=>g[e])))),f=m[0].join("");try{Hg({installationId:t.installationId,trigger:c.input,websiteLanguage:h,targetLanguage:s,characterCount:a.reduce(((e,t)=>e+t.length),0),domainName:e.payload.domainName,nicheIntegration:r,isGlossaryEnabled:d})}catch(e){console.error(e)}return f}async function Q_(){let e,t,n="";try{e=await vy()}catch(e){t=e.message}if(!e||!e.isLoggedIn||t)return[[],t];try{n=(await A_()).result||[]}catch(e){t=e.message}return[n,t]}async function ey(e){try{sm({language:e.payload.language,domainName:e.payload.domainName})}catch(e){console.error(e)}}async function ty(e){try{Yg({domainName:e})}catch(e){console.error(e)}}async function ny(e){try{Kg({domainName:e.domainName,extensionOpenedFrom:yg(e.extensionContext)})}catch(e){console.error(e)}}async function ry(e){try{Xg({logoClickedFrom:Sg(e.extensionContext)})}catch(e){console.error(e)}}async function sy(){try{em()}catch(e){console.error(e)}}async function ay(){try{tm()}catch(e){console.error(e)}}async function oy(e){try{nm({uiFunction:e.uiFunction,uiLocation:e.uiLocation,nicheIntegration:e.nicheIntegration||C.default})}catch(e){console.error(e)}}async function iy(e){try{rm({settingType:e.settingType,newValue:e.newValue,uiFunction:e.uiFunction,uiLocation:e.uiLocation,domainName:e.domainName})}catch(e){console.error(e)}}async function cy(e){try{am({translationType:e.translationType,domainName:e.domainName})}catch(e){console.error(e)}}async function ly(e){try{om({newPosition:e.newPosition})}catch(e){console.error(e)}}async function uy(e){try{im(e)}catch(e){console.error(e)}}async function dy(e){try{dm(e)}catch(e){console.error(e)}}async function py(e){try{gm(e)}catch(e){console.error(e)}}async function hy(e){try{pm(e)}catch(e){console.error(e)}}async function gy(e){try{mm(e)}catch(e){console.error(e)}}async function my(e){try{hm(e)}catch(e){console.error(e)}}async function fy(e){try{Sm(e)}catch(e){console.error(e)}}async function _y(e){try{fm(e)}catch(e){console.error(e)}}async function yy(e){try{_m(e)}catch(e){console.error(e)}}async function Sy(e){try{Em(e)}catch(e){console.error(e)}}async function Ty(e=!1){const t=await Ff(e);return chrome.runtime.sendMessage({action:"dlExperimentsUpdated",payload:{experiments:[...t]}}),t}async function by(){Jf()}async function Ey(){Zf({trigger:x.user})}async function vy(){const e=await Rf();return{isLoggedIn:e.isLoggedIn,translatorServiceType:e.translatorServiceType,writeServiceType:e.writeServiceType,hasTermbaseService:e.hasTermbaseService}}async function wy(e){switch(e.type){case m.hintKeyboardShortcut:{const e=await chrome.storage.sync.get(["notificationsViewed"]);if(e.notificationsViewed&&e.notificationsViewed.hintKeyboardShortcut)return;await chrome.storage.sync.set({notificationsViewed:{...e.notificationsViewed,hintKeyboardShortcut:!0}});break}}try{Jg({notificationType:e.type})}catch(e){console.error(e)}const t=await chrome.tabs.query({active:!0,currentWindow:!0});chrome.tabs.sendMessage(t[0].id,{action:"dlShowNotification",payload:e})}async function Iy(){return await chrome.commands.getAll()}async function ky(e){const t=await Iy();try{Zg({shortcutType:e.shortcutType,location:e.location,shortcut:t.filter((t=>t.name===e.shortcutType))[0].shortcut,nicheIntegration:e.nicheIntegration||C.default})}catch(e){console.error(e)}}async function Cy(e){Qg({uiAction:e.uiAction,nicheIntegration:e.nicheIntegration||C.default})}function Ry(e){chrome.tabs.query({active:!0,currentWindow:!0},(function(t){chrome.tabs.sendMessage(t[0].id,{action:"dlTranslateSelectionRightClick",payload:e})}))}async function xy(e){try{ym(e)}catch(e){console.error(e)}}async function Ly(){const e=(await chrome.storage.sync.get(["zendeskSuccessfulTranslations"])).zendeskSuccessfulTranslations+1;await chrome.storage.sync.set({zendeskSuccessfulTranslations:e})}async function Ay(e,t){const n=await chrome.storage.sync.get(["isReviewPopupShown","successfulTranslations","hasUserSeenProCustomerSegmentationSurvey","hasUserSeenArabicSurvey","successfulArabicTranslations"]),r=await vy();pf(r,N.TRANSLATOR);const s=n.successfulTranslations+1;n.hasUserSeenProCustomerSegmentationSurvey;let a=n.isReviewPopupShown,o=n.hasUserSeenArabicSurvey,i=n.successfulArabicTranslations;if("AR"!==e&&"AR"!==t||(i+=1),!o&&"ar"===chrome.i18n.getUILanguage()&&s>=10){const e=await chrome.tabs.query({active:!0,currentWindow:!0});return chrome.tabs.sendMessage(e[0].id,{action:"dlShowArabicSurveyPopup"}),void await chrome.storage.sync.set({hasUserSeenArabicSurvey:!0,successfulArabicTranslations:i,successfulTranslations:s})}if(!o&&i>=10){const e=await chrome.tabs.query({active:!0,currentWindow:!0});return chrome.tabs.sendMessage(e[0].id,{action:"dlShowArabicSurveyPopup"}),void await chrome.storage.sync.set({hasUserSeenArabicSurvey:!0,successfulArabicTranslations:i,successfulTranslations:s})}if(!a&&s>=k){const e=await chrome.tabs.query({active:!0,currentWindow:!0});chrome.tabs.sendMessage(e[0].id,{action:"dlShowAskForAReviewPopup"}),a=!0}await chrome.storage.sync.set({isReviewPopupShown:a,successfulArabicTranslations:i,successfulTranslations:s})}async function Oy(e,t){let n=Wh(e.lang);if(z())await function(e,t,n){const r=new SpeechSynthesisUtterance(e);r.lang=t,r.onend=function(){n()},speechSynthesis.speak(r)}(e.text,n.langCodeForSpeech,(()=>{chrome.tabs.sendMessage(t,{action:"dlVoiceOverStopped"})}));else{const r={lang:n.langCodeForSpeech,onEvent:function(e){"end"===e.type&&chrome.tabs.sendMessage(t,{action:"dlVoiceOverStopped"}),"error"==e.type&&chrome.tabs.sendMessage(t,{action:"dlVoiceOverErrorOccurred"})}};(function(){const e=navigator?.userAgentData?.platform||navigator?.platform||void 0;return e&&-1!==e?.toUpperCase().indexOf("MAC")})()&&(r.rate=.9,n.voice&&w.chrome===chrome.runtime.id&&(r.voiceName=n.voice)),await chrome.tts.speak(e.text,r)}}async function Ny(){let e;return e=z()?await new Promise(((e,t)=>{if("speechSynthesis"in window){const t=speechSynthesis.getVoices();t.length>0?e(t):speechSynthesis.onvoiceschanged=()=>{const t=speechSynthesis.getVoices();e(t)}}else t(new Error("SpeechSynthesis not supported"))})):await chrome.tts.getVoices(),e.map((e=>$h(e.lang)))}async function Dy(){if(!z())return chrome.tts.stop();speechSynthesis.cancel()}async function Py(e){try{Tm(e)}catch(e){console.error(e)}}async function My(e){try{wm(e)}catch(e){console.error(e)}}async function Fy(e){try{bm(e)}catch(e){console.error(e)}}async function Uy(e){try{Im(e)}catch(e){console.error(e)}}async function By(e){return await r_(e)}async function Gy(e){try{km(e)}catch(e){console.error(e)}}async function jy(e){try{Cm()}catch(e){console.error(e)}}async function $y(e){try{Rm()}catch(e){console.error(e)}}async function Wy({eventType:e,zendeskMetaData:t}){try{Lm(e,t)}catch(e){console.error(e)}}async function Hy(e){try{xm(e)}catch(e){console.error(e)}}async function qy(e){try{Dm(e)}catch(e){console.error(e)}}async function Vy(e){try{Pm(e)}catch(e){console.error(e)}}async function zy(e){try{Fm(e)}catch(e){console.error(e)}}async function Yy(e){try{Um(e)}catch(e){console.error(e)}}async function Ky({eventType:e,deeplWriteMetaData:t}){try{jm(e,t)}catch(e){console.error(e)}}async function Xy(e){try{await ff();const n=await gf(["selectedTargetLanguage","session"]),r=e.payload.requests,s={sourceLang:e.payload?.sourceLang?e.payload.sourceLang:"auto",targetLangCode:n.selectedTargetLanguage,sessionId:n.session.id,id:t(),sourceTexts:r.map((e=>e.text))||[],isWriteRequest:!0,...e.payload.isHtml&&{isHtml:!0}},a=await M_(s),o=a.result,i=a.processedText;if(!e.payload.skipDapReporting)try{jm(P.TEXT_REFINEMENT_REQUEST,{lang:o.source_lang,sourceLength:e.payload.requests.reduce(((e,t)=>e+t.text.length),0),targetLength:i.flat().reduce(((e,t)=>e+t.length),0),nicheIntegration:e.payload.nicheIntegration||C.default})}catch(e){console.error(e)}return[{detected_source_language:o.source_lang,text:i.flat().join(""),texts:i.map((e=>e.join("")))}]}catch(t){try{jm(P.ERROR,{lang:e.payload.sourceLang,sourceLength:e.payload.requests.reduce(((e,t)=>e+t.text.length),0),targetLength:void 0,nicheIntegration:e.payload.nicheIntegration||C.default,error:t.name})}catch(e){console.error(e)}throw t}}async function Jy({eventType:e,acceptOrRevertMetadata:t}){try{qm(e,t)}catch(e){console.error(e)}}async function Zy(e){try{Vm(e)}catch(e){console.error(e)}}async function Qy(){const e=await chrome.storage.sync.get(["wasGmailFeedbackPopupShown","successfulTranslationsGmail"]),t=e.successfulTranslationsGmail+1;let n=e.wasGmailFeedbackPopupShown;if(!n&&t>=10){const e=await chrome.tabs.query({active:!0,currentWindow:!0});chrome.tabs.sendMessage(e[0].id,{action:"dlShowGmailFeedbackPopup"}),n=!0}await chrome.storage.sync.set({wasGmailFeedbackPopupShown:n,successfulTranslationsGmail:t})}async function eS(e){try{zm(e)}catch(e){console.error(e)}}async function tS(){const e=await chrome.storage.sync.get(["wasGSlidesFeedbackPopupShown","successfulTranslationsGSlides"]),t=e.successfulTranslationsGSlides+1;let n=e.wasGSlidesFeedbackPopupShown;if(!n&&t>=10){const e=await chrome.tabs.query({active:!0,currentWindow:!0});chrome.tabs.sendMessage(e[0].id,{action:"dlShowSlidesFeedbackPopup"}),n=!0}await chrome.storage.sync.set({wasGSlidesFeedbackPopupShown:n,successfulTranslationsGSlides:t})}async function nS({eventType:e,alternativesMetaData:t}){try{Jm(e,t)}catch(e){console.error(e)}}async function rS(e=!1,t=!0){let n;try{n=await Xf(e,t)}catch(e){throw e.name===Uf.INVALID_GRANT&&Zf({trigger:x.extension,reason:e.name,showAlert:!0}),e}return n}async function sS(){return await Df()}function aS(e){try{Ym(e)}catch(e){console.error(e)}}function oS(e){try{Km(e)}catch(e){console.error(e)}}function iS(e){try{Am(e)}catch(e){console.error(e)}}function cS(e){try{Zm(!0,e)}catch(e){console.error(e)}}function lS(e){try{Zm(!1,e)}catch(e){console.error(e)}}function uS(e,t){try{Xm(e,t)}catch(e){console.error(e)}}async function dS({text:e}){return await R_({texts:[e],targetLang:"EN",mode:C_.WRITE})}function pS(e){Qm(e)}const hS=async e=>{if(hf(e)&&e.activeTermbaseId&&e.isGlossaryEnabled&&e.mode!==C_.WRITE){const[t]=await Q_(),n=P_(e.activeTermbaseId,t);if(n)for(let t of n.termDictionaries)if(t.languagePair===`${e.sourceLang.substr(0,2)}>${e.targetLang.substr(0,2)}`.toLowerCase())return{id:n.id,dictionaryId:t.id}}},gS={syncExperiments:"sync_experiments",syncClientState:"sync_client_state"};function mS(e){let t;try{t=new URL(e)}catch(e){return!1}return"http:"===t.protocol||"https:"===t.protocol}const fS={developer_tools:"DEVELOPER_TOOLS",settings_page:"SETTINGS_PAGE",settings_writing:"SETTINGS_WRITING",settings_reading:"SETTINGS_READING",settings_customizations:"SETTINGS_CUSTOMIZATIONS",settings_glossary:"SETTINGS_GLOSSARY",onboarding:"ONBOARDING",onboarding_after_successful_login:"ONBOARDING_AFTER_SUCCESSFUL_LOGIN",firefox_first_run:"FIREFOX_FIRST_RUN",privacy_policy:"PRIVACY_POLICY",create_account:"CREATE_ACCOUNT"},_S={DEVELOPER_TOOLS:"dev-page.html",SETTINGS_PAGE:"settings.html",SETTINGS_READING:"settings.html#inline-translation",SETTINGS_WRITING:"settings.html#input-translation",SETTINGS_CUSTOMIZATIONS:"settings.html#customizations",SETTINGS_GLOSSARY:"settings.html#glossary",ONBOARDING:"onboarding.html",ONBOARDING_FIREFOX:"onboarding-firefox.html",ONBOARDING_AFTER_SUCCESSFUL_LOGIN:"onboarding.html#successful_login",FIREFOX_FIRST_RUN:"firefox-first-run.html",PRIVACY_POLICY:"privacy-policy.html",CREATE_ACCOUNT:"create-account.html"};function yS({payload:e}){const{destination:t,openInSameTab:n}=e;if(void 0===t)return;let r="";switch(t){case fS.developer_tools:r=SS(_S.DEVELOPER_TOOLS);break;case fS.settings_page:r=SS(_S.SETTINGS_PAGE);break;case fS.settings_writing:r=SS(_S.SETTINGS_WRITING);break;case fS.settings_reading:r=SS(_S.SETTINGS_READING);break;case fS.settings_customizations:r=SS(_S.SETTINGS_CUSTOMIZATIONS);break;case fS.settings_glossary:r=SS(_S.SETTINGS_GLOSSARY);break;case fS.onboarding:r=z()?SS(_S.ONBOARDING_FIREFOX):SS(_S.ONBOARDING);break;case fS.onboarding_after_successful_login:r=SS(_S.ONBOARDING_AFTER_SUCCESSFUL_LOGIN);break;case fS.firefox_first_run:r=SS(_S.FIREFOX_FIRST_RUN);break;case fS.privacy_policy:r=SS(_S.PRIVACY_POLICY);break;case fS.create_account:r=SS(_S.CREATE_ACCOUNT)}r&&(n?chrome.tabs.query({active:!0,currentWindow:!0},(function(e){const t=e[0];chrome.tabs.update(t.id,{url:r})})):chrome.tabs.create({url:r,active:!0}))}function SS(e){return chrome.runtime.getURL(e)}function TS(e,t,n){switch(zh()&&console.log(t.tab?`message from a content script: ${t.tab.url} with tab id: ${t.tab.id}. action: ${e.action}`:`message from the extension with action: ${e.action}`),e.action){case"dlRequestHtmlTranslation":U_(e).then((e=>n(e))).catch((e=>{n(gg(e,Bh))}));break;case"dlRequestInlineTranslation":B_(e).then((e=>{n(e)})).catch((e=>{n(gg(e,Bh))}));break;case"dlTriggerTranslateInline":F_(t.tab.id);break;case"dlRequestInputTranslation":G_(e).then((e=>n(e))).catch((e=>{n(gg(e,Bh))}));break;case"dlRequestZendeskInputTranslation":j_(e).then((e=>n(e))).catch((e=>{n(gg(e,Bh))}));break;case"dlRequestGmailReceivedEmailTranslation":$_(e).then((e=>n(e))).catch((e=>{n(gg(e,Bh))}));break;case"dlRequestWhatsAppMessageTranslation":q_(e).then((e=>n(e))).catch((e=>{n(gg(e,Bh))}));break;case"dlRequestTwitterTweetTranslation":W_(e).then((e=>n(e))).catch((e=>{n(gg(e,Bh))}));break;case"dlRequestLinkedInPostTranslation":H_(e).then((e=>n(e))).catch((e=>{n(gg(e,Bh))}));break;case"dlRequestZendeskMessageTranslation":Z_(e).then((e=>n(e))).catch((e=>{n(gg(e,Bh))}));break;case"dlRequestWhatsAppMessagesTranslation":V_(e).then((e=>n(e))).catch((e=>{n(gg(e,Bh))}));break;case"dlRequestGDocsSplitText":z_(e).then((e=>n(e))).catch((e=>{n(gg(e,Bh))}));break;case"dlRequestGDocsProcessContent":Y_(e).then((e=>n(e))).catch((e=>{n(gg(e,Bh))}));break;case"dlRequestGDocsSentenceAlternatives":K_(e).then((e=>n(e))).catch((e=>{n(gg(e,Bh))}));break;case"dlRequestGDocsWordAlternatives":X_(e).then((e=>n(e))).catch((e=>{n(gg(e,Bh))}));break;case"dlRequestGDocsSentenceFromPartialTranslation":J_(e).then((e=>n(e))).catch((e=>{n(gg(e,Bh))}));break;case"dlRequestTermbases":Q_().then((e=>n(e))).catch((e=>{n(gg(e,Bh))}));break;case"dlTrackDetectLanguage":ey(e),n();break;case"dlRequestLogin":by().then((()=>n(!0))).catch((e=>{n(gg(e,Bh))}));break;case"dlRequestLogout":Ey().then((()=>n(!0))).catch((e=>{n(gg(e,Bh))}));break;case"dlGetAppSettings":chrome.storage.sync.get(null,(function(e){n(e)}));break;case"dlUpdateAppSettings":chrome.storage.sync.set(e.payload,(function(){n(e.payload)}));break;case"dlTranslatedInputTextNotSet":zg({errorCode:Qh,errorMessage:"The translated text could not be set",domainName:e.payload}),n();break;case"dlGetUserState":vy().then((e=>n(e))).catch((e=>{n(gg(e,Bh))}));break;case"dlExternalURLRedirect":J(e.payload),n();break;case"dlOpenInternalPage":yS(e),n();break;case"dlTrackInputTranslationInjection":ty(e.payload),n();break;case"dlTrackExtensionOpenedEvent":ny(e.payload),n();break;case"dlTrackLogoClickedEvent":ry(e.payload),n();break;case"dlTrackDocTransClick":sy(),n();break;case"dlTrackRecommendToAFriendClick":ay(),n();break;case"dlSendNotification":wy(e.payload),n();break;case"dlCheckCommandShortcuts":Iy().then((e=>n(e)));break;case"dlTrackUseOfShortcut":ky(e.payload),n();break;case"dlTrackUiAction":Cy(e.payload),n();break;case"dlTrackInlineSettingOpened":oy(e.payload),n();break;case"dlTrackSettingChanged":iy(e.payload),n();break;case"dlTrackUILocationClicked":Yy(e.payload),n();break;case"dlTrackRightClick":cy(e.payload),n();break;case"dlTrackInlinePositionChange":ly(e.payload),n();break;case"dlTrackInlineDragStart":uy(),n();break;case"dlTrackFptHide":dy(e.payload);break;case"dlTrackInlineCopy":hy(e.payload),n();break;case"dlTrackInlineListen":my(e.payload),n();break;case"dlTrackIconHover":py(e.payload),n();break;case"dlTrackVoiceOverStops":fy(e.payload),n();break;case"dlTrackOnboardingStepChange":gy(e.payload),n();break;case"dlTrackOnboardingOpenExternalLink":_y(e.payload),n();break;case"dlTrackReadMore":yy(e.payload),n();break;case"dlTrackLandingOnWebsite":xy(e.payload),n();break;case"dlTrackGDocsReplaceText":Sy(e.payload),n();break;case"dlGetExperiments":Ty(e.payload?.forceFetch).then((e=>n(e))).catch((e=>n(e)));break;case"dlGetClientState":rS(e.payload?.forceFetch).then((e=>n(e))).catch((e=>n(e)));break;case"dlTextToSpeech":Oy(e.payload,t.tab.id).then((()=>n())).catch((e=>{n(gg(e,Bh))}));break;case"dlGetDictionary":By(e.payload).then((e=>n(e))).catch((e=>{n(gg(e,Bh))}));break;case"dlGetSupportedVoices":Ny(e.payload).then((e=>n(e))).catch((e=>{n(gg(e,Bh))}));break;case"dlStopSpeech":Dy(e.payload).then((()=>n())).catch((e=>{n(gg(e,Bh))}));break;case"dlTrackOpenInputHighlighter":Py(e.payload).then((()=>n())).catch((e=>{n(gg(e,Bh))}));break;case"dlTrackOpenInlineHighlighter":My(e.payload).then((()=>n())).catch((e=>{n(gg(e,Bh))}));break;case"dlTrackCloseInputHighlighter":Fy(e.payload).then((()=>n())).catch((e=>{n(gg(e,Bh))}));break;case"dlTrackCloseInlineHighlighter":Uy(e.payload).then((()=>n())).catch((e=>{n(gg(e,Bh))}));break;case"dlTrackDictionaryStatus":Gy(e.payload).then((()=>n())).catch((e=>{n(gg(e,Bh))}));break;case"dlTrackOpenDictionarySection":jy(e.payload).then((()=>n())).catch((e=>{n(gg(e,Bh))}));break;case"dlTrackDisabledDictionaryHover":$y(e.payload).then((()=>n())).catch((e=>{n(gg(e,Bh))}));break;case"dlTrackZendeskCustomizationEvent":Wy(e.payload).then((()=>n())).catch((e=>{n(gg(e,Bh))}));break;case"dlTrackZendeskGlossaryOpened":iS(e.payload).then((()=>n())).catch((e=>{n(gg(e,Bh))}));break;case"dlTrackGlossaryEnabled":cS(e.payload).then((()=>n())).catch((e=>{n(gg(e,Bh))}));break;case"dlTrackGlossaryDisabled":lS(e.payload).then((()=>n())).catch((e=>{n(gg(e,Bh))}));break;case"dlTrackDeeplWriteEvent":Ky(e.payload).then((()=>n())).catch((e=>{n(gg(e,Bh))}));break;case"dlTrackLingueeErrorData":Hy(e.payload).then((()=>n())).catch((e=>{n(gg(e,Bh))}));break;case"dlTrackGdocsMaxCharExceededShown":qy(e.payload).then((()=>n())).catch((e=>{n(gg(e,Bh))}));break;case"dlTrackGDocsMaxCharExceededTryProClicked":Vy(e.payload).then((()=>n())).catch((e=>{n(gg(e,Bh))}));break;case"dlTrackOnboardingModalShown":zy(e.payload).then((()=>n())).catch((e=>{n(gg(e,Bh))}));break;case"dlRequestImproveWriting":Xy(e).then((e=>n(e))).catch((e=>{n(gg(e,Bh))}));break;case"dlTrackTranslateAcceptOrRevertEvent":Jy(e.payload).then((()=>n())).catch((e=>{n(gg(e,Bh))}));break;case"dlTrackCustomizationEnabledEvent":Zy(e.payload).then((()=>n())).catch((e=>{n(gg(e,Bh))}));break;case"dlTrackGmailCharLimitReached":eS(e.payload).then((()=>n())).catch((e=>{n(gg(e,Bh))}));break;case"dlGetUsersCharacterLimit":sS().then((e=>n(e))).catch((e=>{n(gg(e,Bh))}));break;case"dlTrackAlternativesEvent":nS(e.payload).then((()=>n())).catch((e=>{n(gg(e,Bh))}));break;case"dlTestClassicAPI":dS(e.payload).then((e=>n(e))).catch((e=>{n(gg(e,Bh))}));break;case"dlOnSuccessfulZendeskTranslation":Ly();break;case"dlTrackUpgradeNotificationIsDisplayed":aS(e.payload.type);break;case"dlTrackUpgradeNotificationClosed":oS(e.payload.type);break;case"dlTrackUpgradeNotificationAction":uS(e.payload.type,e.payload.cta);break;case"dlTrackLanguageDetectionForTextProcessing":pS(e.payload).finally(n())}return!0}function bS(e){switch(console.log(`Command "${e}" triggered`),e){case _.triggerTranslation:chrome.tabs.query({active:!0,currentWindow:!0},(function(e){chrome.tabs.sendMessage(e[0].id,{action:"dlTriggerTranslationShortcut"})}));break;case _.changeLanguage:chrome.tabs.query({active:!0,currentWindow:!0},(function(e){chrome.tabs.sendMessage(e[0].id,{action:"dlChangeLanguageShortcut"})}))}}function ES(e){(async function(){let e=!1;const t=await chrome.storage.sync.get(null),n=Hh();if(!t||!t.settingSchemeVersion||t.settingSchemeVersion<n.settingSchemeVersion){let r={};for(const[s,a]of Object.entries(n))s in t&&"settingSchemeVersion"!==s?r[s]=t[s]:("installationId"===s&&(e=!0),r[s]=a);await chrome.storage.sync.clear(),await chrome.storage.sync.set(r),console.log("settings set: ",r)}return{installationIdWasSet:e}})().then((t=>{!async function(e,t){const n=await Lf();n||e!==chrome.runtime.OnInstalledReason.INSTALL?n||await xf():(await xf(),vm(),Gm());t&&Bm()}(e.reason,t.installationIdWasSet)})).catch((e=>qg({errorCode:Zh,errorMessage:`setSettingsAfterInstall failed: ${e.message}`}))).finally((()=>{try{Ty(),rS(!0),async function(){await chrome.alarms.clearAll(),await chrome.alarms.create(gS.syncExperiments,{delayInMinutes:10,periodInMinutes:10}),await chrome.alarms.create(gS.syncClientState,{delayInMinutes:30,periodInMinutes:30})}()}catch(e){console.error(e),qg({errorCode:Zh,errorMessage:e.message})}try{chrome.runtime.setUninstallURL("https://deepl.qualtrics.com/jfe/form/SV_eJxAD8c7J5hqSRU"),e.reason===chrome.runtime.OnInstalledReason.UPDATE&&console.log(`Update from version ${e.previousVersion} to ${chrome.runtime.getManifest().version} was completed`),e.reason===chrome.runtime.OnInstalledReason.INSTALL&&Vh()!==qh.test&&(z()?yS({payload:{destination:fS.firefox_first_run}}):yS({payload:{destination:fS.create_account}})),chrome.contextMenus.removeAll((function(){chrome.contextMenus.create({type:"normal",id:"dlChangeLanguageShortcut",title:chrome.i18n.getMessage("extension_settings_keyboard_shortcut_change_language"),checked:!1,contexts:["all"]},(function(){})),chrome.contextMenus.create({type:"normal",id:"dlTranslateInline",title:chrome.i18n.getMessage("context_menus_translate_section"),checked:!1,contexts:["all"]})})),chrome.tabs.query({},(function(e){for(const t of e)mS(t)&&chrome.scripting.executeScript({target:{tabId:t},files:["build/content.js"]})}))}catch(e){qg({errorCode:Zh,errorMessage:e.message})}}))}function vS(e){switch(e.name){case gS.syncExperiments:Ty();break;case gS.syncClientState:rS()}}function wS(e){switch(e.menuItemId){case"dlTranslateInline":Ry(!1);break;case"dlChangeLanguageShortcut":Ry(!0)}}function IS(){}const kS={setBrowserExtensionUserAgent:{type:"modifyHeaders",requestHeaders:[{header:"user-agent",operation:"set",value:`DeepLBrowserExtension/1.20.1 ${navigator.userAgent} `}]}},CS={lingueeDomainFilter:{excludedDomains:["linguee.com"],urlFilter:"*://www-app.linguee.com*",resourceTypes:["xmlhttprequest"]},deeplToolingApiDomainFilter:{excludedDomains:["deepl.com"],urlFilter:"*://*.deepl.com/jsonrpc?client=chrome-extension,*",resourceTypes:["xmlhttprequest"]},deeplStatisticsDomainFilter:{excludedDomains:["deepl.com"],urlFilter:"*://s.deepl.*/chrome/statistics*",resourceTypes:["xmlhttprequest"]}};function RS(){if(chrome.declarativeNetRequest)chrome.declarativeNetRequest.updateDynamicRules({removeRuleIds:[2,3,4],addRules:[{id:2,priority:1,action:kS.setBrowserExtensionUserAgent,condition:CS.lingueeDomainFilter},{id:3,priority:1,action:kS.setBrowserExtensionUserAgent,condition:CS.deeplToolingApiDomainFilter},{id:4,priority:1,action:kS.setBrowserExtensionUserAgent,condition:CS.deeplStatisticsDomainFilter}]},(async e=>{zh()&&await console.log("created",e)}));else if(chrome.webRequest?.onBeforeSendHeaders){const e=zh()?"https://test.deepl.com/":"https://www.deepl.com/";browser.webRequest.onBeforeSendHeaders.addListener((t=>{const n=t.requestHeaders;return n.push({name:"Referer",value:e}),{requestHeaders:n}}),{urls:["*://*.deepl.com/jsonrpc?client=chrome-extension,*"]},["requestHeaders","blocking"]),browser.webRequest.onBeforeSendHeaders.addListener((function(e){for(const t of e.requestHeaders)if("User-Agent"===t.name){t.value=`DeepLBrowserExtension/1.20.1 ${navigator.userAgent}`;break}return{requestHeaders:e.requestHeaders}}),{urls:["*://www-app.linguee.com/*","*://*.deepl.com/jsonrpc?client=chrome-extension,*","https://s.deepl.com/chrome/statistics"]},["blocking","requestHeaders"])}}return console.info("Sentry initialised"),oc({...Yh}),or("appContext",{location:"background"}),RS(),chrome.runtime.onInstalled.addListener(ES),chrome.contextMenus.onClicked.addListener(wS),chrome.tabs.onActivated.addListener((async function(e){mS((await chrome.tabs.get(e.tabId)).url)&&chrome.tabs.sendMessage(e.tabId,{action:"dlTabChanged"}),chrome.tabs.query({},(function(t){for(var n=0;n<t.length;++n)chrome.tabs.sendMessage(t[n].id,{action:"dlChangeActiveTabStatus",payload:{isActive:t[n].id===e.tabId}})})),rS()})),chrome.runtime.onConnect.addListener((e=>{zh()&&console.log(`port connected to tab with id: ${e.sender.tab.id}`)})),chrome.runtime.onMessage.addListener(TS),chrome.storage.onChanged.addListener(IS),chrome.commands.onCommand.addListener(bS),chrome.alarms.onAlarm.addListener(vS),chrome.runtime.onMessage.addListener((e=>{"reload"===e&&chrome.tabs.query({active:!0}).then((()=>{chrome.runtime.reload(),chrome.tabs.reload()}))})),e.CONTENT_PROCESS_MODE=C_,e.INTERNAL_PAGE_KEYS=fS,e.PERODIC_CODE_EXECUTION_NAMES=gS,e.URL_ACTIONS=Y,e.URL_LIST=K,e.cacheClientState=of,e.cacheExperiments=lf,e.checkCommandShortcuts=Iy,e.checkLimits=D_,e.clearLoginTimestamp=If,e.commandListener=bS,e.connectDatabase=rf,e.deleteAuthTokens=yf,e.fetchClientState=Xf,e.fetchExperiments=Ff,e.fetchGDocsSentenceAlternatives=K_,e.fetchGDocsWordAlternatives=X_,e.fetchTermbases=Q_,e.getAccountID=Af,e.getActiveTermbase=hS,e.getAllServiceLevels=Mf,e.getAuthTokens=Tf,e.getBrowserInstanceId=Lf,e.getCachedClientState=cf,e.getCachedExperiments=df,e.getCharacterLimit=Df,e.getClientState=rS,e.getCurrentExperiments=uf,e.getDapAlternativesSegmentationType=jg,e.getDapApiConfig=mg,e.getDapApiExtensionOpenedFromId=yg,e.getDapApiInlinePositionType=kg,e.getDapApiLingueeError=_g,e.getDapApiLogoClickedFromId=Sg,e.getDapApiNotificationType=Tg,e.getDapApiSettingType=Ig,e.getDapApiShortcutTypes=Eg,e.getDapApiTranslationTriggerId=fg,e.getDapApiUiActionEventId=vg,e.getDapApiUiFunctionality=wg,e.getDapApiUiLocation=bg,e.getDapContentProcessingModeType=Bg,e.getDapGmailActionType=Fg,e.getDapLogoutTrigger=Ng,e.getDapNicheIntegration=Ag,e.getDapOnboardingExternalLink=Cg,e.getDapOnboardingStepChangeTrigger=Rg,e.getDapOriginStore=xg,e.getDapServiceLevel=Mg,e.getDapSessionType=$g,e.getDapSessionTypeTrigger=Dg,e.getDapUpgradeNotificationAction=Gg,e.getDapUpgradeNotificationType=Ug,e.getDapWhatsAppTranslator=Pg,e.getDictionary=By,e.getExperiments=Ty,e.getExperimentsData=Of,e.getExternalUrl=X,e.getInstallationId=vf,e.getSecondsSinceLastLogin=kf,e.getSessionType=Ef,e.getSettings=gf,e.getSupportedVoices=Ny,e.getTermbases=A_,e.getUserInfo=Rf,e.getUserState=vy,e.getUserType=Nf,e.getUsersCharacterLimit=sS,e.getWebsiteIdFromWebsite=Lg,e.handleJobs=L_,e.handleSuccessfulGmailTranslationsCount=Qy,e.handleSuccessfulGslidesTranslationsCount=tS,e.handleSuccessfulZendeskTranslationsCount=Ly,e.improveWriting=Xy,e.isPayloadNecessaryForUIEvent=Og,e.isProServiceLevel=Pf,e.isUserLoggedIn=bf,e.jsonrpc_callFunction=e_,e.jsonrpc_composeMethodCallDict=Kf,e.listenToPerodicCodeExecution=vS,e.login=Jf,e.loginRequest=by,e.logout=Zf,e.logoutRequest=Ey,e.markLoginTimestamp=wf,e.messageListener=TS,e.onContextMenuClicked=wS,e.onInstalled=ES,e.onStorageChanged=IS,e.openInternalPage=yS,e.performGDocsProcessContent=Y_,e.performGDocsSplitText=z_,e.processContent=R_,e.readData=af,e.rebuildGDocsSentenceFromPartialTranslation=J_,e.redirectToExternalURL=J,e.requestDictionary=r_,e.resetGlossary=Sf,e.sendDAPAlternativesEvent=Jm,e.sendDAPBrowserInstanceIdCreated=Gm,e.sendDAPCloseInlineHighlighter=Im,e.sendDAPCloseInputHighlighter=bm,e.sendDAPContentScriptErrorData=zg,e.sendDAPCustomizationEnabled=Vm,e.sendDAPDeeplWriteEvent=jm,e.sendDAPDetectLanguage=sm,e.sendDAPDictionaryStatus=km,e.sendDAPDisabledDictionaryHover=Rm,e.sendDAPDocTransClick=em,e.sendDAPErrorData=qg,e.sendDAPExtensionOpened=Kg,e.sendDAPFPTHide=dm,e.sendDAPFTPBlockSizeExceeded=async function(e){return Wg((t=>({...t,eventId:60006,fptBlockSizeExceededData:{translationData:{sourceLang:e.websiteLanguage,targetLang:e.targetLanguage,sourceLength:e.characterCount},domainName:e.domainName}})))},e.sendDAPGDocsMaxCharExceededShown=Dm,e.sendDAPGDocsMaxCharExceededTryProClicked=Pm,e.sendDAPGDocsReplaceText=Em,e.sendDAPGlossaryEnabledOrDisabled=Zm,e.sendDAPGmailCharLimitReached=zm,e.sendDAPIconHover=gm,e.sendDAPInlineCopy=pm,e.sendDAPInlineDragStart=im,e.sendDAPInlineListen=hm,e.sendDAPInlinePositionChange=om,e.sendDAPInlineSettingOpened=nm,e.sendDAPInputTranslationInjection=Yg,e.sendDAPInstallSuccess=vm,e.sendDAPInstallationIdCreated=Bm,e.sendDAPLandingOnSpecificWebsite=ym,e.sendDAPLingueeErrorData=xm,e.sendDAPLoggedIn=Wm,e.sendDAPLoggedOut=Hm,e.sendDAPLogin=Om,e.sendDAPLogoClicked=Xg,e.sendDAPLogout=Nm,e.sendDAPNotificationViewed=Jg,e.sendDAPOnboardingModalShown=Fm,e.sendDAPOnboardingOpenExternalPage=fm,e.sendDAPOnboardingStepChange=mm,e.sendDAPOpenDictionarySection=Cm,e.sendDAPOpenInlineHighlighter=wm,e.sendDAPOpenInputHighlighter=Tm,e.sendDAPReadMoreClicked=_m,e.sendDAPRecommendToAFriendClick=tm,e.sendDAPRightClick=am,e.sendDAPSessionStarted=$m,e.sendDAPSettingsChanged=rm,e.sendDAPShortcutUsed=Zg,e.sendDAPTrackLanguageDetectionForTextProcessing=Qm,e.sendDAPTrackUpgradeNotificationAction=Xm,e.sendDAPTrackUpgradeNotificationClosed=Km,e.sendDAPTrackUpgradeNotificationDisplayed=Ym,e.sendDAPTranslateAcceptOrUndoEvent=qm,e.sendDAPTranslationErrorData=Vg,e.sendDAPTranslationRequest=Hg,e.sendDAPTwitterTweetTranslationFailed=um,e.sendDAPUILocationClicked=Um,e.sendDAPUiAction=Qg,e.sendDAPVoiceOverStops=Sm,e.sendDAPWhatsAppMessageTranslated=cm,e.sendDAPWhatsAppMessageTranslationFailed=lm,e.sendDAPZendeskCustomizationEvent=Lm,e.sendDAPZendeskGlossaryConfigOpened=Am,e.sendDAPtrackSessionType=Mm,e.sendNotification=wy,e.setAuthTokens=_f,e.setBrowserInstanceId=xf,e.setUserInfoFromClientState=Cf,e.simpleTextProcessor=M_,e.splitText=x_,e.stopSpeech=Dy,e.testClassicApi=dS,e.textToSpeech=Oy,e.trackAlternativesEvent=nS,e.trackCloseInlineHighlighter=Uy,e.trackCloseInputHighlighter=Fy,e.trackCustomizationEnabled=Zy,e.trackDeeplWriteEvent=Ky,e.trackDetectLanguage=ey,e.trackDictionaryStatus=Gy,e.trackDisabledDictionaryHover=$y,e.trackDocTransClick=sy,e.trackExtensionOpenedEvent=ny,e.trackFptHide=dy,e.trackGDocsMaxCharExceededTryProClicked=Vy,e.trackGDocsReplaceText=Sy,e.trackGdocsMaxCharExceededShown=qy,e.trackGlossaryDisabled=lS,e.trackGlossaryEnabled=cS,e.trackGmailCharLimitReached=eS,e.trackIconHover=py,e.trackInlineCopy=hy,e.trackInlineDragStart=uy,e.trackInlineListen=my,e.trackInlinePositionChange=ly,e.trackInlineSettingsOpened=oy,e.trackInputTranslationInjection=ty,e.trackLandingOnWebsite=xy,e.trackLanguageDetectionForTextProcessing=pS,e.trackLingueeErrorData=Hy,e.trackLogoClickedEvent=ry,e.trackOnboardingModalShown=zy,e.trackOnboardingOpenExternalLink=_y,e.trackOnboardingStepChange=gy,e.trackOpenDictionarySection=jy,e.trackOpenInlineHighlighter=My,e.trackOpenInputHighlighter=Py,e.trackReadMoreClick=yy,e.trackRecommendToAFriendClick=ay,e.trackRightClick=cy,e.trackSettingChanged=iy,e.trackTranslateAcceptOrUndoEvent=Jy,e.trackUILocationClicked=Yy,e.trackUiAction=Cy,e.trackUpgradeNotificationAction=uS,e.trackUpgradeNotificationClosed=oS,e.trackUpgradeNotificationDisplayed=aS,e.trackUseOfShortcut=ky,e.trackVoiceOverStops=fy,e.trackZendeskCustomizationEvent=Wy,e.trackZendeskGlossaryOpened=iS,e.translate=t_,e.translateGmailReceivedEmail=$_,e.translateHtmlRequest=U_,e.translateInlineRequest=B_,e.translateInputRequest=G_,e.translateLinkedInPostRequest=H_,e.translateSelection=Ry,e.translateTwitterTweetRequest=W_,e.translateWhatsAppMessageRequest=q_,e.translateWhatsAppMessagesRequest=V_,e.translateZendeskInputRequest=j_,e.translateZendeskMessageRequest=Z_,e.triggerTranslateInline=F_,e.updateDynamicRules=RS,e.updateSession=ff,e.writeData=sf,Object.defineProperty(e,"__esModule",{value:!0}),e}({});
//# sourceMappingURL=background.js.map
